---
title: Пространственное сопоставление
description: Пространственное сопоставление предоставляет подробное представление поверхностей реального мира, в среде вокруг HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: Пространственные сопоставление, HoloLens, смешанной реальности, поверхности реконструкция за период, в сетке, sr
ms.openlocfilehash: 31abeca624512f1d5e721dbe879ca2243cf41345
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/12/2019
ms.locfileid: "59605043"
---
# <a name="spatial-mapping"></a><span data-ttu-id="74a25-104">Пространственное сопоставление</span><span class="sxs-lookup"><span data-stu-id="74a25-104">Spatial mapping</span></span>

<span data-ttu-id="74a25-105">Пространственное сопоставление предоставляет подробное представление поверхностей реального мира, в среде вокруг HoloLens, позволяя разработчикам создавать более убедительно возможности смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="74a25-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="74a25-106">Путем объединения реального мира, добавляя виртуальный мир, приложение может установить голограммы показаться real.</span><span class="sxs-lookup"><span data-stu-id="74a25-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="74a25-107">Приложения можно также более естественным образом соответствуют ожиданиям пользователей, предоставляя знакомые поведение реальных и взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="74a25-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-support"></a><span data-ttu-id="74a25-108">Поддержка устройств</span><span class="sxs-lookup"><span data-stu-id="74a25-108">Device support</span></span>

<table>
<tr>
<th><span data-ttu-id="74a25-109">Компонент</span><span class="sxs-lookup"><span data-stu-id="74a25-109">Feature</span></span></th><th style="width:150px"> <span data-ttu-id="74a25-110"><a href="hololens-hardware-details.md">HoloLens (1-го поколения)</a></span><span class="sxs-lookup"><span data-stu-id="74a25-110"><a href="hololens-hardware-details.md">HoloLens (1st gen)</a></span></span></th><th style="width:150px"><span data-ttu-id="74a25-111">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="74a25-111">HoloLens 2</span></span></th><th style="width:150px"> <span data-ttu-id="74a25-112"><a href="immersive-headset-hardware-details.md">Иммерсивную</a></span><span class="sxs-lookup"><span data-stu-id="74a25-112"><a href="immersive-headset-hardware-details.md">Immersive headsets</a></span></span></th>
</tr><tr>
<td> <span data-ttu-id="74a25-113">Пространственное сопоставление</span><span class="sxs-lookup"><span data-stu-id="74a25-113">Spatial mapping</span></span></td><td style="text-align: center;"> <span data-ttu-id="74a25-114">✔️</span><span class="sxs-lookup"><span data-stu-id="74a25-114">✔️</span></span></td><td style="text-align: center;"> <span data-ttu-id="74a25-115">✔️</span><span class="sxs-lookup"><span data-stu-id="74a25-115">✔️</span></span></td><td style="text-align: center;"></td>
</tr>
</table>



## <a name="conceptual-overview"></a><span data-ttu-id="74a25-116">Общие сведения</span><span class="sxs-lookup"><span data-stu-id="74a25-116">Conceptual overview</span></span>

<span data-ttu-id="74a25-117">![Поверхности сетки, охватывающий комнаты](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="74a25-117">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="74a25-118">*Пример сетки пространственное сопоставление, охватывающий комнаты*</span><span class="sxs-lookup"><span data-stu-id="74a25-118">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="74a25-119">Две основные типы объектов для пространственное сопоставление: «Пространственных наблюдатель область» и «Пространственных рабочей области».</span><span class="sxs-lookup"><span data-stu-id="74a25-119">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="74a25-120">Приложение предоставляет наблюдателю пространственных поверхности один или несколько томов ограничивающий, для определения областей, в которой приложение желает получать данные пространственное сопоставление пространства.</span><span class="sxs-lookup"><span data-stu-id="74a25-120">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="74a25-121">Для каждого из этих томов пространственное сопоставление предоставит приложения с помощью набора пространственных поверхностей.</span><span class="sxs-lookup"><span data-stu-id="74a25-121">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="74a25-122">Эти тома возможно стационарные (фиксированного расположения по отношению к реальности) или они могут быть присоединены к HoloLens (они перемещать, но не поворачиваются, с HoloLens при их перемещении через среду).</span><span class="sxs-lookup"><span data-stu-id="74a25-122">These volumes may be stationary (in a fixed location with respect to the real world) or they may be attached to the HoloLens (they move, but do not rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="74a25-123">Все Пространственные поверхности описывает реальных поверхности в небольшой объем места, представленное в виде треугольника сетки, подключен к заблокирован world [Пространственные системы координат](coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="74a25-123">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="74a25-124">HoloLens собирает новые данные о среде, и будет отображаться по мере изменений в среду пространственных поверхности, исчезают и изменить.</span><span class="sxs-lookup"><span data-stu-id="74a25-124">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear and change.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="74a25-125">Распространенные сценарии использования</span><span class="sxs-lookup"><span data-stu-id="74a25-125">Common usage scenarios</span></span>

![Иллюстрации распространенные сценарии использования пространственных сопоставления: Размещение, перекрытия, физики и навигации](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="74a25-127">Размещение</span><span class="sxs-lookup"><span data-stu-id="74a25-127">Placement</span></span>

<span data-ttu-id="74a25-128">Пространственное сопоставление предоставляет приложениям возможность представить естественным и знакомых форм взаимодействия для пользователя; что может быть более естественной, чем размещение телефоне вниз на в службу поддержки?</span><span class="sxs-lookup"><span data-stu-id="74a25-128">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing your phone down on the desk?</span></span>

<span data-ttu-id="74a25-129">Ограничить размещение голограммы (или в более общем смысле, выделенные пространственными расположениями) для размещения на поверхности предоставляет естественное сопоставление из 3D (точки в пространстве) в двухмерные (точка на поверхности).</span><span class="sxs-lookup"><span data-stu-id="74a25-129">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="74a25-130">Это уменьшает объем данных, пользователь должен указать для приложения и таким образом делает взаимодействие с пользователем быстрее, проще и точнее.</span><span class="sxs-lookup"><span data-stu-id="74a25-130">This reduces the amount of information the user needs to provide to the application and thus makes the user's interactions faster, easier and more precise.</span></span> <span data-ttu-id="74a25-131">Это особенно верно, так как «расстояние» не является то, что многие привыкли к физически взаимодействия другим пользователям или компьютерам.</span><span class="sxs-lookup"><span data-stu-id="74a25-131">This is particularly true because 'distance away' is not something that we are used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="74a25-132">При мы точки нашей его пальцем, мы указываем направление, но не расстояние.</span><span class="sxs-lookup"><span data-stu-id="74a25-132">When we point with our finger, we are specifying a direction but not a distance.</span></span>

<span data-ttu-id="74a25-133">Важные предостережение, что при приложения определяет расстояние от направления (например выполняя raycast вдоль направления взглядом пользователя для поиска ближайшего пространственных поверхности), это должно выдавать результаты, которые пользователь может надежно прогнозировать.</span><span class="sxs-lookup"><span data-stu-id="74a25-133">An important caveat here is that when an application infers distance from direction (for example by performing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user is able to reliably predict.</span></span> <span data-ttu-id="74a25-134">В противном случае пользователь потеряет их смысле элемента управления, и это может быстро стать утомительным.</span><span class="sxs-lookup"><span data-stu-id="74a25-134">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="74a25-135">Один метод, который поможет с этим является выполнение нескольких raycasts вместо одного.</span><span class="sxs-lookup"><span data-stu-id="74a25-135">One method that helps with this is to perform multiple raycasts instead of just one.</span></span> <span data-ttu-id="74a25-136">Объединенные результаты следует плавный и предсказуемой и менее подверженным влияют на результатах временных «выброс» (как это может быть вызвано лучи пропуск tiny бреши в системе или при нажатии small биты геометрию, пользователь не учитывать).</span><span class="sxs-lookup"><span data-stu-id="74a25-136">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user is not aware of).</span></span> <span data-ttu-id="74a25-137">Агрегирование или сглаживания может также выполняться со временем; Например, можно ограничить скорость, с которой голограмма могут различаться по расстояние от пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-137">Aggregation or smoothing can also be performed over time; for example you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="74a25-138">Просто ограничиваете число расстояние, минимальное и максимальное значение также может помочь, поэтому она перемещается внезапно сейчас столкнулись расстояние или поступать повалила лиц пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-138">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved does not suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="74a25-139">Приложения также могут использовать форму и направление поверхности для размещения голограмма руководство по.</span><span class="sxs-lookup"><span data-stu-id="74a25-139">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="74a25-140">Holographic стул не должен проходить через сквозь стены и следует зафиксированных располагаются с ближайшее снизу целое даже если это немного неравномерной.</span><span class="sxs-lookup"><span data-stu-id="74a25-140">A holographic chair should not penetrate through walls and should sit flush with the floor even if it is slightly uneven.</span></span> <span data-ttu-id="74a25-141">Функциональность этого типа будет скорее всего зависят от использования конфликтов физики, а не просто raycasts, однако подобные же вопросы будут применяться.</span><span class="sxs-lookup"><span data-stu-id="74a25-141">This kind of functionality would likely rely upon the use of physics collisions rather than just raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="74a25-142">Если она помещается имеет много небольших многоугольники, которые выделяют, например конечностей на стула, смысл расширить физики представлением эти многоугольники на что-нибудь плавного и шире, чтобы они были более возможность передвигаться по поверхности пространственных без Очистка.</span><span class="sxs-lookup"><span data-stu-id="74a25-142">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they are more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="74a25-143">В самом крайнем ввод данных пользователем можно упростить сейчас полностью и пространственных поверхности может использоваться для выполнения полностью автоматической голограмма размещения.</span><span class="sxs-lookup"><span data-stu-id="74a25-143">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to perform entirely automatic hologram placement.</span></span> <span data-ttu-id="74a25-144">Например приложение может разместить holographic светло параметр где-нибудь на стене для нажатия пользователем клавиши.</span><span class="sxs-lookup"><span data-stu-id="74a25-144">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="74a25-145">Предсказуемость же ограничение применяется вдвойне здесь; Если пользователь ожидает, что контроль над голограмма размещения, но приложение не всегда помещает голограммы где они ожидают (если светло коммутатор где-либо пользователь не может связаться с), это будет более расстраивающее возможности.</span><span class="sxs-lookup"><span data-stu-id="74a25-145">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application does not always place holograms where they expect (if the light-switch appears somewhere that the user cannot reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="74a25-146">Фактически может быть хуже, для выполнения автоматического размещения, требующую коррекции пользователя некоторое время, чем чтобы просто пользователь должен всегда выполнять размещение самостоятельно; так как является успешной функция автоматического размещения *ожидается*, вручную исправлений подчас нагрузку!</span><span class="sxs-lookup"><span data-stu-id="74a25-146">It can actually be worse to perform automatic placement that requires user correction some of the time, than to just require the user to always perform placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="74a25-147">Обратите внимание, что способность приложения для использования пространственных поверхности для размещения во многом зависит от приложения [проверку качества](spatial-mapping-design.md#the-environment-scanning-experience).</span><span class="sxs-lookup"><span data-stu-id="74a25-147">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="74a25-148">Если рабочей области не были проверены, его нельзя использовать для размещения.</span><span class="sxs-lookup"><span data-stu-id="74a25-148">If a surface has not been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="74a25-149">Это приложение в качестве пояснения для пользователя, таким образом, чтобы они помогают проверять новые поверхности или выбрать новое местоположение.</span><span class="sxs-lookup"><span data-stu-id="74a25-149">It is up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="74a25-150">Визуальную обратную связь для пользователя является важнейшим во время размещения.</span><span class="sxs-lookup"><span data-stu-id="74a25-150">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="74a25-151">Пользователь должен знать, где она находится по отношению к ближайшей поверхности с [заземление эффекты](spatial-mapping.md#visualization).</span><span class="sxs-lookup"><span data-stu-id="74a25-151">The user needs to know where the hologram is in relation to the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="74a25-152">Они понимают, почему ограниченное перемещение их голограмма (например, из-за конфликта имен с соседней surface).</span><span class="sxs-lookup"><span data-stu-id="74a25-152">They should understand why the movement of their hologram is being constrained (for example, due to collision with another nearby surface).</span></span> <span data-ttu-id="74a25-153">Если они не удается разместить голограмма в текущем расположении, визуальную обратную связь должно было ясно, почему бы не.</span><span class="sxs-lookup"><span data-stu-id="74a25-153">If they cannot place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="74a25-154">Например если пользователь пытается поместить holographic диване находится посередине на стене, то части диване, защищенных wall следует pulsate цветом, почему-то сердиты.</span><span class="sxs-lookup"><span data-stu-id="74a25-154">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="74a25-155">Или, и наоборот, если приложение не удается найти пространственных поверхности в расположении, где пользователь может видеть поверхность реального мира, затем приложение должно прояснить этот.</span><span class="sxs-lookup"><span data-stu-id="74a25-155">Or conversely, if the application cannot find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="74a25-156">Очевидным отсутствие эффекта заземлением в этой области могут достичь этой цели.</span><span class="sxs-lookup"><span data-stu-id="74a25-156">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="74a25-157">Загораживание</span><span class="sxs-lookup"><span data-stu-id="74a25-157">Occlusion</span></span>

<span data-ttu-id="74a25-158">Одно из основных применений поверхностей пространственное сопоставление — просто скрывать голограммы.</span><span class="sxs-lookup"><span data-stu-id="74a25-158">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="74a25-159">Это простой имеет огромное влияние на предполагаемых реализм голограммы, помощь в создании visceral том смысле, что действительно находятся на том же физическом пространстве имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-159">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabit the same physical space as the user.</span></span>

<span data-ttu-id="74a25-160">Перекрытия также предоставляет сведения для пользователя; Если голограмма перекрыто поверхностью реального мира, это обеспечивает дополнительную визуальную обратную связь относительно пространственное положение этого голограмма в мире.</span><span class="sxs-lookup"><span data-stu-id="74a25-160">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides additional visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="74a25-161">И наоборот, перекрытия можно также полезно *скрыть* сведения о пользователе; occluding голограммы за стены может загромождать visual интуитивно понятным способом.</span><span class="sxs-lookup"><span data-stu-id="74a25-161">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="74a25-162">Чтобы скрыть или Показать голограмма, пользователь просто приходится перемещать их голосах.</span><span class="sxs-lookup"><span data-stu-id="74a25-162">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="74a25-163">Перекрытия можно также использовать к простым ожиданий для интуитивно понятного пользовательского интерфейса, в зависимости от знакомых физических взаимодействий; Если голограмма является перекрыто поверхностью, он обусловлено тем, которые отображаются сплошной, поэтому ожидаемых, она будет *конфликтуют* с, область и не просто передать через него.</span><span class="sxs-lookup"><span data-stu-id="74a25-163">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not simply pass through it.</span></span>

<span data-ttu-id="74a25-164">В некоторых случаях перекрытия из голограммы нежелательно.</span><span class="sxs-lookup"><span data-stu-id="74a25-164">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="74a25-165">Если пользователь должен иметь возможность взаимодействовать с голограмма, затем они должны иметь возможность см. в статье, — даже если отстает от реального мира поверхность.</span><span class="sxs-lookup"><span data-stu-id="74a25-165">If a user needs to be able to interact with a hologram, then they need to be able to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="74a25-166">В таком случае обычно имеет смысл для подготовки к просмотру таких голограмма по-разному в том случае, когда он является перекрыто (например, уменьшив его яркость).</span><span class="sxs-lookup"><span data-stu-id="74a25-166">In such cases, it usually makes sense to render such a hologram differently when it is occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="74a25-167">Таким образом, пользователь будет иметь возможность визуально найти голограмма, но они по-прежнему будут учитывать, что это за что-то.</span><span class="sxs-lookup"><span data-stu-id="74a25-167">This way, the user will be able to visually locate the hologram, but they will still be aware that it is behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="74a25-168">Физика</span><span class="sxs-lookup"><span data-stu-id="74a25-168">Physics</span></span>

<span data-ttu-id="74a25-169">Физическое моделирование используется другое отличие какие пространственное сопоставление может использоваться, чтобы подкрепить *присутствия* из голограммы на физическом пространстве пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-169">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="74a25-170">При моей holographic мячик выполняет накат в действительности off коробке, будет передаваться по полу в разделе диване, может оказаться непросто, мне это не действительно существует.</span><span class="sxs-lookup"><span data-stu-id="74a25-170">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not really there.</span></span>

<span data-ttu-id="74a25-171">Физическое моделирование также дает возможность приложению использовать естественным и знакомых взаимодействия на основе физики.</span><span class="sxs-lookup"><span data-stu-id="74a25-171">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="74a25-172">Перемещение holographic мебель вокруг на площадке скорее всего будет проще для пользователя, если мебели отвечает на запросы, как если бы он скользящий через floor соответствующие инерции и трудностей.</span><span class="sxs-lookup"><span data-stu-id="74a25-172">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="74a25-173">Для создания реалистичного поведения физических, вы скорее всего, понадобится для выполнения некоторых [mesh обработки](spatial-mapping.md#mesh-processing) заполнения бреши в системе, например, удаление с плавающей запятой hallucinations и сглаживание примерная поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-173">In order to generate realistic physical behaviors, you will likely need to perform some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="74a25-174">Также необходимо учитывать как приложения [проверку качества](spatial-mapping-design.md#the-environment-scanning-experience) влияет на его физическое моделирование.</span><span class="sxs-lookup"><span data-stu-id="74a25-174">You will also need to consider how your application's [scanning experience](spatial-mapping-design.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="74a25-175">Во-первых отсутствует поверхностях не конфликтуют с какой-либо; что происходит, когда мячик скатывается вниз коридор и с конец известной света?</span><span class="sxs-lookup"><span data-stu-id="74a25-175">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="74a25-176">Во-вторых необходимо решить, ли вам придется продолжать реагировать на изменения в среде со временем.</span><span class="sxs-lookup"><span data-stu-id="74a25-176">Secondly, you need to decide whether you will continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="74a25-177">В некоторых случаях требуется ответить на них как возможно; Например, если пользователь использует двери и мебель как перемещаемый barricades в защиты от tempest входящих Roman стрелок.</span><span class="sxs-lookup"><span data-stu-id="74a25-177">In some cases, you will want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="74a25-178">В других случаях, вы можете игнорировать новые обновления; Ваш holographic спортивный автомобиль вокруг Овальный, влияющие на вашей площадке внезапно нельзя так удобным в том случае, если ваш dog решает располагаются в середине дорожки.</span><span class="sxs-lookup"><span data-stu-id="74a25-178">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="74a25-179">Навигация</span><span class="sxs-lookup"><span data-stu-id="74a25-179">Navigation</span></span>

<span data-ttu-id="74a25-180">Приложения могут использовать пространственное сопоставление данных, чтобы предоставить возможность перехода на практике таким же образом, что человек holographic символов (или агенты).</span><span class="sxs-lookup"><span data-stu-id="74a25-180">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="74a25-181">Это помогает усилить наличие holographic символов, ограничивая их к тому же набору естественным, знакомы поведения те пользователя и его друзей.</span><span class="sxs-lookup"><span data-stu-id="74a25-181">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="74a25-182">Возможности навигации может быть удобно для пользователей, а также.</span><span class="sxs-lookup"><span data-stu-id="74a25-182">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="74a25-183">После построения карты навигации в заданной области могут использоваться совместно для обеспечения holographic направлениях для новых пользователей, которые не знакомы с этим расположением.</span><span class="sxs-lookup"><span data-stu-id="74a25-183">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="74a25-184">Эта карта может быть создано для обеспечения актуальности пешеходов «трафика» плавно, или во избежание аварий в опасных городах, как мест.</span><span class="sxs-lookup"><span data-stu-id="74a25-184">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="74a25-185">Ключевые технические трудности, связанной с реализацией функции навигации будет надежных обнаружение неанализируемой поверхности (люди не стека в таблицах!) и корректное адаптации к изменениям в среде (люди не разберем закрытых двери!).</span><span class="sxs-lookup"><span data-stu-id="74a25-185">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="74a25-186">Сетки может потребоваться некоторые [обработки](spatial-mapping.md#mesh-processing) до ее можно использовать для планирования пути и навигации виртуального символом.</span><span class="sxs-lookup"><span data-stu-id="74a25-186">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it is usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="74a25-187">Сглаживание сетки и удаление hallucinations помогает избежать символов становится заблокирована.</span><span class="sxs-lookup"><span data-stu-id="74a25-187">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="74a25-188">Вы также можете значительно упростить сетки, чтобы ускорить планирование путь линии символа и вычисления навигации.</span><span class="sxs-lookup"><span data-stu-id="74a25-188">You may also wish to drastically simplify the mesh in order to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="74a25-189">Эти трудности получили большое внимание в разработке технологии, игровая приставка, и имеется множество доступных исследовательская литература по этим темам.</span><span class="sxs-lookup"><span data-stu-id="74a25-189">These challenges have received a great deal of attention in the development of videogame technology, and there is a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="74a25-190">Обратите внимание на то, что встроенные функции NavMesh в Unity не может использоваться с сопоставление пространственного поверхностями.</span><span class="sxs-lookup"><span data-stu-id="74a25-190">Note that the built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="74a25-191">Это обусловлено поверхности пространственное сопоставление не известны до приложение запускается, тогда как NavMesh файлы данных должны создаваться из источника ресурсов заранее.</span><span class="sxs-lookup"><span data-stu-id="74a25-191">This is because spatial mapping surfaces are not known until the application starts, whereas NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="74a25-192">Также Обратите внимание, что не будет содержать система пространственное сопоставление [сведения о поверхности очень далекой галактики](spatial-mapping-design.md#the-environment-scanning-experience) из текущего расположения пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-192">Also note that, the spatial mapping system will not provide [information about surfaces very far away](spatial-mapping-design.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="74a25-193">Приложение должно «запомните» поверхности сам Если, например, чтобы составить карту очень большие области.</span><span class="sxs-lookup"><span data-stu-id="74a25-193">So the application must 'remember' surfaces itself if it is to build a map of a very large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="74a25-194">визуализации</span><span class="sxs-lookup"><span data-stu-id="74a25-194">Visualization</span></span>

<span data-ttu-id="74a25-195">В большинстве случаев он подходит для пространственных поверхности невидимым; Чтобы свести к минимуму загромождения и позволить реальной world говорили сами за себя.</span><span class="sxs-lookup"><span data-stu-id="74a25-195">Most of the time it is appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="74a25-196">Тем не менее иногда полезно для визуализации пространственное сопоставление поверхностях, напрямую, несмотря на то, что их аналоги реальных уже отображаются.</span><span class="sxs-lookup"><span data-stu-id="74a25-196">However, sometimes it is useful to visualize spatial mapping surfaces directly, despite the fact that their real-world counterparts are already visible.</span></span>

<span data-ttu-id="74a25-197">Например, когда пользователь пытается разместить голограмма в рабочую область (предположим, что размещение holographic CAB-файл на стене,) можно использовать на землю голограмма, отбрасывающего тень на поверхность.</span><span class="sxs-lookup"><span data-stu-id="74a25-197">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="74a25-198">Это предоставит пользователю гораздо более четкое представление о точное развертываемыми между голограмма и рабочей области.</span><span class="sxs-lookup"><span data-stu-id="74a25-198">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="74a25-199">Это пример более общая практика визуально «Предварительный просмотр» изменение прежде чем пользователь сможет зафиксировать к нему.</span><span class="sxs-lookup"><span data-stu-id="74a25-199">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="74a25-200">Визуализируя поверхности, приложения могут совместно использовать с пользователем, его понимание среды.</span><span class="sxs-lookup"><span data-stu-id="74a25-200">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="74a25-201">Например holographic настольная игра может визуализировать горизонтальной поверхности, которые он определил как «таблицы», чтобы пользователь знал, где они должны перейти для взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="74a25-201">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="74a25-202">Визуализация поверхности может быть удобно для представления пользователю близлежащих пространств, которые скрыты от просмотра.</span><span class="sxs-lookup"><span data-stu-id="74a25-202">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="74a25-203">Эта мера может помочь простой способ предоставить пользователю доступ к своей кухне (и все его вложенные голограммы) из своей гостиной.</span><span class="sxs-lookup"><span data-stu-id="74a25-203">This could provide a simple way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="74a25-204">Поверхности сетки, предоставляемые пространственное сопоставление не может быть особенно «очистить».</span><span class="sxs-lookup"><span data-stu-id="74a25-204">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="74a25-205">Поэтому важно визуализировать их соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="74a25-205">Thus it is important to visualize them appropriately.</span></span> <span data-ttu-id="74a25-206">Традиционные освещения вычисления может выделить ошибки в нормали к поверхности в виде неряшливо, пока «чистой» текстуры, спроецированных на рабочей области может помочь ему более аккуратная вид.</span><span class="sxs-lookup"><span data-stu-id="74a25-206">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, whilst 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="74a25-207">Это также можно выполнить [mesh обработки](spatial-mapping.md#mesh-processing) для повышения свойства сетки, прежде чем поверхности подготавливаются к просмотру.</span><span class="sxs-lookup"><span data-stu-id="74a25-207">It is also possible to perform [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="74a25-208">С помощью поверхности наблюдателя</span><span class="sxs-lookup"><span data-stu-id="74a25-208">Using The Surface Observer</span></span>

<span data-ttu-id="74a25-209">Отправной точкой для пространственное сопоставление является наблюдателем поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-209">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="74a25-210">Программы поток выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="74a25-210">Program flow is as follows:</span></span>
* <span data-ttu-id="74a25-211">Создайте объект поверхности наблюдателя</span><span class="sxs-lookup"><span data-stu-id="74a25-211">Create a surface observer object</span></span>
   * <span data-ttu-id="74a25-212">Укажите один или несколько пространственных томов, для определения областей интересов, в которой приложение желает получать пространственное сопоставление данных.</span><span class="sxs-lookup"><span data-stu-id="74a25-212">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="74a25-213">Пространственные том является просто определении части пространства, такие как сферы или поле фигуры.</span><span class="sxs-lookup"><span data-stu-id="74a25-213">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="74a25-214">Использование пространственных тома, в мире заблокирован системе пространственных координат для определения основного региона физического мира.</span><span class="sxs-lookup"><span data-stu-id="74a25-214">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="74a25-215">Использование пространственных тома, обновлены друг рамка с заблокирован для тела Пространственные системы координат, для определения области пространство, которое перемещает (но не поворачивается) с пользователем.</span><span class="sxs-lookup"><span data-stu-id="74a25-215">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but does not rotate) with the user.</span></span>
   * <span data-ttu-id="74a25-216">Эти Пространственные тома может быть изменен позже в любое время, как состояние приложения или изменения, внесенные пользователем.</span><span class="sxs-lookup"><span data-stu-id="74a25-216">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="74a25-217">Использовать опроса или уведомления для получения сведений о пространственных поверхности</span><span class="sxs-lookup"><span data-stu-id="74a25-217">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="74a25-218">Вы может «опрос» поверхности наблюдателя для пространственных поверхности состояния в любое время.</span><span class="sxs-lookup"><span data-stu-id="74a25-218">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="74a25-219">Кроме того может регистрировать для поверхности наблюдателя «изменено на поверхности» события, который сообщит приложению, при изменении пространственных поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-219">Alternatively, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="74a25-220">Для динамического пространственных тома, например усеченная или том заблокирован для текста приложения должны выполнить опрос для изменения каждого кадра, задавая интересующую вас область и затем получения текущего набора пространственных поверхностей.</span><span class="sxs-lookup"><span data-stu-id="74a25-220">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="74a25-221">Для статических тома, например куб заблокирован для мира, охватывающий в одной комнате приложения могут зарегистрировать для событие «поверхности изменения» получать уведомления об изменении пространственных поверхности внутри этого тома может.</span><span class="sxs-lookup"><span data-stu-id="74a25-221">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="74a25-222">Процесс изменения в областях</span><span class="sxs-lookup"><span data-stu-id="74a25-222">Process surfaces changes</span></span>
   * <span data-ttu-id="74a25-223">Итерации в указанном наборе пространственных поверхностей.</span><span class="sxs-lookup"><span data-stu-id="74a25-223">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="74a25-224">Классифицируйте пространственных предстает в виде добавлены, изменены или удалены.</span><span class="sxs-lookup"><span data-stu-id="74a25-224">Classify spatial surfaces as added, changed or removed.</span></span>
   * <span data-ttu-id="74a25-225">Для каждого добавляемого или изменяемого пространственных рабочей области при необходимости отправьте асинхронный запрос для получения обновленных сетки, представляющий текущее состояние рабочей области на нужном уровне детализации.</span><span class="sxs-lookup"><span data-stu-id="74a25-225">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="74a25-226">Обработать запрос асинхронной сетки (Дополнительные сведения в следующих разделах).</span><span class="sxs-lookup"><span data-stu-id="74a25-226">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="74a25-227">Сетка кэширования</span><span class="sxs-lookup"><span data-stu-id="74a25-227">Mesh Caching</span></span>

<span data-ttu-id="74a25-228">Пространственные поверхности, представляются высокую плотность сетки.</span><span class="sxs-lookup"><span data-stu-id="74a25-228">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="74a25-229">Хранение, прорисовки и обработки этих сеток может требуют значительных ресурсов вычислений и хранения.</span><span class="sxs-lookup"><span data-stu-id="74a25-229">Storing, rendering and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="74a25-230">Таким образом каждое приложение следует внедрять сетки кэширование схемы, соответствующие потребности предприятия, чтобы свести к минимуму ресурсы, используемые для обработки в сети и хранения.</span><span class="sxs-lookup"><span data-stu-id="74a25-230">As such, each application should adopt a mesh caching scheme appropriate to its needs, in order to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="74a25-231">Эта схема следует определить, что сетки для сохранения и которого необходимо отменить, а также условия обновления сетки для каждого пространственного рабочей области.</span><span class="sxs-lookup"><span data-stu-id="74a25-231">This scheme should determine which meshes to retain and which to discard, as well as when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="74a25-232">Многие аспекты, которые в них описана непосредственно о том, как приложение должно приближаться к отметке кэширование сетки.</span><span class="sxs-lookup"><span data-stu-id="74a25-232">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="74a25-233">Следует учитывать, как пользователь перемещается по среде, необходимы какие поверхности, когда будет действовать различными поверхностями и когда следует записывать изменения в среде.</span><span class="sxs-lookup"><span data-stu-id="74a25-233">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="74a25-234">При интерпретации «изменено на поверхности» события, предоставляемые поверхности наблюдатель, основные сетки логике кэширования выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="74a25-234">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="74a25-235">Если приложение видит пространственных поверхности идентификатор, который имеет раньше не было, это следует интерпретировать как поверхность новых пространственных.</span><span class="sxs-lookup"><span data-stu-id="74a25-235">If the application sees a spatial surface ID that it has not seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="74a25-236">Если приложение видит пространственных поверхность с известным Идентификатором, но со временем новые обновления, его следует считать это обновленный пространственных поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-236">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="74a25-237">Если приложение больше не видит пространственных поверхность область с известным Идентификатором, это следует интерпретировать как поверхность пространственных удален.</span><span class="sxs-lookup"><span data-stu-id="74a25-237">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="74a25-238">Это зависит каждое приложение, затем выберите следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="74a25-238">It is up to each application to then make the following choices:</span></span>
* <span data-ttu-id="74a25-239">Для нового пространственного поверхностями должны запрашиваться сетки?</span><span class="sxs-lookup"><span data-stu-id="74a25-239">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="74a25-240">Обычно сетки должны немедленно запрашиваются новые Пространственные поверхности, которые можно найти полезные новые сведения для пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-240">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="74a25-241">Тем не менее новые Пространственные поверхности рядом, а также перед пользователь должен быть дан приоритет, и сначала следует запросить их сетки.</span><span class="sxs-lookup"><span data-stu-id="74a25-241">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="74a25-242">Если новая сетка не требуется, если для примера приложения постоянно или временно «замороженной» его модель среды, затем он должен запрашиваться не.</span><span class="sxs-lookup"><span data-stu-id="74a25-242">If the new mesh is not needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it should not be requested.</span></span>
* <span data-ttu-id="74a25-243">Для обновленных пространственного поверхностями должны запрашиваться сетки?</span><span class="sxs-lookup"><span data-stu-id="74a25-243">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="74a25-244">Обновленные пространственных поверхности рядом, а также перед пользователь должен быть дан приоритет и сначала следует запросить их сетки.</span><span class="sxs-lookup"><span data-stu-id="74a25-244">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="74a25-245">Возможно также обеспечивают более высокий приоритет, чтобы новые поверхности, чем обновления поверхности, особенно во время сканирования.</span><span class="sxs-lookup"><span data-stu-id="74a25-245">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="74a25-246">Чтобы ограничить затраты на обработку, приложения можно регулировать скорость, с которой они обрабатывают обновления пространственных поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-246">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="74a25-247">Возможно, его можно определить, что изменения в рабочую область пространственных минимальны, например, если границы области, в этом случае обновление может оказаться недостаточно важные для процесса.</span><span class="sxs-lookup"><span data-stu-id="74a25-247">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="74a25-248">Обновления для пространственных поверхности вне текущей области интересов пользователя могут игнорироваться полностью, хотя в этом случае он может быть более эффективным изменения пространственных ограничивающий томов используется поверхности наблюдатель.</span><span class="sxs-lookup"><span data-stu-id="74a25-248">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="74a25-249">Для удаленных пространственного поверхностями следует ли удалить сетки?</span><span class="sxs-lookup"><span data-stu-id="74a25-249">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="74a25-250">Обычно сетки не следует использовать немедленно для удаленных пространственного поверхностями, так что остается правильный голограмма перекрытия.</span><span class="sxs-lookup"><span data-stu-id="74a25-250">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="74a25-251">Тем не менее, если приложение имеет основания предполагать, что Пространственные поверхность появится вскоре (возможно в зависимости от вида взаимодействия с пользователем), возможно, будет более эффективным будет сохранить чем отбросить его сетки и создайте его заново попытку позже.</span><span class="sxs-lookup"><span data-stu-id="74a25-251">However, if the application has reason to believe that a spatial surface will reappear shortly (perhaps based upon the design of the user experience), then it may be more efficient to retain it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="74a25-252">При разработке крупномасштабных модель пользовательской среды в приложение затем он может потребоваться отменить любые сеток вообще.</span><span class="sxs-lookup"><span data-stu-id="74a25-252">If the application is building a large-scale model of the user's environment then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="74a25-253">По-прежнему потребуется ограничить использование ресурсов, возможно, сеток постановки в очередь на диск как исчезают пространственных поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-253">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="74a25-254">Обратите внимание, что некоторые события достаточно редко, во время создания пространственных поверхности может привести к пространственных поверхности заменяется новые Пространственные поверхности в аналогичных местах, но разные идентификаторы.</span><span class="sxs-lookup"><span data-stu-id="74a25-254">Note that some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="74a25-255">Следовательно приложения, не захотите отменить удален поверхности следует позаботиться не до конца вверх сеточных несколько высокой перекрывающегося пространственного поверхности охватывающий то же расположение.</span><span class="sxs-lookup"><span data-stu-id="74a25-255">Consequently, applications that choose not to discard a removed surface should take care not to end up with multiple highly-overlapped spatial surface meshes covering the same location.</span></span>
* <span data-ttu-id="74a25-256">Следует ли удалить сетки для любого пространственного поверхности?</span><span class="sxs-lookup"><span data-stu-id="74a25-256">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="74a25-257">Даже в том случае, если поверхность пространственных существует, если он больше не полезно удобство работы пользователя, а затем она должна будет удалена.</span><span class="sxs-lookup"><span data-stu-id="74a25-257">Even while a spatial surface exists, if it is no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="74a25-258">Например если приложение «заменяет» место на другом конце лазейкой с альтернативного виртуальные пространством затем пространственных поверхности в этой комнате больше не имеет значения.</span><span class="sxs-lookup"><span data-stu-id="74a25-258">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="74a25-259">Ниже приведен пример сетки стратегию кэширования, с помощью гистерезис Пространственные и временные.</span><span class="sxs-lookup"><span data-stu-id="74a25-259">Here is an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="74a25-260">Рассмотрим приложение, которое желает использовать Пространственные тома проценты, которые следует взглядом пользователя, как они выглядели и присутствия, форме панелью видимого пространства.</span><span class="sxs-lookup"><span data-stu-id="74a25-260">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="74a25-261">Поверхность пространственных могут исчезнуть временно из этого тома просто потому, что пользователь ищет из рабочей области или дополнительные действия от его... только для ретроспективного поиска или перемещается ближе попытку немного позже.</span><span class="sxs-lookup"><span data-stu-id="74a25-261">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="74a25-262">В этом случае удаления и повторного создания сети для этой рабочей области представляет объем избыточных обработки.</span><span class="sxs-lookup"><span data-stu-id="74a25-262">In this case, discarding and re-creating the mesh for this surface represents a lot of redundant processing.</span></span>
* <span data-ttu-id="74a25-263">Чтобы сократить число обработанных изменений, приложение использует два пространственных наблюдателей поверхности, содержится внутри другого.</span><span class="sxs-lookup"><span data-stu-id="74a25-263">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="74a25-264">Тома большего размера сферическую и привязан к пользователю «неактивно»; Перемещает только при необходимости для обеспечения его центр в метрах 2.0 пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-264">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its centre is within 2.0 metres of the user.</span></span>
* <span data-ttu-id="74a25-265">Новые и обновленные пространственных поверхности сетки, всегда обрабатываются с более мелкие внутреннее поверхности наблюдатель, но сеток кэшируются, пока они исчезают из большего размера внешнего наблюдателя поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-265">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="74a25-266">Это позволит приложению избежать обработки большое количество избыточных изменений из-за перемещения локального пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-266">This allows the application to avoid processing many redundant changes due to local user movement.</span></span>
* <span data-ttu-id="74a25-267">Так как поверхность пространственных также могут временно исчезнуть из-за отслеживание потери, приложение также откладывает отмену удаленных поверхностях пространственных во время отслеживания потери.</span><span class="sxs-lookup"><span data-stu-id="74a25-267">Since a spatial surface may also disappear temporarily due to tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="74a25-268">В общем случае приложения должны оценить компромисс между обработку ограниченной обновления и увеличение занимаемой памяти для определения его идеальным стратегии кэширования.</span><span class="sxs-lookup"><span data-stu-id="74a25-268">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="74a25-269">Подготовка к просмотру</span><span class="sxs-lookup"><span data-stu-id="74a25-269">Rendering</span></span>

<span data-ttu-id="74a25-270">Существует три основных способа, в которых обычно используются для подготовки к просмотру пространственное сопоставление сетки:</span><span class="sxs-lookup"><span data-stu-id="74a25-270">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="74a25-271">Для поверхности визуализации</span><span class="sxs-lookup"><span data-stu-id="74a25-271">For surface visualization</span></span>
   * <span data-ttu-id="74a25-272">Часто бывает полезно для визуализации пространственных поверхности напрямую.</span><span class="sxs-lookup"><span data-stu-id="74a25-272">It is often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="74a25-273">Например приведение «shadows» из объектов на поверхности пространственных можно визуально полезные для пользователя при их размещении голограммы на поверхностях.</span><span class="sxs-lookup"><span data-stu-id="74a25-273">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they are placing holograms on surfaces.</span></span>
   * <span data-ttu-id="74a25-274">Следует иметь в виду является то, что отличается от вида сетки, которые могут быть созданы 3D исполнителя пространственных сеток.</span><span class="sxs-lookup"><span data-stu-id="74a25-274">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="74a25-275">Треугольник топология не будет как «clean» и как созданные human топологии и сетки снижается из [различные ошибки](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span><span class="sxs-lookup"><span data-stu-id="74a25-275">The triangle topology will not be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping-design.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="74a25-276">Чтобы создать, используя visual эстетическим деталям, таким образом можно выполнить некоторые [mesh обработки](spatial-mapping.md#mesh-processing), например для заполнения бреши в системе или smooth нормали к поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-276">In order to create a pleasing visual aesthetic, you may thus want to perform some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="74a25-277">Вы также можете использовать шейдер для проекта спроектированных исполнителя текстур на Live mesh вместо непосредственно визуализация топология сетки и normals.</span><span class="sxs-lookup"><span data-stu-id="74a25-277">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="74a25-278">Для occluding голограммы за реальных поверхности</span><span class="sxs-lookup"><span data-stu-id="74a25-278">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="74a25-279">Пространственные поверхности может быть отображен в только для глубины pass какие влияет только на [буфер глубины](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) и не влияет на целевые объекты отрисовки цвет.</span><span class="sxs-lookup"><span data-stu-id="74a25-279">Spatial surfaces can be rendered in a depth-only pass which only affects the [depth buffer](https://msdn.microsoft.com/library/windows/desktop/bb219616(v=vs.85).aspx) and does not affect color render targets.</span></span>
   * <span data-ttu-id="74a25-280">Это обеспечивает буфер глубины, чтобы скрывать впоследствии к просмотру голограммы за пространственных поверхности.</span><span class="sxs-lookup"><span data-stu-id="74a25-280">This primes the depth buffer to occlude subsequently-rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="74a25-281">Точные перекрытия из голограммы улучшает том смысле, что голограммы действительно существует в физическом пространстве пользователя.</span><span class="sxs-lookup"><span data-stu-id="74a25-281">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="74a25-282">Чтобы включить только для глубина подготовки к просмотру, обновите состояние blend, чтобы задать [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) нулю для весь цвет целевыми объектами отрисовки.</span><span class="sxs-lookup"><span data-stu-id="74a25-282">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](https://msdn.microsoft.com/library/windows/desktop/hh404492(v=vs.85).aspx) to zero for all color render targets.</span></span>
* <span data-ttu-id="74a25-283">Для изменения внешнего вида голограммы перекрыто по поверхности реальных</span><span class="sxs-lookup"><span data-stu-id="74a25-283">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="74a25-284">Обычно отображаемой geometry скрыт в том случае, если он является перекрыто.</span><span class="sxs-lookup"><span data-stu-id="74a25-284">Normally rendered geometry is hidden when it is occluded.</span></span> <span data-ttu-id="74a25-285">Это достигается путем установки функции глубины вашей [состояние трафарета глубины](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) на «меньше или равно», чего геометрического объекта должен отображаться только там, где это **ближе** к камере, чем все ранее к просмотру Геометрия.</span><span class="sxs-lookup"><span data-stu-id="74a25-285">This is achieved by setting the depth function in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx) to "less than or equal", which causes geometry to be visible only where it is **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="74a25-286">Тем не менее его можно использовать для сохранения определенных geometry даже в том случае, если он является перекрыто и изменить его внешний вид при перекрыто как способа предоставления пользователю визуальной обратной связи.</span><span class="sxs-lookup"><span data-stu-id="74a25-286">However, it may be useful to keep certain geometry visible even when it is occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="74a25-287">Например это позволяет приложение Показать, что расположение объекта, пока что очевидно, что пользователь находится за рабочую область реального мира.</span><span class="sxs-lookup"><span data-stu-id="74a25-287">For example, this allows the application to show the user the location of an object whilst making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="74a25-288">Чтобы добиться этого, визуализировать geometry во второй раз с разных шейдер, который создает требуемый вид «occluded».</span><span class="sxs-lookup"><span data-stu-id="74a25-288">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="74a25-289">Перед отображением геометрии во второй раз, внести два изменения в вашей [состояние трафарета глубины](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="74a25-289">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="74a25-290">Во-первых, равным функции глубины «больше или равно», чтобы геометрии будут видны только там, где это **дальнейшей** от камеры, чем все ранее преобразованной геометрии.</span><span class="sxs-lookup"><span data-stu-id="74a25-290">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it is **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="74a25-291">Во-вторых, равным DepthWriteMask нулю, таким образом, чтобы не будет изменен буфер глубины (буфер глубины должно по-прежнему представляют глубину геометрии **ближайший** к камере).</span><span class="sxs-lookup"><span data-stu-id="74a25-291">Second, set the DepthWriteMask to zero, so that the depth buffer will not be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="74a25-292">[Производительность](understanding-performance-for-mixed-reality.md) является важной задачей при подготовке к просмотру пространственное сопоставление сеток.</span><span class="sxs-lookup"><span data-stu-id="74a25-292">[Performance](understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="74a25-293">Ниже приведены некоторые методы производительности отрисовки конкретных отчетов к просмотру пространственное сопоставление сеток.</span><span class="sxs-lookup"><span data-stu-id="74a25-293">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="74a25-294">Настройки плотности треугольник</span><span class="sxs-lookup"><span data-stu-id="74a25-294">Adjust triangle density</span></span>
   * <span data-ttu-id="74a25-295">Когда запрашивающий пространственных поверхности сетки из вашей поверхности наблюдателя, запрашивает самая низкая плотность сетки, подойдет для ваших потребностей.</span><span class="sxs-lookup"><span data-stu-id="74a25-295">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="74a25-296">Смысл при работе для изменения плотности треугольник на основе surface, surface, в зависимости от рабочей области расстояние от пользователя и его применимости взаимодействие с пользователем.</span><span class="sxs-lookup"><span data-stu-id="74a25-296">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="74a25-297">Снижение количества треугольник позволяет снизить использование памяти и вычислительные затраты вершин в GPU на то, что он не повлияет на пиксель вычислительные затраты.</span><span class="sxs-lookup"><span data-stu-id="74a25-297">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it will not affect pixel processing costs.</span></span>
* <span data-ttu-id="74a25-298">Выполните визуализируемых пирамиды обзора</span><span class="sxs-lookup"><span data-stu-id="74a25-298">Perform frustum culling</span></span>
   * <span data-ttu-id="74a25-299">Пирамиды обзора визуализируемых пропускает графические объекты, которые не видны, так как они находятся за пределами текущей панелью видимого пространства экрана.</span><span class="sxs-lookup"><span data-stu-id="74a25-299">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="74a25-300">Это сокращает затраты обработки ЦП и GPU.</span><span class="sxs-lookup"><span data-stu-id="74a25-300">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="74a25-301">Поскольку визуализируемых выполняется по принципу в сетке, а пространственных поверхности могут быть большими, разбиение каждого пространственного сетки поверхности на более мелкие фрагменты данных может привести эффективнее отбора (тем, что меньше вне экрана треугольники подготавливаются к просмотру).</span><span class="sxs-lookup"><span data-stu-id="74a25-301">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="74a25-302">Обеспечивает компромисс, однако; Дополнительные слои взаимодействия между вами, несколько вызовов draw, необходимо внести, которых можно увеличить затраты на ЦП.</span><span class="sxs-lookup"><span data-stu-id="74a25-302">There is a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="74a25-303">В крайнем случае пирамиды обзора, визуализируемых вычисления сами даже может иметь измеримое ЦП.</span><span class="sxs-lookup"><span data-stu-id="74a25-303">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="74a25-304">Изменить порядок отрисовки</span><span class="sxs-lookup"><span data-stu-id="74a25-304">Adjust rendering order</span></span>
   * <span data-ttu-id="74a25-305">Пространственные поверхности обычно бывает достаточно велик, так как они представляют всю среду заключить их.</span><span class="sxs-lookup"><span data-stu-id="74a25-305">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="74a25-306">Пиксель обработки затрат на GPU таким образом может быть высокой, особенно в случаях, где имеется более одного слоя видимым геометрии (включая как пространственного поверхностями, так и других голограммы).</span><span class="sxs-lookup"><span data-stu-id="74a25-306">Pixel processing costs on the GPU can thus be high, especially in cases where there is more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="74a25-307">В этом случае уровень ближайший к пользователю будет быть occluding дальнейшей все слои, поэтому теряется GPU отправкой визуализации слоями более удаленных.</span><span class="sxs-lookup"><span data-stu-id="74a25-307">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="74a25-308">Чтобы уменьшить этот излишней работы на GPU, полезно для подготовки к просмотру непрозрачный поверхности в порядке от передних к задним (тех, которые ближе последнее из них во-первых, более удаленных).</span><span class="sxs-lookup"><span data-stu-id="74a25-308">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="74a25-309">Под «opaque» подразумевается поверхности, для которых DepthWriteMask задано значение 1 в вашей [состояние трафарета глубины](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="74a25-309">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](https://msdn.microsoft.com/library/windows/desktop/ff476110(v=vs.85).aspx).</span></span> <span data-ttu-id="74a25-310">При подготовке к просмотру ближайшего поверхности, они будут простым буфер глубины эффективно, пропуская более удаленных поверхностях обработчиком пикселя в графическом Процессоре.</span><span class="sxs-lookup"><span data-stu-id="74a25-310">When the nearest surfaces are rendered, they will prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="74a25-311">Обработка сетки</span><span class="sxs-lookup"><span data-stu-id="74a25-311">Mesh Processing</span></span>

<span data-ttu-id="74a25-312">Приложение может потребоваться выполнить [различные операции](spatial-mapping.md#mesh-processing) на пространственных поверхности сетки в соответствии с его потребностями.</span><span class="sxs-lookup"><span data-stu-id="74a25-312">An application may want to perform [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="74a25-313">Данные индексов и вершин, в состав каждого пространственного сетки поверхности использует тот же знакомый макет, что [буферы вершин и индексов](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) , которые используются для подготовки к просмотру треугольников в рендеринг всех современных интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="74a25-313">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](https://msdn.microsoft.com/library/windows/desktop/bb147325%28v=vs.85%29.aspx) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="74a25-314">Тем не менее одного ключа фактов, которые следует учитывать является то, что треугольники пространственное сопоставление **front-по часовой стрелке порядком заполнения**.</span><span class="sxs-lookup"><span data-stu-id="74a25-314">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="74a25-315">Каждый треугольник представлена тремя индексами вершин в буфер индексов сетки, и эти индексы будут определять вершины треугольника в **по часовой стрелке** порядке, при просмотре треугольник из **front** сторона.</span><span class="sxs-lookup"><span data-stu-id="74a25-315">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="74a25-316">Передней сторона (или внешней) пространственных поверхности сетки соответствует как можно было бы ожидать Передняя сторона (отображается) поверхностей реального мира.</span><span class="sxs-lookup"><span data-stu-id="74a25-316">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="74a25-317">Приложения должны выполнять только в том случае, упрощения сетки, если по-прежнему недостаточно грубое грубом плотность треугольник, предоставляемые поверхности наблюдатель - эта работа требует больших затрат и уже выполняется средой выполнения для создания различных предоставляются уровни детализации.</span><span class="sxs-lookup"><span data-stu-id="74a25-317">Applications should only perform mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="74a25-318">Поскольку каждого поверхности наблюдателя может дать несколько неподключенный пространственных поверхности, некоторым приложениям может потребоваться обрезать эти Пространственные поверхности сетки для каждого других, затем изображению застежки их друг с другом.</span><span class="sxs-lookup"><span data-stu-id="74a25-318">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="74a25-319">В общем случае отсечения шаг является обязательным, как ближайших точек пространственных поверхности сетки часто перекрываются немного.</span><span class="sxs-lookup"><span data-stu-id="74a25-319">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="74a25-320">Точные точки для отслеживания и расчет столкновений</span><span class="sxs-lookup"><span data-stu-id="74a25-320">Raycasting and Collision</span></span>

<span data-ttu-id="74a25-321">Чтобы физики API (такие как [Havok](http://www.havok.com/)) использовать приложение с функциональными возможностями точные точки для отслеживания и расчет столкновений для пространственных поверхности, приложение должно предоставить пространственных поверхности сетки для физики API.</span><span class="sxs-lookup"><span data-stu-id="74a25-321">In order for a physics API (such as [Havok](http://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="74a25-322">Часто используются для физики сетки имеют следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="74a25-322">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="74a25-323">Они содержат только небольшого числа треугольников.</span><span class="sxs-lookup"><span data-stu-id="74a25-323">They contain only small numbers of triangles.</span></span> <span data-ttu-id="74a25-324">Физика операции являются дополнительные с большим объемом вычислений чем операции подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="74a25-324">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="74a25-325">Они являются «воды тесной».</span><span class="sxs-lookup"><span data-stu-id="74a25-325">They are 'water-tight'.</span></span> <span data-ttu-id="74a25-326">Поверхности, должны быть сплошной не должны иметь небольшой дыр; даже слишком мал, чтобы быть видимым бреши в системе может вызвать проблемы.</span><span class="sxs-lookup"><span data-stu-id="74a25-326">Surfaces intended to be solid should not have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="74a25-327">Они преобразуются в выпуклой hulls.</span><span class="sxs-lookup"><span data-stu-id="74a25-327">They are converted into convex hulls.</span></span> <span data-ttu-id="74a25-328">Выпуклая hulls имеют несколько многоугольников и свободны от бреши в системе, и гораздо большего количества вычислений они эффективны для обработки, чем необработанные треугольника сетки.</span><span class="sxs-lookup"><span data-stu-id="74a25-328">Convex hulls have few polygons and are free of holes, and they are much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="74a25-329">При выполнение raycasts от пространственного поверхностями, имейте в виду, что эти поверхности часто сложны, полный запутанным мало сведений — просто загроможденной фигур, например службу поддержки!</span><span class="sxs-lookup"><span data-stu-id="74a25-329">When performing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="74a25-330">Это означает, что один raycast недостаточно часто дают достаточно информации о форме рабочей области и форму пустое место рядом с ней.</span><span class="sxs-lookup"><span data-stu-id="74a25-330">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="74a25-331">Поэтому обычно это рекомендуется для выполнения многих raycasts в пределах небольшой области и которые используются объединенные результаты для формирования более надежным объяснение рабочей области.</span><span class="sxs-lookup"><span data-stu-id="74a25-331">It is thus usually a good idea to perform many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="74a25-332">Например использование среднее значение 10 raycasts для размещения голограмма руководство в рабочей области даст результат гораздо гораздо более гладко и менее «перебои управления», с помощью только одного raycast.</span><span class="sxs-lookup"><span data-stu-id="74a25-332">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="74a25-333">Однако имейте в виду, что каждый raycast может иметь высокую стоимость вычислений.</span><span class="sxs-lookup"><span data-stu-id="74a25-333">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="74a25-334">Таким образом в зависимости от сценария использования вы должны добиваться вычислительной стоимости дополнительных raycasts (выполняется каждый кадр) от вычислительной стоимости [mesh обработки](spatial-mapping.md#mesh-processing) smooth и удалять бреши в системе в (пространственных поверхности выполняется при обновлении пространственных сетки).</span><span class="sxs-lookup"><span data-stu-id="74a25-334">Thus depending on your usage scenario you should trade off the computational cost of additional raycasts (performed every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (performed when spatial meshes are updated).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="74a25-335">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="74a25-335">Troubleshooting</span></span>
* <span data-ttu-id="74a25-336">Для поверхности сетки быть ориентированный правильно, каждый объект GameObject должен быть активными, перед отправкой SurfaceObeserver иметь его сетки создан.</span><span class="sxs-lookup"><span data-stu-id="74a25-336">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it is sent to the SurfaceObeserver to have its mesh constructed.</span></span> <span data-ttu-id="74a25-337">В противном случае будут отображаться сетки в своем пространстве, но повернуть странные углом.</span><span class="sxs-lookup"><span data-stu-id="74a25-337">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="74a25-338">Объект GameObject, которое запускает сценарий, который обменивается данными с SurfaceObserver должно быть задано в источник.</span><span class="sxs-lookup"><span data-stu-id="74a25-338">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="74a25-339">В противном случае все объекты Gameobject, создание и отправку SurfaceObserver иметь их сеток создан будет иметь смещение равно смещению игры родительского объекта.</span><span class="sxs-lookup"><span data-stu-id="74a25-339">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="74a25-340">Это может сделать ваши сетки отображаются в нескольких метрах от что делает его очень сложно отлаживать происходящего.</span><span class="sxs-lookup"><span data-stu-id="74a25-340">This can make your meshes show up several meters away which makes it very hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="74a25-341">См. также</span><span class="sxs-lookup"><span data-stu-id="74a25-341">See also</span></span>
* [<span data-ttu-id="74a25-342">Системы координат</span><span class="sxs-lookup"><span data-stu-id="74a25-342">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="74a25-343">Пространственное сопоставление в DirectX</span><span class="sxs-lookup"><span data-stu-id="74a25-343">Spatial mapping in DirectX</span></span>](spatial-mapping-in-directx.md)
* [<span data-ttu-id="74a25-344">Пространственное сопоставление в Unity</span><span class="sxs-lookup"><span data-stu-id="74a25-344">Spatial mapping in Unity</span></span>](spatial-mapping-in-unity.md)
* [<span data-ttu-id="74a25-345">Пространственное сопоставление конструктора</span><span class="sxs-lookup"><span data-stu-id="74a25-345">Spatial mapping design</span></span>](spatial-mapping-design.md)
* [<span data-ttu-id="74a25-346">Пример использования - просматривая отверстия в реальности</span><span class="sxs-lookup"><span data-stu-id="74a25-346">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
