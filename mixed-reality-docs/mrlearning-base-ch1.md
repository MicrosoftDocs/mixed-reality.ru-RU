---
title: Руководства по началу работы 2\. Инициализация проекта и первое приложение
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 11/01/2019
ms.topic: article
ms.localizationpriority: high
keywords: смешанная реальность, unity, руководство, hololens
ms.openlocfilehash: d4e58e2c9236ba35b4394fd80cde3843edaa6f57
ms.sourcegitcommit: 4d43a8f40e3132605cee9ece9229e67d985db645
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2019
ms.locfileid: "74491200"
---
# <a name="2-initializing-your-project-and-first-application"></a>2. Инициализация проекта и первое приложение

На этом первом уроке вы узнаете о некоторых возможностях [набора средств для смешанной реальности (MRTK)](), запустите свое первое приложение для HoloLens 2 и развернете его на устройстве.

## <a name="objectives"></a>Задачи

* Оптимизация Unity для разработки решений для HoloLens.
* Импорт ресурсов и настройка сцены.
* Визуализация пространственной сетки сопоставления, виртуальных рук и счетчика частоты кадров.

## <a name="instructions"></a>Инструкция

### <a name="create-new-unity-project"></a>Создание проекта Unity

1. Запустите Unity.
2. Выберите **New** (Создать).
![Урок 1, раздел 1, шаг 2](images/mrlearning-base-ch1-1-step2.JPG)

3. Введите название проекта (например, MixedRealityBase).
![Урок 1, раздел 1, шаг 3](images/mrlearning-base-ch1-1-step3.JPG)
4. Укажите расположение, где будет сохранен проект.
![Урок 1, раздел 1, шаг 4](images/mrlearning-base-ch1-1-step4.JPG)
5. Задайте для проекта значение **3D**.
![Урок 1, раздел 1, шаг 5](images/mrlearning-base-ch1-1-step5.JPG)
6. Щелкните **Create Project** (Создать проект).
![Урок 1, раздел 1, шаг 6](images/mrlearning-base-ch1-1-step6.JPG)


### <a name="configure-the-unity-project-for-windows-mixed-reality"></a>Настройка проекта Unity для Windows Mixed Reality

1. Откройте окно *Build Settings* (Параметры сборки), выбрав **File (Файл)**   >  **Build Settings (Параметры сборки)** .
![Урок 1, раздел 2, шаг 1](images/mrlearning-base-ch1-2-step1.JPG)
2. Выберите *Universal Windows Platform* (Универсальная платформа Windows) и нажмите кнопку **Switch Platform** (Переключить платформу), чтобы переключить платформу. С HoloLens 2 должны использоваться приложения, совместимые с универсальной платформой Windows (UWP).
![Урок 1, раздел 2, шаг 2](images/mrlearning-base-ch1-2-step2.JPG)
3. Включите виртуальную реальность, щелкнув **Player Settings** (Параметры проигрывателя) в окне сборки, а затем на панели инспектора установите флажок *Virtual Reality Supported* (Поддержка виртуальной реальности) в разделе "XR Settings" (Параметры XR), как показано на приведенном ниже рисунке. Обратите внимание на то, что может потребоваться перетащить окно *Build Settings* (Параметры сборки) в сторону, чтобы увидеть панель инспектора. Флажок *Virtual Reality Supported* (Поддержка виртуальной реальности) также применяется к гарнитурам дополненной и смешанной реальности, так как он включает стереоскопическое изображение (отрисовка разных изображений для каждого глаза). ![Урок 1, раздел 2, шаг 3](images/mrlearning-base-ch1-2-step3.JPG)
4. Кроме того, в разделе "XR Settings" (Параметры XR) измените режим *Stereo Rendering Mode* (Режим стереоскопической отрисовки) на *Single Pass Instanced* (Однопроходная отрисовка экземпляра). Этот [стиль конвейера отрисовки](https://docs.unity3d.com/Manual/SinglePassStereoRenderingHoloLens.html) обычно является наиболее производительным для HoloLens 2. Если вас интересуют другие производительные конфигурации для среды Unity, следуйте [этим инструкциям](recommended-settings-for-unity.md).
![Урок 1, раздел 2, шаг 4](images/mrlearning-base-ch1-2-step4.jpg)
5. На той же панели инспектора в области возможностей раздела *Publishing Settings* (Параметры публикации) убедитесь, что установлен флажок *Spatial Perception* (Пространственное восприятие). Пространственное восприятие позволяет визуализировать сетку пространственного сопоставления на устройстве смешанной реальности, таком как HoloLens 2. Раздел параметров публикации находится на панели инспектора над областью "XR Settings" (Параметры XR) в разделе "Other Settings" (Другие параметры).
![Урок 1, раздел 2, шаг 5](images/mrlearning-base-ch1-2-step5.JPG)

    > [!NOTE]
    > Вы можете включить и другие распространенные функции (хотя в этом разделе они не используются), например *Microphone* (для голосовых команд) и *InternetClient* (для подключения к службам, для которых требуется сетевое подключение).

### <a name="import-the-mixed-reality-toolkit"></a>Импорт набора средств для смешанной реальности

1. Скачайте [пакет платформы Unity версии 2.1.0](https://github.com/microsoft/MixedRealityToolkit-Unity/releases/download/v2.1.0/Microsoft.MixedReality.Toolkit.Unity.Foundation.2.1.0.unitypackage) для [набора средств для смешанной реальности](https://github.com/microsoft/MixedRealityToolkit-Unity/releases) (Mixed Reality Toolkit) и сохраните его в папке на своем компьютере.

2. Импортируйте пакет *набора средств для смешанной реальности*, скачанный на предыдущем шаге. Щелкните **Assets** (Ресурсы)  >  **Import** (Импортировать)  >  **Custom Package** (Пользовательский пакет), выберите *Microsoft.MixedReality.Toolkit.Unity.Foundation.2.1.0.unitypackage* и откройте его, чтобы начать процесс импорта. Процесс импорта может занять несколько минут.
    ![Урок 1, раздел 3, шаг 2а](images/mrlearning-base-ch1-3-step2a.JPG) ![Урок 1, раздел 3, шаг 2б](images/mrlearning-base-ch1-3-step2b.JPG)

3. В следующем всплывающем окне щелкните **Import** (Импортировать), чтобы начать импорт выбранного пакета в проект Unity. Убедитесь, что все параметры выбраны, как показано на приведенном ниже рисунке.
    ![Урок 1, раздел 3, шаг 3](images/mrlearning-base-ch1-3-step3.JPG)

    > [!NOTE]
    > Если появится всплывающее диалоговое окно с запросом на применение параметров по умолчанию для набора средств для смешанной реальности, щелкните **Apply** (Применить). При импорте MRTK анализирует ваш проект, выявляя пропущенные рекомендуемые параметры, чтобы обеспечить автоматическую настройку. В зависимости от выбранных параметров всплывающее окно может выглядеть иначе, чем на рисунке ниже.

    ![Урок 1, раздел 3, шаг 4, примечание 1](images/mrlearning-base-ch1-3-step4-note1.JPG)

### <a name="configure-the-mixed-reality-toolkit"></a>Настройка набора средств для смешанной реальности

1. Добавьте *набор средств для смешанной реальности* в текущую сцену, выбрав **Mixed Reality Toolkit** (Набор средств для смешанной реальности)  >  **Add to Scene and Configure** (Добавить в сцену и настроить) в строке меню. Если после импорта набора средств для смешанной реальности этот пункт меню не отображается, перезапустите Unity.
    ![Урок 1, раздел 4, шаг 1](images/mrlearning-base-ch1-4-step1.JPG)

    > [!NOTE]
    > Может появиться всплывающее диалоговое окно для выбора [профиля для набора средств для смешанной реальности](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Profiles/Profiles.html). Выберите профиль *DefaultHoloLens2ConfigurationProfile*, дважды щелкнув его.

2. В сцене появится несколько новых элементов и изменений. Сохраните сцену под другим именем, щелкнув **File** (Файл)  >  **Save As** (Сохранить как) и укажите имя для сцены, например *BaseScene*. Сохраните сцену в папке *Scenes* в папке *Assets* проекта, чтобы все сцены хранились в одном месте.
    ![Урок 1, раздел 4, шаг 2а](images/mrlearning-base-ch1-4-step2a.JPG) ![Урок 1, раздел 4, шаг 2б](images/mrlearning-base-ch1-4-step2b.JPG)

### <a name="build-your-application-to-your-device"></a>Разработка приложения для устройства

1. Если вы закрыли окно *Build Settings* (Параметры сборки), открытое в предыдущих разделах, снова откройте его, выбрав **File** (Файл)  >  **Build Settings** (Параметры сборки).
    ![Урок 1, раздел 5, шаг 1](images/mrlearning-base-ch1-5-step1.JPG)

2. Убедитесь, что созданная сцена указана в списке *Scenes in Build* (Сцены в сборке), нажав кнопку **Add Open Scenes** (Добавить открытые сцены). Эта сцена должна быть открыта в Unity.

3. Нажмите кнопку **Build** (Сборка), чтобы начать процесс сборки.
    ![Урок 1, раздел 5, шаг 3](images/mrlearning-base-ch1-5-step3.JPG)

4. Создайте папку для приложения и укажите для нее название. На приведенном ниже изображении для хранения приложения была создана папка App. Щелкните **Select Folder** (Выбор папки), чтобы начать создание приложения в новой папке. После завершения создания вы можете закрыть окно *Build Settings* (Параметры сборки) в Unity.
    ![Урок 1, раздел 5, шаг 4](images/mrlearning-base-ch1-5-step4.JPG)

  > [!IMPORTANT]
  > Если сборка завершилась сбоем, попробуйте выполнить ее заново или перезапустите Unity и повторите попытку. Может отобразиться ошибка, например "Error: CS0246 = The type or namespace name “XX” could not be found (are you missing a using directive or an assembly reference?) (Ошибка: CS0246 = не удалось найти тип или имя пространства имен XX (возможно, отсутствует директива using или ссылка на сборку)). В этом случае может потребоваться установить [Windows 10 SDK (10.0.18362.0).](https://developer.microsoft.com//windows/downloads/windows-10-sdk)

5. После завершения сборки откройте созданную папку, содержащую файлы только что созданного приложения. Дважды щелкните решение *MixedRealityBase.sln* (или соответствующее имя, если вы использовали альтернативное имя для своего проекта), чтобы открыть файл решения в Visual Studio.

    > [!NOTE]
    > Обязательно откройте созданную папку (т. е. папку *App*, если вы следовали соглашениям об именовании из предыдущих шагов), так как за пределами этой папки будет находиться SLN-файл с аналогичным именем. Не путайте его с SLN-файлом, содержащимся в папке сборки. Структура папок должна выглядеть примерно так, как показано на рисунке ниже.
    >
    > Если в Visual Studio появится запрос на установку новых компонентов, проверьте, установлены ли все обязательные компоненты, как описано на [этой странице](install-the-tools.md).

    ![Урок 1, раздел 5, шаг 5](images/mrlearning-base-ch1-5-step5.JPG)

6. Подключите HoloLens 2 к компьютеру. Хотя в данных инструкциях предполагается, что вы будете развертывать приложение на устройстве HoloLens 2, вы можете также развернуть его на [эмуляторе HoloLens 2](using-the-hololens-emulator.md) или создать [пакет приложения для передачи данных на другое локальное устройство](<https://docs.microsoft.com//windows/uwp/packaging/packaging-uwp-apps>).

    > [!IMPORTANT]
    > Перед выполнением сборки на устройстве его нужно перевести в *режим разработчика* и связать с компьютером разработки. Большинство этих действий можно выполнить, следуя [данным инструкциям](using-visual-studio.md).

7. Настройте Visual Studio для сборки на устройство HoloLens 2, выбрав конфигурацию *Выпуск* или *Ведущий*, архитектуру *ARM* и цель *Устройство*.
    ![Урок 1, раздел 5, шаг 8](images/mrlearning-base-ch1-5-step7.JPG)

8. Завершающий шаг — это сборка и развертывание на вашем устройстве. Выберите **Отладка** > **Запуск без отладки**. Выбор *Запуск без отладки* приведет к немедленному запуску приложения на вашем устройстве после успешной сборки, но без подключения отладчика и отображения сведений об отладке в Visual Studio. Это также означает, что вы можете отсоединить USB-кабель во время выполнения приложения на устройстве HoloLens 2, не прерывая его работу.

    > [!NOTE]
    > Кроме того, вы можете выбрать **Сборка** > **Развернуть решение**, чтобы развернуть решение на устройстве без автоматического запуска приложения.

    ![Урок 1, раздел 5, шаг 9](images/mrlearning-base-ch1-5-step8.JPG)

## <a name="congratulations"></a>Поздравляем!

Вы развернули свое первое приложение HoloLens 2. Перемещаясь, вы увидите, как пространственная сетка сопоставления покрывает все поверхности, воспринятые HoloLens 2. Кроме того, вы увидите на руках и пальцах индикаторы для отслеживания рук и счетчик частоты кадров для отслеживания производительности приложения. Это лишь некоторые из основополагающих компонентов, входящих в комплект поставки набора средств для смешанной реальности. На следующих уроках вы начнете добавлять больше содержимого и интерактивных средств в сцену, чтобы в полной мере изучить возможности HoloLens 2 и набора средств для смешанной реальности.

> [!NOTE]
> В приложении вы можете заметить визуальный профилировщик. Переключение счетчика частоты кадров с помощью голосовой команды описывается в [уроке 5](mrlearning-base-ch5.md). Обычно рекомендуется постоянно отображать визуальный профилировщик во время разработки. Это позволит определить, если изменения кода повлияют на производительность. Приложение HoloLens 2 должно [непрерывно выполняться в режиме 60 кадров/с](understanding-performance-for-mixed-reality.md).

[Следующий урок. 3. Создание пользовательского интерфейса и настройка набора средств для Смешанной реальности](mrlearning-base-ch2.md)
