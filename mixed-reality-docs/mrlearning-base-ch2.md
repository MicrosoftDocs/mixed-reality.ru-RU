---
title: Учебники по началу работы — 3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 925ab825c2716a847726ac763dc6800914d87c6b
ms.sourcegitcommit: af1602710c1ccb7ed870a491923350d387706129
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/01/2019
ms.locfileid: "68702039"
---
# <a name="3-creating-user-interface-and-configure-mixed-reality-toolkit"></a>3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности 

На предыдущем занятии вы узнали о некоторых возможностях набора средств Mixed Reality (МРТК), которые необходимо предоставить, запустив первое приложение для HoloLens 2. В следующем уроке вы узнаете, как создавать и упорядочивать кнопки вместе с панелями текста пользовательского интерфейса и использовать взаимодействие по умолчанию (Touch) для взаимодействия с каждой кнопкой. Кроме того, вы освоите добавление простых действий и эффектов, например изменение размера, звука и цвета для объектов. Этот модуль предоставит основные понятия об изменении профилей МРТК, начиная с отключения визуализации пространственной сетки. 

## <a name="objectives"></a>Цели

* Настройка профилей набора средств для смешанной реальности
* Взаимодействие с голограммами с помощью элементов пользовательского интерфейса и кнопок
* Базовый ввод данных и взаимодействие с помощью средства отслеживания руки

## <a name="instructions"></a>Инструкция

### <a name="how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option"></a>Настройка профилей набора средств для смешанной реальности (изменение параметра отображения для отслеживания пространственного положения)
В этом разделе вы узнаете, как настроить и настроить профили МРТК по умолчанию, настроив параметр отображения сетки пространственной информации. Так можно настроить любые параметры или значения в профилях MRTK.

1. Выберите набор средств смешанной реальности (МРТК) в иерархии Басесцене. На панели инспектора Найдите сценарий набора средств Mixed Reality и выберите активный профиль, как показано на рисунке ниже. Дважды щелкните его, чтобы открыть.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step1im.PNG)

>Примечание. По умолчанию профили MRTK недоступны для редактирования. Это шаблоны профилей по умолчанию, которые можно копировать и настраивать. Существует несколько уровней настройки и профилей. Поэтому при настройке одного или нескольких параметров рекомендуется копировать и настраивать несколько профилей.
>
>Дополнительные сведения о профилях МРТК и их архитектуре см. в [документации по мртк](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Architecture/SpatialAwareness/SpatialAwarenessSystemArchitecture.html>).

2. Создайте копию стандартного профиля, которую мы будем настраивать. Чтобы скопировать профиль по умолчанию, щелкните Копировать & настроить (см. изображение). Будет создана копия профиля MRTK. Скопировав профиль MRTK, можно изменять в нем любые параметры. Кроме того, потребуется повторить шаг копирования и настройки для всех дополнительных профилей, вложенных в этот профиль, как описано в последующих шагах.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step2im.PNG)

3. Отключите видимость сетки отслеживания пространственного положения. Для этого найдите системные параметры пространственного отслеживания, как показано на рисунке. Нажмите кнопку клонировать справа от системного профиля пространственной информации, чтобы заменить профиль по умолчанию настраиваемой копией. Если появится всплывающее окно, нажмите кнопку клонировать, как показано на втором рисунке ниже.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step3im.PNG)

![MR213_BuildSettings](images/mrlearning-base-ch2-1step3bim.jpg)

4. Создайте пользовательскую копию стандартного наблюдателя пространственной сетки смешанной реальности. Щелкните стрелку вниз рядом с Наблюдательом пространственной сетки Windows Mixed Reality, чтобы просмотреть дополнительные параметры. В этих параметрах вы увидите, что наблюдатель пространственной сетки в смешанной реальности по умолчанию является серым (нередактируемым). Этот профиль по умолчанию следует заменить копией, которую вы сможете редактировать. Нажмите кнопку справа (отмечено зеленой стрелкой), чтобы клонировать копию.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step4im.PNG)

5. Теперь для параметра отображения укажите значение occlusion (перекрытие). Это делает пространственной сетку невидимой, но по-прежнему скрывает объекты игры за пространственной сеткой, также известные как перекрытия.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step5im.PNG)

>Примечание. Хотя пространственная сетка теперь не отображается, она по-прежнему присутствует и с ней можно взаимодействовать. Все голограммы в сетке пространственного сопоставления, например голограмма, выделенная для видимой стены, не будут видны из-за параметра перекрытия.

Поздравляем! Вы только что узнали, как изменить параметр в профиле MRTK. Как вы уже поняли, для изменения параметров MRTK нужно создать копии стандартных профилей, чтобы получить возможность редактирования. Вы всегда будете иметь профили по умолчанию, которые недоступны для редактирования, чтобы вернуться к созданию профиля с новыми параметрами или вернуться к профилям по умолчанию. Можно редактировать множество параметров. Полный справочник по параметрам профиля MRTK есть в документации MRTK: https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html.

### <a name="hand-tracking-gestures-and-interactable-buttons"></a>Обработка жестов и нажатий активных кнопок с помощью средства отслеживания руки
В этом разделе вы узнаете, как использовать отслеживание руки для нажатия кнопки.

1. Выберите активы из папки проекты.

2. Введите pressablebutton в строке поиска.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step1im.PNG)

3. Перетащите в иерархию готовый блок (прямоугольник синего цвета) с именем PressableButton. 

   > Примечание. Если вы получите сообщение об импорте TMP Essentials, импортируйте его в это время. Если TMP Essentials еще не является частью проекта, может потребоваться повторить этот шаг после импорта основных компонентов TMP, в противном случае текст кнопки может не отображаться.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step3im.PNG)

4. Дважды щелкните объект Game Прессаблебуттон, который теперь должен находиться в иерархии Басесцене, чтобы просмотреть его в сцене, как показано на рисунке ниже. Графика на кнопке может отличаться от изображения ниже. 

![MR213_BuildSettings](images/mrlearning-base-ch2-2step4im.PNG)

5. На панели инспектора нажмите кнопку Добавить событие, чтобы назначить кнопке событие, на которое будет реагировать при нажатии. В появившемся параметре откройте раскрывающееся меню и выберите ИнтерактаблеонпрессреЦиевер. Он отвечает за реагирование кнопки на событие нажатия, когда отслеживаемая рука нажимает эту кнопку.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step5im.PNG)

6. Добавьте в сцену куб. Щелкните правой кнопкой мыши в области иерархия, выберите трехмерный объект, а затем щелкните куб. На экране появится куб. Он будет отображаться очень большим. Можно настроить координаты (хотя куб по-прежнему выбран в области иерархии), чтобы уменьшить размер. Установите значения параметров x=0,1, y=0,1 и z=0,1. Следите за тем, чтобы куб в сцене оказался рядом с активной кнопкой, но не перекрывал ее. На приведенном ниже рисунке отображается куб с параметрами x=0, y=0,2 и z=1. 

   > Примечание. Обычно одна единица в Unity примерно эквивалентна одному метру в реальных условиях. Но могут быть исключения из этого правила, например для дочерних объектов масштабированных объектов.
   
   ![MR213_BuildSettings](images/mrlearning-base-ch2-1step6ima.PNG)

![MR213_BuildSettings](images/mrlearning-base-ch2-2step6imb.PNG)

7. На этом шаге вы настроите изменение цвета куба при нажатии кнопки. Выберите Прессаблебуттон в меню Басесцене. На панели Инспектор в поле выберите тип события нажмите кнопку +. Перетащите куб из меню Басесцене в поле Среда выполнения, как показано на рисунке ниже.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step7ima.PNG)

Щелкните раскрывающийся список без функции. Выберите Мешрендерер, а затем щелкните материальный материал. Это позволяет изменить материал при нажатии кнопки. 

![MR213_BuildSettings](images/mrlearning-base-ch2-2step7imb.PNG)

Перейдите на панель "проект" и найдите материал, который вы хотите изменить. Вы собираетесь использовать материал MRTK_Standard_Cyan для этого примера, который можно найти, введя "голубой" на панели поиска на вкладке проекта. (МРТК включает множество материалов и цветов для выбора.) Перетащите материал в поле под Мешрендерер. Material. Чтобы просмотреть материалы MRTK, откройте элемент Assets>MixedRealityToolkit.SDK>StandardAssets>Materials.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step7imc.PNG)

Теперь при нажатии кнопки цвет куба будет изменяться в соответствии с выбранным материалом. В нашем примере цвет куба изменяется на голубой.

8. Теперь следует настроить действие отпускания таким образом, чтобы при нем кнопка восстанавливала исходный цвет. Повторите шаг 7 выше. Но на этот раз с событием onRelease вместо события onRelease, как показано на рисунке ниже.

9.  На панели "проект" выполните поиск по умолчанию для куба, по которому будет выпуск кнопки. В этом случае мы выбрали MRTK_Standard_LightGray. Перетащите материал в поле под полем Мешрендерер. Material.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step8im.PNG)

Теперь при нажатии кнопки он изменится на новый цвет, голубой. Когда кнопка будет отпущена, она вернется к заданному вами цвету по умолчанию (например, светло-серым цветом). Нажмите кнопку Воспроизведение в верхней части экрана, чтобы испытать его в редакторе или развернуть в HoloLens 2 для тестирования. Дополнительные сведения о моделировании в редакторе, включая моделирование руки, см. на [странице документации по моделированию мртк](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/InputSimulation/InputSimulationService.html>). 

### <a name="creating-a-panel-of-buttons-using-mrtks-grid-object-collection"></a>Создание панели кнопок с помощью коллекции объектов сетки MRTK

В этом разделе вы узнаете, как автоматически выровняйте несколько кнопок в удобном пользовательском интерфейсе с помощью средства Гридобжектколлектион МРТК.

1. Дублировать кнопку из предыдущего раздела, пока не будут пять кнопок. Это можно сделать несколькими способами:
- Щелкните правой кнопкой мыши кнопку и выберите команду Копировать. Затем щелкните правой кнопкой мыши под кнопкой и выберите команду Вставить. 
- Щелкните правой кнопкой мыши кнопку и выберите пункт Дублировать. 
- Используйте команду "клавиатура", щелкнув куб и нажав клавиши CTRL D на клавиатуре.

Повторяйте это, пока не будут пять кнопок. см. пять красных стрелок на рисунке ниже.

![Mrlearning Base Ch2 3Step1im](images/mrlearning-base-ch2-3step1im.PNG)

2. Сгруппируйте кнопки в пустой родительский игровой объект. Чтобы иметь кнопки в коллекции Grid, необходимо сгруппировать кнопки под общим родительским объектом. Щелкните правой кнопкой мыши хиеарачи и выберите Создать пусто. Будет создан пустой игровой объект, в который можно поместить все кнопки. Он отображается как gameObject. Щелкните правой кнопкой мыши и переименуйте его, Буттонколлектион.

![Mrlearning Base Ch2 3Step2im](images/mrlearning-base-ch2-3step2im.PNG)

3. Переместите все кнопки в новую коллекцию. Для этого выберите все пять объектов Button в иерархии и перетащите их все в разделе Буттонколлектион Game Object, как показано на рисунке ниже. Совет. Выберите несколько элементов, удерживая нажатой клавишу CTRL при выборе элементов.

![Mrlearning Base Ch2 3Step3imb](images/mrlearning-base-ch2-3step3imb.PNG)

4. Добавьте компонент коллекции объектов Grid МРТК в коллекцию кнопок. Для этого выберите родительский объект Буттонколлектион. На панели инспектора нажмите кнопку Добавить компонент. Выполните поиск коллекции объектов Grid на панели поиска и выберите ее, когда она появится в списке.

![Mrlearning Base Ch2 3Step4im](images/mrlearning-base-ch2-3step4im.PNG)

Компонент коллекции объектов Grid позволяет организовать кнопки или любой набор объектов в виде привлекательной строки, столбца или сетки. Это один из стандартных блоков, предоставляемых МРТК, который предоставляет быстрый и простой способ создания заманчив пользовательских интерфейсов.

5. Настройте коллекцию объектов сетки. Чтобы обеспечить пользователю все кнопки, выберите тип ориентации. Затем выберите лицевой стороны родительский узел вперед, как показано на рисунке ниже. Затем измените размер ячейки, чтобы задать интервал между кнопками. Начните с 0,12 единиц на 0,12 единицы измерения ширины и высоты ячейки, как показано на рисунке ниже. Может потребоваться изменить эти значения в зависимости от выбранных ресурсов объектов и кнопок. Убедитесь, что для строк задано значение 1. Щелкните обновить коллекцию. Сцена будет выглядеть примерно так, как показано на рисунке ниже. 


![Mrlearning Base Ch2 3Step5im](images/mrlearning-base-ch2-3step5im.PNG)

>Примечание. В зависимости от ориентации дочерних объектов или родительского объекта, для будущих проектов, скорее всего, придется изменить настройки ориентации. В полях Cell Width (Ширина ячейки) и Cell Height (Высота ячейки), возможно, также потребуется указать другие значения. Это зависит от размера объектов в коллекции.

### <a name="adding-text-into-your-scene"></a>Добавление текста в сцену

Из этого раздела вы узнаете, как добавлять текст в сцены смешанной реальности и редактировать его. Включите TextMeshPro в Unity, выполнив приведенные [здесь](https://docs.unity3d.com/Packages/com.unity.textmeshpro@2.0/manual/index.html#installation) инструкции, если вы этого еще не сделали.

1. Выберите родительский объект Буттонколлектион и щелкните правой кнопкой мыши коллекцию. В раскрывающемся меню разверните трехмерный объект. Затем выберите Текстмешпро-Text. В коллекции кнопок должен отобразиться объект Текстмешпро, как показано на рисунке ниже.

![Урок 2, глава 4, шаг 1a](images/Lesson2_Chapter4_Step1a.JPG)
![Урок 2, глава 4, шаг 1b](images/Lesson2_Chapter4_Step1b.JPG)

2. Чтобы улучшить размер текста и размещение для удобочитаемости, настройте поле Размер шрифта в компоненте Текстмешпро, чтобы изменить размер шрифта. Кроме того, необходимо настроить расположение и масштаб преобразования Rect, как показано на рисунке ниже. Значения, используемые для настройки текста, см. на рисунке ниже. Вы можете использовать эти значения в качестве отправной точки для дальнейшего улучшения размера и размещения текстового поля.

![Lesson2 Chapter4 шаг 3](images/Lesson2_Chapter4_Step3.JPG)

3. В текстовом поле компонента Текстмешпро на панели инспектора, как показано ниже. Введите текст коллекции кнопок. Текст отображается в сцене, но будет скрыт позади кнопок и/или неправильного размера.

![Lesson2 Chapter4 шаг 2](images/Lesson2_Chapter4_Step2.JPG)
![Lesson2 Chapter4 шаг 4](images/Lesson2_Chapter4_Step4.JPG)

4. Чтобы изменить текстовые значения для объектов Button, щелкните стрелку рядом с кнопкой, чтобы развернуть ее, и перейдите к объекту Сиитсайитлабел. Перейдите по адресу Текстмешпро, где можно изменить текст на кнопки, как описано в приведенных выше шагах.

![Урок 2, глава 4, шаг 5](images/Lesson2_Chapter4_Step5.JPG)

## <a name="congratulations"></a>Поздравляем!
В рамках этого урока вы научились копировать и настраивать параметр профиля MRTK (видимость сетки отслеживания пространственного положения). Кроме того, вы узнали, как вызывать события для кнопки с помощью функции отслеживания руки в HoloLens 2. Наконец, вы создали простой пользовательский интерфейс с помощью Text Mesh Pro в Unity и компонента коллекции объектов сетки в MRTK.

[Следующий урок. 4. Размещение динамического содержимого и использование решателей](mrlearning-base-ch3.md)

