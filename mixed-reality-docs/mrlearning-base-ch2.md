---
title: Основной модуль обучения работе со смешанной реальностью. Настройка пользовательского интерфейса, средства отслеживания руки и набора средств для смешанной реальности (MRTK)
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
ms.localizationpriority: high
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 1800d36b7292b9cb53b09fdd4b9c4fb763d49e79
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2019
ms.locfileid: "65730943"
---
# <a name="mr-learning-base-module---user-interface-hand-tracking-and-mixed-reality-toolkit-configuration"></a>Основной модуль обучения работе со смешанной реальностью. Настройка пользовательского интерфейса, средства отслеживания руки и набора средств для смешанной реальности (MRTK)

В рамках предыдущего урока вы изучили некоторые возможности, которые предлагает MRTK, начав работу с простейшего приложения для HoloLens 2. Из этого урока вы узнаете, как создать и упорядочить кнопки и текстовые панели пользовательского интерфейса, а также применить для каждой из кнопок взаимодействие по умолчанию (касание). Кроме того, вы освоите добавление простых действий и эффектов, например изменение размера, звука и цвета для объектов. В этом модуле раскрываются основные понятия, связанные с изменением профилей MRTK, начиная с отключения визуализации пространственной сетки. 

## <a name="objectives"></a>Задачи

* Настройка профилей набора средств для смешанной реальности
* Взаимодействие с голограммами через кнопки и элементы пользовательского интерфейса
* Базовый ввод данных и взаимодействие с помощью средства отслеживания руки

## <a name="instructions"></a>Инструкция

### <a name="how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option"></a>Настройка профилей набора средств для смешанной реальности (изменение параметра отображения для отслеживания пространственного положения)
Из этого раздела вы узнаете, как настраивать установленные по умолчанию профили набора средств для смешанной реальности, на примере параметра отображения для сетки отслеживания пространственного положения. Так можно настроить любые параметры или значения в профилях MRTK.

1. Выберите набор средств для смешанной реальности (MRTK) из элемента иерархии BaseScene. На панели инспектора найдите Mixed Reality Toolkit Script (Скрипт набора средств для смешанной реальности) и выберите действие активации профиля, как показано на рисунке ниже. Дважды щелкните его, чтобы открыть.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step1im.PNG)

>Примечание. По умолчанию профили MRTK недоступны для редактирования. Эти стандартные профили служат шаблонами, которые можно копировать и адаптировать. Есть несколько уровней настройки и профилей. Поэтому при настройке одного или нескольких параметров обычно нужно скопировать и адаптировать несколько профилей.
>
>Дополнительные сведения о профилях MRTK и их архитектуре см. в [документации по MRTK](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Architecture/SpatialAwareness/SpatialAwarenessSystemArchitecture.html>).

2. Создайте копию стандартного профиля, которую мы будем настраивать. Чтобы скопировать профиль по умолчанию, нажмите кнопку Copy & Customize (Копировать и настроить), как показано на рисунке. Будет создана копия профиля MRTK. Скопировав профиль MRTK, можно изменять в нем любые параметры. Эту же процедуру копирования и настройки нужно повторить для каждого дополнительного профиля, который является дочерним для основного, как описано в приведенных далее инструкциях.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step2im.PNG)

3. Отключите видимость сетки отслеживания пространственного положения. Для этого найдите элемент Spatial Awareness System Settings (Параметры сетки отслеживания пространственного положения), как показано на рисунке. Нажмите кнопку клонирования справа от профиля сетки отслеживания пространственного положения, чтобы заменить стандартный профиль доступной для редактирования копией. Если появится всплывающее окно, нажмите в нем кнопку клонирования, как показано на втором рисунке внизу.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step3im.PNG)

![MR213_BuildSettings](images/mrlearning-base-ch2-1step3bim.jpg)

4. Создайте пользовательскую копию стандартного наблюдателя пространственной сетки смешанной реальности. Щелкните стрелку вниз рядом с элементом Windows Mixed Reality Spatial Mesh Observer (Наблюдатель пространственной сетки смешанной реальности), чтобы открыть его дополнительные параметры. В разделе параметров вы увидите серый (то есть недоступный для редактирования) элемент Default Mixed Reality Spatial Mesh Observer (Наблюдатель пространственной сетки смешанной реальности по умолчанию). Этот профиль по умолчанию следует заменить копией, которую вы сможете редактировать. Щелкните кнопку справа (которая отмечена зеленой стрелкой), чтобы создать такую копию.

![MR213_BuildSettings](images/mrlearning-base-ch2-1step4im.PNG)

5. Теперь для параметра отображения укажите значение occlusion (перекрытие). Теперь пространственная сетка станет невидимой, но будет по-прежнему скрывать игровые объекты (такой режим и называется перекрытием).

![MR213_BuildSettings](images/mrlearning-base-ch2-1step5im.PNG)

>Примечание. Хотя пространственная сетка теперь не отображается, она по-прежнему присутствует и с ней можно взаимодействовать. Любая голограмма позади пространственной сетки (например, за видимой стеной), не будет отображаться в режиме перекрытия.

Поздравляем! Вы только что узнали, как изменить параметр в профиле MRTK. Как вы уже поняли, для изменения параметров MRTK нужно создать копии стандартных профилей, чтобы получить возможность редактирования. Стандартные профили всегда остаются доступными (но не редактируемыми), чтобы вы могли к ним вернуться для создания новых профилей с новыми настройками или для восстановления значений по умолчанию. Можно редактировать множество параметров. Полный справочник по параметрам профиля MRTK есть в документации MRTK: https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html.

### <a name="hand-tracking-gestures-and-interactable-buttons"></a>Обработка жестов и нажатий активных кнопок с помощью средства отслеживания руки
Из этого раздела вы узнаете, как обрабатывать нажатие активной кнопки с использованием средства отслеживания руки.

1. Выберите Assets (Ресурсы) в папке проектов.

2. Введите pressablebutton в строке поиска.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step1im.PNG)

3. Перетащите в иерархию готовый блок (прямоугольник синего цвета) с именем PressableButton. 

   > Примечание. Если вы получите сообщение об импорте TMP Essentials, выполните этот импорт. Если в проекте еще не приходилось использовать TMP Essentials, возможно, этот шаг придется повторить после импорта TMP Essentials. Иначе текст кнопки может не отображаться.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step3im.PNG)

4. Дважды щелкните игровой объект PressableButton (который теперь включен в иерархию BaseScene), чтобы просмотреть его в своей сцене, как показано на рисунке ниже (графические элементы на кнопке могут выглядеть иначе). 

![MR213_BuildSettings](images/mrlearning-base-ch2-2step4im.PNG)

5. На панели инспектора нажмите кнопку Add Event (Добавить событие), чтобы привязать к этой кнопке событие, выполняемое при ее нажатии. Щелкните раскрывающееся меню в предложенном поле для выбора. Выберите элемент InteractableOnPressReciever. Он отвечает за реагирование кнопки на событие нажатия, когда отслеживаемая рука нажимает эту кнопку.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step5im.PNG)

6. Добавьте в сцену куб. Щелкните правой кнопкой мыши в области иерархии, выберите 3D object (Трехмерный объект) и щелкните вариант cube (куб). На экране появится куб. Он будет очень большим, поэтому нужно изменить координаты (пока куб выбран в области иерархии) для уменьшения размера. Установите значения параметров x=0,1, y=0,1 и z=0,1. Следите за тем, чтобы куб в сцене оказался рядом с активной кнопкой, но не перекрывал ее. На приведенном ниже рисунке отображается куб с параметрами x=0, y=0,2 и z=1. 

   > Примечание. Обычно одна единица в Unity примерно эквивалентна одному метру в реальных условиях. Но могут быть исключения из этого правила, например для дочерних объектов масштабированных объектов.
   
   ![MR213_BuildSettings](images/mrlearning-base-ch2-1step6ima.PNG)

![MR213_BuildSettings](images/mrlearning-base-ch2-2step6imb.PNG)

7. На этом шаге вы настроите изменение цвета куба при нажатии кнопки. Выберите PressableButton в меню BaseScene. На панели инспектора щелкните "+" под полем Select Event Type (Выберите тип события). Перетащите куб из меню BaseScene в поле Runtime Only (Только в среде выполнения), как показано на рисунке ниже.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step7ima.PNG)

Щелкните раскрывающийся список, где отображается надпись No Function (Нет функции). Выберите MeshRenderer, а затем Material material (Физический материал). Это позволит изменить материал при нажатии кнопки. 

![MR213_BuildSettings](images/mrlearning-base-ch2-2step7imb.PNG)

Перейдите на панель проекта и выполните поиск нужного материала. Для нашего примера вам нужен материал MRTK_Standard_Cyan. Чтобы найти его, можно ввести cyan в строке поиска на вкладке проекта (в MRTK доступно много материалов и цветов). Перетащите найденный материал в поле под меткой MeshRenderer.material. Чтобы просмотреть материалы MRTK, откройте элемент Assets>MixedRealityToolkit.SDK>StandardAssets>Materials.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step7imbb.PNG)

![MR213_BuildSettings](images/mrlearning-base-ch2-1step7imc.PNG)

Теперь при нажатии кнопки цвет куба будет изменяться в соответствии с выбранным материалом. В нашем примере цвет куба изменяется на голубой.

8. Теперь следует настроить действие отпускания таким образом, чтобы при нем кнопка восстанавливала исходный цвет. Повторите шаг 7 (описанный выше), но теперь для события OnRelease вместо OnPress, как показано на рисунке ниже.

9.  На панели проекта выполните поиск материала, который будет установлен для куба после отпускания кнопки (в нашем примере выбран вариант MRTK_Standard_LightGray). Перетащите найденный материал в поле под меткой MeshRenderer.material.

![MR213_BuildSettings](images/mrlearning-base-ch2-2step8im.PNG)

Теперь при нажатии кнопки она будет менять цвет на новый (голубой), а при отпускании возвращаться к указанному цвету по умолчанию (светло-серому). Нажмите кнопку Play (Воспроизведение) в верхней части экрана, чтобы проверить работу прямо в редакторе или развернуть сцену в HoloLens 2 для тестирования. Дополнительные сведения о моделировании в редакторе, в том числе о моделировании руки, есть на [странице документации по моделированию в MRTK](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/InputSimulation/InputSimulationService.html>). 

### <a name="creating-a-panel-of-buttons-using-mrtks-grid-object-collection"></a>Создание панели кнопок с помощью коллекции объектов сетки MRTK

Из этого раздела вы узнаете, как автоматически выровнять несколько кнопок с помощью средства GridObjectCollection из MRTK, чтобы получить аккуратный пользовательский интерфейс.

1. Теперь нужно продублировать созданную в рамках предыдущего раздела кнопку таким образом, чтобы получить пять кнопок. Это можно сделать несколькими способами:
- Щелкните кнопку правой кнопкой мыши и выберите действие копирования, а затем щелкните правой кнопкой мыши пространство под кнопкой и выберите действие вставки. 
- Щелкните кнопку правой кнопкой мыши и выберите действие дублирования. 
- Щелкните куб и выполните команду с клавиатуры, нажав сочетание клавиш "CTRL+D".

Повторяйте эти действия, пока общее количество кнопок не достигнет пяти (пять красных стрелок на рисунке ниже).

![Mrlearning Base Ch2 3Step1im](images/mrlearning-base-ch2-3step1im.PNG)

2. Сгруппируйте кнопки в пустой родительский игровой объект. Чтобы кнопки относились к одной коллекции сетки, их нужно сгруппировать в общий родительский объект. Щелкните иерархию правой кнопкой мыши и выберите действие Create empty (Создать пустой). Будет создан пустой игровой объект, в который можно поместить все кнопки. Он будет отображаться как gameObject. Щелкните объект правой кнопкой мыши и переименуйте его в ButtonCollection.

![Mrlearning Base Ch2 3Step2im](images/mrlearning-base-ch2-3step2im.PNG)

3. Переместите все кнопки в новую коллекцию. Для этого выберите все пять объектов кнопок в иерархии и перетащите их в игровой объект ButtonCollection, как показано на рисунке ниже. Чтобы выбрать несколько элементов, щелкните их, удерживая нажатой клавишу CTRL.

![Mrlearning Base Ch2 3Step3imb](images/mrlearning-base-ch2-3step3imb.PNG)

4. Добавьте в коллекцию кнопок компонент коллекции объектов сетки MRTK.  Для этого выберите родительский объект ButtonCollection и щелкните Add Component (Добавить компонент) на панели инспектора. Выполните поиск по фразе "Grid Object Collection" (Коллекция объектов сетки) и выберите соответствующий объект, когда он появится в списке.

![Mrlearning Base Ch2 3Step4im](images/mrlearning-base-ch2-3step4im.PNG)

Компонент коллекции объектов сетки позволяет упорядочить кнопки или набор любых других объектов в аккуратный ряд, столбец или сетку. Это один из стандартных блоков , которые MRTK предоставляет для быстрого и простого создания привлекательных пользовательских интерфейсов.

5. Настройте коллекцию объектов сетки. Чтобы рабочие поверхности всех кнопок были обращены к пользователю, щелкните список Orient type (Тип ориентации) и выберите вариант Face parent forward (Лицевой стороной к родительскому элементу). Затем измените размер ячейки, чтобы задать интервал между кнопками. Для начала задайте для ячейки длину 0,12 единиц и ширину 0,12 единиц, как показано на рисунке ниже. В зависимости от выбранных параметров ресурсов для объекта и кнопки, возможно, потребуется изменить эти значения. Для параметра Rows (Строки) укажите значение 1. Щелкните Update Collection (Обновить коллекцию), и сцена примет примерно следующий вид: 


![Mrlearning Base Ch2 3Step5im](images/mrlearning-base-ch2-3step5im.PNG)

>Примечание. В зависимости от ориентации дочерних объектов или родительского объекта, для будущих проектов, скорее всего, придется изменить настройки ориентации. В полях Cell Width (Ширина ячейки) и Cell Height (Высота ячейки), возможно, также потребуется указать другие значения. Это зависит от размера объектов в коллекции.

### <a name="adding-text-into-your-scene"></a>Добавление текста в сцену

Из этого раздела вы узнаете, как добавлять текст в сцены смешанной реальности и редактировать его. Включите TextMeshPro в Unity, выполнив приведенные [здесь](https://docs.unity3d.com/Packages/com.unity.textmeshpro@2.0/manual/index.html#installation) инструкции, если вы этого еще не сделали.

1. Выберите родительский объект ButtonCollection и щелкните его правой кнопкой мыши. Разверните раскрывающееся меню 3D object (Трехмерный объект) и выберите вариант TextMeshPro - Text (TextMeshPro — текст). В коллекции кнопок панели должен появиться объект TextMeshPro, как показано на рисунке ниже.

![Урок 2, глава 4, шаг 1a](images/Lesson2_Chapter4_Step1a.JPG)
![Урок 2, глава 4, шаг 1b](images/Lesson2_Chapter4_Step1b.JPG)

2. В текстовом поле компонента TextMeshPro (на панели инспектора, как показано ниже) введите значение "Button Collection Text" (Текст для коллекции кнопок). Этот текст сразу появится в сцене, но он будет скрыт за кнопками и (или) иметь неправильный размер.

![Урок 1, глава 4, шаг 2](images/Lesson2_Chapter4_Step2.JPG)

3. Чтобы было удобнее читать текст, измените его размер и размещение. Для этого выберите подходящее значение в поле font size (размер шрифта) для компонента TextMeshPro. Также следует изменить положение и размер объекта Rect Transform (Прямоугольное преобразование), как показано на рисунке ниже. На приведенных ниже рисунках отображаются значения, которые мы применили в тестовой конфигурации. Вы можете использовать их в качестве отправной точки и дополнительно улучшить размер, а также положение текстового поля.

![Урок 2, глава 4, шаг 3](images/Lesson2_Chapter4_Step3.JPG)
![Урок 2, глава 4, шаг 4](images/Lesson2_Chapter4_Step4.JPG)

5. Чтобы изменить текстовые значения для объекта кнопки, щелкните стрелку рядом с нужной кнопкой, чтобы развернуть ее, и последовательно перейдите к объектам SeeItSayItLabel и TextMeshPro. Здесь можно изменить текст подписей к кнопкам, как описано ранее.

![Урок 2, глава 4, шаг 5](images/Lesson2_Chapter4_Step5.JPG)

### <a name="congratulations"></a>Поздравляем!
В рамках этого урока вы научились копировать и настраивать параметр профиля MRTK (видимость сетки отслеживания пространственного положения). Кроме того, вы узнали, как вызывать события для кнопки с помощью функции отслеживания руки в HoloLens 2. Наконец, вы создали простой пользовательский интерфейс с помощью Text Mesh Pro в Unity и компонента коллекции объектов сетки в MRTK.

[Следующий урок. Динамическое размещение содержимого и решатели](mrlearning-base-ch3.md)

