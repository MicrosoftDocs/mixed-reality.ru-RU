---
title: Учебники по началу работы — 3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 0595010a0b443d88e3f208b785903e3f6cc99295
ms.sourcegitcommit: 2cf3f19146d6a7ba71bbc4697a59064b4822b539
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2019
ms.locfileid: "73926531"
---
# <a name="3-creating-user-interface-and-configure-mixed-reality-toolkit"></a>3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности

На предыдущем занятии вы узнали о некоторых возможностях набора средств Mixed Reality (МРТК), которые необходимо предоставить, запустив первое приложение для HoloLens 2. В следующем уроке вы узнаете, как создавать и упорядочивать кнопки вместе с панелями текста пользовательского интерфейса и использовать взаимодействие по умолчанию (Touch) для взаимодействия с каждой кнопкой. Кроме того, вы освоите добавление простых действий и эффектов, например изменение размера, звука и цвета для объектов. Этот модуль предоставит основные понятия об изменении профилей МРТК, начиная с отключения визуализации сетки [пространственного сопоставления](spatial-mapping.md) .

## <a name="objectives"></a>Задачи

* Настройка профилей набора средств для смешанной реальности
* Взаимодействие с голограммами с помощью элементов пользовательского интерфейса и кнопок
* Базовый ввод данных и взаимодействие с помощью средства отслеживания руки

## <a name="instructions"></a>Инструкция

### <a name="how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option"></a>Настройка профилей набора средств для смешанной реальности (изменение параметров отображения сведений о пространственном состоянии)

В этом разделе вы узнаете, как настроить и настроить профили МРТК по умолчанию, настроив параметр отображения сетки пространственной информации. Так можно настроить любые параметры или значения в профилях MRTK.

1. Выберите набор средств смешанной реальности (МРТК) в иерархии Басесцене. На панели инспектора Найдите сценарий набора средств Mixed Reality и выберите активный профиль, как показано на рисунке ниже. Дважды щелкните его, чтобы открыть.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step1.png)

    >[!NOTE]
    >По умолчанию профили MRTK недоступны для редактирования. Это шаблоны профилей по умолчанию, которые можно копировать и настраивать. Существует несколько уровней настройки и профилей. Поэтому при настройке одного или нескольких параметров рекомендуется копировать и настраивать несколько профилей.
    >
    >Дополнительные сведения о профилях МРТК и их архитектуре см. в [документации по мртк](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html>).

2. Создайте копию стандартного профиля, которую мы будем настраивать. Для начала нажмите кнопку **копировать & настроить**.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step2a.png)

    Откроется всплывающее окно *профиля клонирования* .

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step2b.png)

    Щелкните **клонировать** , чтобы создать копию профиля мртк. Скопировав профиль MRTK, можно изменять в нем любые параметры. Кроме того, потребуется повторить шаг копирования и настройки для всех дополнительных профилей, вложенных в этот профиль, как описано в последующих шагах.

3. Отключите видимость сетки отслеживания пространственного положения. Для этого найдите системные параметры пространственного отслеживания, как показано на рисунке ниже. Убедитесь, что установлен параметр **Включить системную поддержку пространственного распознавания** . Нажмите кнопку **клонировать** справа от системного профиля пространственной информации, чтобы заменить профиль по умолчанию настраиваемой копией. В появившемся всплывающем окне нажмите кнопку **клонировать** , как показано на втором рисунке ниже.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step3a.png)

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step3b.png)

4. Создайте пользовательскую копию стандартного наблюдателя пространственной сетки смешанной реальности. Щелкните стрелку вниз рядом с Наблюдательом пространственной сетки Windows Mixed Reality, чтобы просмотреть дополнительные параметры.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step4a.png)

    В этих параметрах вы увидите, что наблюдатель пространственной сетки в смешанной реальности по умолчанию является серым (нередактируемым). Этот профиль по умолчанию следует заменить копией, которую вы сможете редактировать. Как и ранее, нажмите кнопку **клонировать** , а затем в появившемся всплывающем окне нажмите кнопку **клонировать** , как показано на втором рисунке ниже.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step4b.png)

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step4c.png)

5. Теперь для параметра отображения укажите значение occlusion (перекрытие). Это делает сетку пространственных сопоставлений невидимой, но по-прежнему скрывает объекты игры за сеткой пространственного сопоставления, также называемой перекрытия.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-1-step5.png)

    >[!NOTE]
    >Примечание. в то время как сетка пространственных сопоставлений не отображается, она по-прежнему существует и может взаимодействовать с ней. Все голограммы в сетке пространственного сопоставления, например голограмма, выделенная для видимой стены, не будут видны из-за параметра перекрытия.

Поздравляем! Вы только что узнали, как изменить параметр в профиле MRTK. Как вы уже поняли, для изменения параметров MRTK нужно создать копии стандартных профилей, чтобы получить возможность редактирования. Вы всегда будете иметь профили по умолчанию, которые недоступны для редактирования, чтобы вернуться к созданию профиля с новыми параметрами или вернуться к профилям по умолчанию. Можно редактировать множество параметров. Полный справочник по параметрам профиля МРТК см. в документации по МРТК: [https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html)

### <a name="hand-tracking-gestures-and-interactable-buttons"></a>Обработка жестов и нажатий активных кнопок с помощью средства отслеживания руки

В этом разделе вы узнаете, как использовать отслеживание руки для нажатия кнопки.

1. Выберите активы из папки проекты.

2. В строке поиска введите "PressableButtonHoloLens2".

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step2.png)

3. Перетащите prefab (представленный синим прямоугольником) с именем "PressableButtonHoloLens2" в иерархию и установите для значений позиций значения x = 0, y = 0 и z = 0,2, чтобы кнопка была перед камерой. (Камера располагается на месте происхождения).

    >[!NOTE]
    >Если вы получите сообщение об импорте TMP Essentials, импортируйте его в это время. Если TMP Essentials еще не является частью проекта, может потребоваться повторить этот шаг после импорта основных компонентов TMP, в противном случае текст кнопки может не отображаться.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step3.png)

4. Добавьте в сцену куб. Щелкните правой кнопкой мыши в области иерархия, выберите трехмерный объект, а затем щелкните куб.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step6a.png)

    На экране появится куб. Он будет отображаться очень большим. Можно настроить координаты (хотя куб по-прежнему выбран в области иерархии), чтобы уменьшить размер. Установите значения шкалы x = 0,02, y = 0,02 и z = 0,02. Убедитесь, что куб находится в сцене рядом с кнопкой, но не пересекается с ней. На приведенном ниже рисунке расположение куба равно x = 0, y = 0,4 и z = 0,2.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step6b.png)

    >[!NOTE]
    >Обычно одна единица в Unity примерно эквивалентна одному метру в реальных условиях. Но могут быть исключения из этого правила, например для дочерних объектов масштабированных объектов.

5. Выбрав объект Game PressableButtonHoloLens2, в инспекторе прокрутите вниз, чтобы перейти к разделу события в компоненте "взаимодействие (скрипт)".

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step4.png)

6. Мы изменим существующее событие, чтобы дать кнопке событие, на которое будет реагировать при отправке. Как видите, для типа приемника событий задано значение Интерактаблеонпрессрецеивер. Он отвечает за реагирование кнопки на событие нажатия, когда отслеживаемая рука нажимает эту кнопку. На этом этапе следует также изменить фильтр взаимодействия на близко и далеко.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step5.png)

7. На этом шаге вы настроите изменение цвета куба при нажатии кнопки. Выберите PressableButtonHoloLens2 в иерархии Басесцене и перетащите объект "игра Куба" из иерархии Басесцене в поле время выполнения, как показано на рисунке ниже.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step7a.png)

    Щелкните раскрывающийся список без функции. Выберите Мешрендерер, а затем щелкните материальный материал. Это позволяет изменить материал при нажатии кнопки.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step7b.png)

    Щелкните окружность рядом с полем пустой материал, чтобы открыть всплывающее окно Выбор материала. МРТК включает множество материалов и цветов для выбора. В этом примере вы собираетесь использовать материал MRTK_Standard_Cyan, который можно найти, введя в поле "MRTK_Standard" всплывающую панель поиска. Выберите MRTK_Standard_Cyan материал, чтобы заполнить поле "материал".

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step7c.png)

    Теперь при нажатии кнопки цвет куба будет изменяться в соответствии с выбранным материалом. В нашем примере цвет куба изменяется на голубой.

8. Теперь следует настроить действие отпускания таким образом, чтобы при нем кнопка восстанавливала исходный цвет. Повторите шаг 7 выше. Но на этот раз с событием onRelease вместо MRTK_Standard_LightGray материала, как показано на рисунке ниже.

    ![MR213_BuildSettings](images/mrlearning-base-ch2-2-step8.png)

    Теперь при нажатии кнопки он изменится на новый цвет, голубой. Когда кнопка будет отпущена, она вернется к заданному вами цвету по умолчанию (например, светло-серым цветом). Нажмите кнопку Воспроизведение в верхней части экрана, чтобы испытать его в редакторе или развернуть в HoloLens 2 для тестирования. Дополнительные сведения о моделировании в редакторе, включая моделирование руки, см. на [странице документации по моделированию мртк](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/InputSimulation/InputSimulationService.html>).

### <a name="creating-a-panel-of-buttons-using-mrtks-grid-object-collection"></a>Создание панели кнопок с помощью коллекции объектов сетки MRTK

В этом разделе вы узнаете, как автоматически выровняйте несколько кнопок в удобном пользовательском интерфейсе с помощью средства Гридобжектколлектион МРТК.

1. Дублировать кнопку из предыдущего раздела, пока не будут пять кнопок. Это можно сделать несколькими способами: — щелкните правой кнопкой мыши кнопку и выберите команду Копировать. Затем щелкните правой кнопкой мыши под кнопкой и выберите команду Вставить.
    — Щелкните правой кнопкой мыши кнопку и выберите пункт Дублировать.
    — Используйте команду с клавиатурой, щелкнув куб и нажав клавиши CTRL D на клавиатуре.

    Повторяйте это, пока не будут пять кнопок. см. пять красных стрелок на рисунке ниже.

    ![Mrlearning Base Ch2 3Step1im](images/mrlearning-base-ch2-3step1im.PNG)

2. Сгруппируйте кнопки в пустой родительский игровой объект. Чтобы иметь кнопки в коллекции Grid, необходимо сгруппировать кнопки под общим родительским объектом. Щелкните правой кнопкой мыши хиеарачи и выберите Создать пусто. Будет создан пустой игровой объект, в который можно поместить все кнопки. Он отображается как gameObject. Щелкните правой кнопкой мыши и переименуйте его, Буттонколлектион.

    ![Mrlearning Base Ch2 3Step2im](images/mrlearning-base-ch2-3step2im.PNG)

3. Переместите все кнопки в новую коллекцию. Для этого выберите все пять объектов Button в иерархии и перетащите их все в разделе Буттонколлектион Game Object, как показано на рисунке ниже. Совет. Выберите несколько элементов, удерживая нажатой клавишу CTRL при выборе элементов.

    ![Mrlearning Base Ch2 3Step3imb](images/mrlearning-base-ch2-3step3imb.PNG)

4. Добавьте компонент коллекции объектов Grid МРТК в коллекцию кнопок. Для этого выберите родительский объект Буттонколлектион. На панели инспектора нажмите кнопку Добавить компонент. Выполните поиск коллекции объектов Grid на панели поиска и выберите ее, когда она появится в списке.

    ![Mrlearning Base Ch2 3Step4im](images/mrlearning-base-ch2-3-step4.png)

    Компонент коллекции объектов Grid позволяет организовать кнопки или любой набор объектов в виде привлекательной строки, столбца или сетки. Это один из стандартных блоков, предоставляемых МРТК, который предоставляет быстрый и простой способ создания заманчив пользовательских интерфейсов.

5. Настройте коллекцию объектов сетки. Чтобы обеспечить пользователю все кнопки, выберите тип ориентации. Затем выберите лицевой стороны родительский узел вперед, как показано на рисунке ниже. Затем измените размер ячейки, чтобы задать интервал между кнопками. Начните с 0,05 единиц на 0,05 единицы измерения ширины и высоты ячейки, как показано на рисунке ниже. Убедитесь, что для параметра distance задано значение 0, а для строк задано значение 1. Щелкните обновить коллекцию. Сцена будет выглядеть примерно так, как показано на рисунке ниже.

    ![Mrlearning Base Ch2 3Step5im](images/mrlearning-base-ch2-3-step5.png)

    >[!NOTE]
    >В зависимости от ориентации дочерних объектов или родительского объекта, для будущих проектов, скорее всего, придется изменить настройки ориентации. В полях Cell Width (Ширина ячейки) и Cell Height (Высота ячейки), возможно, также потребуется указать другие значения. Это зависит от размера объектов в коллекции.

### <a name="adding-text-into-your-scene"></a>Добавление текста в сцену

Из этого раздела вы узнаете, как добавлять текст в сцены смешанной реальности и редактировать его. Включите TextMeshPro в Unity, выполнив приведенные [здесь](https://docs.unity3d.com/Packages/com.unity.textmeshpro@2.0/manual/index.html#installation) инструкции, если вы этого еще не сделали.

1. Выберите родительский объект Буттонколлектион и щелкните правой кнопкой мыши коллекцию. В раскрывающемся меню разверните трехмерный объект. Затем выберите Текстмешпро-Text. В коллекции кнопок должен отобразиться объект Текстмешпро, как показано на рисунке ниже.

    ![Lesson2 Chapter4 Step1a](images/Lesson2_Chapter4_Step1a.JPG) ![Lesson2 Chapter4 Step1b](images/Lesson2_Chapter4_Step1b.JPG)

2. Чтобы улучшить размер текста и размещение для удобочитаемости, настройте поле Размер шрифта в компоненте Текстмешпро, чтобы изменить размер шрифта. Кроме того, необходимо настроить расположение и масштаб преобразования Rect, как показано на рисунке ниже. Значения, используемые для настройки текста, см. на рисунке ниже. Вы можете использовать эти значения в качестве отправной точки для дальнейшего улучшения размера и размещения текстового поля.

    ![Lesson2 Chapter4 шаг 3](images/mrlearning-base-ch2-4-step3.png)

3. В текстовом поле компонента Текстмешпро на панели инспектора введите «Text Collection Button» (текст коллекции кнопок) и измените свойства выравнивания, выровнять их по центру и верхнему краю, как показано на рисунке ниже.

    ![Lesson2 Chapter4 шаг 4](images/mrlearning-base-ch2-4-step4.png)

4. Чтобы изменить текстовые значения для объектов Button, щелкните стрелку рядом с кнопкой, чтобы развернуть ее, и перейдите к объекту Сиитсайитлабел. Перейдите по адресу Текстмешпро, где можно изменить текст на кнопки, как описано в приведенных выше шагах.

    ![Урок 2, глава 4, шаг 5](images/Lesson2_Chapter4_Step5.JPG)

## <a name="congratulations"></a>Поздравляем!

На этом занятии вы узнали, как копировать, настраивать и настраивать параметр профиля МРТК (т. е. видимость сетки пространственной информации). Вы также узнали, как взаимодействовать с кнопкой для активации событий с помощью отслеживаний руки в HoloLens 2. Наконец, вы узнали, как создать простой интерфейс ПОЛЬЗОВАТЕЛЬСКОГО интерфейса с помощью функции Text Grid для Unity и компонента коллекции объектов сетки МРТК.

[Следующее занятие: 4. размещение динамического содержимого и использование поисковых решений](mrlearning-base-ch3.md)
