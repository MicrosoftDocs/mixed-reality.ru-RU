---
title: Учебники по началу работы — 3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: f1d042150d1c81940e672b174c6c02ac71e05883
ms.sourcegitcommit: bd536f4f99c71418b55c121b7ba19ecbaf6336bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "77555053"
---
# <a name="3-creating-user-interface-and-configure-mixed-reality-toolkit"></a>3. Создание пользовательского интерфейса и настройка набора средств для смешанной реальности
<!-- TODO: Consider renaming to 'Configuring Mixed Reality Toolkit profiles and creating user interfaces' -->

В предыдущем учебном курсе вы узнали о некоторых возможностях набора средств Mixed Reality (МРТК), которые необходимо предоставить, запустив первое приложение для HoloLens 2. В этом учебнике вы узнаете, как создавать и упорядочивать кнопки вместе с панелями текста пользовательского интерфейса и использовать взаимодействие по умолчанию (Touch) для взаимодействия с каждой кнопкой. Кроме того, вы освоите добавление простых действий и эффектов, например изменение размера, звука и цвета для объектов. Этот модуль предоставит основные понятия об изменении профилей МРТК, начиная с отключения визуализации сетки [пространственного сопоставления](spatial-mapping.md) .

## <a name="objectives"></a>Задачи

* Настройка профилей набора средств для смешанной реальности
* Взаимодействие с голограммами с помощью элементов пользовательского интерфейса и кнопок
* Базовый ввод данных и взаимодействие с помощью средства отслеживания руки

## <a name="how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option"></a>Настройка профилей набора средств для смешанной реальности (изменение параметров отображения сведений о пространственном состоянии)
<!-- TODO: Consider renaming to 'How to customize the MRTK profiles' -->

В этом разделе вы узнаете, как настроить и настроить профили МРТК по умолчанию.

В этом конкретном примере показано, как скрыть сетку пространственной осведомленности, изменив параметры наблюдателя пространственной сетки. Однако вы можете следовать тем же принципам для настройки любых параметров или значений в профилях МРТК.

Ниже приведены основные шаги, которые необходимо выполнить для скрытия сетки пространственных сведений.

1. Клонировать профиль конфигурации по умолчанию
2. Включение системы распознавания пространственных
3. Клонировать профиль системы поддержки пространственного расположения по умолчанию
4. Клонирование профиля наблюдателя сетки по умолчанию для пространственного отслеживания
5. Изменение видимости сетки пространственного отслеживания

> [!NOTE]
> По умолчанию профили MRTK недоступны для редактирования. Это шаблоны профилей по умолчанию, которые необходимо клонировать, прежде чем их можно будет редактировать. Существует несколько вложенных слоев профилей. Таким образом, при настройке одного или нескольких параметров часто копируются и редактируются несколько профилей.

### <a name="1-clone-the-default-configuration-profile"></a>1. клонирование профиля конфигурации по умолчанию

> [!NOTE]
> Профиль конфигурации является профилем верхнего уровня. Следовательно, чтобы иметь возможность изменять любые другие профили, сначала необходимо клонировать профиль конфигурации.

Выбрав объект **микседреалититулкит** в окне Иерархия, в окне инспектора измените **профиль конфигурации** набора средств Mixed Reality на **DefaultHoloLens2ConfigurationProfile**:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step1-1.png)

Выбрав объект **микседреалититулкит** , в окне инспектора нажмите кнопку **Копировать & настроить** , чтобы открыть окно Профиль клона:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step1-2.png)

В окне Профиль клона нажмите кнопку **клонировать** , чтобы создать редактируемую копию **DefaultHololens2ConfigurationProfile**:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step1-3.png)

Созданный профиль конфигурации теперь назначается в качестве профиля конфигурации для сцены:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step1-4.png)

В меню Unity выберите **файл** > **сохранить** , чтобы сохранить сцену.

> [!TIP]
> Не забудьте сохранить работу в рамках этого руководства.

### <a name="2-enable-the-spatial-awareness-system"></a>2. Включение системы распознавания пространственных сведений

Если объект **микседреалититулкит** все еще выбран в окне "иерархия", в окне инспектора перейдите на вкладку **пространственное распознавание** и установите флажок **включить систему пространственной осведомленности** :

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step2-1.png)

### <a name="3-clone-the-default-spatial-awareness-system-profile"></a>3. Клонирование системного профиля сведений о пространственном распознавании по умолчанию

На вкладке **пространственное распознавание** нажмите кнопку **клонировать** , чтобы открыть окно Профиль клона:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step3-1.png)

В окне Профиль клона нажмите кнопку **клонировать** , чтобы создать редактируемую копию **дефаултмикседреалитиспатиалаваренесссистемпрофиле**:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step3-2.png)

Вновь созданный профиль системы пространственного отслеживания автоматически назначается профилю конфигурации:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step3-3.png)

### <a name="4-clone-the-default-spatial-awareness-mesh-observer-profile"></a>4. клонирование профиля наблюдателя сетки по умолчанию для пространственного отслеживания

Если вкладка " **пространственное распознавание** " все еще выбрана, разверните раздел **наблюдатель пространственной сетки Windows Mixed Reality** , а затем нажмите кнопку **клонировать** , чтобы открыть окно Профиль клона:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step4-1.png)

В окне Профиль клона нажмите кнопку **клонировать** , чтобы создать редактируемую копию **дефаултмикседреалитиспатиалаваренессмешобсерверпрофиле**:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step4-2.png)

Вновь созданный профиль наблюдателя сетки для пространственного отслеживания автоматически назначается системному профилю пространственного отслеживания:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step4-3.png)

### <a name="5-change-the-visibility-of-the-spatial-awareness-mesh"></a>5. изменение видимости сетки пространственного отслеживания

В **параметрах наблюдателя пространственной сетки**измените **параметр отображения** на **перекрытия** , чтобы сетка пространственных сопоставлений стала невидимой, пока все еще функционирует:

![mrlearning-base](images/mrlearning-base/tutorial2-section1-step5-1.png)

> [!NOTE]
> Хотя сетка пространственных сопоставлений не видна, она по-прежнему существует и работает. Например, все голограммы в сетке пространственного сопоставления, такие как голограмма за физической стеной, не будут видны.

Вы только что узнали, как изменить параметр в профиле MRTK. Как видите, для настройки параметров МРТК сначала необходимо создать копии профилей по умолчанию. Так как профили по умолчанию недоступны для редактирования, они всегда будут иметь в качестве ссылки, если нужно вернуться к параметрам по умолчанию. Дополнительные сведения о профилях МРТК и их архитектуре см. в [руководстве по настройке профиля набора средств для смешанной реальности](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="hand-tracking-gestures-and-interactable-buttons"></a>Жесты отслеживания и взаимодействующие кнопки

В этом разделе вы узнаете, как использовать отслеживание вручную для нажатия кнопки и запуска событий, чтобы вызвать действие при нажатии кнопки.

В этом конкретном примере показано, как изменить цвет куба при нажатии кнопки и вернуть его к исходному цвету при отпускании кнопки. Однако вы можете следовать тем же принципам для создания других событий.

Ниже приведены основные действия, которые необходимо выполнить для изменения цвета Куба.

1. Добавление нажатой кнопки prefab в сцену
2. Добавление Куба в сцену
3. Настройка типа событий Интерактаблеонпрессрецеивер
4. Настройка куба для получения события "при нажатии"
5. Определение действия, запускаемого событием при нажатии кнопки
6. Настройка куба для получения события "при выпуске"
7. Определение действия, запускаемого событием выпуска
8. Тестирование кнопки с помощью имитации в редакторе

### <a name="1-add-a-pressable-button-prefab-to-the-scene"></a>1. Добавление в сцену нажатой кнопки prefab

> [!TIP]
> <a href="https://docs.unity3d.com/Manual/Prefabs.html" target="_blank">Prefab</a> — это предварительно настроенный GameObject, хранящийся в качестве ресурса Unity, который можно повторно использовать во всем проекте.

В **окне проекта**найдите **PressableButtonHoloLens2** , чтобы найти prefab, который будет использоваться в этом примере:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step1-1.png)

В результатах **поиска** выберите **PressableButtonHoloLens2** prefab и **перетащите** его в окно **Иерархия** , чтобы добавить его в сцену:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step1-2.png)

> [!TIP]
> Чтобы отобразить сцену, как показано на рисунке ниже, дважды щелкните объект PressableButtonHoloLens2 в окне "иерархия", чтобы перевести его в фокус, а затем используйте <a href="https://docs.unity3d.com/Manual/SceneViewNavigation.html" target="_blank">сцену гизмо</a>, расположенную в правом верхнем углу окна сцены, чтобы настроить угол обзора на прямую ось Z.

Если объект **PressableButtonHoloLens2** все еще выбран, в окне **инспектора** :

* Измените **положение** преобразования, чтобы оно расположиться перед камерой, которое позиционируется в начале, например x = 0, y = 0, и z = 0,5

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step1-3.png)

> [!NOTE]
> Как правило, 1 единица позиций в Unity примерно эквивалентна одному измерению в физическом мире. Однако существуют исключения, например, если объекты являются дочерними объектами масштабируемых объектов.

### <a name="2-add-a-cube-to-the-scene"></a>2. Добавление Куба в сцену

Щелкните правой кнопкой мыши пустое место в окне иерархии и выберите пункт **3D Object** > **куб** , чтобы добавить куб в сцену:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step2-1.png)

Выбрав объект **куба** , в окне **инспектора** :

* Измените свое **Расположение** преобразования, чтобы оно находилось рядом с нажатой кнопкой, но не пересекается с ней, например x = 0, y = 0,04 и z = 0,5
* Измените **масштаб** преобразования на подходящий размер, например x = 0,02, y = 0,02, и z = 0,02.

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step2-2.png)

### <a name="3-configure-the-interactableonpressreceiver-event-type"></a>3. Настройка типа событий Интерактаблеонпрессрецеивер

В окне Иерархия выберите объект **PressableButtonHoloLens2** , а затем в **меню "гамбургер**" окна **инспектора** выберите **Свернуть все компоненты** , чтобы получить общие сведения о всех компонентах этого объекта:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step3-1.png)

Разверните компонент " **взаимодействие (скрипт)** ", а затем найдите и разверните раздел **события** > **получателей** :

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step3-2.png)

Нажмите кнопку **Добавить событие** , чтобы создать приемник событий для приемника событий типа **интерактаблеонпрессрецеивер**:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step3-3.png)

> [!NOTE]
> Тип приемника событий с именем Интерактаблеонпрессрецеивер позволяет кнопке реагировать на событие нажатия, когда прослеживание руки нажимает кнопку.

Для вновь созданного приемника событий измените **Фильтр взаимодействия** на **NEAR и Far**:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step3-4.png)

### <a name="4-configure-the-cube-to-receive-the-on-press-event"></a>4. Настройка куба для получения события "при нажатии"

В окне Иерархия **щелкните и перетащите** **куб** в поле объект **Свойства события** для события **при нажатии ()** , чтобы назначить куб в качестве получателя события On Press ():

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step4-1.png)

### <a name="5-define-the-action-to-be-triggered-by-the-on-press-event"></a>5. Определение действия, запускаемого событием при нажатии кнопки

Щелкните раскрывающийся список действий, в данный момент не имеющий **функции**, а затем выберите **мешрендерер** > **материальный материал** , чтобы изменить свойство материала Куба при срабатывании события On Press ():

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step5-1.png)

Щелкните маленький значок **круга** рядом с полем "материал" (в данный момент заполняется " **нет")** , чтобы открыть окно "Выбор материала":

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step5-2.png)

В окне Выбор материала **найдите** **MRTK_Standard** и выберите подходящий материал, например **MRTK_Standard_Cyan** так, чтобы цвет Куба был изменен на голубой при нажатии кнопки:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step5-3.png)

### <a name="6-configure-the-cube-to-receive-the-on-release-event"></a>6. Настройка куба для получения события "при выпуске"

**Повторить** Шаг 4 для события On Release для назначения **куба** в качестве получателя события **On Release ()** .

### <a name="7-define-the-action-to-be-triggered-by-the-on-release-event"></a>7. Определение действия, запускаемого событием выпуска

**Повторить** Шаг 5 для события On Release, но выберите **MRTK_Standard_LightGray** материал, чтобы цвет Куба возвращался к исходному светло-серому цвету при отпускании кнопки:

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step7-1.png)

### <a name="8-test-the-button-using-the-in-editor-simulation"></a>8. Тестирование кнопки с помощью имитации в редакторе

Нажмите кнопку " **Воспроизведение** ", чтобы перейти в режим игры и использовать имитацию ввода в редакторе для проверки вновь настроенной кнопки.

Кнопка не нажата (пробел + колесо прокрутки мыши назад):

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step8-1.png)

Нажата кнопка (пробел + колесо прокрутки мыши вперед):

![mrlearning-base](images/mrlearning-base/tutorial2-section2-step8-2.png)

> [!TIP]
> Чтобы узнать, как использовать имитацию входных данных в редакторе, можно обратиться к разделу [Использование имитации входных данных в редакторе, чтобы протестировать руководство по монтажному кадру](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html#using-the-in-editor-hand-input-simulation-to-test-a-scene) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="creating-a-panel-of-buttons-using-mrtks-grid-object-collection"></a>Создание панели кнопок с помощью коллекции объектов сетки MRTK

В этом разделе вы узнаете, как автоматически выровняйте несколько кнопок в удобном пользовательском интерфейсе с помощью средства сбора объектов сетки МРТК.

В этом конкретном примере показано, как создать панель с пятью кнопками по горизонтали. Однако вы можете следовать тем же принципам для создания других макетов.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Родительские объекты Button для родительского объекта
2. Добавление и настройка компонента "Коллекция объектов сетки" (скрипт)
3. Тестирование кнопок с помощью имитации в редакторе

### <a name="1-parent-the-button-objects-to-a-parent-object"></a>1. родительские объекты кнопки для родительского объекта

Щелкните правой кнопкой мыши пустое место в окне иерархии и выберите **создать пустое**:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step1-1.png)

Щелкните правой кнопкой мыши созданный объект, выберите **Переименовать**и присвойте ему подходящее имя, например **буттонколлектион**:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step1-2.png)

Выберите объект **PressableButtonHoloLens2** и **перетащите** его поверх объекта **буттонколлектион** , чтобы сделать его дочерним по отношению к объекту буттонколлектион:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step1-3.png)

Щелкните правой кнопкой мыши объект **PressableButtonHoloLens2** и выберите пункт **дублировать** , чтобы создать его копию:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step1-4.png)

**Повторите** этот шаг четыре раза, пока не получите пять объектов PressableButtonHoloLens2.

### <a name="2-add-and-configure-the-grid-object-collection-script-component"></a>2. Добавление и настройка компонента "Коллекция объектов сетки" (скрипт)

Выбрав объект Буттонколлектион в окне Иерархия, в окне инспектора нажмите кнопку **Добавить компонент** , затем найдите и выберите **Коллекция объектов сетки** , чтобы добавить компонент коллекции объектов Grid (скрипт) в объект буттонколлектион:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step2-1.png)

Настройте коллекцию объектов Grid (скрипт) следующим образом:

* Измените **число строк** на 1, чтобы все кнопки были высвоены по одной строке.
* Измените **ширину ячейки** на 0,05, чтобы пропустить кнопки в строке

Затем нажмите кнопку **Update Collection (обновить коллекцию** ), чтобы применить новую конфигурацию:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step2-2.png)

> [!NOTE]
> Изменения конфигурации, которые вы только что заменили, представляют минимальные изменения, необходимые для достижения цели размещения кнопок в одной строке. Однако в будущих проектах в зависимости от таких факторов, как, например, ориентация родительского и дочернего объектов, может потребоваться настроить другие параметры, такие как, например, тип ориентации. Дополнительные сведения о коллекции объектов Grid МРТК см. в руководстве по созданию [сценариев коллекции объектов](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_ObjectCollection.html#object-collection-scripts) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

Если объект Буттонколлектион все еще выбран в окне "иерархия", в окне инспектора измените **положение** преобразования объекта буттонколлектион так, чтобы его дочерние объекты кнопок были расположены перед камерой, расположенной в источнике, например x = 0, y = 0, и z = 0,5:

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step2-3.png)

> [!NOTE]
> Когда вы впервые добавили prefab PressableButtonHoloLens2 в сцену в [жестах отслеживания руки и в разделе "взаимодействующие кнопки](mrlearning-base-ch2.md#hand-tracking-gestures-and-interactable-buttons) " выше, вы размещаете его перед камерой. Однако, поскольку коллекция объектов сетки управляет положением непосредственных дочерних объектов, значение координаты Z для дочерних объектов PressableButtonHoloLens2 сбрасывается в 0 в соответствии с расстоянием по умолчанию для коллекции объектов сетки от родительского значения 0. Таким образом, и для того, чтобы упорядочить иерархические отношения «родители-потомки», именно поэтому мы перенесли положение родительского объекта Буттонколлектион вперед вместо настройки расстояния от родительского значения, чтобы переместить дочерние объекты PressableButtonHoloLens2 вперед.

### <a name="3-test-the-buttons-using-the-in-editor-simulation"></a>3. Тестирование кнопок с помощью имитации в редакторе

Нажмите кнопку "Воспроизведение", чтобы перейти в режим игры и использовать модель входа в редакторе, чтобы проверить каждую из кнопок в созданной панели кнопок.

![mrlearning-base](images/mrlearning-base/tutorial2-section3-step3-1.png)

> [!TIP]
> В настоящее время при нажатии любой из пяти кнопок Цвет Куба меняется на голубой. Чтобы сделать интерес более интересным, используйте то, что вы только научитесь настраивать для каждой кнопки, чтобы изменить цвет куба на другой.

## <a name="adding-text-into-your-scene"></a>Добавление текста в сцену

В этом разделе вы узнаете, как добавить текст в возможности смешанной реальности с помощью Текстмеш Pro Unity, подготовленного в разделе [Импорт Текстмеш Pro Resources](mrlearning-base-ch1.md#import-textmesh-pro-essential-resources) предыдущего руководства.

В этом конкретном примере вы добавите простую метку под коллекцией кнопок, созданной в предыдущем разделе.

Щелкните правой кнопкой мыши объект Буттонколлектион и выберите пункт **3D object** > **Text-текстмешпро** , чтобы создать объект текстмешпро в качестве дочернего элемента объекта буттонколлектион:

![mrlearning-base](images/mrlearning-base/tutorial2-section4-step1-1.png)

При наличии вновь созданного объекта Текстмешпро с именем text (TMP), который по-прежнему выбран, в окне инспектора измените его расположение и размер таким образом, чтобы метка располагалась под коллекцией кнопок, например:

* Изменение преобразования Rect **POS Y** на-0,0425
* Изменение **ширины** преобразования Rect на 0,24
* Изменение **высоты** преобразования Rect на 0,024

Затем обновите текст, чтобы отразить, к чему относится метка, и выберите свойства шрифта, чтобы текст поместился в метку, например:

* Изменение текстового поля Pro ( **текст** сценария) на коллекцию кнопок
* Изменение **стиля шрифта** (скрипт) для текстового сетки на полужирный
* Измените **Размер шрифта** Pro (скрипт) для сетки текста на 0,2
* Изменение **выравнивания** (сценария) сетки текста по центру и по середине

![mrlearning-base](images/mrlearning-base/tutorial2-section4-step1-2.png)

## <a name="congratulations"></a>Поздравляем!

В этом руководстве вы узнали, как клонировать, настраивать и настраивать параметр профиля МРТК. Вы также узнали, как взаимодействовать с кнопками для активации событий с помощью отслеживаний руки в HoloLens 2. Наконец, вы узнали, как создать простой интерфейс интерфейса пользователя с помощью компонента коллекции объектов Grid МРТК и сетки текста Unity Pro.

[Следующий учебник: 4. размещение динамического содержимого и использование поисковых решений](mrlearning-base-ch3.md)
