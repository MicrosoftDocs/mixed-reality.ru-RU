---
title: Модуль ASA обучения MR Azure пространственных привязка в HoloLens 2
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 7843e4de014fe14d7c40b5e6d68f72ea45b4df9e
ms.sourcegitcommit: 30246ab9b9be44a3c707061753e53d4bf401eb6b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2019
ms.locfileid: "67326492"
---
# <a name="getting-started-with-azure-spatial-anchors-on-hololens-2"></a>Приступая к работе с Azure пространственных привязки на HoloLens 2

Мы рады второй модуль учебника 2 HoloLens. Перед началом работы убедитесь, что все из [предварительные требования](https://docs.microsoft.com/en-us/azure/spatial-anchors/quickstarts/get-started-unity-hololens) завершены. Если вы не завершили первый, [основной модуль](mrlearning-base.md) тем не менее, мы настоятельно рекомендуем выполнить первый элемент. При запуске из проекта unity, выполните новый проект создания [основной модуль](mrlearning-base.md). 

## <a name="objectives"></a>Цели

* Изучение основ разработки с использованием Azure пространственных привязки с HoloLens 2

* Создание, отправка и загрузить пространственных привязки

  

## <a name="instructions"></a>Инструкция

### <a name="downloading-and-importing-assets"></a>Загрузка и Импорт ресурсов
Прежде чем начать, необходимо загрузить и импортировать следующие ресурсы:

[Пространственные привязки Azure](https://github.com/azure/azure-spatial-anchors-samples/releases)

[Модуль MR базовый пакет ресурсов](https://github.com/microsoft/mixedrealitylearning/releases/tag/v1.1)

[Модуль ASA пакет ресурсов](https://github.com/microsoft/MixedRealityLearning/releases/tag/ASA_B2)

[Набор средств для смешанной реальности](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases)

> Примечание: см. в шаге 5 за инструкциями по импорту пространственных привязки Azure, шаг 6 из-за инструкциями в модуле MR базовый пакет ресурсов и шаги 3 и 4 Дополнительные сведения о наборе средств для смешанной реальности.

1. Создайте новую сцену в проекте. Щелкните правой кнопкой мыши папку сцены, нажмите кнопку «Создать» затем сцены. Назовите новую сцену «ASALearningmodule.»

![module2chapter1step1im](images/module2chapter1step1im.PNG)

2. Дважды щелкните «ASALearningmodule», чтобы появятся некоторые предварительно определенные элементы вместе с новой сцены. 
3. Настройте сцены для смешанной реальности разработки. 

![module2chapter1step3im](images/module2chapter1step3im.PNG)

> Примечание. Вы увидите всплывающее окно, говорящее, «необходимо выбрать файл для смешанной реальности набора средств.» Нажав кнопку «ОК», чтобы перейти к шагу 4.

4. При выборе файла для смешанной реальности набора средств следует выберете, «DefaultMixedRealityToolkitConfigurationProfile.»

   > Примечание. Если у вас есть собственные конфигурации профиля можно использовать, вместо этого.

![module2chapter1step4im](images/module2chapter1step4im.PNG)

Теперь сцены настроена для смешанной реальности. Убедитесь, что вы сохраните сцены (это сделать с помощью любого из элементов управления / команду + S, или щелкните файл, а затем щелкните Сохранить). 

5. Импорт [Azure пространственных привязки](https://github.com/azure/azure-spatial-anchors-samples/releases). Чтобы использовать Пространственные привязки, необходимо импортировать этот ресурс. Таким образом щелкните ссылку выше и щелкнуть правой кнопкой мыши «AzureSpatialAnchors.unitypackage.» Щелкните «Сохранить объект как» и сохраните его на компьютер. 

   ![module2chapter1step5aim](images/module2chapter1step5aim.PNG)

   Затем, после его сохранения, вернитесь в unity, нажмите кнопку «активы,» перейдите вниз к «Импорт пакета», затем нажмите кнопку «пользовательский пакет...» Откроется файлов на компьютере. Один раз они, найти, где был сохранен пакет Azure пространственных привязки и выберите его. Нажмите кнопку «Открыть».

   ![module2chapter1step5bim](images/module2chapter1step5bim.PNG)

   Теперь будет всплывающее окно списка средства и параметры, запрашивающее что для импорта. Выберите ***все*** из доступных параметров, затем нажмите кнопку «Импорт».

   ![module2chapter1step5cim](images/module2chapter1step5cim.PNG)

   > Примечание: может занять несколько минут, чтобы импортировать, поэтому наберитесь терпения. 

   6. Импорт [модуль MR базовый пакет ресурсов](https://github.com/microsoft/mixedrealitylearning/releases/tag/v1.1) Далее. Подобно шаг 5 щелкните ссылку выше, щелкните правой кнопкой мыши «BasemoduleAssetsV1 1.unitypackage» и нажмите кнопку «Сохранить объект как» и сохраните его на компьютер.

   ![module2chapter1step6aim](images/module2chapter1step6aim.PNG)

   > Совет. Сохраните эти ресурсы в той же папке, чтобы их можно было легко найти и иметь доступ к. Оно будет хранить все было просто и организованное!

   Так же, как шаг 5, вернитесь к в unity, нажмите кнопку «активы», наведите указатель мыши «Импорт пакета», затем нажмите кнопку «пользовательский пакет...» Поэтому файлов на компьютере появится снова, перейдите к хранения основной модуль пакет ресурсов и выберите его. Нажмите кнопку «Открыть».

   ![module2chapter1step5bim](images/module2chapter1step5bim.PNG)

   > Примечание: могут существовать дополнительные ресурсы, необходимые позже в данном модуле. Выполните следующие действия, чтобы импортировать все активы, упомянутые с этого момента. 

7. Импортируйте модуль ASA пакет, используя тот же подход в качестве Импорт предыдущих пакетов.

### <a name="configuring-your-scene"></a>Настройка в сцену

В этом разделе мы добавим prefabs и скрипты на сцене, создаваемого из набора кнопок, которые описывают основы поведения локального привязки и привязки пространственных Azure в приложения.

7. На вкладке «проект» под в папку «активы» щелкните «ASAmoduleAssets.» Один раз выбранного, вы увидите 2 prefabs, «ButtonParent» и «ParentAnchor.»

![module2chapter1step7im](images/module2chapter1step7im.PNG)

8. Перетащите несколько prefabs в сцене. 

![module2chapter1step8im](images/module2chapter1step8im.PNG)

9. Дважды щелкните родительский привязки, чтобы выбрать его. Может потребоваться настроить отображение для просмотра всей сцены, поэтому при необходимости измените в сцену.

    Ознакомьтесь с ParentAnchor prefab. В настоящее время игр объект с именем «ParentAnchor» является цветной куб, для демонстрационных целей. Со временем мы скрыть куба и поместите наши материалы и как дочерний ParentAnchor. Этого готового блока включает AzureSpatialAnchorsDemoWrapper.cs сценариев (входит в состав пакета SDK ASA) и ASAmoduleScript.cs (рассматривается как часть этого модуля) в объект ParentAnchor. 

10. Настройте кнопки. В разделе prefab ParentAnchor можно заметить несколько кнопок с метками. Эти кнопки создаются на основе MRTK PressableButton prefabs. Дополнительные сведения о том, как создать Pressable кнопок из [основной модуль](mrlearning-base-ch2.md). Для каждой кнопки добавьте событие, которое активируется, когда пользователь нажимает или нажимает кнопку "," в соответствии с в списке ниже. 

- Для кнопки с именем «StartAzureSession» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод StartAzureSession() из объекта ParentAnchor ASAmoduleScript компонента.

  ![module2chapter1step10aim](images/module2chapter1step10aim.PNG)

  ![module2chapter1step10bim](images/module2chapter1step10bim.PNG)

  ![module2chapter1step10cim](images/module2chapter1step10fim.PNG)

- Для кнопки с именем «StopAzureSession» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод StopAzureSession() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки с именем «CreateAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод CreateAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки «Начать поиск для привязки» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод FindAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки с именем «DeleteAzureAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод DeleteAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки «Удалить локальный привязки» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод RemoveLocalAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

### <a name="build-and-demonstrate-base-application"></a>Построение и демонстрации базового приложения

Теперь, чтобы продемонстрировать основные сведения о пространственных привязки Azure настроена в сцену, мы создаст и демонстрируются основные особенности привязки пространственных Azure. 

1. Если вы закрыли окно Build Settings (Параметры сборки), открытое в предыдущих разделах, снова откройте его, выбрав File (Файл) > Build Settings (Параметры сборки).
    ![Lesson1Chapter5Step1](images/Lesson1Chapter5Step1.JPG)

2. Убедитесь, что необходимая сцена находится в списке Scenes in Build (Сцены в сборке), нажав кнопку Add Open Scenes (Добавить открытые сцены).

3. Нажмите кнопку Build (Сборка), чтобы начать процесс сборки.
    ![Lesson1Chapter5Step3](images/Lesson1Chapter5Step3.JPG)

4. Создайте папку для приложения и укажите для нее название. На приведенном ниже изображении для хранения приложения была создана папка с именем App. Щелкните Select Folder (Выбор папки), чтобы начать создание приложения в новой папке. После завершения создания вы можете закрыть окно Build Settings (Параметры сборки) в Unity. 
    ![Lesson1Chapter5Step4](images/Lesson1Chapter5Step4.JPG)

  > ПРИМЕЧАНИЕ. Если сборка завершилась сбоем, попробуйте выполнить ее заново или перезапустите Unity и повторите попытку. Если отображается ошибка типа Error: CS0246 = «XX» не удалось найти имя введите или пространства имен (возможно, отсутствует using директива или ссылку на сборку?)», то может потребоваться установить [пакета SDK для Windows 10 (10.0.18362.0)](<https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk>) 
  >

5. После завершения сборки откройте созданную папку, содержащую файлы только что созданного приложения. Дважды щелкните решение MixedRealityBase.sln (или соответствующее имя, если вы использовали альтернативное имя для своего проекта), чтобы открыть файл решения в Visual Studio.

  > Примечание. Обязательно откройте созданную папку (т. е. папку App, если вы следовали соглашениям об именовании из предыдущих шагов), так как за пределами этой папки будет находиться SLN-файл с аналогичным именем. Не путайте его с SLN-файлом, содержащимся в папке сборки. 

![Lesson1Chapter5Step5](images/Lesson1Chapter5Step5.JPG)

  > Примечание. Если visual studio предлагает для установки новых компонентов, Потратьте несколько минут, чтобы убедиться, что установлены все необходимые компоненты как определенные в [на странице «Установка средств»](install-the-tools.md) 

6. Подключите HoloLens 2 к компьютеру с помощью USB-кабеля. Во время занятия предполагается, вы будете развертывать тестирование с помощью устройства HoloLens 2, также можно развернуть [эмулятор HoloLens 2](using-the-hololens-emulator.md) или создайте [пакет приложения для загрузки неопубликованных приложений](<https://docs.microsoft.com/en-us/windows/uwp/packaging/packaging-uwp-apps>)

7. Перед выполнением сборки для устройства включите на нем режим разработчика. Если вы впервые используете HoloLens 2, в Visual Studio может появиться запрос на подключение к HoloLens 2 с использованием PIN-кода. Выполните [эти инструкции](https://docs.microsoft.com/en-us/windows/mixed-reality/using-visual-studio), если вам нужно включить режим разработчика или выполнить соединение с Visual Studio.

8. Настройте Visual Studio для сборки на устройство HoloLens 2, выбрав конфигурацию "Выпуск" и архитектуру ARM.
    ![Lesson1Chapter5Step8](images/Lesson1Chapter5Step8.JPG)
    
9. Последним шагом является построение на ваше устройство, выбрав Отладка > Запуск без отладки. Это приведет к немедленному запуску приложения на вашем устройстве после успешной сборки. Однако в Visual Studio сведения об отладке отображаться не будут. Это также означает, что вы можете отсоединить USB-кабель во время выполнения приложения на устройстве HoloLens 2, не прерывая его работу. Кроме того, вы можете выбрать "Сборка" > "Развернуть решение", чтобы развернуть решение на устройстве без автоматического запуска приложения.
    ![Lesson1Chapter5Step9](images/Lesson1Chapter5Step9.JPG)
    
10. Когда приложение выполняется на вашем устройстве, следуйте инструкциям на экране инструкциям. Нажмите кнопки сцены, соответствующий указанные ниже действия.
    
    ![module2chapter1step10eim](images/module2chapter1step10eim.PNG)
    
    1. Запустите сеанс Azure пространственных привязки.
    
    2. Переместите куба в другое расположение.
    
    3. Сохраните Azure пространственных привязки в расположении куба.
    
    4. Остановите сеанс Azure пространственных привязки.
    
    5. Удалите локальный привязки к кубу, чтобы разрешить пользователю переходить в кубе.
    6. Переместите куба где-то еще.
    
    7. Запустите сеанс Azure пространственных привязки.
    
    8. Поиск Azure пространственных привязки.
    (теперь куба следует вернуться в исходное место ее разместить при создании привязки).
    9. Удалите Azure пространственных привязки.
    
    10. Остановить сеанс Azure.

### <a name="anchoring-an-experience"></a>Привязка интерфейс

В предыдущих разделах вы узнали основы привязки пространственных Azure. Мы использовали для представления и визуализировать игр родительский объект с привязкой вложенного куба. В этом разделе вы wiill Узнайте, как привязать весь интерфейс, поместив его в качестве дочернего объекта ParentAnchor. В этом примере мы будем использовать демонстрационное приложение лунного модуль сборки, который был создан во время [основной модуль Lesson 6](mrlearning-base-ch6.md).

1. Найдите модуль лунного сборки полный готового блока и перетащите его в вашей иерархии как дочерний объект gameobject AnchorParent, как показано на рисунке ниже.

   ![module2chapter1step11](images/module2chapter1step11im.PNG)

2. Поместите в интерфейсе модуля сборки таким образом, что по-прежнему предоставляется куба, как показано на рисунке ниже. В приложении пользователи могут перемещать взаимодействию путем перемещения в кубе. 

   ![module2chapter1step12im](images/module2chapter1step12im.PNG)

   > Примечание. Существует множество потоков интерфейс пользователя для изменения положения процесс, включая использование кнопку для переключения ограничивающий прямоугольник вокруг интерфейса, используйте репозиционирующим объекта (например, в кубе, который используется на этом шаге), использование положения и поворота элементы и многое другое.

## <a name="congratulations"></a>Поздравляем!
На этом занятии вы узнали основы привязки пространственных Azure. Это занятие предоставляет вам несколько кнопок, позволяя изучить различные шаги, необходимые для запуска и остановки сеанс Azure и создание, отправка и загрузка azure привязки на одном устройстве. В следующем уроке вы узнаете как сохранять идентификатор Azure привязки в вашем HoloLens 2 для извлечения, даже после перезапуска приложения. Во время ряда будет также сведения о передаче привязки идентификаторов между несколькими устройствами для достижения пространственных выравнивание и со временем Узнайте о нескольких пользователей, общих сеансов (которые будут выпущены позже как часть общего доступа к модуля.)

[Следующий урок. ASA занятие 2](mrlearning-asa-ch2.md)

