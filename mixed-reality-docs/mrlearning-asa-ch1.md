---
title: Учебники по пространственной привязке Azure — 1. Приступая к работе с пространственными привязками Azure
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 861c42f9449fcb3cf038258af91088fc927941e5
ms.sourcegitcommit: f4812e1312c4751a22a2de56771c475b22a4ba24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/09/2019
ms.locfileid: "74940982"
---
# <a name="1-getting-started-with-azure-spatial-anchors"></a>1. Приступая к работе с пространственными привязками Azure

## <a name="overview"></a>Обзор

Добро пожаловать на второй ряд учебников по HoloLens. В этой серии руководств из трех частей вы узнаете об основах использования пространственных привязок Azure.

В этом первом учебнике [Приступая к работе с пространственными привязками Azure](mrlearning-asa-ch1.md)вы узнаете о различных шагах, необходимых для запуска и завершения сеанса Azure, а также создания, отправки и скачивания привязок Azure на одном устройстве.

Во втором учебном курсе, [сохранении, извлечении и совместном использовании пространственных привязок Azure](mrlearning-asa-ch2.md)вы узнаете, как сохранять пространственные привязки Azure в нескольких сеансах приложения, сохраняя сведения о привязке в хранилище HoloLens 2 и совместное использование этих данных привязки с другими устройствами для выравнивания привязок на нескольких устройствах.

В третьем руководстве, в [котором отображается отзыв о пространственной привязке Azure](mrlearning-asa-ch3.md), вы узнаете, как предоставить пользователям Отзывы о событиях и состояниях привязки при использовании пространственных привязок Azure.

## <a name="objectives"></a>Задачи

* Изучите основы разработки с помощью пространственных привязок Azure для HoloLens 2
* Создание, передача и скачивание пространственных привязок

## <a name="prerequisites"></a>Необходимые условия

* Выполните требования, перечисленные в разделе " [Предварительные требования](https://docs.microsoft.com/azure/spatial-anchors/quickstarts/get-started-unity-hololens#prerequisites) " [краткого руководства по созданию приложения Unity HoloLens, в котором используется учебник по пространственным привязок Azure](https://docs.microsoft.com/azure/spatial-anchors/quickstarts/get-started-unity-hololens) .
* Выполните инструкции из раздела [Создание ресурса пространственных привязок](https://docs.microsoft.com/azure/spatial-anchors/quickstarts/get-started-unity-hololens#create-a-spatial-anchors-resource) в разделе [Краткое руководство. Создание приложения Unity HoloLens, использующего учебник по пространственным привязок Azure](https://docs.microsoft.com/azure/spatial-anchors/quickstarts/get-started-unity-hololens) .
* Если вы еще не выполнили серию [учебников по началу работы](mrlearning-base.md) , рекомендуется сначала выполнить эти учебники.

## <a name="creating-the-unity-project"></a>Создание проекта Unity

В этом разделе вы создадите новый проект Unity и настроите его для Windows Mixed Reality.

1. Создайте проект Unity и присвойте ему подходящее имя, например, _учебник по пространственным привязок Azure_.

2. Настройка проекта Unity для Windows Mixed Reality.

    >[!TIP]
    >Напоминание о том, как создать проект Unity и настроить его для Windows Mixed Reality, можно найти в разделах [Создание проекта Unity](mrlearning-base-ch1.md#create-new-unity-project) и [Настройка проекта Unity для Windows Mixed Reality](mrlearning-base-ch1.md#configure-the-unity-project-for-windows-mixed-reality) статьи [Инициализация проекта и первого приложения](https://docs.microsoft.com/windows/mixed-reality/mrlearning-base-ch1) , которое является частью [руководства по началу работы](mrlearning-base.md) .

## <a name="adding-inbuilt-unity-packages"></a>Добавление встроенных пакетов Unity

В этом разделе вы добавите нестандартные активы и пакеты Unity, необходимые для набора средств и пакетов SDK, которые будут использоваться в проекте.

1. Импорт необходимых ресурсов TMP.

    >[!NOTE]
    >Мы добавляем этот пакет, так как он необходим для набора средств Mixed Reality.

    В меню Unity выберите пункт **окно** > **Текстмешпро** > **импортировать нужные ресурсы tmp**.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-2-1.1.png)

    Во всплывающем окне Импорт пакета Unity сначала убедитесь, что выбраны все ресурсы, нажав кнопку **все** , а затем импортируйте ресурсы, нажав кнопку **Импорт** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-2-1.2.png)

2. Установите AR Foundation.

    >[!NOTE]
    >Мы добавляем этот пакет, так как он требуется пакетом SDK для пространственных привязок Azure.

    В меню Unity выберите пункт **окно** > **Диспетчер пакетов**.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-2-2.1.png)

    В окне Диспетчер пакетов выберите **AR Foundation** и установите пакет, нажав кнопку **установить** .

    >[!IMPORTANT]
    >В списке появится пакет AR Foundation, который может занять несколько секунд.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-2-2.2.png)

## <a name="importing-the-tutorial-assets"></a>Импорт ресурсов учебника

В этом разделе вы скачиваете и импортируете все ресурсы учебника.

1. Скачайте ресурсы.

    * [Азуреспатиаланчорс. пакет unitypackage](https://github.com/Azure/azure-spatial-anchors-samples/releases/download/v2.0.0/AzureSpatialAnchors.unitypackage) (версия 2.0.0)
    * [Microsoft. Микседреалити. Toolkit. Unity. Foundation. 2.1.0. пакет unitypackage](https://github.com/microsoft/MixedRealityToolkit-Unity/releases/download/v2.1.0/Microsoft.MixedReality.Toolkit.Unity.Foundation.2.1.0.unitypackage)
    * [МРТК. HoloLens2. Unity. Tutorials. Assets. GettingStarted. 2.1.0.1. пакет unitypackage](https://github.com/microsoft/MixedRealityLearning/releases/download/getting-started-v2.1.0.1/MRTK.HoloLens2.Unity.Tutorials.Assets.GettingStarted.2.1.0.1.unitypackage)
    * [МРТК. HoloLens2. Unity. Tutorials. Assets. Азуреспатиаланчорс. 2.1.0.1. пакет unitypackage](https://github.com/microsoft/MixedRealityLearning/releases/download/azure-spatial-anchors-v2.1.0.1/MRTK.HoloLens2.Unity.Tutorials.Assets.AzureSpatialAnchors.2.1.0.1.unitypackage)

2. Импортируйте ресурсы.

    В меню Unity выберите **активы** > **импортировать пакет** > **настраиваемый пакет..** ..

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-3-2.1.png)

    В пакете импорта... (всплывающее окно) выберите **азуреспатиаланчорс. пакет unitypackage** и нажмите кнопку **Открыть** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-3-2.2.png)

    Во всплывающем окне Импорт пакета Unity сначала убедитесь, что выбраны все ресурсы, нажав кнопку **все** , а затем импортируйте ресурсы, нажав кнопку **Импорт** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-3-2.3.png)

    Повторите эти действия, чтобы импортировать оставшиеся пакеты ресурсов. По завершении в папке **Assets** проекта Unity должны содержаться эти вложенные папки.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-3-2.4.png)

## <a name="creating-and-preparing-the-scene"></a>Создание и подготовка сцены

В этом разделе вы создадите и подготовите сцену, добавив набор средств для смешанной реальности и часть учебника Prefabs.

1. Создайте новую сцену.

    В меню Unity выберите **файл** > **создать сцену**.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-1.1.png)

    В меню Unity выберите **файл** > **Сохранить как...** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-1.2.png)

    Во всплывающем окне Сохранить сцену перейдите к папке **сцен** проекта, присвойте сцене подходящее имя, например _асатуториалсцене_, и сохраните сцену, нажав кнопку **сохранить** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-1.3.png)

    >[!TIP]
    >Вы можете сохранить сцену в любом месте, пока она находится внутри папки ресурсов проекта. Однако, чтобы хранить проект в Организации, обычно рекомендуется сохранить его в папке «сцены» проекта.

2. Добавьте набор средств Mixed Reality.

    В меню Unity выберите **набор средств для смешанной реальности** > **Добавить в сцену и настроить...** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-2.1.png)

    Во всплывающем окне Выбор Микседреалититулкитконфигуратионпрофиле щелкните **DefaultHoloLens2ConfigurationProfile** , чтобы задать его в качестве профиля конфигурации мртк сцены.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-2.2.png)

    В меню Unity выберите **файл** > **сохранить** , чтобы сохранить сцену.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-2.3.png)

    >[!TIP]
    >Чтобы быстро сохранить сцену при работе с этим руководством, можно использовать сочетание клавиш CTRL + S (Command + S в macOS).

3. Добавьте учебник Prefabs.

    На панели проект перейдите к разделу **активы** > **мртк. Учебник. Азуреспатиаланчорс** > **Prefabs** папку. Удерживая нажатой кнопку CTRL (Command on macOS), щелкните **буттонпарент**, **DebugWindow**и **парентанчор** , чтобы выбрать три Prefabs.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-3.1.png)

    Выбрав три Prefabs, перетащите их на панель Иерархия, чтобы добавить их в сцену.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-3.2.png)

    Чтобы сосредоточиться на объектах в сцене, можно дважды щелкнуть объект Парентанчор, а затем немного увеличить его.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-4-3.3.png)

    >[!TIP]
    >Если вы найдете крупные значки в сцене, например, большие значки «'T» отвлекается от значков, их можно скрыть, переключив <a href="https://docs.unity3d.com/2019.1/Documentation/Manual/GizmosMenu.html" target="_blank">приспособлений</a> в положение OFF.

## <a name="configuring-the-buttons-to-operate-the-scene"></a>Настройка кнопок для функционирования сцены

В этом разделе вы добавите Prefabs и сценарии в сцену, чтобы создать ряд кнопок, демонстрирующих принципы поведения как локальных, так и пространственных привязок Azure в приложении.

1. Настройте Холоый компонент "линза 2 (скрипт)" для нажатой кнопки.

    На панели Иерархия разверните объект **буттонпарент** и выберите первый дочерний объект с именем **стартазуресессион**.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-1.1.png)

    На панели инспектора прокрутите вниз до **нажатой кнопки Холо линза 2 (скрипт)** и добавьте новый прослушиватель событий в событие **нажатия кнопки ()** , щелкнув значок **+** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-1.2.png)

    Когда объект Стартазуресессион все еще выбран на панели Иерархия, щелкните и перетащите объект **парентанчор** на панели Иерархия в пустое поле **None (Object) (пустой объект)** только что добавленного прослушивателя событий, чтобы объект парентанчор прослушивает события нажатия кнопки.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-1.3.png)

    Щелкните раскрывающийся список **без функций** того же прослушивателя событий, а затем выберите **анчормодулескрипт** > **стартазуресессион ()** , чтобы задать функцию стартазуресессион () в качестве действия, запускаемого при срабатывании события нажатия кнопки.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-1.4.png)

2. Настройте компонент, поддерживающий взаимодействие (скрипт).

    Если объект Стартазуресессион все еще выбран на панели «Иерархия», на панели инспектора прокрутите вниз до компонента « **взаимодействие (скрипт)** » и повторите тот же процесс, что и в шаге 1 выше для события **OnClick ()** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-2.1.png)

3. Настройка оставшихся кнопок

    Для каждой из оставшихся кнопок выполните процедуру, описанную в шагах 1 и 2, чтобы назначить функции для событий нажатия кнопки () и onclick () ниже.

    * Для объекта **стопазуресессион** назначьте функцию **стопазуресессион ()** .
    * Для объекта **креатеанчор** назначьте функцию **креатеазуреанчор ()** , а затем перетащите **Парентанчор** в пустое поле **None (Game Object)** .
    * Чтобы **начать поиск объекта привязки** , назначьте функцию **финдазуреанчор ()** .
    * Чтобы **удалить объект привязки Azure** , назначьте функцию **делетеазуреанчор ()** .
    * Для объекта **удалить локальную привязку** присвойте функцию **ремовелокаланчор ()** , а затем перетащите **Парентанчор** в поле пустое **значение (объект игрового объекта)** .

4. Подключение сцены к ресурсу Azure

    На панели «Иерархия» выберите объект **парентанчор** и на панели инспектора прокрутите вниз до компонента « **Диспетчер пространственных привязок» (script)** .

    Затем в разделе **учетные данные** вставьте идентификатор учетной записи пространственных привязок и ключ в соответствующие поля **идентификатор учетной записи пространственных** привязок и **ключ учетной записи пространственных привязок** .

    >[!NOTE]
    >Вы создали идентификатор и ключ учетной записи пространственных привязок в рамках [предварительных требований](mrlearning-asa-ch1.md#prerequisites)этого руководства.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-5-4.1.png)

    >[!CAUTION]
    >Обязательно сохраните сцену.

## <a name="trying-the-basic-behaviors-of-azure-spatial-anchors"></a>Попытка базового поведения пространственных привязок Azure

Теперь, когда сцена настроена на демонстрацию основ пространственных привязок Azure, пора развернуть приложение, чтобы вы могли работать с пространственными привязками Azure.

1. Добавьте дополнительные необходимые возможности.

    В меню Unity выберите **изменить** > **Параметры проекта...** , чтобы открыть панель Параметры проигрывателя.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-6-1.1.png)

    На панели Параметры проигрывателя выберите **проигрыватель** , а затем **Параметры публикации**.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-6-1.2.png)

    В **параметрах публикации**прокрутите вниз до раздела **возможности** и дважды проверьте, что **спатиалперцептион**, который был включен при создании проекта в начале этого руководства, включен. Затем включены возможности **InternetClient**, **интернетклиентсервер**, **приватенетворкклиентсервер**, **Ремоваблестораже**, **веб-камеры**и **микрофона** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-6-1.3.png)

2. Разверните приложение в HoloLens 2.

    >[!TIP]
    >Напоминание о том, как создать и развернуть проект Unity в HoloLens 2, можно найти в разделах [Создание приложения для устройства](mrlearning-base-ch1.md#build-your-application-to-your-device) статьи [Инициализация проекта и первое](https://docs.microsoft.com/windows/mixed-reality/mrlearning-base-ch1) руководство по приложениям, которое входит в серию [руководств по началу работы](mrlearning-base.md) .

3. Запустите приложение и следуйте инструкциям в приложении.

    >[!CAUTION]
    >Пространственные привязки Azure используют Интернет для сохранения и загрузки данных привязки, чтобы убедиться, что устройство подключено к Интернету.

    Когда приложение запускается на устройстве, следуйте инструкциям на экране, отображаемым на панели **инструкций по модулю пространственного якоря Azure** .

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-6-3.1.png)

## <a name="anchoring-an-experience"></a>Привязка интерфейса

В предыдущих разделах вы узнали основы пространственных привязок Azure. Мы использовали куб для представления и визуализации родительского объекта Game с присоединенной привязкой. В этом разделе вы узнаете, как закрепить весь интерфейс, поместив его в качестве дочернего элемента объекта Парентанчор.

1. Добавьте интерфейс запуска Rocket.

    На панели проект перейдите к разделу **активы** > **мртк. Учебник. GettingStarted** > **Prefabs** и выберите **Rocket Launcher_Complete** prefab.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-7-1.1.png)

    Выбрав Rocket Launcher_Complete prefab, перетащите его поверх объекта **парентанчор** на панели Иерархия, чтобы сделать его дочерним элементом объекта парентанчор.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-7-1.2.png)

2. Изменение расположения процесса запуска Rocket.

    Переместите модуль **Rocket Launcher_Complete** , чтобы **парентанчор** (куб) по-прежнему был открыт.

    ![мрлеарнинг-ASA](images/mrlearning-asa-ch1-7-2.1.png)

    В приложении пользователи теперь могут перемещать весь процесс запуска Rocket, перемещая куб.

    >[!TIP]
    >Существует множество потоков взаимодействия с пользователем для изменения положения, включая использование объекта изменения положения (например, Куба, используемого в этом руководстве), использование кнопки для переключения ограничивающего прямоугольника, окружающего интерфейс, использование положения и вращения. приспособлений и многое другое.

## <a name="congratulations"></a>Поздравляем!

В этом руководстве вы узнали основы пространственных привязок Azure. На этом занятии приводятся несколько кнопок, позволяющих изучить различные шаги, необходимые для запуска и завершения сеанса Azure, а также для создания, отправки и скачивания привязок Azure на одном устройстве.

На следующем занятии вы узнаете, как сохранять идентификаторы привязки Azure в HoloLens 2 для получения, даже после перезапуска приложения, а также как передавать идентификаторы привязки между несколькими устройствами для достижения пространственного выравнивания.

[Следующее занятие: 2. сохранение, получение и совместное использование пространственных привязок Azure](mrlearning-asa-ch2.md)
