---
title: Модуль ASA обучения MR Azure пространственных привязка в HoloLens 2
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: c120d22f955d366042bbcb9ac73eaa4f13dc20e9
ms.sourcegitcommit: d8700260f349a09c53948e519bd6d8ed6f9bc4b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/27/2019
ms.locfileid: "67415272"
---
# <a name="getting-started-with-azure-spatial-anchors-on-hololens-2"></a>Приступая к работе с Azure пространственных привязки на HoloLens 2

Вас приветствует второй модуль учебника 2 HoloLens. Перед началом работы убедитесь, что все из [предварительные требования](https://docs.microsoft.com/en-us/azure/spatial-anchors/quickstarts/get-started-unity-hololens) завершены. Если вы не завершили первый, [основной модуль](mrlearning-base.md) тем не менее, рекомендуется сначала выполнить этот модуль. При запуске из проекта Unity, выполните новый проект создания [основной модуль](mrlearning-base.md). 

## <a name="objectives"></a>Цели

* Изучение основ разработки с использованием Azure пространственных привязки с HoloLens 2

* Создание, отправка и загрузить пространственных привязки

  

## <a name="instructions"></a>Инструкция

### <a name="downloading-and-importing-assets"></a>Загрузка и Импорт ресурсов
Прежде чем начать, загрузите и импортируйте следующие ресурсы:

[Пространственные привязки Azure](https://github.com/azure/azure-spatial-anchors-samples/releases)

[Модуль MR базовый пакет ресурсов](https://github.com/microsoft/mixedrealitylearning/releases/tag/v1.1)

[Модуль ASA пакет ресурсов](https://github.com/microsoft/MixedRealityLearning/releases/tag/ASA_B2)

[Набор средств для смешанной реальности](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases)

> Примечание. За инструкциями по импорту пространственных привязки Azure, шаг 6 для определенной инструкции в модуле MR базовый пакет ресурсов и шаги 3 – 4 для конкретных инструкций на Toolkit смешанной реальности (MRKT) см. шаг 5.

1. Создайте новую сцену в проекте. Щелкните правой кнопкой мыши папку сцены, нажмите кнопку «Создать», а затем сцены. Имя новой сцены ASALearningmodule.

![module2chapter1step1im](images/module2chapter1step1im.PNG)

2. Дважды щелкните ASALearningmodule, чтобы просмотреть некоторые предварительно определенные элементы, которые отображаются вместе с новой сцены. 
3. Настройте сцены для смешанной реальности разработки. 

![module2chapter1step3im](images/module2chapter1step3im.PNG)

> Примечание. Вы увидите всплывающее окно, говорящее, «Необходимо выбрать файл для смешанной реальности набора средств.» При нажатии кнопки ОК появится шаг 4.

4. При выборе файла для MRTK следует выберите, DefaultMixedRealityToolkitConfigurationProfile.

   > Примечание. Если у вас есть собственный профиль конфигурации, вы можете использовать его.

![module2chapter1step4im](images/module2chapter1step4im.PNG)

Теперь сцены настроена для смешанной реальности. Убедитесь, что вы сохраните сцены (это сделать с помощью любого из элементов управления / команду + S или щелкните файл, нажмите кнопку при сохранении). 

5. Импорт [Azure пространственных привязки](https://github.com/azure/azure-spatial-anchors-samples/releases). Чтобы использовать Пространственные привязки, необходимо импортировать этот ресурс. Щелкните приведенную выше ссылку и щелкнуть правой кнопкой мыши AzureSpatialAnchors.unitypackage. Щелкните Сохранить объект как и сохранить его на компьютере. 

   ![module2chapter1step5aim](images/module2chapter1step5aim.PNG)

   После сохранения, перейдите обратно в Unity, щелкните активы, перейдите к Импорт пакета. Выберите пользовательский пакет... Откроется файлов на компьютере. Когда они сделать, найти, где был сохранен пакет пространственных привязки Azure и выберите его. Нажмите кнопку Открыть.

   ![module2chapter1step5bim](images/module2chapter1step5bim.PNG)

   Появится всплывающее окно, providingg список средств и параметров и запросом, что для импорта. Выберите ***все*** из доступных параметров, нажмите кнопку Импорт.

   ![module2chapter1step5cim](images/module2chapter1step5cim.PNG)

   > Примечание. Сохраняйте Терпение, займет несколько минут для импорта. 

   6. Импорт [модуль MR базовый пакет ресурсов](https://github.com/microsoft/mixedrealitylearning/releases/tag/v1.1) Далее. Во многом подобно шаг 5, щелкните ссылку выше. Затем BasemoduleAssetsV1 1.unitypackag, щелкните правой кнопкой мыши и нажмите кнопку Сохранить объект как и сохраните его на компьютер.

   ![module2chapter1step6aim](images/module2chapter1step6aim.PNG)

   > Совет. Сохраните эти ресурсы в той же папке, чтобы их можно было легко найти и иметь доступ к. Она хранит все было просто и организованное.

   Так же, как и шаг 5 вернитесь Unity, щелкните средств и наведите указатель мыши Импорт пакета. Выберите пользовательский пакет... Снова появится файлов на компьютере. Перейдите в место хранения основной модуль пакет ресурсов. и выберите его. Нажмите кнопку "Открыть".

   ![module2chapter1step5bim](images/module2chapter1step5bim.PNG)

   > Примечание. Могут существовать дополнительные ресурсы, необходимые позже в данном модуле. Выполните следующие действия, чтобы импортировать все активы, упомянутые с этого момента. 
                                                                                                                                                                                                                    
7. Импортируйте ack модуль ASA, используя тот же подход в качестве Импорт предыдущих пакетов.

### <a name="configuring-your-scene"></a>Настройка в сцену

В этом разделе мы добавим prefabs и скрипты на сцене, создаваемого из набора кнопок, которые описывают основы поведения локального привязки и привязки пространственных Azure в приложения.

7. На вкладке «проект» под папку Assets щелкните ASAmoduleAssets. После выбора, вы увидите два prefabs: ButtonParent и ParentAnchor.

![module2chapter1step7im](images/module2chapter1step7im.PNG)

8. Перетащите обоих prefabs в сцене. 

![module2chapter1step8im](images/module2chapter1step8im.PNG)

9. Дважды щелкните родительский привязки, чтобы выбрать его. Может потребоваться настроить отображение для просмотра всей сцены. При необходимости измените в сцену.

    Ознакомьтесь с ParentAnchor prefab. В настоящее время игр объект с именем, ParentAnchor, является цветной куб для демонстрационных целей. В конце концов, мы ", ll скрыть куба и поместите наши материалы и как дочерний ParentAnchor. Этого готового блока включает AzureSpatialAnchorsDemoWrapper.cs сценариев (входит в состав пакета SDK ASA) и ASAmoduleScript.cs, являющемся частью этого модуля к объекту ParentAnchor. 

10. Настройте кнопки. В разделе prefab ParentAnchor Обратите внимание, что несколько кнопок с метками. Эти кнопки создаются на основе MRTK PressableButton prefabs. Дополнительные сведения о том, как создать Pressable кнопок из [основной модуль](mrlearning-base-ch2.md). Для каждой кнопки добавьте событие, которое активируется, когда пользователь нажимает или нажимает кнопку "," в соответствии с в списке ниже. 

- Для кнопки, StartAzureSession создайте новое событие в разделе триггера события нажатия кнопки, а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод StartAzureSession() из объекта ParentAnchor ASAmoduleScript компонента.

  ![module2chapter1step10aim](images/module2chapter1step10aim.PNG)

  ![module2chapter1step10bim](images/module2chapter1step10bim.PNG)

  ![module2chapter1step10cim](images/module2chapter1step10fim.PNG)

- Для имени кнопки StopAzureSession, создайте новое событие в разделе триггера события нажатия кнопки, а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод StopAzureSession() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки, CreateAnchor создайте новое событие в разделе триггера события нажатия кнопки, а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод CreateAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Триггер события для кнопки, Запуск поиска для привязки, создайте новое событие в разделе Presse кнопка», а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод FindAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки, DeleteAzureAnchor создайте новое событие в разделе триггера события нажатия кнопки, а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод DeleteAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

- Для кнопки, удалить локальный привязки создайте новое событие в разделе триггера события нажатия кнопки, а также на щелкните триггер события. Перетащите объект ParentAnchor в пустое поле и назначьте метод RemoveLocalAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

### <a name="build-and-demonstrate-base-application"></a>Построение и демонстрации базового приложения

Теперь, чтобы продемонстрировать основные сведения о пространственных привязки Azure настроена в сцену, мы создаст и демонстрируются основные особенности привязки пространственных Azure. 

1. Если вы закрыли окно Build Settings (Параметры сборки), открытое в предыдущих разделах, снова откройте его, выбрав File (Файл) > Build Settings (Параметры сборки).
    ![Lesson1Chapter5Step1](images/Lesson1Chapter5Step1.JPG)

2. Убедитесь, что сцены, которые вы хотите повторить в сценах в списке сборки, нажав на кнопку Добавить откройте сцены.

3. Нажмите кнопку Build (Сборка), чтобы начать процесс сборки.
    ![Lesson1Chapter5Step3](images/Lesson1Chapter5Step3.JPG)

4. Создайте папку для приложения и укажите для нее название. В приведенном ниже рисунке папка с именем приложения был создан для хранения приложения. Щелкните выберите папку, чтобы начать построение вновь созданную папку. После завершения построения, можно закрыть параметр построения» окно в Unity. 
    ![Lesson1Chapter5Step4](images/Lesson1Chapter5Step4.JPG)

  > ПРИМЕЧАНИЕ. Если сборка завершилась сбоем, попробуйте выполнить ее заново или перезапустите Unity и повторите попытку. Если отображается ошибка типа Error: Ошибка CS0246 = «XX» не удалось найти имя введите или пространства имен (возможно, отсутствует using директива или ссылка на сборку?). Может потребоваться установить [пакета SDK для Windows 10 (10.0.18362.0)](<https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk>) 
  >

5. После завершения сборки откройте созданную папку, содержащую файлы только что созданного приложения. Дважды щелкните the"MixedRealityBase.sln решения или соответствующее имя. Если вы использовали альтернативное имя для проекта, чтобы открыть файл решения в Visual Studio.

  > Примечание. Необходимо открыть на вновь созданную папку (т. е. папки приложения, если следующие соглашения об именовании из предыдущих шагов, поскольку будет файл с таким же именем .sln за пределами этой папке, не следует путать с SLN-файл в папке сборки. 

![Lesson1Chapter5Step5](images/Lesson1Chapter5Step5.JPG)

  > Примечание. Если Visual Studio предлагает для установки новых компонентов, Потратьте несколько минут, чтобы убедиться, что установлены все необходимые компоненты как определенные в [на странице «Установка средств»](install-the-tools.md) 

6. Подключите HoloLens 2 к компьютеру с помощью USB-кабеля. Во время занятия предполагается, вы будете развертывать тестирование с помощью устройства HoloLens 2, также можно развернуть [эмулятор HoloLens 2](using-the-hololens-emulator.md) или создайте [пакет приложения для загрузки неопубликованных приложений](<https://docs.microsoft.com/en-us/windows/uwp/packaging/packaging-uwp-apps>)

7. Перед выполнением сборки для устройства включите на нем режим разработчика. Если вы впервые используете HoloLens 2, в Visual Studio может появиться запрос на подключение к HoloLens 2 с использованием PIN-кода. Выполните [эти инструкции](https://docs.microsoft.com/en-us/windows/mixed-reality/using-visual-studio) Если вам нужно включить режим разработчика или сопряжения с Visual Studio.

8. Настройте Visual Studio для создания вашего 2 HoloLens, выбрав конфигурация выпуска и архитектуры «RM».
    ![Lesson1Chapter5Step8](images/Lesson1Chapter5Step8.JPG)
   
9. Последним шагом является построение на ваше устройство, выбрав Отладка > Запуск без отладки. Выбор Запуск без отладки приводит приложение немедленно запустить на устройстве после успешной сборки ithout отладка сведения о пользователях в Visual Studio. Это также означает, что вы можете отсоединить USB-кабель во время выполнения приложения на устройстве HoloLens 2, не прерывая его работу. Можно также выбрать сборки > развернуть решение для развертывания на устройстве без необходимости автоматически запускать приложение.
    ![Lesson1Chapter5Step9](images/Lesson1Chapter5Step9.JPG)
    
10 следуйте инструкциям. Когда приложение выполняется на вашем устройстве, следуйте инструкциям на экране инструкциям. Нажмите кнопки сцены, соответствующий указанные ниже действия.
    
    ![module2chapter1step10eim](images/module2chapter1step10eim.PNG)
    
    1. Запустите сеанс пространственных привязки.
    
    2. Переместите куба в другое расположение.
    
    3. Сохраните Azure пространственных привязки в расположении куба.
    
    4. Остановите сеанс Azure пространственных привязки.
    
    5. Удалите локальный привязки к кубу, чтобы разрешить пользователю переходить в кубе.
    6. Переместите куба где-то еще.
    
    7. Запустите сеанс Azure пространственных привязки.
    
    8. Поиск Azure пространственных aachors. 
    
    e, то вам следует вернуться в исходное место вы поместите его при создании привязки).
    9. Удалите Azure пространственных привязки.
    
    10. Остановить сеанс Azure.

### <a name="anchoring-an-experience"></a>Привязка интерфейс

В предыдущих разделах вы узнали основы привязки пространственных Azure. Мы использовали для представления и визуализировать игр родительский объект с привязкой вложенного куба. В этом разделе вы узнаете, как выполнить привязку весь интерфейс, поместив его в качестве дочернего объекта ParentAnchor. В этом примере мы используем модуль лунного сборки демонстрационного приложения, которое был создан во время [основной модуль Lesson 6](mrlearning-base-ch6.md).

1. Найдите модуль лунного сборки полный готового блока и перетащите его в вашей иерархии как дочерний объект gameobject AnchorParent как показано на рисунке ниже.

   ![module2chapter1step11](images/module2chapter1step11im.PNG)

2. Позиция сборку модуля возникнуть таким образом, чтобы куба предоставляется по-прежнему, как показано на рисунке ниже. В приложении пользователи могут перемещать взаимодействию путем перемещения в кубе. 

   ![module2chapter1step12im](images/module2chapter1step12im.PNG)

   > Примечание. Существует множество потоков интерфейс пользователя для изменения положения процесс, включая использование кнопку для переключения ограничивающий прямоугольник вокруг интерфейса, используйте репозиционирующим объекта (например, в кубе, который используется на этом шаге), использование положения и поворота элементы и многое другое.

## <a name="congratulations"></a>Поздравляем!
На этом занятии вы узнали основы привязки пространственных Azure. Этот esson при условии, что вы с несколько кнопок, которые позволяют изучить различные шаги, необходимые для запуска и остановить сеанс Azure и создания, отправки и загрузки azure привязки на одном устройстве. В следующем уроке вы узнаете как сохранять идентификатор Azure привязки в вашем HoloLens 2 для извлечения, даже после перезапуска приложения. Во время этой серии вы также узнаете, как для передачи идентификаторов привязки между несколькими устройствами для достижения пространственных выравнивание и узнайте о нескольких пользователей, общих сеансов (которые будут выпущены позже как часть общего доступа к модуля.)

[Следующий урок. ASA занятие 2](mrlearning-asa-ch2.md)

