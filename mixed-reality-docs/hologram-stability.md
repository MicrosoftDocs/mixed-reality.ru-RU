---
title: Голограмма, стабильность
description: HoloLens автоматически нарушить голограммы, но существуют шаги, которые могут потребоваться разработчикам для улучшения устойчивости к голограммам.
author: thetuvix
ms.author: alexturn
ms.date: 03/21/2018
ms.topic: article
keywords: голограммы, стабильность, hololens
ms.openlocfilehash: ad48d057ee55d4d0d9ae3080d8030a481aef130f
ms.sourcegitcommit: 5054f5c23965ce56599cb29ac9d9c6e48812dabd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/03/2020
ms.locfileid: "75623312"
---
# <a name="hologram-stability"></a><span data-ttu-id="13b61-104">Голограмма, стабильность</span><span class="sxs-lookup"><span data-stu-id="13b61-104">Hologram stability</span></span>

<span data-ttu-id="13b61-105">Для достижения стабильных голограмм HoloLens имеет встроенный конвейер стабилизации Image.</span><span class="sxs-lookup"><span data-stu-id="13b61-105">To achieve stable holograms, HoloLens has a built-in image stabilization pipeline.</span></span> <span data-ttu-id="13b61-106">Конвейер стабилизации работает автоматически в фоновом режиме, поэтому никаких дополнительных действий по его включению не требуется.</span><span class="sxs-lookup"><span data-stu-id="13b61-106">The stabilization pipeline works automatically in the background, so there are no extra steps required to enable it.</span></span> <span data-ttu-id="13b61-107">Тем не менее разработчики должны применять методики, повышающие устойчивость к голограммам, и избежать сценариев, снижающих стабильность.</span><span class="sxs-lookup"><span data-stu-id="13b61-107">However, developers should exercise techniques that improve hologram stability and avoid scenarios that reduce stability.</span></span>

## <a name="hologram-quality-terminology"></a><span data-ttu-id="13b61-108">Терминология с голограммами</span><span class="sxs-lookup"><span data-stu-id="13b61-108">Hologram quality terminology</span></span>

<span data-ttu-id="13b61-109">Качество голограмм является результатом хорошей среды и хорошей разработки приложений.</span><span class="sxs-lookup"><span data-stu-id="13b61-109">The quality of holograms is a result of good environment and good app development.</span></span> <span data-ttu-id="13b61-110">Приложения, которые подпадают под постоянную 60 кадров (в секунду) в среде, где HoloLens может следить за окружающей средой, будут обеспечивать синхронизацию голограммы и соответствующей системы координат. С точки зрения пользователя голограммы, которые предназначены для стационарной работы, не перемещаются относительно среды.</span><span class="sxs-lookup"><span data-stu-id="13b61-110">Apps that hit a constant 60 frames-per-second in an environment where HoloLens can track the surroundings will ensure the hologram and the matching coordinate system are in sync. From a user's perspective, holograms that are meant to be stationary will not move relative to the environment.</span></span>

<span data-ttu-id="13b61-111">При возникновении проблем с средой, несоответствия или низкой частоты отрисовки или других проблем с приложениями, приведенная ниже терминология полезна при определении проблемы.</span><span class="sxs-lookup"><span data-stu-id="13b61-111">When environment issues, inconsistent or low rendering rates, or other app problems show up, the following terminology is helpful in identifying the problem.</span></span>
* <span data-ttu-id="13b61-112">**Правильно.**</span><span class="sxs-lookup"><span data-stu-id="13b61-112">**Accuracy.**</span></span> <span data-ttu-id="13b61-113">Когда голограмма была заблокирована и помещается в реальный мир, она должна остаться там, где она была размещена, относительно окружающей среды, независимо от движения пользователя или небольших и разреженных изменений в среде.</span><span class="sxs-lookup"><span data-stu-id="13b61-113">Once the hologram is world-locked and placed in the real world, it should stay where it was placed, relative to the surrounding environment, independent of user motion or small and sparse environment changes.</span></span> <span data-ttu-id="13b61-114">Если позже в неожиданном месте появляется голограмма, это значит, что проблема *точности* .</span><span class="sxs-lookup"><span data-stu-id="13b61-114">If a hologram later appears in an unexpected location, it is an *accuracy* problem.</span></span> <span data-ttu-id="13b61-115">Такие сценарии могут возникнуть, если две отдельные комнаты выглядят одинаковыми.</span><span class="sxs-lookup"><span data-stu-id="13b61-115">Such scenarios can happen if two distinct rooms look identical.</span></span>
* <span data-ttu-id="13b61-116">**Синхронизации.**</span><span class="sxs-lookup"><span data-stu-id="13b61-116">**Jitter.**</span></span> <span data-ttu-id="13b61-117">Пользователи используют эту встряхиванийную голограмму с высокой частотой.</span><span class="sxs-lookup"><span data-stu-id="13b61-117">Users observe this as high frequency shaking of a hologram.</span></span> <span data-ttu-id="13b61-118">Это может произойти при отслеживании снижения среды.</span><span class="sxs-lookup"><span data-stu-id="13b61-118">This can happen when tracking of the environment degrades.</span></span> <span data-ttu-id="13b61-119">Для пользователей решение выполняет [настройку датчика](sensor-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="13b61-119">For users, the solution is running [sensor tuning](sensor-tuning.md).</span></span>
* <span data-ttu-id="13b61-120">**Жуддер.**</span><span class="sxs-lookup"><span data-stu-id="13b61-120">**Judder.**</span></span> <span data-ttu-id="13b61-121">Низкие частоты отрисовки приводят к неравномерному перемещению и удвоенным изображениям голограмм.</span><span class="sxs-lookup"><span data-stu-id="13b61-121">Low rendering frequencies result in uneven motion and double images of holograms.</span></span> <span data-ttu-id="13b61-122">Это особенно заметно в голограммах с движением.</span><span class="sxs-lookup"><span data-stu-id="13b61-122">This is especially noticeable in holograms with motion.</span></span> <span data-ttu-id="13b61-123">Разработчикам необходимо поддерживать [постоянную 60 кадров в кадре/](hologram-stability.md#frame-rate)с.</span><span class="sxs-lookup"><span data-stu-id="13b61-123">Developers need to maintain a [constant 60 FPS](hologram-stability.md#frame-rate).</span></span>
* <span data-ttu-id="13b61-124">**Настройке.**</span><span class="sxs-lookup"><span data-stu-id="13b61-124">**Drift.**</span></span> <span data-ttu-id="13b61-125">Пользователи видят это как голограмму, чтобы переместиться из места первоначального размещения.</span><span class="sxs-lookup"><span data-stu-id="13b61-125">Users see this as a hologram appears to move away from where it was originally placed.</span></span> <span data-ttu-id="13b61-126">Это происходит, когда голограммы размещаются далеко от [пространственных привязок](spatial-anchors.md), особенно в частях среды, которые не были полностью сопоставлены.</span><span class="sxs-lookup"><span data-stu-id="13b61-126">This happens when holograms are placed far away from [spatial anchors](spatial-anchors.md), particularly in parts of the environment that have not been fully mapped.</span></span> <span data-ttu-id="13b61-127">Создание голограмм, близких к пространственным привязкам, снижает вероятность смещения.</span><span class="sxs-lookup"><span data-stu-id="13b61-127">Creating holograms close to spatial anchors lowers the likelihood of drift.</span></span>
* <span data-ttu-id="13b61-128">**Переход.**</span><span class="sxs-lookup"><span data-stu-id="13b61-128">**Jumpiness.**</span></span> <span data-ttu-id="13b61-129">Время от времени, когда «POP» или «переходит» из своего расположения.</span><span class="sxs-lookup"><span data-stu-id="13b61-129">When a hologram "pops" or "jumps" away from its location occasionally.</span></span> <span data-ttu-id="13b61-130">Это может произойти, когда отслеживание корректирует голограммы так, чтобы они соответствовали обновленному пониманию среды.</span><span class="sxs-lookup"><span data-stu-id="13b61-130">This can occur as tracking adjusts holograms to match updated understanding of your environment.</span></span>
* <span data-ttu-id="13b61-131">**Дорожки.**</span><span class="sxs-lookup"><span data-stu-id="13b61-131">**Swim.**</span></span> <span data-ttu-id="13b61-132">Когда в Sway отображается голограмма, соответствующая перемещению головного пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-132">When a hologram appears to sway corresponding to the motion of the user's head.</span></span> <span data-ttu-id="13b61-133">Это происходит, когда приложение не полностью реализовало [репроекцию](hologram-stability.md#reprojection)и не [калибровка](calibration.md) HoloLens для текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-133">This occurs when the application has not fully implemented [reprojection](hologram-stability.md#reprojection), and if the HoloLens is not [calibrated](calibration.md) for the current user.</span></span> <span data-ttu-id="13b61-134">Чтобы устранить эту проблему, пользователь может повторно запустить приложение [калибровки](calibration.md).</span><span class="sxs-lookup"><span data-stu-id="13b61-134">The user can rerun the [calibration](calibration.md) application to fix this.</span></span> <span data-ttu-id="13b61-135">Разработчики могут обновить плоскость стабилизации, чтобы улучшить стабильность.</span><span class="sxs-lookup"><span data-stu-id="13b61-135">Developers can update the stabilization plane to further enhance stability.</span></span>
* <span data-ttu-id="13b61-136">**Разделение цветов.**</span><span class="sxs-lookup"><span data-stu-id="13b61-136">**Color separation.**</span></span> <span data-ttu-id="13b61-137">В HoloLens отображаются цветовые последовательные дисплеи, в которых цветовые каналы Flash красный-зеленый-синий-зеленый при 60 Гц (отдельные поля цвета показаны в 240Hz).</span><span class="sxs-lookup"><span data-stu-id="13b61-137">The displays in HoloLens are a color sequential display, which flash color channels of red-green-blue-green at 60Hz (individual color fields are shown at 240Hz).</span></span> <span data-ttu-id="13b61-138">Каждый раз, когда пользователь отслеживает подвижную голограмму со своими глазами, его ведущие и конечные края помечаются отдельными цветами, что приводит к появлении эффектов «Радуга».</span><span class="sxs-lookup"><span data-stu-id="13b61-138">Whenever a user tracks a moving hologram with his or her eyes, that hologram's leading and trailing edges separate in their constituent colors, producing a rainbow effect.</span></span> <span data-ttu-id="13b61-139">Степень разделения зависит от скорости голограммы.</span><span class="sxs-lookup"><span data-stu-id="13b61-139">The degree of separation is dependent upon the speed of the hologram.</span></span> <span data-ttu-id="13b61-140">В некоторых реже случаях быстро перемещаться по головному элементу при взгляде на стационарную голограмму также может привести к появлению эффектов «Радуга».</span><span class="sxs-lookup"><span data-stu-id="13b61-140">In some rarer cases, moving ones head rapidly while looking at a stationary hologram can also result in a rainbow effect.</span></span> <span data-ttu-id="13b61-141">Это называется *[разделением цветов](hologram-stability.md#color-separation)* .</span><span class="sxs-lookup"><span data-stu-id="13b61-141">This is called *[color separation](hologram-stability.md#color-separation)*.</span></span>

## <a name="frame-rate"></a><span data-ttu-id="13b61-142">Частота кадров</span><span class="sxs-lookup"><span data-stu-id="13b61-142">Frame rate</span></span>

<span data-ttu-id="13b61-143">Частота кадров — первый основополагающий уровень стабильности.</span><span class="sxs-lookup"><span data-stu-id="13b61-143">Frame rate is the first pillar of hologram stability.</span></span> <span data-ttu-id="13b61-144">Для того чтобы голограммы были стабильными в мире, каждое изображение, представленное пользователю, должно иметь голограммы, нарисованные в правильном месте.</span><span class="sxs-lookup"><span data-stu-id="13b61-144">For holograms to appear stable in the world, each image presented to the user must have the holograms drawn in the correct spot.</span></span> <span data-ttu-id="13b61-145">На экране отображается обновление HoloLens 240 раз в секунду, в котором показаны четыре отдельных поля цвета для каждого вновь визуализированного изображения, что приводит к пользовательскому взаимочастоте 60 кадров в секунду.</span><span class="sxs-lookup"><span data-stu-id="13b61-145">The displays on HoloLens refresh 240 times a second, showing four separate color fields for each newly rendered image, resulting in a user experience of 60 FPS (frames per second).</span></span> <span data-ttu-id="13b61-146">Чтобы обеспечить наилучшую производительность, разработчики приложений должны поддерживать 60 кадров/с, что преобразуется для согласованного предоставления нового образа операционной системе каждые 16 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="13b61-146">To provide the best experience possible, application developers must maintain 60 FPS, which translates to consistently providing a new image to the operating system every 16 milliseconds.</span></span>

<span data-ttu-id="13b61-147">**60 кадров/** с Чтобы нарисовать голограммы так, как будто они находятся в реальной жизни, HoloLens должен визуализировать изображения из расположения пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-147">**60 FPS** To draw holograms to look like they're sitting in the real world, HoloLens needs to render images from the user's position.</span></span> <span data-ttu-id="13b61-148">Так как отрисовка изображений занимает некоторое время, HoloLens прогнозирует место, где заголовком пользователя будет отображаться при отображении изображений на экране.</span><span class="sxs-lookup"><span data-stu-id="13b61-148">Since image rendering takes time, HoloLens predicts where a user's head will be when the images are shown in the displays.</span></span> <span data-ttu-id="13b61-149">Этот алгоритм прогнозирования является приблизительным.</span><span class="sxs-lookup"><span data-stu-id="13b61-149">This prediction algorithm is an approximation.</span></span> <span data-ttu-id="13b61-150">HoloLens оборудован оборудованием, которое корректирует подготовленный образ для учета расхождений между прогнозируемой позицией и фактической позицией заголовка.</span><span class="sxs-lookup"><span data-stu-id="13b61-150">HoloLens has hardware that adjusts the rendered image to account for the discrepancy between the predicted head position and the actual head position.</span></span> <span data-ttu-id="13b61-151">Это делает изображение, которое видит пользователь, отображается так, как если бы оно было визуализировано из правильного расположения, а голограммы оказались стабильными.</span><span class="sxs-lookup"><span data-stu-id="13b61-151">This makes the image the user sees appear as if it was rendered from the correct location, and holograms feel stable.</span></span> <span data-ttu-id="13b61-152">Обновления образа лучше подходят для небольших изменений и не могут полностью исправить определенные вещи в отображаемом образе, например Motion-фокусировки.</span><span class="sxs-lookup"><span data-stu-id="13b61-152">The image updates work best with small changes, and it can't completely fix certain things in the rendered image like motion-parallax.</span></span>

<span data-ttu-id="13b61-153">При подготовке к просмотру в 60 кадров/с вы выполняете три вещи, которые помогут сделать стабильные голограммы:</span><span class="sxs-lookup"><span data-stu-id="13b61-153">By rendering at 60 FPS, you are doing three things to help make stable holograms:</span></span>
1. <span data-ttu-id="13b61-154">Минимизация общей задержки между отрисовкой изображения и видимым пользователем изображением.</span><span class="sxs-lookup"><span data-stu-id="13b61-154">Minimizing the overall latency between rendering an image and that image being seen by the user.</span></span> <span data-ttu-id="13b61-155">В подсистеме с жесткой обработкой игрового потока и потока отрисовки, работающей с частотой 30 кадров/с, может возникнуть дополнительная задержка в 33,3 мс.</span><span class="sxs-lookup"><span data-stu-id="13b61-155">In an engine with a game thread and a render thread running in lockstep, running at 30FPS can add 33.3ms of extra latency.</span></span> <span data-ttu-id="13b61-156">Уменьшение задержки уменьшает погрешность прогнозирования и повышает стабильность голограмм.</span><span class="sxs-lookup"><span data-stu-id="13b61-156">By reducing latency, this decreases prediction error, and increases hologram stability.</span></span>
2. <span data-ttu-id="13b61-157">Это делает так, чтобы каждое изображение достигло глаза пользователя в непротиворечивом размере задержки.</span><span class="sxs-lookup"><span data-stu-id="13b61-157">Making it so every image reaching the user's eyes have a consistent amount of latency.</span></span> <span data-ttu-id="13b61-158">При подготовке к просмотру в 30fps изображение по-прежнему отображает изображения в 60 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="13b61-158">If you render at 30fps, the display still displays images at 60 FPS.</span></span> <span data-ttu-id="13b61-159">Это означает, что один и тот же образ будет отображаться дважды в строке.</span><span class="sxs-lookup"><span data-stu-id="13b61-159">This means the same image will be displayed twice in a row.</span></span> <span data-ttu-id="13b61-160">Второй кадр будет иметь 16.6 MS больше времени задержки, чем первый кадр, и потребуется исправить более произносится ошибка.</span><span class="sxs-lookup"><span data-stu-id="13b61-160">The second frame will have 16.6ms more latency than the first frame and will have to correct a more pronounced amount of error.</span></span> <span data-ttu-id="13b61-161">Такая несогласованность при ошибке может привести к нежелательному жуддер 60 Гц.</span><span class="sxs-lookup"><span data-stu-id="13b61-161">This inconsistency in error magnitude can cause unwanted 60hz judder.</span></span>
3. <span data-ttu-id="13b61-162">Вы уменьшаете дрожание, характеризующееся неравномерным движением и двоением изображений.</span><span class="sxs-lookup"><span data-stu-id="13b61-162">Reducing the appearance of judder, which is characterized by uneven motion and double images.</span></span> <span data-ttu-id="13b61-163">Чем быстрее перемещаются голограммы и чем ниже частота кадров отрисовки, тем заметнее дрожание.</span><span class="sxs-lookup"><span data-stu-id="13b61-163">Faster hologram motion and lower render rates are associated with more pronounced judder.</span></span> <span data-ttu-id="13b61-164">Таким образом, при постоянном обслуживании 60 кадров/с вы сможете избежать жуддер для данной подвижной голограммы.</span><span class="sxs-lookup"><span data-stu-id="13b61-164">Therefore, striving to maintain 60 FPS at all times will help avoid judder for a given moving hologram.</span></span>

<span data-ttu-id="13b61-165">**Согласованность с частотой кадров** Согласованность частоты кадров очень важна для большого количества кадров в секунду.</span><span class="sxs-lookup"><span data-stu-id="13b61-165">**Frame-rate consistency** Frame rate consistency is as important as a high frames-per-second.</span></span> <span data-ttu-id="13b61-166">Иногда удаленные кадры неизбежны для любого приложения с большим количеством содержимого, а HoloLens реализует некоторые сложные алгоритмы для восстановления после редких сбоев.</span><span class="sxs-lookup"><span data-stu-id="13b61-166">Occasionally dropped frames are inevitable for any content-rich application, and the HoloLens implements some sophisticated algorithms to recover from occasional glitches.</span></span> <span data-ttu-id="13b61-167">Однако постоянно изменяющаяся частота кадров гораздо более заметна для пользователя, чем выполнение согласованных с низкой частотой кадров.</span><span class="sxs-lookup"><span data-stu-id="13b61-167">However, a constantly fluctuating framerate is a lot more noticeable to a user than running consistently at lower frame rates.</span></span> <span data-ttu-id="13b61-168">Например, приложение, которое визуализируется в течение 5 кадров (60 кадров/с в течение этих 5 кадров), а затем удаляет все остальные кадры для следующих 10 кадров (30 кадров/с в течение этих 10 кадров) будет отображаться более стабильно, чем приложение, которое постоянно отрисовывается 30 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="13b61-168">For example, an application that renders smoothly for 5 frames (60 FPS for the duration of these 5 frames) and then drops every other frame for the next 10 frames (30 FPS for the duration of these 10 frames) will appear more unstable than an application that consistently renders at 30 FPS.</span></span>

<span data-ttu-id="13b61-169">В связанной заметке операционная система регулирует приложения до 30 кадров в сек при выполнении [записи смешанной реальности](mixed-reality-capture.md) .</span><span class="sxs-lookup"><span data-stu-id="13b61-169">On a related note, the operating system will throttle applications down to 30 FPS when [mixed reality capture](mixed-reality-capture.md) is running.</span></span>

<span data-ttu-id="13b61-170">**Анализ производительности** Существует множество средств, которые можно использовать для оценки частоты кадров приложений, например:</span><span class="sxs-lookup"><span data-stu-id="13b61-170">**Performance analysis** There are a variety of tools that can be used to benchmark your application frame rate, such as:</span></span>
* <span data-ttu-id="13b61-171">GPUView;</span><span class="sxs-lookup"><span data-stu-id="13b61-171">GPUView</span></span>
* <span data-ttu-id="13b61-172">отладчик графики Visual Studio;</span><span class="sxs-lookup"><span data-stu-id="13b61-172">Visual Studio Graphics Debugger</span></span>
* <span data-ttu-id="13b61-173">Профилировщики, встроенные в трехмерные механизмы, такие как Unity</span><span class="sxs-lookup"><span data-stu-id="13b61-173">Profilers built into 3D engines such as Unity</span></span>

## <a name="hologram-render-distances"></a><span data-ttu-id="13b61-174">Расстояния, отображаемые на голограммах</span><span class="sxs-lookup"><span data-stu-id="13b61-174">Hologram render distances</span></span>

>[!VIDEO https://www.youtube.com/embed/-606oZKLa_s]

<span data-ttu-id="13b61-175">Система человеческого визуального элемента интегрирует несколько сигналов, зависящих от расстояния, когда она фиксатес и фокусируется на объекте.</span><span class="sxs-lookup"><span data-stu-id="13b61-175">The human visual system integrates multiple distance-dependent signals when it fixates and focuses on an object.</span></span>
* <span data-ttu-id="13b61-176">[Проживание](https://en.wikipedia.org/wiki/Accommodation_%28eye%29) — Сосредоточьтесь на индивидуальном глазе.</span><span class="sxs-lookup"><span data-stu-id="13b61-176">[Accommodation](https://en.wikipedia.org/wiki/Accommodation_%28eye%29) - The focus of an individual eye.</span></span>
* <span data-ttu-id="13b61-177">[Конвергенция](https://en.wikipedia.org/wiki/Convergence_(eye)) — два глаза перемещаются внутрь или наружу по центру объекта.</span><span class="sxs-lookup"><span data-stu-id="13b61-177">[Convergence](https://en.wikipedia.org/wiki/Convergence_(eye)) - Two eyes moving inward or outward to center on an object.</span></span>
* <span data-ttu-id="13b61-178">[Представление с помощью бинокля](https://en.wikipedia.org/wiki/Stereopsis) — различия между изображениями левого и правого взгляда, которые зависят от расстояния объекта от точки с фиксацией.</span><span class="sxs-lookup"><span data-stu-id="13b61-178">[Binocular vision](https://en.wikipedia.org/wiki/Stereopsis) - Disparities between the left- and right-eye images that are dependent on an object's distance away from your fixation point.</span></span>
* <span data-ttu-id="13b61-179">Заливка, относительный угловой размер и другие монокулар (один глаз).</span><span class="sxs-lookup"><span data-stu-id="13b61-179">Shading, relative angular size, and other monocular (single eye) cues.</span></span>

<span data-ttu-id="13b61-180">Конвергенция и проживание являются уникальными, так как они являются дополнительными сетчатки подсказками, связанными с тем, как глаза меняются, чтобы воспринимать объекты на разных расстояниях.</span><span class="sxs-lookup"><span data-stu-id="13b61-180">Convergence and accommodation are unique because they are extra-retinal cues related to how the eyes change to perceive objects at different distances.</span></span> <span data-ttu-id="13b61-181">В естественном просмотре конвергенции и проживание связаны.</span><span class="sxs-lookup"><span data-stu-id="13b61-181">In natural viewing, convergence and accommodation are linked.</span></span> <span data-ttu-id="13b61-182">Когда глаза просматривают нечто близкое (например, нос), глаза перекрестно и размещается в ближайшем месте.</span><span class="sxs-lookup"><span data-stu-id="13b61-182">When the eyes view something near (e.g. your nose), the eyes cross and accommodate to a near point.</span></span> <span data-ttu-id="13b61-183">Когда глаза просматривают что-то в бесконечности, глаза становятся параллельными, а глаз — бесконечностью.</span><span class="sxs-lookup"><span data-stu-id="13b61-183">When the eyes view something at infinity, the eyes become parallel and the eye accommodates to infinity.</span></span> <span data-ttu-id="13b61-184">Пользователи людьми HoloLens всегда будут использовать 2.0 m для поддержания четкого образа, так как отображение HoloLens фиксировано на оптическом расстоянии приблизительно 2.0 – от пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-184">Users wearing HoloLens will always accommodate to 2.0m to maintain a clear image because the HoloLens displays are fixed at an optical distance approximately 2.0m away from the user.</span></span> <span data-ttu-id="13b61-185">Разработчики приложений контролируют, где соходят глаза пользователей, размещая содержимое и голограммы с различной глубиной.</span><span class="sxs-lookup"><span data-stu-id="13b61-185">App developers control where users' eyes converge by placing content and holograms at various depths.</span></span> <span data-ttu-id="13b61-186">Когда пользователи разрабатывают и сходятся на разные расстояния, естественная связь между двумя подсказками разрывается, что может привести к визуальному дискомфорт или выносливости, особенно если масштаб конфликта велик.</span><span class="sxs-lookup"><span data-stu-id="13b61-186">When users accommodate and converge to different distances, the natural link between the two cues are broken, which can lead to visual discomfort or fatigue, especially when the magnitude of the conflict is large.</span></span> <span data-ttu-id="13b61-187">Дискомфорт из верженце-проживания можно избежать или свести к минимальному хранению содержимого, которое пользователи соходят в максимально близком к 2,0-м m (т. е. в сцене с большим количеством элементов, представляющих интерес около 2,0 m, если это возможно).</span><span class="sxs-lookup"><span data-stu-id="13b61-187">Discomfort from the vergence-accommodation conflict can be avoided or minimized by keeping content that users converge to as close to 2.0m as possible (i.e. in a scene with lots of depth place the areas of interest near 2.0m, when possible).</span></span> <span data-ttu-id="13b61-188">Если содержимое не может быть помещено почти в 2,0 МБ, дискомфорт от конфликта верженце-проживание значительно выше, когда пользователь Взгляните между разными расстояниями.</span><span class="sxs-lookup"><span data-stu-id="13b61-188">When content cannot be placed near 2.0m, discomfort from the vergence-accommodation conflict is greatest when user’s gaze back and forth between different distances.</span></span> <span data-ttu-id="13b61-189">Иными словами, гораздо комфортнее смотреть на неподвижную голограмму, которая остается в 50 сантиметрах от вас, чем на такую же голограмму, которая перемещается то к вам, то от вас.</span><span class="sxs-lookup"><span data-stu-id="13b61-189">In other words, it is much more comfortable to look at a stationary hologram that stays 50cm away than to look at a hologram 50cm away that moves toward and away from you over time.</span></span>

<span data-ttu-id="13b61-190">Размещение содержимого в версии 2.0 m также выгодно, так как два дисплея предназначены для полного перекрытия на этом расстоянии.</span><span class="sxs-lookup"><span data-stu-id="13b61-190">Placing content at 2.0m is also advantageous because the two displays are designed to fully overlap at this distance.</span></span> <span data-ttu-id="13b61-191">Для изображений, размещенных на этой плоскости, так как они выходят за пределы holographic, они исчезают с одного экрана, пока все еще отображаются на другом.</span><span class="sxs-lookup"><span data-stu-id="13b61-191">For images placed off this plane, as they move off the side of the holographic frame they will disappear from one display while still being visible on the other.</span></span> <span data-ttu-id="13b61-192">Это может привести к нарушению глубины голограммы.</span><span class="sxs-lookup"><span data-stu-id="13b61-192">This binocular rivalry can be disruptive to the depth perception of the hologram.</span></span>

<span data-ttu-id="13b61-193">**Оптимальное расстояние от пользователя для размещения голограмм**</span><span class="sxs-lookup"><span data-stu-id="13b61-193">**Optimal distance for placing holograms from the user**</span></span>

![Оптимальное расстояние для размещения голограмм от пользователя](images/distanceguiderendering-750px.png)

<span data-ttu-id="13b61-195">**Резкие плоскости** Для максимального удобства мы рекомендуем обрезать расстояние отрисовки в 85cm с появлением содержимого, начиная с 1 МБ.</span><span class="sxs-lookup"><span data-stu-id="13b61-195">**Clip Planes** For maximum comfort, we recommend clipping render distance at 85cm with fadeout of content starting at 1m.</span></span> <span data-ttu-id="13b61-196">В приложениях, где самые голограммы и пользователи являются стационарными, можно легко просмотреть голограммы, как в 50cm.</span><span class="sxs-lookup"><span data-stu-id="13b61-196">In applications where holograms and users are both stationary, holograms can be viewed comfortably as near as 50cm.</span></span> <span data-ttu-id="13b61-197">В таких случаях приложения должны размещать плоскость обрезки не ближе, чем 30cm и исчезать, должна начинаться по крайней мере 10cm из плоскости обрезки.</span><span class="sxs-lookup"><span data-stu-id="13b61-197">In those cases, applications should place a clip plane no closer than 30cm and fade out should start at least 10cm away from the clip plane.</span></span> <span data-ttu-id="13b61-198">Каждый раз, когда содержимое находится ближе, чем 85cm, важно убедиться, что пользователи не перемещаются ближе или дальше от голограмм, или что самые отдаленные области не перемещаются ближе к пользователю или дальше от него, так как эти ситуации, скорее всего, вызывают дискомфорт из верженце — конфликт с проживанием.</span><span class="sxs-lookup"><span data-stu-id="13b61-198">Whenever content is closer than 85cm, it is important to ensure that users do not frequently move closer or farther from holograms or that holograms do not frequently move closer to or farther from the user as these situations are most likely to cause discomfort from the vergence-accommodation conflict.</span></span> <span data-ttu-id="13b61-199">Содержимое должно быть спроектировано таким образом, чтобы не допустить необходимости взаимодействия, чем 85cm от пользователя, но если содержимое должно отрисовываться ближе, чем 85cm, хорошим правилом для разработчиков является проектирование сценариев, в которых пользователи и (или) голограммы не перемещаются более чем на 25% времени.</span><span class="sxs-lookup"><span data-stu-id="13b61-199">Content should be designed to minimize the need for interaction closer than 85cm from the user, but when content must be rendered closer than 85cm, a good rule of thumb for developers is to design scenarios where users and/or holograms do not move in depth more than 25% of the time.</span></span>

<span data-ttu-id="13b61-200">**Рекомендации** Если не удается поместить голограммы в 2 МБ, а конфликты между конвергенцией и проживанием не могут быть устранены, оптимальная зона для размещения с голограммами находится между 1,25 м и 5 мин.</span><span class="sxs-lookup"><span data-stu-id="13b61-200">**Best practices** When holograms cannot be placed at 2m and conflicts between convergence and accommodation cannot be avoided, the optimal zone for hologram placement is between 1.25m and 5m.</span></span> <span data-ttu-id="13b61-201">В каждом случае разработчики должны структурировать содержимое, чтобы рекомендовать пользователям взаимодействовать с 1 + m (например, настроить размер содержимого и параметры размещения по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="13b61-201">In every case, designers should structure content to encourage users to interact 1+ m away (e.g. adjust content size and default placement parameters).</span></span>

## <a name="reprojection"></a><span data-ttu-id="13b61-202">Репроектное</span><span class="sxs-lookup"><span data-stu-id="13b61-202">Reprojection</span></span>
<span data-ttu-id="13b61-203">HoloLens выполняет сложную технологию стабилизации с аппаратным обеспечением, именуемую репроецированием.</span><span class="sxs-lookup"><span data-stu-id="13b61-203">HoloLens performs a sophisticated hardware-assisted holographic stabilization technique known as reprojection.</span></span> <span data-ttu-id="13b61-204">Это учитывает движение и изменение точки зрения (Камерапосе) при анимации сцены, а пользователь перемещает его заголовок.</span><span class="sxs-lookup"><span data-stu-id="13b61-204">This takes into account motion and change of the point of view (CameraPose) as the scene animates and the user moves their head.</span></span>  <span data-ttu-id="13b61-205">Приложения должны выполнять определенные действия для наиболее эффективного использования РЕПРОЕКЦИИ.</span><span class="sxs-lookup"><span data-stu-id="13b61-205">Applications need to take specific actions to best use reprojection.</span></span>


<span data-ttu-id="13b61-206">Существует четыре основных типа РЕПРОЕКЦИИ.</span><span class="sxs-lookup"><span data-stu-id="13b61-206">There are four main types of reprojection</span></span>
* <span data-ttu-id="13b61-207">**Репроектная глубина:**  Это дает лучшие результаты с наименьшим объемом усилий от приложения.</span><span class="sxs-lookup"><span data-stu-id="13b61-207">**Depth Reprojection:**  This produces the best results with the least amount of effort from the application.</span></span>  <span data-ttu-id="13b61-208">Все части визуализированной сцены изменяются независимо от их расстояния от пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-208">All parts of the rendered scene are independently stabilized based on their distance from the user.</span></span>  <span data-ttu-id="13b61-209">Некоторые артефакты отрисовки могут быть видимыми, когда глубина глубины резко меняется.</span><span class="sxs-lookup"><span data-stu-id="13b61-209">Some rendering artifacts may be visible where there are sharp changes in depth.</span></span>  <span data-ttu-id="13b61-210">Этот параметр доступен только для HoloLens и впечатляющих головных телефонов.</span><span class="sxs-lookup"><span data-stu-id="13b61-210">This option is only available on HoloLens 2 and Immersive Headsets.</span></span>
* <span data-ttu-id="13b61-211">**Плоское перепроецирование:**  Это позволяет приложению точно управлять стабилизации.</span><span class="sxs-lookup"><span data-stu-id="13b61-211">**Planar Reprojection:**  This allows the application precise control over stabilization.</span></span>  <span data-ttu-id="13b61-212">Плоскость задается приложением, и все на этой плоскости будет самой стабильной частью сцены.</span><span class="sxs-lookup"><span data-stu-id="13b61-212">A plane is set by the application and everything on that plane will be the most stable part of the scene.</span></span>  <span data-ttu-id="13b61-213">Чем выше голограмма, тем менее стабильной она будет.</span><span class="sxs-lookup"><span data-stu-id="13b61-213">The further a hologram is away from the plane, the less stable it will be.</span></span>  <span data-ttu-id="13b61-214">Этот параметр доступен на всех платформах Windows MR.</span><span class="sxs-lookup"><span data-stu-id="13b61-214">This option is available on all Windows MR platforms.</span></span>
* <span data-ttu-id="13b61-215">**Автоматическое плоское перепроецирование:**  Система устанавливает плоскость стабилизации, используя сведения в буфере глубины.</span><span class="sxs-lookup"><span data-stu-id="13b61-215">**Automatic Planar Reprojection:**  The system sets a stabilization plane using information in the depth buffer.</span></span>  <span data-ttu-id="13b61-216">Этот параметр доступен в колении HoloLens 1 и HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="13b61-216">This option is available on HoloLens generation 1 and HoloLens 2.</span></span>
* <span data-ttu-id="13b61-217">**Нет:** Если приложение ничего не делает, используется плоская репроектная шкала с стабилизации плоскостью, фиксированная на 2 метрах в направлении головного взгляда пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-217">**None:** If the application does nothing, Planar Reprojection is used with the stabilization plane fixed at 2 meters in the direction of the user's head gaze.</span></span>  <span data-ttu-id="13b61-218">Как правило, это приводит к созданию подстандартных результатов.</span><span class="sxs-lookup"><span data-stu-id="13b61-218">This will usually produce substandard results.</span></span>

<span data-ttu-id="13b61-219">Приложения должны предпринять определенные действия, чтобы включить различные типы РЕПРОЕКЦИИ</span><span class="sxs-lookup"><span data-stu-id="13b61-219">Applications need to take specific actions to enable the different types of reprojection</span></span>
* <span data-ttu-id="13b61-220">**Репроектная глубина:** Приложение отправляет свой буфер глубины в систему для каждого отображаемого кадра.</span><span class="sxs-lookup"><span data-stu-id="13b61-220">**Depth Reprojection:** The application submits their depth buffer to the system for every rendered frame.</span></span>  <span data-ttu-id="13b61-221">В Unity это делается с параметром "включить совместное использование буфера глубины" в области параметров проигрывателя.</span><span class="sxs-lookup"><span data-stu-id="13b61-221">On Unity, this is done with the "Enable Depth Buffer Sharing" option in the Player Settings pane.</span></span>  <span data-ttu-id="13b61-222">Приложения DirectX вызывают CommitDirect3D11DepthBuffer.</span><span class="sxs-lookup"><span data-stu-id="13b61-222">DirectX apps call CommitDirect3D11DepthBuffer.</span></span>  <span data-ttu-id="13b61-223">Приложение не должно вызывать Сетфокуспоинт.</span><span class="sxs-lookup"><span data-stu-id="13b61-223">The application should not call SetFocusPoint.</span></span>
* <span data-ttu-id="13b61-224">**Плоское перепроецирование:** В каждом кадре приложения сообщают системе, что расположение плоскости необходимо стабилизировать.</span><span class="sxs-lookup"><span data-stu-id="13b61-224">**Planar Reprojection:** On every frame, applications tell the system the location of a plane to stabilize.</span></span>  <span data-ttu-id="13b61-225">Приложения Unity вызывают Сетфокуспоинтфорфраме и должны отключить совместное использование буфера глубины.</span><span class="sxs-lookup"><span data-stu-id="13b61-225">Unity applications call SetFocusPointForFrame and should have "Enable Depth Buffer Sharing" disabled.</span></span>  <span data-ttu-id="13b61-226">Приложения DirectX вызывают Сетфокуспоинт и не должны вызывать CommitDirect3D11DepthBuffer.</span><span class="sxs-lookup"><span data-stu-id="13b61-226">DirectX apps call SetFocusPoint and should not call CommitDirect3D11DepthBuffer.</span></span>
* <span data-ttu-id="13b61-227">**Автоматическое плоское перепроецирование:** Чтобы сделать это, приложению необходимо отправить свой буфер глубины в систему, так как они потребуют более глубокого перепроекции.</span><span class="sxs-lookup"><span data-stu-id="13b61-227">**Automatic Planar Reprojection:** To enable this, the application needs to submit their depth buffer to the system as they would for Depth Reprojection.</span></span>  <span data-ttu-id="13b61-228">В HoloLens 2 приложение должно Сетфокуспоинт с точкой 0, 0 для каждого кадра.</span><span class="sxs-lookup"><span data-stu-id="13b61-228">On HoloLens 2, the application then needs to SetFocusPoint with a point of 0,0 for every frame.</span></span>  <span data-ttu-id="13b61-229">В случае создания HoloLens 1 приложение не должно вызывать Сетфокуспоинт.</span><span class="sxs-lookup"><span data-stu-id="13b61-229">For HoloLens generation 1, the application should not call SetFocusPoint.</span></span>

### <a name="choosing-reprojection-technique"></a><span data-ttu-id="13b61-230">Выбор метода РЕПРОЕКЦИИ</span><span class="sxs-lookup"><span data-stu-id="13b61-230">Choosing Reprojection Technique</span></span>

<span data-ttu-id="13b61-231">Тип стабилизации</span><span class="sxs-lookup"><span data-stu-id="13b61-231">Stabilization Type</span></span> |    <span data-ttu-id="13b61-232">Впечатляющие гарнитуры</span><span class="sxs-lookup"><span data-stu-id="13b61-232">Immersive Headsets</span></span> |    <span data-ttu-id="13b61-233">Поколение HoloLens 1</span><span class="sxs-lookup"><span data-stu-id="13b61-233">HoloLens generation 1</span></span> | <span data-ttu-id="13b61-234">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="13b61-234">HoloLens 2</span></span>
--- | --- | --- | ---
<span data-ttu-id="13b61-235">Репроектная глубина</span><span class="sxs-lookup"><span data-stu-id="13b61-235">Depth Reprojection</span></span> |    <span data-ttu-id="13b61-236">Рекомендуем</span><span class="sxs-lookup"><span data-stu-id="13b61-236">Recommended</span></span> |   <span data-ttu-id="13b61-237">Нет данных</span><span class="sxs-lookup"><span data-stu-id="13b61-237">N/A</span></span> |   <span data-ttu-id="13b61-238">Рекомендуем</span><span class="sxs-lookup"><span data-stu-id="13b61-238">Recommended</span></span><br/><br/><span data-ttu-id="13b61-239">Приложения Unity должны использовать Unity 2018.4.12 или более поздней версии или Unity 2019,3 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="13b61-239">Unity applications must use Unity 2018.4.12 or later or Unity 2019.3 or later.</span></span> <span data-ttu-id="13b61-240">В противном случае используйте автоматическое плоское перепроецирование.</span><span class="sxs-lookup"><span data-stu-id="13b61-240">Otherwise use Automatic Planar Reprojection.</span></span>
<span data-ttu-id="13b61-241">Автоматическое плоское перепроецирование</span><span class="sxs-lookup"><span data-stu-id="13b61-241">Automatic Planar Reprojection</span></span> | <span data-ttu-id="13b61-242">Нет данных</span><span class="sxs-lookup"><span data-stu-id="13b61-242">N/A</span></span> |   <span data-ttu-id="13b61-243">Рекомендуется по умолчанию</span><span class="sxs-lookup"><span data-stu-id="13b61-243">Recommended default</span></span> |   <span data-ttu-id="13b61-244">Рекомендуется, если перепроецирование глубины не дает наилучших результатов</span><span class="sxs-lookup"><span data-stu-id="13b61-244">Recommended if Depth Reprojection is not giving the best results</span></span><br/><br/><span data-ttu-id="13b61-245">Для приложений Unity рекомендуется использовать Unity 2018.4.12 или более поздней версии или Unity 2019,3 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="13b61-245">Unity applications are recommended to use Unity 2018.4.12 or later or Unity 2019.3 or later.</span></span>  <span data-ttu-id="13b61-246">Предыдущие версии Unity будут работать с слегка сниженными результатами РЕПРОЕКЦИИ.</span><span class="sxs-lookup"><span data-stu-id="13b61-246">Previous Unity versions will work with slightly degraded reprojection results.</span></span>
<span data-ttu-id="13b61-247">Плоское перепроецирование</span><span class="sxs-lookup"><span data-stu-id="13b61-247">Planar Reprojection</span></span> |   <span data-ttu-id="13b61-248">Не рекомендуется</span><span class="sxs-lookup"><span data-stu-id="13b61-248">Not Recommended</span></span> |   <span data-ttu-id="13b61-249">Рекомендуется, если автоматическая плоская не дает наилучших результатов</span><span class="sxs-lookup"><span data-stu-id="13b61-249">Recommended if Automatic Planar is not giving the best results</span></span> |    <span data-ttu-id="13b61-250">Используйте, если ни один из параметров глубины не дает нужных результатов</span><span class="sxs-lookup"><span data-stu-id="13b61-250">Use if neither of the depth options give desired results</span></span>    

### <a name="verifying-depth-is-set-correctly"></a><span data-ttu-id="13b61-251">Проверка правильности задана глубина</span><span class="sxs-lookup"><span data-stu-id="13b61-251">Verifying Depth is Set Correctly</span></span>
            
<span data-ttu-id="13b61-252">Если в методе РЕПРОЕКЦИИ используется буфер глубины, важно убедиться, что содержимое буфера глубины представляет отображаемую сцену приложения.</span><span class="sxs-lookup"><span data-stu-id="13b61-252">When a reprojection method uses the depth buffer, it is important to verify that the contents of the depth buffer represents the application's rendered scene.</span></span>  <span data-ttu-id="13b61-253">Некоторые факторы могут вызвать проблемы.</span><span class="sxs-lookup"><span data-stu-id="13b61-253">A number of factors can cause problems.</span></span>  <span data-ttu-id="13b61-254">Например, если для отображения наложений пользовательского интерфейса используется другая камера, скорее всего, будет перезаписана вся информация о глубине из фактического представления.</span><span class="sxs-lookup"><span data-stu-id="13b61-254">If there is a second camera used to render user interface overlays, for example, it is likely to overwrite all the depth information from the actual view.</span></span>  <span data-ttu-id="13b61-255">Прозрачные объекты часто не задают глубину.</span><span class="sxs-lookup"><span data-stu-id="13b61-255">Transparent objects often don't set depth.</span></span>  <span data-ttu-id="13b61-256">По умолчанию для какой бы то ни было отрисовки текста глубина не задана.</span><span class="sxs-lookup"><span data-stu-id="13b61-256">Some text rendering will not set depth by default.</span></span>  <span data-ttu-id="13b61-257">Если глубина не соответствует отображаемым голограммам, в отрисовке будут отображаться видимые сбои.</span><span class="sxs-lookup"><span data-stu-id="13b61-257">There will be visible glitches in the rendering when depth does not match the rendered holograms.</span></span>
            
<span data-ttu-id="13b61-258">HoloLens 2 имеет визуализатор для отображения глубины и не устанавливается.</span><span class="sxs-lookup"><span data-stu-id="13b61-258">HoloLens 2 has a visualizer to show where depth is and is not being set.</span></span>  <span data-ttu-id="13b61-259">Включите это на портале устройств.</span><span class="sxs-lookup"><span data-stu-id="13b61-259">Enable this from Device Portal.</span></span>  <span data-ttu-id="13b61-260">На вкладке стабильность на **представлениях** > **голограмма** установите флажок **Отображать визуализацию глубины на гарнитуре** .</span><span class="sxs-lookup"><span data-stu-id="13b61-260">On the **Views** > **Hologram Stability** tab, select the **Display depth visualization in headset** checkbox.</span></span>  <span data-ttu-id="13b61-261">Области, для которых правильно задана глубина, будут синими.</span><span class="sxs-lookup"><span data-stu-id="13b61-261">Areas that have depth set properly will be blue.</span></span>  <span data-ttu-id="13b61-262">Отображаемые элементы, для которых не задана глубина глубины, будут красными и, следовательно, требуют исправления.</span><span class="sxs-lookup"><span data-stu-id="13b61-262">Rendered items that do not have depth set will be red and therefore need fixing.</span></span>  <span data-ttu-id="13b61-263">Обратите внимание, что Визуализация глубины не будет отображаться в записи смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="13b61-263">Note that the visualization of the depth will not show up in Mixed Reality Capture.</span></span>  <span data-ttu-id="13b61-264">Она видна только на устройстве.</span><span class="sxs-lookup"><span data-stu-id="13b61-264">It is only visible through the device.</span></span>
            
<span data-ttu-id="13b61-265">Некоторые средства просмотра GPU позволяют визуализировать буфер глубины.</span><span class="sxs-lookup"><span data-stu-id="13b61-265">Some GPU viewing tools will allow visualization of the depth buffer.</span></span>  <span data-ttu-id="13b61-266">Разработчики приложений могут использовать эти средства, чтобы обеспечить правильную настройку глубины.</span><span class="sxs-lookup"><span data-stu-id="13b61-266">Application developers can use these tools to make sure depth is being set properly.</span></span>  <span data-ttu-id="13b61-267">Обратитесь к документации по средствам приложения.</span><span class="sxs-lookup"><span data-stu-id="13b61-267">Consult the documentation for the application's tools.</span></span>

### <a name="using-planar-reprojection"></a><span data-ttu-id="13b61-268">Использование плоской РЕПРОЕКЦИИ</span><span class="sxs-lookup"><span data-stu-id="13b61-268">Using Planar Reprojection</span></span>
> [!NOTE]
> <span data-ttu-id="13b61-269">Для настольных современных головных телефонов настройка плоскости стабилизации обычно является высокопроизводительной, так как она обеспечивает меньше визуального качества, чем предоставление в системе буфера глубины приложения для обеспечения РЕПРОЕКЦИИ на основе глубины в пикселях.</span><span class="sxs-lookup"><span data-stu-id="13b61-269">For desktop immersive headsets, setting a stabilization plane is usually counter-productive, as it offers less visual quality than providing your app's depth buffer to the system to enable per-pixel depth-based reprojection.</span></span> <span data-ttu-id="13b61-270">Если не выполняется в HoloLens, следует, как правило, избегать настройки плоскости стабилизации.</span><span class="sxs-lookup"><span data-stu-id="13b61-270">Unless running on a HoloLens, you should generally avoid setting the stabilization plane.</span></span>

![Стабилизации плоскость для трехмерных объектов](images/stab-plane-500px.jpg)

<span data-ttu-id="13b61-272">Устройство будет автоматически пытаться выбрать эту плоскость, но приложение должно помочь в этом процессе, выбрав точку фокусировки в сцене.</span><span class="sxs-lookup"><span data-stu-id="13b61-272">The device will automatically attempt to choose this plane, but the application should assist in this process by selecting the focus point in the scene.</span></span> <span data-ttu-id="13b61-273">Приложения Unity, работающие в HoloLens, должны выбрать наиболее подходящую точку на основе сцены и передать ее в [сетфокуспоинт ()](focus-point-in-unity.md).</span><span class="sxs-lookup"><span data-stu-id="13b61-273">Unity apps running on a HoloLens should choose the best focus point based on your scene and pass this into [SetFocusPoint()](focus-point-in-unity.md).</span></span> <span data-ttu-id="13b61-274">Пример настройки точки фокусировки в DirectX включен в шаблон куба по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="13b61-274">An example of setting the focus point in DirectX is included in the default spinning cube template.</span></span>

<span data-ttu-id="13b61-275">Обратите внимание, что если приложение Unity работает на высокопроизводительном гарнитуре, подключенном к настольному ПК, Unity будет отправлять в Windows буфер глубины, чтобы обеспечить возможность РЕПРОЕКЦИИ на каждый пиксель, что, как правило, обеспечивает еще более высокое качество изображения без выполнения явной работы с приложением.</span><span class="sxs-lookup"><span data-stu-id="13b61-275">Note that when your Unity app runs on an immersive headset connected to a desktop PC, Unity will submit your depth buffer to Windows to enable per-pixel reprojection, which will usually provide even better image quality without explicit work by the app.</span></span> <span data-ttu-id="13b61-276">Если вы указываете точку фокусировки, это переопределит перестройку каждого пикселя, поэтому это следует делать только в том случае, если приложение выполняется на HoloLens.</span><span class="sxs-lookup"><span data-stu-id="13b61-276">If you provide a Focus Point, that will override the per-pixel reprojection, so you should only do so when your app is running on a HoloLens.</span></span>




```cs
// SetFocusPoint informs the system about a specific point in your scene to
// prioritize for image stabilization. The focus point is set independently
// for each holographic camera.
// You should set the focus point near the content that the user is looking at.
// In this example, we put the focus point at the center of the sample hologram,
// since that is the only hologram available for the user to focus on.
// You can also set the relative velocity and facing of that content; the sample
// hologram is at a fixed point so we only need to indicate its position.
renderingParameters.SetFocusPoint(
    currentCoordinateSystem,
    spinningCubeRenderer.Position
    );
```

<span data-ttu-id="13b61-277">Размещение контрольной точки во многом зависит от того, на что смотрится голограмма.</span><span class="sxs-lookup"><span data-stu-id="13b61-277">Placement of the focus point largely depends on what the hologram is looking at.</span></span> <span data-ttu-id="13b61-278">Приложение имеет вектор взгляда на ссылку, и конструктор приложений знает, какое содержимое он хочет отслеживать.</span><span class="sxs-lookup"><span data-stu-id="13b61-278">The app has the gaze vector for reference and the app designer knows what content they want the user to observe.</span></span>

<span data-ttu-id="13b61-279">Самое важное, что разработчик может сделать, чтобы стабилизировать голограммы, — это визуализация в 60 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="13b61-279">The single most important thing a developer can do to stabilize holograms is to render at 60 FPS.</span></span> <span data-ttu-id="13b61-280">Удаление ниже 60 кадров/с значительно сокращает стабильность, независимо от оптимизации плоскости стабилизации.</span><span class="sxs-lookup"><span data-stu-id="13b61-280">Dropping below 60 FPS will dramatically reduce hologram stability, regardless of the stabilization plane optimization.</span></span>

<span data-ttu-id="13b61-281">**Рекомендации** Нет универсального способа настройки плоскости стабилизации, и она зависит от конкретного приложения, поэтому основная рекомендация заключается в эксперименте и о том, что лучше всего подходит для ваших сценариев.</span><span class="sxs-lookup"><span data-stu-id="13b61-281">**Best practices** There is no universal way to set up the stabilization plane and it is app-specific, so the main recommendation is to experiment and see what works best for your scenarios.</span></span> <span data-ttu-id="13b61-282">Однако попробуйте выстроить стабилизации плоскость с максимально возможной точностью содержимого, так как все содержимое этой плоскости полностью стабилизация.</span><span class="sxs-lookup"><span data-stu-id="13b61-282">However, try to align the stabilization plane with as much content as possible because all the content on this plane is perfectly stabilized.</span></span>

<span data-ttu-id="13b61-283">Пример</span><span class="sxs-lookup"><span data-stu-id="13b61-283">For example:</span></span>
* <span data-ttu-id="13b61-284">Если у вас есть только плоское содержимое (приложение для чтения и воспроизведения видео), совместите плоскость стабилизации с плоскостью, в которой находится ваше содержимое.</span><span class="sxs-lookup"><span data-stu-id="13b61-284">If you have only planar content (reading app, video playback app), align the stabilization plane with the plane that has your content.</span></span>
* <span data-ttu-id="13b61-285">Если имеется 3 небольшие шарик, которые заблокированы по всему миру, сделайте стабилизации плоскость "вырезать", хотя центры всех шарик, которые в настоящее время находятся в представлении пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-285">If there are 3 small spheres that are world-locked, make the stabilization plane "cut" though the centers of all the spheres that are currently in the user's view.</span></span>
* <span data-ttu-id="13b61-286">Если содержимое сцены существенно отличается, лучше поработать с другими объектами.</span><span class="sxs-lookup"><span data-stu-id="13b61-286">If your scene has content at substantially different depths, favor further objects.</span></span>
* <span data-ttu-id="13b61-287">Не забудьте настроить стабилизации каждую рамку так, чтобы она совпадала с голограммой, которую пользователь просматривает</span><span class="sxs-lookup"><span data-stu-id="13b61-287">Make sure to adjust the stabilization point every frame to coincide with the hologram the user is looking at</span></span>

<span data-ttu-id="13b61-288">Что **следует избегать** Плоскость стабилизации — это отличный инструмент для достижения стабильных голограмм, но при его использовании может привести к нестабильной работе образа.</span><span class="sxs-lookup"><span data-stu-id="13b61-288">**Things to Avoid** The stabilization plane is a great tool to achieve stable holograms, but if misused it can result in severe image instability.</span></span>
* <span data-ttu-id="13b61-289">Не «срабатывают и не забудьте», так как вы можете присоединиться к стабилизации плоскости, которая находится за пользователем или присоединена к объекту, который больше не находится в представлении пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-289">Don't "fire and forget", since you can end up with the stabilization plane behind the user or attached to an object that is no longer in the user's view.</span></span> <span data-ttu-id="13b61-290">Убедитесь, что нормальная плоскость стабилизации установлена на противоположную камеру (например,-камеру. Forward).</span><span class="sxs-lookup"><span data-stu-id="13b61-290">Ensure the stabilization plane normal is set opposite camera-forward (e.g. -camera.forward)</span></span>
* <span data-ttu-id="13b61-291">Не изменяйте стабилизации плоскость в обратном направлении между крайней скоростью</span><span class="sxs-lookup"><span data-stu-id="13b61-291">Don't rapidly change the stabilization plane back and forth between extremes</span></span>
* <span data-ttu-id="13b61-292">Не оставляйте для плоскости стабилизации фиксированное расстояние или ориентацию.</span><span class="sxs-lookup"><span data-stu-id="13b61-292">Don't leave the stabilization plane set to a fixed distance/orientation</span></span>
* <span data-ttu-id="13b61-293">Не позволяйте стабилизации плоскость по пользователю</span><span class="sxs-lookup"><span data-stu-id="13b61-293">Don't let the stabilization plane cut through the user</span></span>
* <span data-ttu-id="13b61-294">Не устанавливайте точку фокусировки при запуске на настольном компьютере, а не в HoloLens, а вместо этого используйте перестройку на основе глубины на уровне точек.</span><span class="sxs-lookup"><span data-stu-id="13b61-294">Don't set the focus point when running on a desktop PC rather than a HoloLens, and instead rely on per-pixel depth-based reprojection.</span></span>

## <a name="color-separation"></a><span data-ttu-id="13b61-295">Разделение цветов</span><span class="sxs-lookup"><span data-stu-id="13b61-295">Color separation</span></span> 

<span data-ttu-id="13b61-296">Из-за особенностей отображения HoloLens может быть восприниматься артефакт под названием «цветоделение».</span><span class="sxs-lookup"><span data-stu-id="13b61-296">Due to the nature of HoloLens displays, an artifact called "color-separation" can sometimes be perceived.</span></span> <span data-ttu-id="13b61-297">Он манифесты в виде изображения, отделенного отдельными базовыми цветами — красным, зеленым и синим.</span><span class="sxs-lookup"><span data-stu-id="13b61-297">It manifests as the image separating into individual base colors - red, green and blue.</span></span> <span data-ttu-id="13b61-298">Артефакт может быть особенно видимым при отображении белых объектов, так как они имеют большой объем красного, зеленого и синего.</span><span class="sxs-lookup"><span data-stu-id="13b61-298">The artifact can be especially visible when displaying white objects, since they have large amounts of red, green and blue.</span></span> <span data-ttu-id="13b61-299">Это наиболее произносится, когда пользователь визуально отслеживает голограмму, которая перемещается в holographic кадре с высокой скоростью.</span><span class="sxs-lookup"><span data-stu-id="13b61-299">It is most pronounced when a user visually tracks a hologram that is moving across the holographic frame at high speed.</span></span> <span data-ttu-id="13b61-300">Другой способ, который может быть манифестом артефакта, — деформацию или деформировать объекты.</span><span class="sxs-lookup"><span data-stu-id="13b61-300">Another way the artifact can manifest is warping/deformation of objects.</span></span> <span data-ttu-id="13b61-301">Если объект имеет высокую контрастность и (или) чистые цвета (красный, зеленый, синий), разделение цветов будет рассматриваться как деформацию различных частей объекта.</span><span class="sxs-lookup"><span data-stu-id="13b61-301">If an object has high contrast and/or pure colors (red, green, blue), color-separation will be perceived as warping of different parts of the object.</span></span>

<span data-ttu-id="13b61-302">**Пример того, как пользователь поворачивает свою головку на сторону, может выглядеть так, как цветовая разделяться белым скругленным курсором с заголовком.**</span><span class="sxs-lookup"><span data-stu-id="13b61-302">**Example of what the color separation of a head-locked white round cursor could look like as a user rotates their head to the side:**</span></span>

![Пример того, как пользователь поворачивает свою головку на сторону, может выглядеть так, как цветовая разделяться белым скругленным курсором с заголовком.](images/colorseparationofroundwhitecursor-300px.png)

<span data-ttu-id="13b61-304">Несмотря на то, что трудно избежать разделения цветов, существует несколько способов их устранения.</span><span class="sxs-lookup"><span data-stu-id="13b61-304">Though it's difficult to completely avoid color separation, there are several techniques available to mitigate it.</span></span>

<span data-ttu-id="13b61-305">**Цветоделение можно увидеть на:**</span><span class="sxs-lookup"><span data-stu-id="13b61-305">**Color-separation can be seen on:**</span></span>
* <span data-ttu-id="13b61-306">Объекты, которые быстро перемещаются, включая объекты, заблокированные в голову, например [курсор](cursors.md).</span><span class="sxs-lookup"><span data-stu-id="13b61-306">Objects that are moving quickly, including head-locked objects such as the [cursor](cursors.md).</span></span>
* <span data-ttu-id="13b61-307">Объекты, которые значительно далеко от [плоскости стабилизации](hologram-stability.md#reprojection).</span><span class="sxs-lookup"><span data-stu-id="13b61-307">Objects that are substantially far from the [stabilization plane](hologram-stability.md#reprojection).</span></span>

<span data-ttu-id="13b61-308">**Для ослабления эффекта разделения цветов:**</span><span class="sxs-lookup"><span data-stu-id="13b61-308">**To attenuate the effects of color-separation:**</span></span>
* <span data-ttu-id="13b61-309">Сделайте объект задержкой пользователя.</span><span class="sxs-lookup"><span data-stu-id="13b61-309">Make the object lag the user's gaze.</span></span> <span data-ttu-id="13b61-310">Он должен выглядеть так, как если бы он был в некоторой инерции и был прикреплен к взгляду «по пружины».</span><span class="sxs-lookup"><span data-stu-id="13b61-310">It should appear as if it has some inertia and is attached to the gaze "on springs".</span></span> <span data-ttu-id="13b61-311">Это замедлит работу курсора (уменьшая расстояние разделения) и помещает его за наиболее вероятную точку.</span><span class="sxs-lookup"><span data-stu-id="13b61-311">This slows the cursor (reducing separation distance) and puts it behind the user's likely gaze point.</span></span> <span data-ttu-id="13b61-312">Пока он быстро перехватывается, когда пользователь останавливает сдвиг своего взгляда, он выглядит довольно естественным.</span><span class="sxs-lookup"><span data-stu-id="13b61-312">So long as it quickly catches up when the user stops shifting their gaze it feels quite natural.</span></span>
* <span data-ttu-id="13b61-313">Если вы хотите переместить голограмму, постарайтесь, чтобы скорость перемещения была меньше 5 градусов в секунду, если предполагается, что пользователь будет следовать за ним.</span><span class="sxs-lookup"><span data-stu-id="13b61-313">If you do want to move a hologram, try to keep its movement speed below 5 degrees/second if you anticipate that the user will follow it with their eyes.</span></span>
* <span data-ttu-id="13b61-314">Для курсора используйте *светлое* вместо *Geometry* .</span><span class="sxs-lookup"><span data-stu-id="13b61-314">Use *light* instead of *geometry* for the cursor.</span></span> <span data-ttu-id="13b61-315">Источник виртуального освещения, присоединенный к указателю, будет рассматриваться как интерактивный указатель, но не будет приводить к разделению цветов.</span><span class="sxs-lookup"><span data-stu-id="13b61-315">A source of virtual illumination attached to the gaze will be perceived as an interactive pointer but will not cause color-separation.</span></span>
* <span data-ttu-id="13b61-316">Настройте плоскость стабилизации в соответствии с голограммами, на которых пользователь облаками.</span><span class="sxs-lookup"><span data-stu-id="13b61-316">Adjust the stabilization plane to match the holograms the user is gazing at.</span></span>
* <span data-ttu-id="13b61-317">Сделайте объект красным, зеленым или синим.</span><span class="sxs-lookup"><span data-stu-id="13b61-317">Make the object red, green or blue.</span></span>
* <span data-ttu-id="13b61-318">Переключиться на размытую версию содержимого.</span><span class="sxs-lookup"><span data-stu-id="13b61-318">Switch to a blurred version of the content.</span></span> <span data-ttu-id="13b61-319">Например, знак «Скругленный белый курсор» может быть изменен на немного размытую линию, ориентированную на направление движения.</span><span class="sxs-lookup"><span data-stu-id="13b61-319">For example, a round white cursor could be changed to a slightly blurred line oriented in the direction of motion.</span></span>

<span data-ttu-id="13b61-320">Как и раньше, отрисовка в 60 кадров/с и настройка плоскости стабилизации является наиболее важными методиками для повышения стабильности.</span><span class="sxs-lookup"><span data-stu-id="13b61-320">As before, rendering at 60 FPS and setting the stabilization plane are the most important techniques for hologram stability.</span></span> <span data-ttu-id="13b61-321">При заметном разделении цветов сначала убедитесь, что частота кадров соответствует ожиданиям.</span><span class="sxs-lookup"><span data-stu-id="13b61-321">If facing noticeable color separation, first make sure the frame rate meets expectations.</span></span>

## <a name="see-also"></a><span data-ttu-id="13b61-322">См. также статью</span><span class="sxs-lookup"><span data-stu-id="13b61-322">See also</span></span>
* [<span data-ttu-id="13b61-323">Основные сведения о производительности смешанной реальности</span><span class="sxs-lookup"><span data-stu-id="13b61-323">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="13b61-324">Цвет, свет и материалы</span><span class="sxs-lookup"><span data-stu-id="13b61-324">Color, light and materials</span></span>](color,-light-and-materials.md)
* [<span data-ttu-id="13b61-325">Инстинктивное взаимодействие</span><span class="sxs-lookup"><span data-stu-id="13b61-325">Instinctual interactions</span></span>](interaction-fundamentals.md)
* [<span data-ttu-id="13b61-326">МРТК голограмма стабилизации</span><span class="sxs-lookup"><span data-stu-id="13b61-326">MRTK Hologram Stabilization</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/hologram-stabilization.html)
