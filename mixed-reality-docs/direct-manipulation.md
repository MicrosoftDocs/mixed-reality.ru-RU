---
title: Непосредственное манипулирование руками
description: Обзор модели ввода с помощью непосредственного манипулирования
author: caseymeekhof
ms.author: cmeekhof
ms.date: 04/02/2019
ms.topic: article
ms.localizationpriority: high
keywords: Mixed Reality, Gaze, gaze targeting, interaction, design, hands near, HoloLens
ms.openlocfilehash: 6e3512eab4070680c48ee8e95240a17e9925822f
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2019
ms.locfileid: "66402394"
---
# <a name="direct-manipulation-with-hands"></a>Непосредственное манипулирование руками
Непосредственное манипулирование —это модель ввода, которая предполагает прикосновение к голограммам непосредственно руками. Цель непосредственного манипулирования состоит в том, чтобы объекты вели себя так же, как в реальном мире. Кнопки можно активировать, просто нажимая их, объекты можно выбирать, хватая их, а двумерное содержимое ведет себя как виртуальный сенсорный экран.  По этой причине пользователям легко и весело осваивать непосредственное манипулирование.  Оно считается моделью "ближнего" ввода. Это означает, что его лучше всего использовать для взаимодействия с содержимым, которое находится в пределах досягаемости.

Непосредственное манипулирование основано на возможностях интерфейса, и оно удобно для пользователей. Оно не подразумевает символические жесты. Все взаимодействия построены вокруг визуального элемента, который вы можете тронуть или схватить.

## <a name="device-support"></a>Поддержка устройств


| Модель ввода | [HoloLens (1-го поколения)](hololens-hardware-details.md) | HoloLens 2 |[Иммерсивные гарнитуры](immersive-headset-hardware-details.md)|
|:-------- | :-------| :--------| :------------|
| Непосредственное манипулирование руками | ❌ Не поддерживается | ✔ Рекомендуется | ➕ Другой вариант. Рекомендуется [наведение и выполнение действия руками](point-and-commit.md).

Непосредственное манипулирование является основной моделью ввода при работе с HoloLens 2 и использует новую систему отслеживания рук. Модель ввода также доступна для иммерсивных гарнитур благодаря использованию контроллеров движения, но не рекомендуется в качестве основного средства взаимодействия вне манипулирования объектами.  Непосредственное манипулирование недоступно на устройстве HoloLens (1-го поколения).


## <a name="collidable-fingertip"></a>Кончик пальца с обратной связью

На устройстве HoloLens 2 реальные руки пользователя распознаются и интерпретируются как модели скелета левой и правой руки. Чтобы реализовать идею прикосновения к голограммам непосредственно с помощью рук, в идеале можно прикрепить 5 индикаторов обратной связи к 5 кончикам пальцев каждой скелетной модели руки. Однако на практике из-за отсутствия тактильной обратной связи 10 кончиков пальцев с обратной связью вызывали неожиданные и непредсказуемые столкновения с голограммами. 

Следовательно, мы предлагаем размещать индикатор обратной связи только на каждый указательный палец. Кончики указательных пальцев с обратной связью могут по-прежнему служить активными точками касания для различных жестов с участием других пальцев, таких как нажатие одним пальцем, касание одним пальцем, нажатие двумя пальцами и нажатие 5 пальцами, как показано на рисунке ниже.

![Рисунок кончика пальца с обратной связью](images/Collidable-Fingertip-720px.jpg)

### <a name="sphere-collider"></a>Сферический индикатор обратной связи

Вместо случайной универсальной формы мы предлагаем использовать сферический индикатор обратной связи и визуализировать его, чтобы обеспечить лучшее восприятие позиционирования. Диаметр сферы должен соответствовать толщине указательного пальца, чтобы повысить точность касания. Получить переменную толщину пальца будет легко, вызвав API для работы с руками.

### <a name="fingertip-cursor"></a>Курсор для кончика пальца

Помимо рендеринга интерактивной сферы для кончика указательного пальца, мы создали продвинутое решение, курсор для кончика пальца, чтобы обеспечить возможность улучшенного прицеливания. Это указатель в форме пончика, прикрепленный к кончику указательного пальца. По мере приближения он динамически реагирует на цель с точки зрения ориентации и размера, как описано ниже:

* Когда указательный палец приближается к голограмме, курсор всегда параллелен поверхности голограммы и постепенно соответственно уменьшается в размере.
* Как только палец касается поверхности, курсор сжимается до точки и создается событие касания.

Благодаря интерактивной обратной связи пользователи могут достигать высокой точности при выполнении задач целеуказания, таких как запуск гиперссылки на странице веб-содержимого или нажатие кнопки, как показано ниже. 

![Рисунок курсора для кончика пальца](images/Fingertip-Cursor-720px.jpg)

## <a name="bounding-box-with-proximity-shader"></a>Ограничивающая рамка с шейдером приближения

Для самой голограммы также требуется способность обеспечивать как визуальную, так и звуковую обратную связь, чтобы компенсировать отсутствие тактильной обратной связи. Для этого мы придумали концепцию ограничивающей рамки с шейдером приближения. Ограничивающая рамка — это минимальная объемная область, включающая трехмерный объект. Ограничивающая рамка имеет интерактивный механизм визуализации, называемый шейдером приближения. Поведение шейдера приближения:

* Когда указательный палец находится в пределах диапазона, указатель кончика пальца проецируется на поверхность ограничивающей рамки.
* Когда кончик пальца приближается к поверхности, указатель сжимается соответственно.
* Как только кончик пальца коснется поверхности, вся ограничивающая рамка изменит цвет или создаст визуальный эффект для индикации состояния касания.
* Между тем для увеличения визуальной обратной связи касания можно активировать звуковой эффект.

![Изображение ограничивающей рамки с шейдером приближения](images/Bounding-Box-With-Proximity-Shader-720px.jpg)

## <a name="pressable-button"></a>Нажимаемая кнопка

Благодаря кончику пальца с обратной связью пользователи могут взаимодействовать с основополагающим компонентом голографического интерфейса — нажимаемой кнопкой. Нажимаемая кнопка — это голографическая кнопка, предназначенная для непосредственного нажатия пальцем. Опять же, из-за отсутствия тактильной обратной связи нажимаемая кнопка оснащена несколькими механизмами для решения проблем, связанных с тактильной обратной связью.

* Первый механизм — это ограничивающая рамка с шейдером приближения, подробно описанные в предыдущем разделе. Он служит для того, чтобы пользователи чувствовали приближение и контакт с кнопкой.
* Второй — продавливание. Оно создает ощущение нажатия, после того как кончик пальца соприкасается с кнопкой. Механизм заключается в том, что кнопка плотно перемещается вместе с кончиком пальца вдоль оси глубины. Кнопка может сработать, когда она достигает заданной глубины (при нажатии) или поднимается (при отпускании) после прохождения через нее.
* Для улучшения обратной связи нужно добавить звуковой эффект, активируемый при нажатии кнопки.

![Изображение нажимаемой кнопки](images/Pressable-Button-720px.jpg)

## <a name="2d-slate-interaction"></a>Взаимодействие с двумерным экраном

Двумерный экран — это голографический контейнер с содержимым двумерных приложений, таких как веб-браузер. Концепция для взаимодействия с двумерным экраном с помощью непосредственного манипулирования заключается в применении мысленной модели взаимодействия с физическим сенсорным экраном.

Для взаимодействия с экраном:

* Используйте указательный палец, чтобы нажать гиперссылку или кнопку.
* Используйте указательный палец для прокрутки содержимого экрана вверх и вниз.
* Используйте два указательных пальца, чтобы увеличивать и уменьшать содержимое экрана в соответствии с относительным движением пальцев.

![Изображение двумерного экрана](images/2D-Slate-Interaction-720px.jpg)

Для манипулирования самим двумерным экраном:

* Поднесите руки к углам и краям, чтобы выявить самые близкие возможности для манипуляции.
* Захватите возможности для манипуляции, выполните равномерное масштабирование с помощью угловых возможностей и адаптируйте с помощью крайних возможностей.
* Схватите голографическую панель в верхней части двумерного экрана, что позволит переместить весь экран.

![Изображение манипуляции с экраном](images/Manipulate-2d-slate-720px.jpg)

## <a name="3d-object-manipulation"></a>Манипулирование трехмерными объектами

HoloLens 2 позволяет пользователям руками управлять трехмерными голографическими объектами, применяя ограничивающую рамку к каждому такому объекту. Ограничивающая рамка обеспечивает лучшее восприятие глубины благодаря шейдеру приближения. С ограничивающей рамкой доступно два подхода для манипулирования трехмерными объектами.

### <a name="affordance-based-manipulation"></a>Манипуляция на основе возможностей

Она позволяет манипулировать трехмерным объектом с помощью ограничивающей рамки и возможностей для манипулирования вокруг него. Как только рука пользователя приближается к трехмерному объекту, появляются ограничивающая рамка и ближайшая возможность. Пользователи могут захватить ограничивающую рамку, чтобы переместить весь объект, захватить возможности по краям, чтобы повернуть, и возможности в углах, чтобы выполнить равномерное масштабирование.

![Изображение манипулирования трехмерными объектами](images/3D-Object-Manipulation-720px.jpg)

### <a name="non-affordance-based-manipulation"></a>Манипуляция без использования возможностей

В этом методе возможности не привязаны к ограничивающей рамке. Пользователи могут только отобразить ограничивающую рамку, а затем напрямую взаимодействовать с ней. Если ограничивающая рамка захватывается одной рукой, перемещение и вращение объекта связаны с движением и ориентацией руки. Когда объект хватается двумя руками, пользователи могут переносить, масштабировать и вращать его в соответствии с относительными движениями двух рук.

Для определенных манипуляций требуется точность. Рекомендуется использовать **манипулирование на основе возможностей**, так как оно обеспечивает высокий уровень точности. Для гибкого манипулирования мы рекомендуем использовать **манипулирование без использования возможностей**, так как оно позволяет получить мгновенный и интересный опыт.

## <a name="instinctual-gestures"></a>Инстинктивные жесты

При работе с HoloLens (1-го поколения) мы обучили пользователей нескольким предопределенным жестам, таким как раскрытие ладони и касание. В случае с HoloLens 2 мы не просим пользователей запоминать какие-либо символические жесты. Все необходимые жесты пользователя, с помощью которых можно взаимодействовать с голограммами и содержимым, являются инстинктивными. Способ достижения инстинктивного жеста состоит в том, чтобы побуждать пользователей выполнять жесты на основе дизайна возможностей пользовательского интерфейса.

Например, если нам требуется, чтобы вы захватили объект или контрольную точку двумя пальцами, объект или контрольная точка должны быть маленькими. Если мы хотим, чтобы вы захватили элемент пятью пальцами, объект или контрольная точка должны быть относительно большими. Как и при работе с кнопками, крошечную кнопку пользователь нажмет одним пальцем, в то время как большая кнопка будет побуждать пользователей нажимать ее ладонями.

![](images/Instinctual-Gestures-720px.jpg)

## <a name="symmetric-design-between-hands-and-6-dof-controllers"></a>Симметричный дизайн для работы с помощью рук и контроллеров с шестью степенями свободы

Возможно, вы заметили параллели при взаимодействии с помощью рук в дополненной реальности и контроллерами движения в виртуальной реальности. Оба способа ввода можно использовать для выполнения непосредственного манипулирования в соответствующих средах. В HoloLens 2 захват и перетаскивание руками на близком расстоянии работает почти так же, как кнопка захвата на контроллерах движения в WMR. Это позволяет пользователям лучше понять разницу взаимодействия между двумя платформами и может оказаться полезным, если вы когда-нибудь решите перенести свое приложение с одной из них на другую.

## <a name="optimize-with-eye-tracking"></a>Оптимизация с помощью отслеживания глаз

Непосредственное манипулирование может показаться магией, если оно работает, как задумано. Тем не менее можно быстро расстроиться, если при движении рук возникает непреднамеренная активация голограммы.
Отслеживание глаз потенциально может помочь лучше определить намерения пользователя.

* **Если**. Уменьшение ложного срабатывания ответа на действие манипулирования. Отслеживание глаз позволяет лучше понять, что в настоящее время интересует пользователя.
Например, представьте, что вы читаете голографический (учебный) текст и протягиваете руку, чтобы схватить реальный рабочий инструмент.

Таким образом, вы случайно перемещаете руку над различными интерактивными голографическими кнопками, на которые вы не обращаете внимание (возможно, они даже были вне поля зрения пользователя).

  Говоря кратко, если пользователь некоторое время не смотрел на голограмму, но было обнаружено событие касания или захвата, вероятно, пользователь фактически не намеревался взаимодействовать с этой голограммой.

* **Который элемент**.  Помимо ложноположительных активаций, иногда требуется лучшее определение голограмм, которые нужно захватить или активировать, так как точная точка пересечения может быть неясной с вашей точки зрения, особенно если несколько голограмм расположены близко друг к другу.

  Хотя отслеживание глаз в HoloLens 2 имеет некоторое ограничение точности определения вашего взгляда, оно все равно может быть очень полезно для взаимодействий на коротких расстояниях из-за дисбаланса глубины при взаимодействии с вводом вручную.  Это означает, что иногда трудно определить, где находится ваша рука (позади или перед голограммой), чтобы, например, точно захватить виджет манипуляции.

* **Где**. Использование информации о том, на что смотрит пользователь, выполняющий быстрые жесты. Захватите голограмму и небрежно переместите ее в место назначения.  

    Хотя иногда это работает отлично, быстрое выполнение жестов руками может привести к очень неточному определению направлений. Именно здесь отслеживание глаз может помочь вернуть вектор движения руки в сторону предполагаемой позиции.

## <a name="see-also"></a>См. также

* [Направление головы и фиксация](gaze-and-commit.md)
* [Наведение и фиксация с использованием рук](point-and-commit.md)
* [Инстинктивное взаимодействие](interaction-fundamentals.md)

