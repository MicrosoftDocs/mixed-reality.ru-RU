---
title: Учебники по службам речи Azure — 1. Интеграция и использование распознавания речи и транскрипции
description: Пройдите этот курс, чтобы узнать, как реализовать пакет SDK для службы распознавания речи Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 4baef90f8e00e5da1063c708ae24d2057e0dc227
ms.sourcegitcommit: 6bc6757b9b273a63f260f1716c944603dfa51151
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2019
ms.locfileid: "73438374"
---
# <a name="1-integrating-and-using-speech-recognition-and-transcription"></a>1. Интеграция и использование распознавания речи и транскрипции

В этом руководстве создается приложение смешанной реальности, в котором рассматривается использование пакета Azure Cognitive Services Speech SDK с HoloLens 2. По завершении работы с этой серией руководств вы сможете использовать микрофон устройства для транскрипция речи в текст в режиме реального времени, перевода речи на другие языки и использования функции речевого пакета SDK для понимания голосовых команд с помощью искусственный интеллект.

## <a name="objectives"></a>Задачи

- Узнайте, как интегрировать пакет SDK для Azure для распознавания речи в приложение HoloLens 2.
- Узнайте, как использовать команды Voice
- Узнайте, как использовать возможности преобразования речи в текст

## <a name="instructions"></a>Инструкция

### <a name="getting-started"></a>начало работы

1. Запустите Unity и создайте новый проект. Введите имя проекта модуль Learning SDK для распознавания речи. Выберите расположение для сохранения проекта. Затем нажмите кнопку Создать проект.

![Module2Chapter3step1im](images/module4chapter1step1im.PNG)

> Примечание. Убедитесь, что для шаблона задано значение 3D, как показано на рисунке выше.

2. Скачайте пакет Unity [набора средств для смешанной реальности](https://github.com/microsoft/MixedRealityToolkit-Unity/releases/download/v2.0.0-RC2/Microsoft.MixedReality.Toolkit.Unity.Foundation-v2.0.0-RC2.unitypackage) и сохраните его в папку на компьютере. Импортируйте пакет в проект Unity. Подробные инструкции о том, как это сделать, см. в разделе [базовый модуль урок 1](mrlearning-base-ch1.md). 

3. Скачайте и импортируйте пакет [SDK для службы распознавания речи](https://aka.ms/csspeech/unitypackage) Azure для пакета ресурсов Unity. Импортируйте пакет SDK для распознавания речи, щелкнув элемент "ресурсы", выбрав команду "Импорт пакета", а затем выбрав "пользовательский пакет". Найдите пакет SDK для распознавания речи, скачанный ранее, и откройте его, чтобы начать процесс импорта. 

![Module4Chapter1step3ima](images/module4chapter1step3ima.PNG)

![Module4Chapter1step3im](images/module4chapter1step3im.PNG)

4. Во всплывающем окне далее нажмите кнопку Импорт, чтобы начать импорт пакета SDK для распознавания речи. Убедитесь, что проверяются все элементы, как показано на рисунке ниже.

![Module4Chapter1step4im](images/module4chapter1step4im.PNG)

5. Скачайте пакет SDK для модуля распознавания речи, также известный как пакет Лунарком, щелкнув [эту ссылку](https://github.com/microsoft/MixedRealityLearning/releases/tag/Speech_2). Пакет ресурсов Лунарком — это набор ресурсов и сценариев, разработанных для этой серии занятий, чтобы продемонстрировать практичное использование пакета SDK для распознавания речи Azure. Это терминал с голосовым интерфейсом, который в конечном итоге будет взаимодействовать с модулем разработки лунного модуля, разработанным в [руководстве по базовому модулю.](mrlearning-base-ch6.md)

6. Импортируйте пакет ресурсов Лунарком в проект Unity, выполнив аналогичные действия, которые были выполнены для импорта набора средств Mixed Reality Toolkit и Speech SDK.
7. Настройте набор средств для смешанной реальности (МРТК). Для этого щелкните панель набор средств смешанной реальности в верхней части окна, а затем выберите Добавить в сцену и настроить.

![Module4Chapter1step7im](images/module4chapter1step7im.PNG)

![module4Chapter1step9ima](images/module4chapter1step9ima.PNG)

![module4Chapter1step9imb](images/module4chapter1step9imb.PNG)

8. В сцене теперь есть несколько новых элементов из МРТК. Сохраните сцену под другим именем, щелкнув "файл", "Сохранить как" и указав имя сцены Спичсцене. 

> Примечание. Если вы нажмете кнопку Воспроизвести в сцене после добавления МРТК в проект и не введете режим воспроизведения, может потребоваться перезапустить Unity. 

9. Выбрав объект Микседреалититулкит в иерархии, щелкните Копировать и настроить на панели Инспектор.

![Module4Chapter1step9im](images/module4chapter1step9im.PNG)

10. Кроме того, на панели инспектора (с объектом Микседреалититулкит, выбранным в иерархии) Отключите систему диагностики, отменив флажок справа от параметра включить систему диагностики.

![Module4Chapter1step9imd](images/module4chapter1step9imd.PNG)

11. Чтобы включить Voice Commands, выберите только что созданный профиль МРТК для настройки. В этом руководстве мы используем команды ввода речи для распознавания речи и транскрипции. Позволяет клонировать входной профиль для внесения изменений в речевые параметры.

![Module4Chapter1step11imb](images/module4chapter1step11imb.PNG)

![Module4Chapter1step11imd](images/module4chapter1step11imd.PNG)

12. После клонирования входного профиля перейдите в раздел голосовые команды и выполните клонирование речевых команд.

![Module4Chapter1step12imb](images/module4chapter1step12imb.PNG)

![Module4Chapter1step12imc](images/module4chapter1step12imc.PNG)

13. Теперь в разделе команды речи перейдите в раздел "Общие параметры" и задайте для параметра "поведение при запуске" значение "запуск вручную".

![Module4Chapter1step13imb](images/module4chapter1step13imb.PNG)

14. На панели проект разверните папку Лунарком и перетащите Lunarcom_Base prefab в иерархию.

![Module4Chapter1step11im](images/module4chapter1step11im.PNG)

15. Выберите объект Lunarcom_Base в иерархии и убедитесь, что для параметра положением задано значение x = 0, y = 0, а z = 0, а для вращения задано значение x = 0, y = 0, а z = 0. Установите масштаб для чтения x = 0.008, y = 0.008 и z = 0,01.

![Module4Chapter1step12im](images/module4chapter1step12im.PNG)

16. Щелкните Добавить компонент, найдите и выберите Лунаркомконтроллер. Этот сценарий включен в пакет ресурсов Лунарком, который вы импортировали на шаге 6.

![Module4Chapter1step13im](images/module4chapter1step13im.PNG)

17. Чтобы подключить приложение к Azure Cognitive Services, необходимо ввести ключ подписки (также известный как ключ API) для службы речи. Чтобы получить бесплатный ключ подписки, выполните инструкции, приведенные [здесь](https://docs.microsoft.com//azure/cognitive-services/speech-service/get-started) . После получения ключа подписки введите его в поле ключа API речевой службы компонента Лунаркомконтроллер на панели инспектора, как показано на рисунке ниже.

18. Введите регион, который вы выбрали при регистрации ключа подписки в поле региона службы "речь" компонента Лунаркомконтроллер на панели инспектора. Например, для региона "Западная часть США" в "westus"

![Module4Chapter1step15im](images/module4chapter1step15im.PNG)

19. В иерархии разверните объект Lunarcom_Base, щелкнув стрелку слева от него. Затем сделайте то же самое для своего дочернего объекта «Terminal», как показано на рисунке ниже.

20. Хотя Lunarcom_Base выбран, щелкните и перетащите Лунарком текст из иерархии в выходной текстовый слот в компоненте Лунаркомконтроллер на панели инспектора, как показано на рисунке ниже.

21. Сделайте то же самое с объектом терминала в слоте терминала и объектом Light соединения с слотом контроллера источника подключения.

![Module4Chapter1step18im](images/module4chapter1step18im.PNG)

22. Щелкните стрелку рядом с разделом Лунарком Buttons сценария Лунаркомконтроллер на панели инспектора и измените размер на 3. Нажмите клавишу ВВОД или Return. Это приводит к отображению трех новых полей элементов.

![Module4Chapter1step19im](images/module4chapter1step19im.PNG)

23. Разверните кнопки Лунарком, щелкнув стрелку рядом с ней в иерархии и используя тот же процесс, что и выше, перетащите микрофон, вспомогательный объект и Rocket объекты gameobject на элементы 0, 1 и 2, соответственно, в компонент Лунаркомконтроллер в Панель инспектора. 

![Module4Chapter1step18im](images/module4chapter1step20im.PNG)

24. Выберите объект Lunarcom_Base в иерархии. Щелкните Добавить компонент на панели инспектора и найдите и выберите Лунаркомвакевордрекогнизер.

![Module4Chapter1step18im](images/module4chapter1step21im.PNG)

25. В слоте слова "Пробуждение" введите в поле активировать терминал. В области отклонить слово введите отклонить терминал.

![Module4Chapter1step18im](images/module4chapter1step22im.PNG)

### <a name="build-your-application-to-your-device"></a>Разработка приложения для устройства

1. Снова откройте окно параметры сборки, перейдя в файл > параметры сборки.

![Занятия 1 Chapter5 шаг 1](images/Lesson1Chapter5Step1.JPG)

2. Убедитесь, что необходимая сцена находится в списке Scenes in Build (Сцены в сборке), нажав кнопку Add Open Scenes (Добавить открытые сцены).
3. Нажмите кнопку Параметры проигрывателя и выберите Параметры публикации. В разделе возможности включите: Интернет, клиентский сервер Интернет, сервер клиента частной сети, микрофон и пространственное восприятие.
4. В том же параметрах проигрывателя перейдите к параметрам XR и выберите Виртуальная реальность, поддерживаемая в ON.
5. Нажмите кнопку Build (Сборка), чтобы начать процесс сборки.

![Занятия 1 Chapter5 шаг 3](images/Lesson1Chapter5Step3.JPG)

6. Создайте папку для приложения и укажите для нее название. На приведенном ниже изображении для хранения приложения была создана папка с именем App. Щелкните Select Folder (Выбор папки), чтобы начать создание приложения в новой папке. После завершения создания вы можете закрыть окно Build Settings (Параметры сборки) в Unity. 

![Занятия 1 Chapter5 шаг 4](images/Lesson1Chapter5Step4.JPG)

> Примечание. Если сборка завершается неудачно, попробуйте повторить сборку или перезапустить Unity и выполнить сборку снова. Если отображается ошибка, например "ошибка: CS0246 = не удалось найти тип или имя пространства имен" XX "(возможно, отсутствует директива using или ссылка на сборку?)", возможно, потребуется установить [пакет SDK для Windows 10 (10.0.18362.0)](<https://developer.microsoft.com//windows/downloads/windows-10-sdk>) .

7. После завершения сборки откройте созданную папку, содержащую файлы только что созданного приложения. Дважды щелкните файл решения ". sln", чтобы открыть файл решения в Visual Studio.

> Примечание. Откройте только что созданную папку (например, папку App), если следовать соглашениям об именовании из предыдущих шагов), так как файл с расширением SLN будет находиться за пределами этой папки, который не следует путать с файлом. sln в папке Build. 

![Урок 1, раздел 5, шаг 5](images/Lesson1Chapter5Step5.JPG)

> Примечание. Если Visual Studio предложит установить новые компоненты, проверьте, что все необходимые компоненты установлены, как указано на [странице "Установка средств"](install-the-tools.md) .

8. Подключите HoloLens 2 к компьютеру с помощью USB-кабеля. Хотя в инструкциях этого урока предполагается, что вы будете развертывать тестирование на устройстве HoloLens 2, вы также можете выполнить развертывание на [эмуляторе HoloLens 2](using-the-hololens-emulator.md) или создать [пакет приложения для передачи данных на другое локальное устройство](<https://docs.microsoft.com//windows/uwp/packaging/packaging-uwp-apps>).
9. Перед выполнением сборки для устройства включите на нем режим разработчика. Если вы впервые используете HoloLens 2, в Visual Studio может появиться запрос на подключение к HoloLens 2 с использованием PIN-кода. Выполните [эти инструкции](https://docs.microsoft.com//windows/mixed-reality/using-visual-studio), если вам нужно включить режим разработчика или выполнить соединение с Visual Studio.

10. Настройте Visual Studio для сборки на устройство HoloLens 2, выбрав конфигурацию "Выпуск" и архитектуру ARM.

![Занятия 1 Chapter5 Step8](images/Lesson1Chapter5Step8.JPG)

11. Последний шаг — это сборка на вашем устройстве. Выберите "Отладка" > "Запуск без отладки". Это приведет к немедленному запуску приложения на вашем устройстве после успешной сборки. Однако в Visual Studio сведения об отладке отображаться не будут. Это также означает, что вы можете отсоединить USB-кабель во время выполнения приложения на устройстве HoloLens 2, не прерывая его работу. Кроме того, вы можете выбрать "Сборка" > "Развернуть решение", чтобы развернуть решение на устройстве без автоматического запуска приложения.

![Занятия 1 Chapter5 Step9](images/Lesson1Chapter5Step9.JPG)

## <a name="congratulations"></a>Поздравляем!

Вы настроили распознавание речи в приложении на платформе Azure. Запустите приложение, чтобы убедиться, что все функции и функции работают правильно. Начните с произнесения слова "Пробуждение", введенного на шаге 22, для активации терминала. Нажмите кнопку микрофон, чтобы запустить распознавание речи. Начните говорить. Вы увидите слова расшифрованной в терминале во время диктовки. Нажмите кнопку с микрофоном еще раз, чтобы отключить распознавание речи. Выскажите «отклонить терминал», чтобы скрыть терминал Лунарком. На следующем занятии мы расскажем о том, как динамически переключаться на использование распознавания речи на основе устройств в ситуациях, когда недоступен пакет SDK для перевода в Azure из-за отсутствия подключения к сети HoloLens 2.

[Следующий учебник: 2. Добавление автономного режима для локального перевода речи в текст](mrlearning-speechSDK-ch2.md)

