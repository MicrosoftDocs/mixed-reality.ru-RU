---
title: Использование эмулятора HoloLens
description: Эмулятор HoloLens позволяет тестировать приложения смешанной реальности на обычном компьютере без физического устройства HoloLens.
author: pbarnettms
ms.author: pbarnett
ms.date: 08/14/2019
ms.topic: article
ms.localizationpriority: high
keywords: HoloLens, emulator
ms.openlocfilehash: 6c112b7706f1dfff7c4affbdb4ee7326f0e15c8a
ms.sourcegitcommit: 06c27acdac24c845952f9c1d3611770756f25820
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2019
ms.locfileid: "69030169"
---
# <a name="using-the-hololens-emulator"></a>Использование эмулятора HoloLens

Эмулятор HoloLens позволяет тестировать голографические приложения на обычном компьютере без физического устройства HoloLens. Кроме того, в него входит набор средств разработки HoloLens. Этот эмулятор использует виртуальную машину Hyper-V. Данные, которые поступают от человека или из окружающей среды и которые обычно считываются датчиками HoloLens, можно имитировать с помощью клавиатуры, мыши или контроллера Xbox. Вам не нужно изменять приложения, чтобы запускать их в эмуляторе, так как они не получают информацию о том, что выполняются не на реальном устройстве HoloLens.

Если вы планируете разрабатывать приложения или игры для настольных компьютеров с Windows Mixed Reality и гарнитурой смешанной реальности (VR), см. дополнительные сведения о [симуляторе Windows Mixed Reality](using-the-windows-mixed-reality-simulator.md), который позволяет имитировать гарнитуры для классических приложений.


## <a name="installing-the-hololens-emulator"></a>Установка эмулятора HoloLens
Скачайте эмулятор HoloLens.

Доступные версии: 
* [эмулятор HoloLens 2](https://go.microsoft.com/fwlink/?linkid=2101019);
* [эмулятор HoloLens (1-го поколения) и шаблоны голографических проектов](https://go.microsoft.com/fwlink/?linkid=2065980).

Другие сборки эмулятора HoloLens можно найти на странице [архива эмулятора HoloLens](hololens-emulator-archive.md).

### <a name="hololens-emulator-system-requirements"></a>Системные требования для эмулятора HoloLens

Эмулятор HoloLens использует Hyper-V с RemoteFx (эмулятор 1-го поколения) или GPU-PV (эмулятор HoloLens 2) для аппаратного ускорения графики. Чтобы использовать эмулятор, ваш компьютер должен соответствовать следующим требованиям к оборудованию:
* 64-разрядная версия Windows 10 Pro, Корпоративная или для образовательных учреждений. 
    >[!NOTE]
    >Выпуск Windows 10 Домашняя не поддерживает Hyper-V и эмулятор HoloLens.  
    >Для эмулятора HoloLens 2 требуется обновление Windows от 10 октября 2018 г. или более поздней версии.
* 64-разрядный ЦП.
* ЦП с 4 ядрами (или несколько процессоров с 4 ядрами в сумме).
* ОЗУ не менее 8 ГБ.
* Следующие компоненты должны быть [доступными и включенными](http://blogs.technet.com/b/iftekhar/archive/2010/08/09/enable-hardware-settings-in-bios-to-run-hyper-v.aspx) в BIOS:
   * Аппаратная виртуализация
   * Преобразование адресов второго уровня (SLAT)
   * Аппаратное предотвращение выполнения данных (DEP)
* Требования к графическому процессору:
   * DirectX 11.0 или более поздней версии.
   * графический драйвер WDDM 1.2 или более поздней версии (для 1-го поколения);
   * Графический драйвер WDDM 2.5 (для эмулятора HoloLens 2).
   * Возможно, эмулятор будет работать с неподдерживаемым графическим процессором, но значительно медленнее.

Если ваша система отвечает указанным выше требованиям, для успешной установки эмулятора **проверьте, есть ли в системе компонент Hyper-V**. Для этого откройте панель управления и перейдите к разделу "Программы" -> "Программы и компоненты" -> "Включение или отключение компонентов Windows" и убедитесь, что компонент Hyper-V выбран.

## <a name="deploying-apps-to-the-hololens-emulator"></a>Развертывание приложений в эмуляторе HoloLens

1. Загрузите решение приложения в Visual Studio.
    >[!NOTE]
    >Если вы используете Unity, скомпилируйте проект из Unity и загрузите созданное решение в Visual Studio.
2. Для эмулятора HoloLens (1-го поколения) нужно выбрать платформу **x86**. Для эмулятора HoloLens 2 нужно выбрать платформу **x86** или **x64**.
3. Выберите нужную версию **эмулятора HoloLens** в качестве целевого устройства для отладки.
4. Выберите **Отладка > Начать отладку** или нажмите клавишу **F5**, чтобы запустить эмулятор и развернуть в нем приложение для отладки.

Загрузка эмулятора при первом запуске может занять несколько минут. Мы рекомендуем оставить эмулятор открытым во время всего сеанса отладки, чтобы быстро развертывать в нем приложения.

## <a name="basic-emulator-input"></a>Базовые устройства ввода для эмулятора

Управление эмулятором выполняется так же, как во многих распространенных трехмерных играх. В качестве устройств ввода можно использовать клавиатуру, мышь или контроллер Xbox. Управление эмулятором осуществляется путем контроля над действиями имитируемого пользователя с устройством HoloLens. С помощью ваших действий имитируемый пользователь движется в среде. Приложения в эмуляторе, работают так же, как на реальном устройстве.

Курсор в HoloLens (1-го поколения) отслеживает перемещения и повороты головы. В эмуляторе HoloLens 2 курсор отслеживает перемещения и направление головы.

* **Перемещение вперед, назад, влево и вправо** — нажимайте клавиши W, A, S и D на клавиатуре или перемещайте левый джойстик на контроллере Xbox.
* **Взгляд вверх, вниз, влево и вправо** — перемещайте мышь с нажатой левой кнопкой, используйте клавиши со стрелками на клавиатуре или перемещайте правый джойстик на контроллере Xbox.
* **Жест касания** — нажмите правую кнопку мыши, клавишу ВВОД на клавиатуре или кнопку A на контроллере Xbox.
* **Жест раскрытия ладони** — нажмите клавишу Windows или F2 на клавиатуре или клавишу B на контроллере Xbox.
* **Перемещение руки для прокрутки** — перемещайте мышь вверх-вниз, одновременно удерживая нажатыми клавишу ALT и правую кнопку мыши, либо на контроллере Xbox перемещайте вверх или вниз левый джойстик, удерживая нажатыми правый триггер и клавишу A.
* **Перемещение и ориентация руки** (только в эмуляторе HoloLens 2) — перемещайте мышь вверх, вниз, влево или вправо, удерживая нажатой клавишу ALT, чтобы перемещать руку, либо нажимайте клавиши со стрелками и Q или E для поворота и наклона руки. На контроллере Xbox перемещайте левый аналоговый стик, удерживая нажатым левый или правый бампер, чтобы перемещать руку влево, вправо, вперед и назад, перемещайте правый аналоговый стик для поворота руки либо перемещайте Dpad вверх или вниз для подъема и опускания руки.

## <a name="anatomy-of-the-hololens-2-emulator"></a>Анатомия эмулятора HoloLens 2 

### <a name="main-window"></a>Главное окно

![Главное окно эмулятора HoloLens 2](images/emulator2-900px.png)

### <a name="toolbar"></a>панель инструментов;

Справа от главного окна размещена панель инструментов эмулятора. На панели инструментов расположены следующие кнопки:
* ![Значок закрытия](images/emulator-close.png) **Закрыть**. Закрывает эмулятор.
* ![Значок свертывания](images/emulator-minimize.png) **Свернуть**. Сворачивает окно эмулятора.
* ![Значок имитации](images/emulator-simulation-panel.png) **Панель управления имитацией**. Показывает и скрывает [панель управления имитацией](#simulation-control-panel), которая позволяет настраивать [устройства ввода для эмулятора](#basic-emulator-input) и управлять ими.
* ![Значок размещения на весь экран](images/emulator-fit.png) **На весь экран**. Увеличивает окно эмулятора до размера экрана.
* ![Значок масштаба](images/emulator-zoom.png) **Масштаб**. Увеличивает или уменьшает окно эмулятора.
* ![Значок справки](images/emulator-help.png) **Справка**. Отображает справку по эмулятору.
* ![Значок открытия портала устройств](images/emulator-deviceportal.png) **Открыть портал устройств**. Открывает в эмуляторе портал устройств Windows для HoloLens OS.
* ![Значок средств](images/emulator-tools.png) **Средства**. Открывает панель **дополнительных средств**.

### <a name="simulation-control-panel"></a>Панель управления имитированием

Панель управления имитацией позволяет просматривать текущее положение и ориентацию имитируемого человека и устройств ввода. Также вы здесь можете настроить имитируемые устройства ввода, например отобразить или скрыть одну или обе руки, либо выбрать для управления этими устройствами клавиатуру, мышь и игровой контроллер.

![Панель управления имитированием](images/emulator-simulation-control-panel.png)

* Чтобы скрыть или показать панель управления имитированием, нажмите соответствующую кнопку на панели инструментов или клавишу F7 на клавиатуре.
* Наведите указатель мыши на элемент управления или поле, чтобы увидеть всплывающую подсказку с соответствующими элементами управления на клавиатуре, мыши и игровом контроллере.
* Чтобы отобразить или скрыть руку, измените положение соответствующего переключателя для левой или правой руки.
* Для управления движением руки, нажмите левую или правую клавишу ALT на клавиатуре или левый или правый бампер на игровом контроллере.
* Чтобы переключить ввод на одну или обе руки, щелкните значок канцелярской кнопки под переключателем отображения.  Он действует так же, как удержание клавиши ALT для соответствующей руки.
* Чтобы управлять направлением взгляда, щелкните значок канцелярской кнопки в разделе Eyes (Глаза). Он действует так же, как удержание клавиши Y на клавиатуре.
* Чтобы загрузить запись комнаты, нажмите кнопку Load (Загрузить) в разделе Recording (Запись). См. подробнее об [имитируемых комнатах](#simulated-rooms).
* Чтобы изменить скорость движения или поворота имитируемого человека либо устройств ввода в ответ на манипуляции с клавиатурой, мышью или игровым контроллером, щелкните значок шестеренки рядом с элементом Input settings (Параметры ввода) и переместите ползунки.
* По умолчанию имитируемый человек и имитируемое устройство ввода управляются с клавиатуры. Чтобы переключить ввод с клавиатуры компьютера на HoloLens, снимите флажок Use keyboard for simulation (Использовать клавиатуру для имитации).  Этот параметр переключается с помощью клавиши F4.
* Если панель имитации уже отображается, с помощью клавиши F8 можно переместить в нее фокус клавиатуры.
* Чтобы открепить панель имитирования от окна эмулятора, нажмите кнопку в нижней части панели или клавишу F9 на клавиатуре.  При закрытии окна или повторном нажатии клавиши F9 это окно снова отображается в эмуляторе.
* Панель управления имитированием можно открыть как отдельное приложение, чтобы подключиться для управления к эмулятору HoloLens 2, устройству HoloLens 2 или модели Windows Mixed Reality, запустив файл PerceptionSimulationInput.exe из папки %ProgramFiles(x86)%\Windows Kits\10\Microsoft XDE\10.0.18362.0\.

### <a name="account-tab"></a>вкладка "Учетная запись"

На вкладке Account (Учетная запись) вы можете настроить для эмулятора вход в систему с использованием учетной записи Майкрософт. Это полезно для тестирования API-интерфейсов, которые требуют входа пользователя с учетной записью. Чтобы переключить этот параметр, нужно закрыть и перезапустить эмулятор HoloLens. Если этот параметр включен, при последующих запусках эмулятор предложит выполнять вход, как для обычного пользователя при первом запуске HoloLens. Чтобы ввести учетные данные с клавиатуры компьютера, прежде всего отключите параметр Use keyboard for simulation (Использовать клавиатуру для имитации) на панели управления имитацией. Для этого снимите флажок или нажмите клавишу F4 на клавиатуре.

### <a name="optional-settings-tab"></a>Вкладка Optional Settings (Дополнительные параметры)

На вкладке Optional Settings (Дополнительные параметры) отображается элемент управления, который позволяет включить или отключить аппаратное ускорение графики. Аппаратное ускорение графики по умолчанию включено, если его поддерживает графический адаптер компьютера. Если драйвер видеоадаптера не поддерживает GPU-PV, этот параметр будет недоступен.

### <a name="diagnostics-tab"></a>Вкладка Diagnostics (Диагностика)

Вкладка Diagnostics (Диагностика) отображает IP-адрес эмулятора в формате ссылки на портал устройств Windows, а также состояние виртуального графического процессора.


## <a name="anatomy-of-the-hololens-1st-gen-emulator"></a>Анатомия эмулятора HoloLens (1-го поколения)

### <a name="main-window"></a>Главное окно

При запуске эмулятора отображается окно ОС HoloLens.

![Главное окно эмулятора HoloLens](images/emulator-890px.png)

### <a name="toolbar"></a>панель инструментов;

Справа от главного окна размещена панель инструментов эмулятора. На панели инструментов расположены следующие кнопки:
* ![Значок закрытия](images/emulator-close.png) **Закрыть**. Закрывает эмулятор.
* ![Значок свертывания](images/emulator-minimize.png) **Свернуть**. Сворачивает окно эмулятора.
* ![Значок пользовательского ввода](images/emulator-control.png) **Пользовательский ввод**. Клавиатура и мышь используются для имитации [пользовательского ввода для эмулятора](#basic-emulator-input).
* ![Значок ввода с клавиатуры и мыши](images/emulator-input.png) **Ввод с клавиатуры и мыши**. Поступающие с клавиатуры и мыши данные передаются напрямую в операционную систему HoloLens как события клавиатуры и мыши, как при обычном подключении клавиатуры и мыши через Bluetooth.
* ![Значок размещения на весь экран](images/emulator-fit.png) **На весь экран**. Увеличивает окно эмулятора до размера экрана.
* ![Значок масштаба](images/emulator-zoom.png) **Масштаб**. Увеличение или уменьшение окна эмулятора.
* ![Значок справки](images/emulator-help.png) **Справка**. Отображение справочных сведений об эмуляторе.
* ![Значок открытия портала устройств](images/emulator-deviceportal.png) **Открыть портал устройств**. Открывает в эмуляторе портал устройств Windows для HoloLens OS.
* ![Значок средств](images/emulator-tools.png) **Средства**. Открывает панель **дополнительных средств**.

### <a name="simulation-tab"></a>Вкладка Simulation (Имитирование)

По умолчанию на панели **Additional Tools** (Дополнительные средства) открывается вкладка **Simulation** (Имитирование).

![Панель Additional Tools (Дополнительные средства) в эмуляторе HoloLens](images/emulator-simulation-500px.png)

Вкладка "Имитирование" отображает текущее состояние имитированных датчиков, с которыми работает ОС HoloLens в эмуляторе. Если навести курсор на любое значение на этой вкладке, отображается всплывающая подсказка с описанием методов управления этим значением.

### <a name="room-tab"></a>Вкладка Room (Комната)

Эмулятор имитирует ввод данных об окружающем мире в формате сетки пространственного сопоставления из имитируемых комнат. Эта вкладка позволяет выбрать комнату для загрузки вместо комнаты по умолчанию.

![Вкладка Rooms (Комнаты) в эмуляторе HoloLens](images/emulator-room-500px.png)

См. подробнее об [имитируемых комнатах](#simulated-rooms).

### <a name="account-tab"></a>вкладка "Учетная запись"

На вкладке Account (Учетная запись) вы можете настроить для эмулятора вход в систему с использованием учетной записи Майкрософт. Это полезно для тестирования API, которые требуют входа пользователя с учетной записью. Когда вы включите этот параметр на этой странице, при последующих запусках эмулятор предложит выполнить вход, как для обычного пользователя при первом запуске HoloLens.

## <a name="simulated-rooms"></a>Имитированные комнаты

Имитированные комнаты используются для тестирования приложения в нескольких средах. Вместе с эмулятором предоставляются несколько комнат. После установки эмулятора они доступны в папке %ProgramFiles (x86)%\Windows Kits\10\Microsoft XDE\\(версия)\Plugins\Rooms. Все эти комнаты записаны в реальных средах с помощью HoloLens.
* **DefaultRoom.xef** — небольшая гостиная с телевизором, столиком и двумя диванами. По умолчанию при запуске эмулятора загружается именно эта комната.
* **Bedroom1.xef** — небольшая спальня со столом.
* **Bedroom2.xef** — спальня с двуспальной кроватью, комодом, тумбочками и большим гардеробом.
* **GreatRoom.xef** — огромная комната открытой планировки с зоной гостиной, обеденным столом и зоной кухни.
* **LivingRoom.xef** — гостиная с камином, диваном, креслами и кофейным столиком, на котором стоит ваза.

Вы можете записать собственные комнаты для использования в эмуляторе на странице имитирования на [портале устройств Windows](using-the-windows-device-portal.md) для HoloLens (1-го поколения).

В эмуляторе можно просмотреть только отрисовываемые вами голограммы. Имитированная комната на их фоне не отображается. Это важное отличие от настоящего устройства HoloLens, на котором эти элементы объединены. Если вы хотите, чтобы имитируемая комната отображалась в эмуляторе HoloLens, включите в приложении отображение сетки пространственного сопоставления для нужной сцены.

## <a name="troubleshooting"></a>Поиск и устранение неисправностей

Вы можете увидеть при установке эмулятора ошибку с сообщением о том, что требуются *Visual Studio 2015 с обновлением 1 и средства UWP версии 1.2*. Эта ошибка может быть вызвана одной из трех причин:
* У вас нет поддерживаемой версии Visual Studio (Visual Studio 2019, Visual Studio 2017 или Visual Studio 2015 с обновлением 1 или более поздней версии). Чтобы исправить эту проблему, установите последний выпуск Visual Studio.
* У вас есть поддерживаемая версия Visual Studio, но не установлены средства универсальной платформы Windows (UWP). Это необязательный компонент Visual Studio.

Также вы можете увидеть сообщение об ошибке при установке эмулятора на ОС Windows, если версия отличается от Pro, Корпоративная или для образовательных учреждений либо если в системе не включен компонент Hyper-V.
* См. [полный список требований к системе](#hololens-emulator-system-requirements), приведенный выше в этой статье.
* Кроме того, убедитесь, что в системе включена функция Hyper-V.

Если установка завершилась успешно, но вы не видите эмулятор HoloLens в списке вариантов для развертывания и отладки, проверьте следующее:
* В конфигурации проекта Visual Studio указано значение x86 для HoloLens 1-го поколения, x86 или x64 для эмулятора HoloLens 2.
* Если используется Visual Studio 2019, для набора инструментов платформы в конфигурации проекта указано значение v142.

Если установка завершилась успешно, но Visual Studio отображает ошибку при попытке запустить эмулятор HoloLens, попробуйте сделать следующее:
* Запуск Visual Studio от имени администратора
* Если у вас была ранее установлена версия Visual Studio 2019, убедитесь, что значение ключа KitsRoot10 в разделе реестра HKEY_LOCAL_MACHINE\Software\Microsoft\Windows Kits\Installed Roots указывает на папку Program Files для 32-разрядных приложений (например, C:\Program Files (x86)\Windows Kits\10).  Если это не так, удалите эмулятор HoloLens, измените значение реестра на папку Program Files для 32-разрядных приложений и снова установите эмулятор HoloLens.  Эта проблема решена в Visual Studio 2019 версии 16.0.3.

Если эмулятор при запуске отображает ошибку с сообщением о недопустимой кодировке байтов, сделайте следующее:
* Удалите все файлы в папке %localappdata%\Microsoft\XDE\HCS и повторите попытку.

Если в Visual Studio список целевых объектов для отладки пуст (или в нем есть только действие "Пуск") и вы уже выполнили все описанные выше действия, сделайте следующее:
* Удалите папку ConfigurationCache в папке %localappdata%\Microsoft\VisualStudio\\<*идентификатор установки*>\CoreCon и повторите попытку.

Если система зависает при запуске эмулятора, отключите аппаратное ускорение для графики эмулятора.
* Создайте значение реестра с типом DWORD и именем DisableGPU в разделе HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\XDE\10.0 и присвойте ему значение 1.

## <a name="see-also"></a>См. также
* [Сложный ввод с помощью эмулятора HoloLens и симулятора Windows Mixed Reality](advanced-hololens-emulator-and-mixed-reality-simulator-input.md)
* [Журнал программного обеспечения в эмуляторе HoloLens](hololens-emulator-archive.md)
* [Пространственное сопоставление в Unity](spatial-mapping-in-unity.md)
* [Пространственное сопоставление в DirectX](spatial-mapping-in-directx.md)
