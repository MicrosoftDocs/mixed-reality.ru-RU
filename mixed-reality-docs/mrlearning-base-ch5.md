---
title: Учебники по началу работы — 6. Просмотр дополнительных параметров ввода
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 18bcbc95746a2e66b88d83f279603aa7f171bbcb
ms.sourcegitcommit: cc61f7ac08f9ac2f2f04e8525c3260ea073e04a7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77129665"
---
# <a name="6-exploring-advanced-input-options"></a>6. Изучение дополнительных параметров ввода

В этом учебнике вы узнаете о нескольких дополнительных параметрах ввода для HoloLens 2, включая использование речевых команд, жестов панорамирования и отслеживания глаз.

## <a name="objectives"></a>Задачи

* Активация событий с помощью голосовых команд и ключевых слов
* Использование отслеживаний руки для сдвига текстур и трехмерных объектов с помощью отслеживания руки
* Использование возможностей отслеживания взгляда HoloLens 2 для выбора объектов

## <a name="enabling-voice-commands"></a>Включение голосовых команд
<!-- TODO: Consider changing to 'Enabling Speech Commands -->

В этом разделе будет реализована Голосовая команда, позволяющая пользователю воспроизвести звук на объекте восьмиядерными. Для этого вы создадите новую голосовую команду, а затем настроите событие, чтобы оно запустит нужное действие при произнесении ключевого слова Command речи.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Клонировать входной профиль системы по умолчанию
2. Клонирование профиля голосовых команд по умолчанию
3. Создать новую голосовую команду
4. Добавление и настройка компонента обработчика речевого ввода (script)
5. Реализация события ответа для команды распознавания речи

### <a name="1-clone-the-default-input-system-profile"></a>1. клонировать входной системный профиль по умолчанию

В окне Иерархия выберите объект **микседреалититулкит** , а затем в окне инспектора выберите вкладку **Вход** и клонировать **DefaultHoloLens2InputSystemProfile** , чтобы заменить его собственным настраиваемым **системным профилем ввода**:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step1-1.png)

> [!TIP]
> Напоминание о том, как клонировать профили МРТК, можно найти в статье [Настройка профилей набора средств для смешанной реальности](mrlearning-base-ch2.md#how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option) .

### <a name="2-clone-the-default-speech-commands-profile"></a>2. клонирование профиля голосовых команд по умолчанию

Разверните раздел **распознавания речи** и клонировать **дефаултмикседреалитиспичкоммандспрофиле** , чтобы заменить его своим собственным настраиваемым **профилем голосовых команд**:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step2-1.png)

### <a name="3-create-a-new-speech-command"></a>3. Создание новой команды речи

В разделе **речевые команды** нажмите кнопку **+ Добавить новую голосовую** команду, чтобы добавить новую команду речи в нижнюю часть списка существующих речевых команд, а затем в поле **ключевое слово** введите подходящее слово или фразу, например **Воспроизведение музыки**:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step3-1.png)

> [!TIP]
> Если у компьютера нет микрофона и вы хотите протестировать голосовую команду с помощью имитации в редакторе, можно назначить KeyCode команде распознавания речи, которая позволит активировать ее при нажатии соответствующей клавиши.

### <a name="4-add-and-configure-the-speech-input-handler-script-component"></a>4. Добавление и настройка компонента обработчика речевого ввода (script)

В окне Иерархия выберите объект **восьмиядерными** и добавьте компонент **обработчика речевого ввода (script)** в объект восьмиядерными. Установите флажок **является обязательным для фокуса** , чтобы пользователю не требовалось просматривать объект восьмиядерными, чтобы активировать голосовую команду:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step4-1.png)

### <a name="5-implement-the-response-event-for-the-speech-command"></a>5. Реализация события ответа для команды распознавания речи

В компоненте обработчика речевого ввода (скрипт) нажмите кнопку мелкий **+** , чтобы добавить ключевое слово, а затем в раскрывающемся списке **ключевых слов** выберите ключевое слово **воспроизвести музыку** , созданное ранее:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step5-1.png)

> [!NOTE]
> Ключевые слова в раскрывающемся списке ключевых слов заполняются на основе ключевых слов, определенных в списке речевых команд в профиле голосовых команд.

Создайте новое событие **Response ()** , настройте объект **восьмиядерными** для получения события, определите **аудиосаурце. плайонешот** в качестве действия, которое необходимо активировать, и назначьте подходящий звуковой клип полю **аудиоклипа** , например, MRTK_Gem аудиоклип:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section1-step5-2.png)

> [!TIP]
> Напоминание о том, как реализовать события и назначить аудиоклип, можно найти в разделе [Реализация событий On Touch Started](mrlearning-base-ch4.md#4-implement-the-on-touch-started-event) .

## <a name="the-pan-gesture"></a>Жест сдвига

Жест панорамирования удобен для прокрутки с помощью пальца или руки для прокрутки содержимого. В этом примере вы сначала научитесь прокручивать 2D-пользовательский интерфейс, а затем разворачивать его, чтобы иметь возможность прокручивать коллекцию трехмерных объектов.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Создать объект Quad, который можно использовать для панорамирования
2. Добавление компонента с сенсорным взаимодействием (script)
3. Добавление компонента "Масштаб" (скрипт) взаимодействия с руки
4. Добавить 2D-содержимое для прокрутки
5. Добавить трехмерное содержимое для прокрутки
6. Добавление компонента "переместить с помощью Pan" (скрипт)

> [!NOTE]
> Компонент перемещения с помощью элемента PAN (script) не является частью МРТК. Он был предоставлен с ресурсами этого учебника.

### <a name="1-create-a-quad-object-that-can-be-used-for-panning"></a>1. Создайте объект Quad, который можно использовать для панорамирования.

В окне Иерархия щелкните правой кнопкой мыши пустую область и выберите **трехмерный объект** > « **четыре** », чтобы добавить в сцену четыре элемента. Присвойте ему подходящее имя, например **панжестуре**, и поместите его в подходящее расположение, например X = 0, Y =-0,2, Z = 2.

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step1-1.png)

> [!TIP]
> Напоминание о добавлении в сцену примитивов Unity, таких как объемные четыре, можно найти в инструкциях по [добавлению Куба к](mrlearning-base-ch2.md#2-add-a-cube-to-the-scene) сцене.

Как и при любом другом взаимодействии, для жеста сдвига также требуется объект, являющийся механизмом. По умолчанию четырехъядерный объект имеет конфликты сетки. Тем не менее, конфликты сетки не идеально подходят, так как это чрезвычайно тонкий. Чтобы упростить взаимодействие пользователя с конфликтующим, мы заменили конфликтующую сетку с помощью блочного конфликта.

Выбрав объект Панжестуре, щелкните значок " **Параметры** " компонента " **конфликт сетки** " и выберите **удалить компонент** , чтобы удалить конфликтующую сетку:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step1-2.png)

В окне инспектора нажмите кнопку **Добавить компонент** , чтобы добавить **рамку**, а затем измените значение поля **Размер** отчасти от Z на 0,15, чтобы увеличить толщину окна "рамка".

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step1-3.png)

### <a name="2-add-the-near-interaction-touchable-script-component"></a>2. Добавьте компонент с сенсорным взаимодействием (script).

Выбрав объект **панжестуре** , добавьте в объект панжестуре элемент с **сенсорным взаимодействием (script)** , а затем щелкните кнопки **исправить границы** и **центр исправлений** , чтобы обновить локальные свойства центра и границ близкого взаимодействия (скрипт), чтобы они соответствовали боксколлидер:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step2-1.png)

### <a name="3-add-the-hand-interaction-pan-zoom-script-component"></a>3. Добавление компонента "Масштаб" (скрипт) для взаимодействия с руки

Если объект **панжестуре** все еще выбран, добавьте компонент « **масштаб» (сценарий) руки** в объект панжестуре, а затем установите флажок « **Блокировка по горизонтали** », чтобы разрешить только вертикальную прокрутку:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step3-1.png)

### <a name="4-add-2d-content-to-be-scrolled"></a>4. Добавьте 2D-содержимое для прокрутки

На панели "проект" найдите материал **панконтент** , а затем щелкните его и перетащите в свойство "элемент **Material** объекта **панжестуре** ".

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step4-1.png)

В окне инспектора разверните вновь добавленный компонент **панконтент** Material, а затем измените его **Мозаичное** значение Y на 0,5, чтобы оно соответствовало значению X, а плитки отображались в виде квадрата:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step4-2.png)

Если теперь вы вводите режим игры, можно протестировать 2D-содержимое с помощью жеста панорамирования в модели в редакторе:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step4-3.png)

### <a name="5-add-3d-content-to-be-scrolled"></a>5. Добавьте трехмерное содержимое для прокрутки

В окне Иерархия **Создайте четыре Куба** в качестве дочерних объектов **панконтент** и задайте для их **шкалы** преобразования значение X = 0,15, Y = 0,15, Z = 0,15:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step5-1.png)

Для равномерного промежутка между кубами и экономии времени добавьте компонент коллекция объектов сетки (скрипт) в родительский объект Cubes, т. е. объект Панжестуре, и настройте коллекцию объектов Grid (скрипт) следующим образом:

* Измените **число строк** на 1, чтобы все Кубы были согласованы в одной строке.
* Измените **ширину ячейки** на 0,25, чтобы пропустить Кубы в строке

Затем нажмите кнопку **Update Collection (обновить коллекцию** ), чтобы применить новую конфигурацию:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step5-2.png)

### <a name="6-add-the-move-with-pan-script-component"></a>6. Добавление компонента "переместить с помощью Pan" (скрипт)

В окне Иерархия выберите все **дочерние объекты куба**, а затем в окне инспектора нажмите кнопку **Добавить компонент** , чтобы добавить компонент " **переместить с помощью панорамы (скрипт)** " во все Кубы:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step6-1.png)

> [!TIP]
> Напоминание о том, как выбрать несколько объектов в окне иерархии, условий использования можно найти в разделе [Добавление компонента обработчика манипуляций (script) ко всем](mrlearning-base-ch4.md#1-add-the-manipulation-handler-script-component-to-all-the-objects) инструкциям по работе с объектами.

После выбора всех кубов щелкните и перетащите объект **панжестуре** в поле **источник входных данных Pan** :

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step6-2.png)

> [!TIP]
> Компонент "переместить с помощью панорамы" (скрипт) в каждом кубе прослушивает событие "сдвиг обновлена", отправленное компонентом Хандинтерактионпанзум (script), в объекте Панжестуре, который был назначен как источник входных данных Pan на шаге выше, и обновляет положение каждого куба. соответствующее.

В окне Иерархия выберите объект **панжестуре** , а затем в инспекторе снимите **флажок** для модуля подготовки к **просмотру сетки** , чтобы отключить компонент модуля подготовки к просмотру.

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step6-3.png)

Если теперь вы вводите режим игры, можно протестировать трехмерное содержимое с помощью жеста панорамирования в модели в редакторе:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section2-step6-4.png)

## <a name="eye-tracking"></a>Отслеживание взгляда

В этом разделе вы узнаете, как включить отслеживание взглядов в проекте. В этом примере вы реализуете функции для того, чтобы каждый объект в 3DObjectCollection вращается медленно при просмотре взгляда пользователя, а также запускает эффект кратковременного сбоя, когда просматриваемый объект выбирается с помощью команды Air-TAP или речи.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Добавьте компонент цели отслеживания взгляда (script) для всех целевых объектов
2. Добавьте компонент учебника по отслеживанию взгляда (script) для всех целевых объектов
3. Реализовать событие While при просмотре целевого объекта
4. Реализовать выбранное событие
5. Включение имитации отслеживания взгляда для имитации в редакторе
6. Включение ввода с помощью взгляда в возможности приложения проекта Visual Studio

### <a name="1-add-the-eye-tracking-target-script-component-to-all-target-objects"></a>1. Добавьте целевой компонент отслеживания взгляда (script) для всех целевых объектов

В окне Иерархия разверните объект **3DObjectCollection** и выберите все **дочерние объекты**, а затем в окне инспектора нажмите кнопку **Добавить компонент** , чтобы добавить компонент **цели отслеживания взгляда (script)** в все дочерние объекты:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step1-1.png)

Выбрав все **дочерние объекты** , настройте компонент **цели отслеживания взгляда (script)** следующим образом:

* Изменить **выберите действие** для **выбора**, чтобы определить действие "Воздушный нажим" для этого объекта как SELECT
* Развернуть **голос SELECT** и установить для списка команд голосового **формата** значение 1, а затем в списке новый элемент измените значение **элемента 0** на **SELECT**, чтобы определить действие команды речи для этого объекта в качестве SELECT.

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step1-2.png)

### <a name="2-add-the-eye-tracking-tutorial-demo-script-component--to-all-target-objects"></a>2. Добавьте компонент учебника по отслеживанию взгляда (script) для всех целевых объектов

Выбрав все **дочерние объекты** , нажмите кнопку **Добавить компонент** , чтобы добавить компонент **учебника по отслеживанию взгляда (script)** для всех дочерних объектов:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step2-1.png)

> [!NOTE]
> Компонент цели отслеживания взгляда (script) не является частью МРТК. Он был предоставлен с ресурсами этого учебника.

### <a name="3-implement-the-while-looking-at-target-event"></a>3. Реализуйте событие при просмотре целевого события

В окне Иерархия выберите объект **Мак** , а затем создайте новое событие **при просмотре целевого объекта ()** , настройте объект **Мак** для получения события и определите **эйетраккингтуториалдемо. ротатетаржет** в качестве действия для запуска:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step3-1.png)

**Повторите эти действия** для каждого дочернего объекта в 3DObjectCollection.

> [!TIP]
> Напоминание о том, как реализовать события, можно найти в разделе [жесты отслеживания руки и инструкции по взаимодействию с управляемыми кнопками](mrlearning-base-ch2.md#hand-tracking-gestures-and-interactable-buttons) .

### <a name="4-implement-the-on-selected-event"></a>4. Реализация выбранного события

В окне Иерархия выберите объект **Мак** , а затем создайте новое событие **on Selected ()** , настройте объект **Мак** для получения события и определите **эйетраккингтуториалдемо. ротатетаржет** в качестве действия для запуска:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step4-1.png)

**Повторите эти действия** для каждого дочернего объекта в 3DObjectCollection.

### <a name="5-enable-simulated-eye-tracking-for-in-editor-simulations"></a>5. Включение имитации отслеживания взгляда для имитации в редакторе

В окне Иерархия выберите объект **микседреалититулкит** , затем в окне инспектора перейдите на вкладку **входные** данные, раскройте раздел **поставщики входных данных** , а затем — **службу моделирования ввода** и клонировать **Дефаултмикседреалитинпутсимулатионпрофиле** , чтобы заменить его собственным настраиваемым **профилем моделирования ввода**:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step5-1.png)

> [!TIP]
> Напоминание о том, как клонировать профили МРТК, можно найти в статье [Настройка профилей набора средств для смешанной реальности](mrlearning-base-ch2.md#how-to-configure-the-mixed-reality-toolkit-profiles-change-spatial-awareness-display-option) .

В разделе **симуляция глаз** установите флажок **имитировать изменение расположения глаз** , чтобы включить симуляцию отслеживания глаз:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step5-2.png)

Если теперь вы вводите режим игры, вы можете протестировать прокрутку и кратковременного сбояные эффекты, которые вы реализовали, настроив представление таким образом, чтобы курсор затронул один из объектов и использовал команду взаимодействия руки или речи, чтобы выбрать объект:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial5-section3-step5-3.png)

> [!NOTE]
> Если вы не использовали DefaultHoloLens2ConfigurationProfile для клонирования настраиваемого профиля конфигурации МРТК, как описано в инструкциях по [настройке набора средств для смешанной реальности](mrlearning-base-ch1.md#configure-the-mixed-reality-toolkit) , отслеживание взгляда может не быть включено в проекте и его необходимо будет включить. Для этого можно обратиться к статье [Приступая к работе с отслеживанием взгляда в](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html) инструкциях мртк.

### <a name="6-enable-gaze-input-in-the-visual-studio-projects-app-capabilities"></a>6. Включение ввода с помощью взгляда в возможности приложения проекта Visual Studio

Перед сборкой и развертыванием приложения из Visual Studio на устройстве необходимо включить входные данные в приложении проекта. Для этого можно выполнить [Тестирование приложения Unity в инструкциях HoloLens 2](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#testing-your-unity-app-on-a-hololens-2) .

## <a name="congratulations"></a>Поздравляем!

Вы успешно добавили базовые возможности отслеживания взгляда в приложение. Эти действия только открывают целый мир новых возможностей, которые предоставляет отслеживание взгляда. В этом учебнике вы также узнали о других дополнительных возможностях ввода, например о голосовых командах и жестах панорамирования.

[Следующее занятие: 7. Создание примера приложения лунного модуля](mrlearning-base-ch6.md)
