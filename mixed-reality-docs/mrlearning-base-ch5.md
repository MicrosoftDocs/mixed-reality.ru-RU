---
title: Учебники по началу работы — 6. Просмотр дополнительных параметров ввода
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: b740c463e3d73d5df9b996562e9ff0a1952703f0
ms.sourcegitcommit: f2b7c6381006fab6d0472fcaa680ff7fb79954d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2019
ms.locfileid: "74064316"
---
# <a name="6-exploring-advanced-input-options"></a>6. Изучение дополнительных параметров ввода

В этом руководстве рассматриваются несколько дополнительных параметров ввода для HoloLens 2, включая использование речевых команд, жестов панорамирования и отслеживания глаз. 

## <a name="objectives"></a>Задачи

- Активация событий с помощью голосовых команд и ключевых слов
- Использование отслеживаний руки для сдвига текстур и трехмерных объектов с помощью отслеживания руки
- Использование возможностей отслеживания взгляда HoloLens 2 для выбора объектов

## <a name="instructions"></a>Инструкция

### <a name="enabling-voice-commands"></a>Включение голосовых команд

В этом разделе реализуются две команды Voice. Во-первых, возможность включения и выключения панели диагностики частоты кадров появилась при произнесении "переключить диагностику". Во-вторых, просматривается возможность воспроизведения звука с голосовыми командами. Сначала просматриваются профили и параметры МРТК, отвечающие за настройку голосов.

1. В иерархии Басесцене выберите Микседреалититулкит. Затем на панели инспектора выберите входные данные и нажмите кнопку малый клон слева от Дефаултмикседреалитинпутсистемпрофиле, чтобы открыть всплывающее окно профиля клона. Во всплывающем окне щелкните клонировать, чтобы создать новый профиль Микседреалитинпутсистемпрофиле.

    ![mrlearning-Base-CH5-1-step1a. png](images/mrlearning-base-ch5-1-step1a.png)

    Это также приведет к автоматическому заполнению Микседреалититулкитконфигуратионпрофиле с помощью вновь созданного Микседреалитинпутсистемпрофиле.

    ![mrlearning-Base-CH5-1-step1b. png](images/mrlearning-base-ch5-1-step1b.png)

2. В системном профиле входных данных существует множество параметров. Для голосовых команд разверните раздел речь и выполните тот же процесс, что и на предыдущем шаге, чтобы клонировать Дефаултмикседреалитиспичкоммандспрофиле и заменить его собственной редактируемой копией.

    ![mrlearning-Base-CH5-1-step2. png](images/mrlearning-base-ch5-1-step2.png)

    В профиле голосовых команд можно заметить ряд параметров. Полное описание этих параметров см. в [документации по мртк Speech](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Speech.html>).

    По умолчанию используется автоматический запуск. При необходимости это можно изменить на запуск вручную. Но для этого примера не заключайте его на автоматический запуск. МРТК поставляется с несколькими голосовыми командами по умолчанию, такими как меню, переключение диагностики и переключение профилировщика. Мы будем использовать ключевое слово "переключить диагностику" для включения и отключения счетчика частоты кадров диагностики. Также мы добавим новую голосовую команду, выполнив описанные ниже действия.

3. Добавьте новую голосовую команду. Для этого нажмите кнопку + Добавить новую голосовую команду. Вы увидите новую строку, которая отображается под списком существующих команд Voice. Введите команду Voice, которую вы хотите использовать. В этом примере используйте команду "воспроизвести музыку".

    ![mrlearning-Base-CH5-1-step3. png](images/mrlearning-base-ch5-1-step3.png)

    >[!NOTE]
    >Можно также задать код клавиши для голосовой команды. Это позволяет голосовым командам активировать события при нажатии клавиши с клавиатуры.

4. Добавьте возможность реагировать на голосовые команды. Выберите любой объект в иерархии Басесцене, к которому не присоединены другие входные сценарии, например объект игры Микседреалитиплайспаце. На панели инспектора щелкните Добавить компонент, выполните поиск по слову "речь" и выберите Скрипт обработчика речевого ввода.

    ![mrlearning-Base-CH5-1-step4. png](images/mrlearning-base-ch5-1-step4.png)

    По умолчанию вы увидите два флажка. Один из них — флажок является обязательным для фокуса. Таким образом, при условии, что вы указываете на объект с помощью лучей-взгляда, Head-взгляда, Контролера или руки-взгляда, будет активирована команда Voice. Снимите этот флажок, чтобы пользователю не нужно было просматривать объект, чтобы использовать команду Voice.

5. Добавьте возможность реагировать на голосовую команду. Для этого нажмите кнопку "+" в обработчике речевого ввода.

    ![mrlearning-Base-CH5-1-step5. png](images/mrlearning-base-ch5-1-step5.png)

6. Рядом с ключевым словом, вы увидите раскрывающееся меню. Выберите переключатель переключить диагностику, чтобы каждый раз, когда пользователь говорит о нажатии фразы "переключить диагностику", он активирует действие. Обратите внимание, что может потребоваться развернуть элемент 0, нажав стрелку рядом с ним.

    ![mrlearning-Base-CH5-1-step6. png](images/mrlearning-base-ch5-1-step6.png)

    >[!NOTE]
    >Эти ключевые слова заполняются в зависимости от профиля, измененного на шаге 3.

7. Добавьте сценарий контроля системных голосов системы диагностики, чтобы включить и отключить диагностику счетчика кадров. Для этого нажмите кнопку "добавить компонент", выполните поиск скрипта "контрольные элементы системы диагностики" и добавьте его в меню. Его можно добавить к любому объекту, но для простоты мы применим тот же объект, где размещен обработчик голосового ввода.

    ![mrlearning-Base-CH5-1-Step7. png](images/mrlearning-base-ch5-1-step7.png)

8. Добавьте новый ответ в обработчик речевого ввода. Для этого щелкните значок "+", чтобы добавить новый ответ в список ответов.

    ![mrlearning-Base-CH5-1-Step8. png](images/mrlearning-base-ch5-1-step8.png)

9. Перетащите объект с помощью скрипта системы управления "Диагностика системных голосов" в новый ответ, созданный на предыдущем шаге.

    ![mrlearning-Base-CH5-1-step9. png](images/mrlearning-base-ch5-1-step9.png)

10. Щелкните раскрывающийся список функций (там, где нет функции), а затем щелкните элемент Диагностика системных голосов и выберите функцию Тоггледиагностикс (), которая включает и выключает диагностику.

    ![mrlearning-Base-CH5-1-step10. png](images/mrlearning-base-ch5-1-step10.png)

    >[!IMPORTANT]
    > Перед началом сборки на устройстве необходимо включить параметры MIC. Для этого щелкните файл и выберите параметры сборки, параметры проигрывателя и убедитесь, что включена возможность использования микрофона.

    Затем добавьте возможность воспроизведения звукового файла из голосовой команды с помощью объекта восьмиядерными. На [занятии 4 вы](mrlearning-base-ch4.md) уже добавили возможность воспроизводить аудиоклип из объекта восьмиядерными. Теперь мы применим тот же аудиоисточник для голосовой команды воспроизведения музыки.

11. Выберите объект восьмиядерными в иерархии Басесцене.

12. Добавьте еще один обработчик речевого ввода (повторите шаги 4 и 5), но с объектом восьмиядерными.

13. Вместо добавления команды переключить диагностические голоса из шага 6 добавьте команду воспроизвести музыку, как показано на рисунке ниже.

    ![mrlearning-Base-CH5-1-step13. png](images/mrlearning-base-ch5-1-step13.png)

14. Как и в случае с шагами 8 и 9, добавьте новый ответ и перетащите в него объект восьмиядерными, который содержит на нем сценарий управления системой диагностики, в пустой слот отклика.

15. Выберите раскрывающееся меню без функции. Затем выберите источник аудио, а затем — Плайонешот (аудиоклип).

    ![Изображение "Урок 5, глава 1, шаг 15"](images/Lesson5_chapter1_step15im.PNG)

16. В этом примере мы будем использовать один и тот же аудиоклип из [занятия 4](mrlearning-base-ch4.md). Перейдите на панель проекта, выполните поиск "MRTK_Gem" аудиоклипа и перетащите его в слот источника аудио, как показано на рисунке ниже. Теперь приложение будет отвечать на команды Voice "переключить диагностику", чтобы переключить панель счетчиков частоты кадров и воспроизвести музыку для воспроизведения MRTK_Gem песни.

    ![Lesson5 Chapter1 Step16im](images/Lesson5_chapter1_step16im.PNG)

### <a name="the-pan-gesture"></a>Жест сдвига

В этом разделе вы узнаете, как использовать жест панорамирования. Это удобно для прокрутки с помощью пальца или руки для прокрутки содержимого. Жест панорамирования также можно использовать для поворота объектов, перемещения по коллекции трехмерных объектов или даже для прокрутки двухмерного пользовательского интерфейса.

1. Создайте объект Quad. В иерархии Басесцене щелкните правой кнопкой мыши и выберите «объемный объект», а затем «четыре».

    ![Изображение "Урок 5, глава 2, шаг 2"](images/Lesson5_chapter2_step2im.PNG)

2. Перемещайте четыре, если это необходимо. В нашем примере мы устанавливаем x = 0, y = 0 и z = 1,5 за пределы камеры для удобного расположения из HoloLens 2.

    >[!NOTE]
    >Если четыре блока или находятся в начале любого содержимого из предыдущих уроков, не забудьте переместить его так, чтобы он не блокировал другие объекты.

3. Примените материал к объекту Quad. Этот материал будет прокручиваться с помощью жеста панорамирования.

    ![Изображение "Урок 5, глава 2, шаг 3"](images/Lesson5_chapter2_step3im.PNG)

4. На панели проекты в поле поиска введите "панорамирование содержимого". Перетащите этот материал на четыре материала в сцене.

    >[!NOTE]
    >Материал Панконтент не входит в МРТК, но включен в ресурс Басемодулеассетс, импортированный на предыдущем занятии.

    Чтобы использовать жест сдвига, для объекта нужно добавить коллайдер. Возможно, вы заметили, что объект Quad уже имеет сетчатый коллайдер. Но этот вариант нам подходит плохо, так как он очень тонкий и его трудно выделять. Мы рекомендуем заменить сетчатый коллайдер на прямоугольный.

5. Щелкните правой кнопкой мыши объект, расположенный на самом четыре, на панели инспектора. Затем удалите его, нажав кнопку удалить компонент.

    ![Lesson5 Chapter2 Step5im](images/Lesson5_chapter2_step5im.PNG)

6. Теперь добавьте поле "конфликты", нажав кнопку Добавить компонент и выполнив поиск по слову "Box конфликтует". Добавленное по умолчанию окно конфликтует по-прежнему является слишком узким, поэтому для изменения нажмите кнопку "Изменить". Пока эта кнопка остается в нажатом состоянии, вы можете изменять значения размера x, y и z для любых элементов в редакторе сцен. В нашем примере мы хотим расширить прямоугольный коллайдер, чтобы он немного выходил за пределы объекта Quad. В редакторе сцен перетащите прямоугольный коллайдер с обратной стороны наружу (как на рисунке ниже). Это позволяет пользователю не только использовать палец, но и прокручивать их все.

    ![Lesson5 Chapter2 Step6im](images/Lesson5_chapter2_step6im.PNG)

7. Добавьте интерактивность. Так как мы хотим взаимодействовать с четырьмя прямыми, мы хотим использовать компонент, который мы использовали с помощью технологии близкого взаимодействия, которая использовалась на занятии 4 для воспроизведения музыки из объекта восьмиядерными. Щелкните Добавить компонент, выполните поиск по фразе "приближается к сенсорному взаимодействию" и выберите его, как показано на рисунке ниже.

    ![mrlearning-Base-CH5-2-step7a. png](images/mrlearning-base-ch5-2-step7a.png)

    Если вы видите желтое предупреждение о границах и (или) центре, не соответствующих размеру и/или центру Боксколлидер, щелкните кнопки исправления и/или центр исправлений, чтобы обновить значения центров и границ.

    ![mrlearning-Base-CH5-2-step7b. png](images/mrlearning-base-ch5-2-step7b.png)

8. Добавьте возможность распознавания жеста сдвига. Нажмите кнопку Добавить компонент, введите "взаимодействие с руки" в поле поиска и добавьте компонент скрипта "действие" для действия "рука".

    ![mrlearning-Base-CH5-2-step8a. png](images/mrlearning-base-ch5-2-step8a.png)

    И с этим у вас есть четыре типа с поддержкой PAN.

    Как видите, компонент сценария "рука" в области действия "взаимодействие" имеет различные параметры, как необязательное упражнение, который можно воспроизвести с помощью.

    ![mrlearning-Base-CH5-2-step8b. png](images/mrlearning-base-ch5-2-step8b.png)

9. Теперь мы изучим сдвиг трехмерных объектов.

    В иерархии щелкните правой кнопкой мыши объект Quad, чтобы открыть контекстное меню, а затем выберите **трехмерный объект** > **куб** , чтобы добавить куб в сцену.

    Убедитесь, что для параметра « **Расположение** Куба» задано значение _0, 0, 0,_ чтобы он точно расположиться в пределах четырех. Масштабирование Куба до **шкалы** _0,1, 0,1, 0,1_.

    ![mrlearning-Base-CH5-2-step9. png](images/mrlearning-base-ch5-2-step9.png)

    Повторяйте куб три раза, щелкнув куб правой кнопкой мыши, открыв контекстное меню и выбрав пункт **дублировать**.

    Равномерное пространство кубов. Сцена должна выглядеть примерно так, как показано на рисунке ниже.

10. Добавьте скрипт Мовевиспан во все Кубы, удерживая нажатой клавишу CTRL при выборе каждого объекта **куба** на панели Иерархия. На панели инспектора нажмите кнопку Добавить компонент, найдите и выберите скрипт **перемещения с помощью панорамы** , чтобы добавить его во все Кубы.

    ![mrlearning-Base-CH5-2-step10a. png](images/mrlearning-base-ch5-2-step10a.png)

    >[!NOTE]
    >Сценарий Мовевиспан не является частью МРТК, но включен в ресурс Басемодулеассетс, импортированный на предыдущем занятии.

    Выбрав Кубы, перетащите объект **Quad** из панели Иерархия в поле **Pan input Source (источник входных данных** ) в компоненте скрипта **сдвига** .

    ![mrlearning-Base-CH5-2-step10b. png](images/mrlearning-base-ch5-2-step10b.png)

    Теперь Кубы будут перемещаться с помощью жеста сдвига.

    >[!TIP]
    >Экземпляр Мовевиспан в каждом кубе прослушивает событие Панупдатед, отправленное из экземпляра Хандинтерактионпанзум в объекте Quad, которое мы добавили в поле источника данных PAN в каждом из кубов, и соответствующим образом обновляет расположение соответствующего объекта куба.

    Выбрав Кубы, переместите их по оси Z, чтобы сетка каждого куба находящегося внутри списка « **четыре** **»** , изменив значения Z для их **положения** на _0,7_.

    ![mrlearning-Base-CH5-2-step10c. png](images/mrlearning-base-ch5-2-step10c.png)

    Теперь, если отключить компонент модуля подготовки данных к **сетке** , **сняв этот флажок**на панели инспектора, у вас будет невидимый четырехъядерный объект, где можно перемещаться по списку трехмерных объектов.

    ![mrlearning-Base-CH5-2-step10d. png](images/mrlearning-base-ch5-2-step10d.png)

### <a name="eye-tracking"></a>Отслеживание взгляда

В этом разделе мы рассмотрим, как включить отслеживание взглядов в нашем демонстрационном ролике. Мы будем медленно вращать элементы трехмерного меню, когда они газед с глазом глаза. Мы также будем активировать специальный эффект при выборе элемента, на который наведен взгляд.

1. Убедитесь, что профили МРТК правильно настроены для отслеживания взгляда. Чтобы сделать это, перейдите к разделу [Приступая к работе с отслеживанием взглядов в](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html) инструкциях мртк и убедитесь, что отслеживание отслеживания взгляда правильно настроено, просмотрев шаги в разделе [Настройка отслеживания взгляда](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#setting-up-eye-tracking-step-by-step) . Выполните все оставшиеся действия в документации.

    >[!NOTE]
    >Если вы использовали DefaultHoloLens2InputSystemProfile, как описано в уроке [Настройка набора средств смешанной реальности](https://docs.microsoft.com/windows/mixed-reality/mrlearning-base-ch1#configure-the-mixed-reality-toolkit) , для клонирования настраиваемого профиля конфигурации мртк в проекте Unity по умолчанию включено отслеживание взгляда, но по-прежнему необходимо настроить симуляцию отслеживания взгляда для редактора Unity и настроить Visual Studio для разрешения отслеживания взгляда для сборки.

    По указанной выше ссылке вы найдете краткие инструкции по выполнению следующих действий:

    - Создание поставщика данных взгляда на Windows Mixed Reality для использования в профиле МРТК
    - Включение отслеживания взгляда в поставщике взгляда, присоединенном к камере
    - Настройка симуляции отслеживания взгляда в редакторе Unity
    - редактирование возможностей решения Visual Studio, чтобы разрешить отслеживание взгляда в скомпилированном приложении.

2. Добавьте компонент отслеживания взгляда в целевые объекты. Чтобы объект мог реагировать на события взгляда на глаза, необходимо добавить компонент Эйетраккингтаржет для каждого объекта, с которым мы хотим взаимодействовать, с помощью взгляда глаз. Добавьте этот компонент в каждый из девяти трехмерных объектов, которые входят в коллекцию сетки.

    >[!TIP]
    >Можно использовать клавиши Shift и CRTL, чтобы выбрать несколько элементов в иерархии, а затем добавить компонент Эйетраккингтаржет.

    ![Lesson5 Chapter3 шаг 2](images/Lesson5Chapter3Step2.JPG)

3. Далее мы добавим сценарий Эйетраккингтуториалдемо для некоторых интересных взаимодействий. Для каждого трехмерного объекта в коллекции сетки добавьте скрипт Эйетраккингтуториалдемо, выполнив поиск компонента в меню Добавление компонента.

    ![Lesson5 Chapter3 шаг 3](images/Lesson5Chapter3Step3.JPG)

    >[!NOTE]
    >Материал сценария Эйетраккингтуториалдемо не входит в МРТК, но включен в ресурс Басемодулеассетс, импортированный на предыдущем занятии.

4. Поверните объект, удерживая взгляд на целевом объекте. Мы хотим настроить трехмерные объекты для прокрутки, пока не просматриваете их. Для этого вставьте новое поле в раздел при просмотре целевого объекта () компонента Эйетраккингтаржет, как показано на рисунке ниже.

    ![Lesson5 Chapter3 Step4a](images/Lesson5Chapter3Step4a.JPG)

    В созданном поле добавьте текущий объект Game в пустое поле и выберите Эйетраккингтуториалдемо > Ротатетаржет (), как показано на рисунке ниже. Теперь трехмерный объект будет вращаться, когда система отслеживания взгляда определит, что пользователь смотрит на него.

    ![Lesson5 Chapter3 Step4b](images/Lesson5Chapter3Step4b.JPG)

5. Добавьте возможность "кратковременного сбоя Target", которая находится в газед при выборе воздушного касания или произнесения команды "Select". Как и на шаге 4, мы хотим активировать Эйетраккингтуториалдемо > Блиптаржет (), назначив его полю SELECT () объекта Game () в компоненте Эйетраккингтаржет, как показано на рисунке ниже. После этого вы заметите небольшое кратковременного сбоя в игровом объекте каждый раз, когда вы активируете действие SELECT, например воздушный разговор или голосовую команду "Select".

    ![Lesson5 Chapter3 шаг 5](images/Lesson5Chapter3Step5.JPG)

6. Убедитесь, что возможности отслеживания взгляда правильно настроены, прежде чем выполнять компиляцию в HoloLens 2. На момент написания этой статьи Unity еще не может установить входные данные взгляда для возможностей отслеживания взгляда. Установка этой возможности необходима для отслеживания взгляда в HoloLens 2. Следуйте инструкциям по [тестированию приложения Unity на HoloLens 2](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#testing-your-unity-app-on-a-hololens-2) , чтобы включить входные возможности.

## <a name="congratulations"></a>Поздравляем!

Вы успешно добавили базовые возможности отслеживания взгляда в приложение. Эти действия только открывают целый мир новых возможностей, которые предоставляет отслеживание взгляда. Эта глава также завершает занятие 5, где мы узнали о расширенных функциях ввода, таких как речевые команды, жесты панорамирования и отслеживание глаз.

[Следующее занятие: 7. Создание примера приложения лунного модуля](mrlearning-base-ch6.md)
