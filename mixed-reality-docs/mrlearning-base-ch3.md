---
title: Учебники по началу работы — 4. Размещение динамического содержимого и использование поисковых решений
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: ade7a839e03a306332bf18f1db49805f59c71429
ms.sourcegitcommit: f2b7c6381006fab6d0472fcaa680ff7fb79954d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2019
ms.locfileid: "74064257"
---
# <a name="4-placing-dynamic-content-and-using-solvers"></a><span data-ttu-id="e3533-105">4. размещение динамического содержимого и использование поисковых решений</span><span class="sxs-lookup"><span data-stu-id="e3533-105">4. Placing dynamic content and using solvers</span></span>

<span data-ttu-id="e3533-106">Голограммы приходят на жизнь в HoloLens 2, когда они интуитивно следуют за пользователем и помещаются в физическую среду таким образом, что упрощает и элегантное взаимодействие.</span><span class="sxs-lookup"><span data-stu-id="e3533-106">Holograms come to life in HoloLens 2 when they intuitively follow the user and are placed in the physical environment in a way that makes interaction seamless and elegant.</span></span> <span data-ttu-id="e3533-107">В этом руководстве мы рассмотрим способы динамического размещения голограмм с помощью доступных средств размещения МРТК (известных как поиск решения) для решения сложных сценариев пространственного размещения.</span><span class="sxs-lookup"><span data-stu-id="e3533-107">In this tutorial, we explore ways to dynamically place holograms using the MRTK’s available placement tools (known as solvers) to solve complex spatial placement scenarios.</span></span> <span data-ttu-id="e3533-108">В МРТК Поиск решения — это система сценариев и поведений, которая позволяет элементам пользовательского интерфейса следовать за вами, пользователем или другими игровыми объектами в сцене.</span><span class="sxs-lookup"><span data-stu-id="e3533-108">In the MRTK, solvers are a system of scripts and behaviors that are used to allow UI elements to follow you, the user, or other game objects in the scene.</span></span> <span data-ttu-id="e3533-109">С их помощью также можно быстро выполнить прикрепление к определенной позиции, что делает приложение интуитивно понятным.</span><span class="sxs-lookup"><span data-stu-id="e3533-109">They can also be used to snap to certain positions quickly, making your application more intuitive.</span></span>

## <a name="objectives"></a><span data-ttu-id="e3533-110">Задачи</span><span class="sxs-lookup"><span data-stu-id="e3533-110">Objectives</span></span>

* <span data-ttu-id="e3533-111">Знакомство с решателями MRTK.</span><span class="sxs-lookup"><span data-stu-id="e3533-111">Introduce the MRTK's solvers</span></span>
* <span data-ttu-id="e3533-112">Использование решателей для того, чтобы коллекция кнопок следовала за пользователем.</span><span class="sxs-lookup"><span data-stu-id="e3533-112">Use solvers to have a collection of buttons follow the user</span></span>
* <span data-ttu-id="e3533-113">Использование решателей для того, чтобы игровой объект следовал за отслеживаемыми руками пользователя.</span><span class="sxs-lookup"><span data-stu-id="e3533-113">Use solvers to have a game object follow the user's tracked hands</span></span>

## <a name="instructions"></a><span data-ttu-id="e3533-114">Инструкция</span><span class="sxs-lookup"><span data-stu-id="e3533-114">Instructions</span></span>

### <a name="location-of-solvers-in-the-mrtk"></a><span data-ttu-id="e3533-115">Расположение решателей в MRTK</span><span class="sxs-lookup"><span data-stu-id="e3533-115">Location of solvers in the MRTK</span></span>

 <span data-ttu-id="e3533-116">Чтобы найти доступные решения в проекте, просмотрите папку МРТК SDK (Микседреалититулкит. SDK).</span><span class="sxs-lookup"><span data-stu-id="e3533-116">To find the available solvers in your project, look in the MRTK SDK folder (MixedRealityToolkit.SDK folder).</span></span> <span data-ttu-id="e3533-117">В папке Служебные программы вы увидите папку "Поиск решений", как показано на рисунке ниже.</span><span class="sxs-lookup"><span data-stu-id="e3533-117">Under the utilities folder, you will see the solvers folder, as shown in the image below.</span></span>

![Решатели](images/lesson3_chapter1_step1im.PNG)

>[!NOTE]
><span data-ttu-id="e3533-119">На этом занятии мы рассмотрим только реализацию решения Орбитал и поиск решения Радиалвиев.</span><span class="sxs-lookup"><span data-stu-id="e3533-119">In this lesson, we will only review the implementation of the Orbital solver and the RadialView solver.</span></span> <span data-ttu-id="e3533-120">Дополнительные сведения о полном диапазоне поиска решений, доступных в МРТК, см. по адресу [https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html)</span><span class="sxs-lookup"><span data-stu-id="e3533-120">To learn more about the full range of solvers available in the MRTK, visit: [https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html)</span></span>

### <a name="use-a-solver-to-follow-the-user"></a><span data-ttu-id="e3533-121">Использование решателя для настройки следования за пользователем</span><span class="sxs-lookup"><span data-stu-id="e3533-121">Use a Solver to Follow the User</span></span>

<span data-ttu-id="e3533-122">Цель этой главы — расширить коллекцию кнопок, которая была создана ранее, так, чтобы она составила направление взгляда пользователя.</span><span class="sxs-lookup"><span data-stu-id="e3533-122">The goal of this chapter is to enhance the button collection that was previously created so that it follows the user’s gaze direction.</span></span> <span data-ttu-id="e3533-123">В предыдущей версии МРТК и Холотулкит эта функция называлась тагалонг.</span><span class="sxs-lookup"><span data-stu-id="e3533-123">In the previous version of the MRTK and HoloToolkit, this was referred to as a tagalong functionality.</span></span>

1. <span data-ttu-id="e3533-124">Выберите родительский объект коллекции кнопок из предыдущего урока.</span><span class="sxs-lookup"><span data-stu-id="e3533-124">Select the Button Collection parent object from the previous lesson.</span></span>

    ![Изображение "Урок 3, раздел 2, шаг 1"](images/Lesson3_chapter2_step1im.PNG)

2. <span data-ttu-id="e3533-126">На панели инспектора нажмите кнопку Добавить компонент и выполните поиск по запросу Орбитал.</span><span class="sxs-lookup"><span data-stu-id="e3533-126">In the Inspector panel, click the Add Component button and search for orbital.</span></span> <span data-ttu-id="e3533-127">Должен отобразиться компонент Орбитал.</span><span class="sxs-lookup"><span data-stu-id="e3533-127">The Orbital component should appear.</span></span> <span data-ttu-id="e3533-128">Выберите его, чтобы добавить компонент Орбитал к игровому объекту коллекции кнопок.</span><span class="sxs-lookup"><span data-stu-id="e3533-128">Select it to add the Orbital component to the Button Collection game object.</span></span>

    ![Изображение "Урок 3, раздел 2, шаг 2"](images/Lesson3_Chapter2_step2im.PNG)

    >[!NOTE]
    ><span data-ttu-id="e3533-130">Когда вы добавляете компонент Орбитал, вы заметите, что система также добавляет компонент Солверхандлер, который является обязательным компонентом.</span><span class="sxs-lookup"><span data-stu-id="e3533-130">When you add the Orbital component you will notice that the system also adds the SolverHandler component, which is a required component.</span></span>

3. <span data-ttu-id="e3533-131">Чтобы настроить коллекцию кнопок для работы с пользователем, необходимо реализовать следующие корректировки (см. рисунок ниже):</span><span class="sxs-lookup"><span data-stu-id="e3533-131">In order to configure the Button Collection to follow the user, we need to implement the following adjustments (refer to the image below):</span></span>
    * <span data-ttu-id="e3533-132">В скрипте Орбитал задайте для раскрывающегося списка тип ориентации значение только значения нутации.</span><span class="sxs-lookup"><span data-stu-id="e3533-132">In the Orbital script, set the Orientation Type drop-down list to Yaw Only.</span></span> <span data-ttu-id="e3533-133">Если установить это значение, только одна ось объекта будет поворачиваться при следовании за пользователем.</span><span class="sxs-lookup"><span data-stu-id="e3533-133">This makes it so that only one axis of the object rotates as it follows the user.</span></span>
    * <span data-ttu-id="e3533-134">Установите для параметра Local Offset (Локальное смещение) значение 0 для всех осей.</span><span class="sxs-lookup"><span data-stu-id="e3533-134">Set the local offset to 0 on all axes.</span></span> <span data-ttu-id="e3533-135">Задайте для параметра «мировое смещение» значение x = 0, y =-0,1 и z = 0,6.</span><span class="sxs-lookup"><span data-stu-id="e3533-135">Set the World Offset to x = 0, y = -0.1, and z = 0.6.</span></span> <span data-ttu-id="e3533-136">Это блокирует перемещение объекта таким образом, что при изменении высоты объект будет оставаться в фиксированной высоте физической среды, в то же время позволяя ему следовать за тем, как пользователь переходит к среде.</span><span class="sxs-lookup"><span data-stu-id="e3533-136">This locks movement of the object so that when the user changes height, the object will remain at a fixed height in the physical environment, while still allowing it to follow the user as the user moves about the environment.</span></span> <span data-ttu-id="e3533-137">Эти значения можно изменить для достижения разнообразных поведений.</span><span class="sxs-lookup"><span data-stu-id="e3533-137">These values may be adjusted to achieve a wide range of behaviors.</span></span>
    * <span data-ttu-id="e3533-138">Для следующего поведения, при котором кнопки следуют только за представлением пользователя после того, как пользователь поворачивает свой заголовок, можно установить флажок использовать шаг с заходом для смещения по всему миру (Примечание. Этот заголовок может быть обрезан на некоторых экранах, как показано на рисунке ниже.) Например, чтобы объект подследовал пользователю только каждые 90 градусов, задайте число шагов, равное 4 (отмечено зеленой стрелкой в примере ниже).</span><span class="sxs-lookup"><span data-stu-id="e3533-138">For a follow behavior whereby the buttons only follow the user’s view after the user turns his or her head sufficiently far, you could select the Use Angle Stepping For World Offset checkbox (Note: This title may be truncated on some screens, as it is in the image below.) For example, to have the object follow the user only every 90 degrees, set the number of steps equal to 4 (marked by a green arrow in the example below).</span></span>

    ![Изображение "Урок 3, раздел 2, шаг 3"](images/Lesson3_chapter2_step3im.PNG)

### <a name="enabling-objects-to-follow-tracked-hands"></a><span data-ttu-id="e3533-140">Включение объектов для отслеживания руки</span><span class="sxs-lookup"><span data-stu-id="e3533-140">Enabling objects to follow tracked hands</span></span>

<span data-ttu-id="e3533-141">В этом разделе мы настроим ранее созданный объект Game для куба, чтобы отслеживать руки пользователя с помощью решения Радиалвиев.</span><span class="sxs-lookup"><span data-stu-id="e3533-141">In this section, we will configure the Cube game object previously created to follow the user’s tracked hands using the RadialView solver.</span></span>

1. <span data-ttu-id="e3533-142">Выберите объект куба в иерархии Басесцене.</span><span class="sxs-lookup"><span data-stu-id="e3533-142">Select the Cube object in the BaseScene hierarchy.</span></span> <span data-ttu-id="e3533-143">Нажмите кнопку Добавить компонент на панели инспектора.</span><span class="sxs-lookup"><span data-stu-id="e3533-143">Click Add Component in the Inspector panel.</span></span> <span data-ttu-id="e3533-144">Введите Радиалвиев в поле поиска и выберите компонент Радиалвиев, чтобы добавить его в куб.</span><span class="sxs-lookup"><span data-stu-id="e3533-144">Type in RadialView in the search box and select the RadialView component to add it to the cube.</span></span> <span data-ttu-id="e3533-145">Компонент Солверхандлер также будет автоматически добавлен в куб.</span><span class="sxs-lookup"><span data-stu-id="e3533-145">The SolverHandler component will also be automatically added to the cube.</span></span>

    ![mrlearning-Base-CH3-3-step3. png](images/mrlearning-base-ch3-3-step1.png)

2. <span data-ttu-id="e3533-147">Чтобы изменить Радиалвиев, а не на головной элемент, выберите раскрывающийся список рядом с параметром Тип объекта "Отслеживание целевых объектов" и выберите соединение типа "рука" в меню.</span><span class="sxs-lookup"><span data-stu-id="e3533-147">To change the RadialView to follow a hand instead of the head, select the dropdown menu next to the Tracked Target Type option and select Hand Joint from the menu.</span></span>

    ![mrlearning-Base-CH3-3-step2. png](images/mrlearning-base-ch3-3-step2a.png)

    <span data-ttu-id="e3533-149">Теперь вы увидите два новых параметра: «Tracked» и «Tracked руки».</span><span class="sxs-lookup"><span data-stu-id="e3533-149">You will now see two new options, Tracked Handness Type and Tracked Hand Joint.</span></span> <span data-ttu-id="e3533-150">В этом примере у вас будет Радиалвиев, следующий за наладонем левой руки, как показано на рисунке ниже.</span><span class="sxs-lookup"><span data-stu-id="e3533-150">For this example, you will have the RadialView follow the wrist of the left hand as shown in the image below.</span></span>

    ![mrlearning-Base-CH3-3-step2b. png](images/mrlearning-base-ch3-3-step2b.png)

3. <span data-ttu-id="e3533-152">Установите максимальное и минимальное расстояния от радиального представления в 0, чтобы у Куба не было расстояния между ним и назначением пользователя.</span><span class="sxs-lookup"><span data-stu-id="e3533-152">Set the maximum and minimum distances of the Radial View to 0 so that the cube will not have any distance between it and the user’s wrist.</span></span> <span data-ttu-id="e3533-153">После того как вы установите это значение, куб полностью выровняется с запястьем.</span><span class="sxs-lookup"><span data-stu-id="e3533-153">Once set, the cube will be perfectly aligned with the wrist.</span></span> <span data-ttu-id="e3533-154">Можно также настроить поле Направление ссылки, чтобы скорректировать поведение Куба, например, если нужно разрешить объекту вращаться с помощью пользователя, установив направление ссылки на объектно-ориентированный.</span><span class="sxs-lookup"><span data-stu-id="e3533-154">You might also adjust the Reference Direction field to adjust the behavior of how the cube is oriented, such as if you want to allow the object to rotate with the user's wrist by setting the Reference Direction to Object Oriented.</span></span>

    ![mrlearning-Base-CH3-3-step3. png](images/mrlearning-base-ch3-3-step3.png)

## <a name="congratulations"></a><span data-ttu-id="e3533-156">Поздравляем!</span><span class="sxs-lookup"><span data-stu-id="e3533-156">Congratulations</span></span>

<span data-ttu-id="e3533-157">В этом учебнике вы узнали, как использовать поисковые решения МРТК, чтобы пользовательский интерфейс был интуитивно понятен пользователю.</span><span class="sxs-lookup"><span data-stu-id="e3533-157">In this tutorial, you learned how to use the MRTK’s solvers to have a UI intuitively follow the user.</span></span> <span data-ttu-id="e3533-158">Вы также узнали, как присоединить решатель к игровому объекту (например, кубу), чтобы объект следовал за отслеживаемыми руками пользователя.</span><span class="sxs-lookup"><span data-stu-id="e3533-158">You also learned how to attach a solver to a game object (i.e., cube) to follow the user’s tracked hands.</span></span> <span data-ttu-id="e3533-159">Дополнительные сведения об этих и других решателях в составе MRTK см. на [странице документации о решателях MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html).</span><span class="sxs-lookup"><span data-stu-id="e3533-159">To learn more about these and other solvers included with the MRTK, feel free to visit the [MRTK solvers documentation page](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html).</span></span>

[<span data-ttu-id="e3533-160">Следующее занятие: 5. взаимодействие с трехмерными объектами</span><span class="sxs-lookup"><span data-stu-id="e3533-160">Next Lesson: 5. Interacting with 3D objects</span></span>](mrlearning-base-ch4.md)
