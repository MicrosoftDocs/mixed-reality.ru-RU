---
title: Серия учебников по началу работы, часть 4. Размещение динамического содержимого и использование решателей
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.localizationpriority: high
ms.openlocfilehash: 8a85ab560d0e6b36b589970b4d5b8a441ed2bbe2
ms.sourcegitcommit: 9df82dba06a91a8d2cedbe38a4328f8b86bb2146
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2020
ms.locfileid: "80362038"
---
# <a name="4-placing-dynamic-content-and-using-solvers"></a>4. Размещение динамического содержимого и использование решателей
<!-- Consider renaming to 'Placing dynamic content using Solvers' -->

Голограммы реализуются в HoloLens 2, когда они интуитивно следуют за пользователем и помещаются в физическую среду способом, который делает взаимодействие простым и изящным. В этом учебнике мы рассмотрим способы динамического помещения голограмм с помощью доступных инструментов размещения MRTK, известных как "решатели" и предназначенных для сложных сценариев пространственного размещения. В MRTK решатели — это система сценариев и поведений, которые мы используем, чтобы разрешить элементам пользовательского интерфейса следовать за вами, пользователем или другими игровыми объектами на сцене. С их помощью также можно быстро выполнить прикрепление к определенной позиции, что делает приложение интуитивно понятным.

## <a name="objectives"></a>Задачи

* Знакомство с решателями MRTK.
* Использование решателей для того, чтобы коллекция кнопок следовала за пользователем.
* Использование решателей для того, чтобы игровой объект следовал за отслеживаемыми руками пользователя.

## <a name="location-of-solvers-in-the-mrtk"></a>Расположение решателей в MRTK

 Решатели MRTK размещаются в папке пакета SDK MRTK. Чтобы просмотреть доступные в проекте решатели, в окне проекта перейдите к разделу **Assets** (Активы) > **MixedRealityToolkit.SDK** > **Features** (Функции) > **Utilities** (Служебные программы) > **Solvers** (Решатели):

![mrlearning-base](images/mrlearning-base/tutorial3-section1-step1-1.png)

В этом уроке мы рассмотрим реализацию решателей Orbital и RadialView. Чтобы получить дополнительную информацию о полном наборе решателей, доступных в MRTK, воспользуйтесь ссылкой разделом [Solvers](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html) (Решатели) на [портале документации по MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="use-a-solver-to-follow-the-user"></a>Использование решателя для настройки следования за пользователем
<!-- Consider renaming to 'Use a Solver to have an object follow the user' -->

В этом разделе вы улучшите созданную в предыдущем учебнике коллекцию кнопок так, чтобы она следовала за направлением взгляда пользователя. Кроме того, вы настроите решатель так, чтобы коллекция кнопок постоянно соответствовала следующим условиям:

* развернута параллельно плоскости чтения для пользователя, в направлении естественного чтения слева направо;
* размещена ниже направления горизонтального взгляда пользователя, чтобы не закрывать объекты, которые вы добавите позднее при работе с этим руководством;
* расположена на расстоянии примерно длины руки от пользователя, чтобы кнопки было удобно нажимать.

Для этих целей вы примените **решатель Orbital**, который фиксирует объект в указанном положении и на указанном расстоянии от некоторого объекта.

### <a name="1-add-the-orbital-solver"></a>1. Добавление решателя Orbital

В окне Hierarchy (Иерархия) выберите объект **ButtonCollection**, а затем в окне Inspector (Инспектор) с помощью кнопки **Add Component** (Добавить компонент) добавьте компонент **Orbital (Script)** к объекту ButtonCollection.

> [!NOTE]
> При добавлении решателя (Orbital (Script) в нашем примере) автоматически добавляется еще и компонент Solver Handler (Script) (Обработчик решателя — скрипт), который является обязательным для решателя.

### <a name="2-configure-the-orbital-solver"></a>2. Настройка решателя Orbital

Настройте компонент **Solver Handler (Script)** (Обработчик решателя — скрипт) следующим образом:

* Убедитесь, что для параметра **Tracked Target Type** (Тип отслеживаемой цели) указано значение **Head** (Голова).

Настройте компонент **Orbital (Script)** (Orbital — скрипт) следующим образом.

* Убедитесь, что для параметра **Orientation Type** (Тип ориентации) установлено значение **Follow Tracked Object** (Следовать за отслеживаемым объектом).
* Для **Local Offset** (Локальное смещение) установите значения X = 0, Y = 0, Z = 0.
* Для **World Offset** (Глобальное смещение) установите значения X = 0, Y = –0,4, Z = 0,3.

![mrlearning-base](images/mrlearning-base/tutorial3-section2-step2-1.png)

### <a name="3-test-the-orbital-solver-using-the-in-editor-simulation"></a>3. Тестирование решателя Orbital с помощью имитации в редакторе

Нажмите кнопку Play (Играть), чтобы перейти в игровой режим, затем нажмите и удерживайте правую кнопку мыши, чтобы повернуть направление взгляда и проверить следующее поведение.

* Положение преобразования для ButtonCollection теперь определяется параметрами решателя.
* Объект Cube (Куб), на который не действуют параметры решателя, всегда остается в одном положении.

![mrlearning-base](images/mrlearning-base/tutorial3-section2-step3-1.png)

> [!TIP]
> Если вы не видите в окне Scene (Сцена) луч направления камеры, проверьте, включено ли меню Gizmos (Манипуляторы). Дополнительные сведения о меню Gizmos (Манипуляторы) и его применении для оптимизации представления сцены вы можете найти в <a href="https://docs.unity3d.com/Manual/GizmosMenu.html" target="_blank">этом разделе</a> документации.
>
> Чтобы отобразить окна Scene (Сцена) и Game (Игра) рядом друг с другом, как на изображении ниже, перетащите окно "Игра" и поместите его справа от окна Scene (Сцена). Чтобы получить дополнительные сведения о настройке рабочего пространства, вы можете изучить <a href="https://docs.unity3d.com/Manual/CustomizingYourWorkspace.html" target="_blank">этот раздел</a> документации по Unity.

## <a name="enabling-objects-to-follow-tracked-hands"></a>Настройка следования объектов за отслеживаемыми руками

В этом разделе вы настроите созданный в предыдущем учебнике объект Cube (Куб) так, чтобы он следовал за отслеживаемыми руками, в частности за запястьем правой руки. Кроме того, вы настроите решатель так, чтобы куб постоянно соответствовал следующим условиям:

* Ориентация изменяется синхронно с вращением руки пользователя.
* Расположение привязано к положению запястья пользователя.

Кроме того, вы примените **решатель Radial View**, который постоянно удерживает объект в конусе взгляда относительно указанного объекта.

### <a name="1-add-the-radial-view-solver"></a>1. Добавление решателя Radial View

В окне Hierarchy (Иерархия) выберите объект **Cube** (Куб), а затем в окне Inspector (Инспектор) с помощью кнопки **Add Component** (Добавить компонент) добавьте компонент **Radial View (Script)** к объекту Cube (Куб).

### <a name="2-configure-the-radial-view-solver"></a>2. Настройка решателя Radial View

Настройте компонент **Solver Handler (Script)** (Обработчик решателя — скрипт) следующим образом:

* Для параметра **Tracked Target Type** (Тип отслеживаемой цели) задайте значение **Hand Joint** (Сустав руки).
* Для параметра **Tracked Handness** (Отслеживаемая рука) установите значение **Right** (Правая).
* Для параметра **Tracked Hand Joint** (Отслеживаемый сустав руки) установите значение **Wrist** (Запястье).

Настройте компонент **Radial View (Script)** (Radial View — скрипт) следующим образом:

* Для параметра **Reference Direction** (Направление привязки) установите значение **Object Oriented** (Ориентация объекта), затем установите флажок **Orient To Reference Direction** (Ориентировать по направлению указанного объекта).
* Для параметров **Min Distance** (Минимальная дистанция) и **Max Distance** (Максимальная дистанция) установите значения 0.

![mrlearning-base](images/mrlearning-base/tutorial3-section3-step2-1.png)

### <a name="3-test-the-radial-view-solver-using-the-in-editor-simulation"></a>3. Тестирование решателя Radial View с помощью имитации в редакторе

Нажмите кнопку Play (Играть), чтобы перейти в игровой режим, затем нажмите и удерживайте клавишу ПРОБЕЛ, чтобы поднять руку. Перемещайте курсор мыши, чтобы управлять этой рукой, а также перемещайте мышь при нажатой и удерживаемой левой кнопке мыши, чтобы вращать эту руку.

![mrlearning-base](images/mrlearning-base/tutorial3-section3-step3-1.png)

## <a name="congratulations"></a>Поздравляем!

В этом руководстве вы узнали, как использовать решатели MRTK, чтобы пользовательский интерфейс интуитивно следовал за пользователем. Вы также узнали, как присоединить решатель к объекту (например, кубу), чтобы объект следовал за отслеживаемыми руками пользователя. Чтобы получить дополнительные сведения об этих и других решателях в составе MRTK, посетите руководство [Решатели](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_Solver.html) на [портале документации по MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

[Следующее руководство: 5. Взаимодействие с трехмерными объектами](mrlearning-base-ch4.md)
