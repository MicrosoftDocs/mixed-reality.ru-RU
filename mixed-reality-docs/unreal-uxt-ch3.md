---
title: 3. Настройка проекта для смешанной реальности
description: Часть 3 руководства по созданию простого приложения для игры в шахматы с помощью Unreal Engine 4 и подключаемого модуля средств разработки пользовательского интерфейса (UX) из набора средств для смешанной реальности
author: sw5813
ms.author: suwu
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, учебник, начало работы, MRTK, UXT, средства разработки пользовательского интерфейса, средства UX, документация
ms.openlocfilehash: b5b5e2de787279602341e60f2bfa29aa05ea9b31
ms.sourcegitcommit: ba4c8c2a19bd6a9a181b2cec3cb8e0402f8cac62
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "82840623"
---
# <a name="3-setting-up-your-project-for-mixed-reality"></a><span data-ttu-id="ba5d4-104">3. Настройка проекта для смешанной реальности</span><span class="sxs-lookup"><span data-stu-id="ba5d4-104">3. Setting up your project for mixed reality</span></span>

<span data-ttu-id="ba5d4-105">В этом разделе описывается процесс настройки приложения для разработки систем смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-105">This section walks you through the process of configuring your app for mixed reality development.</span></span> 

## <a name="objectives"></a><span data-ttu-id="ba5d4-106">Задачи</span><span class="sxs-lookup"><span data-stu-id="ba5d4-106">Objectives</span></span>

* <span data-ttu-id="ba5d4-107">Понять, как настроить в проекте смешанной реальности элементы ARSessionConfig, Pawn и GameMode.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-107">Understand how to set up a mixed reality project with ARSessionConfig, Pawn, and GameMode</span></span>

## <a name="configure-the-session"></a><span data-ttu-id="ba5d4-108">Настройка сеанса</span><span class="sxs-lookup"><span data-stu-id="ba5d4-108">Configure the Session</span></span>

1. <span data-ttu-id="ba5d4-109">В обозревателе содержимого перейдите к папке **Content**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-109">In the Content Browser, navigate back to the **Content** folder.</span></span> <span data-ttu-id="ba5d4-110">Последовательно выберите **Add New > Miscellaneous > Data Asset** (Добавить > Разное > Ресурс данных).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-110">Click **Add New > Miscellaneous > Data Asset**.</span></span> 

2. <span data-ttu-id="ba5d4-111">Выберите класс **ARSessionConfig** и щелкните **Select** (Выбрать).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-111">Pick **ARSessionConfig** as the class and click **Select**.</span></span> <span data-ttu-id="ba5d4-112">Присвойте ресурсу имя ARSessionConfig.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-112">Name the asset “ARSessionConfig”.</span></span>

![Создание ресурса данных](images/unreal-uxt/3-createasset.PNG)

3. <span data-ttu-id="ba5d4-114">Дважды щелкните ARSessionConfig, чтобы открыть его.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-114">Double click ARSessionConfig to open it.</span></span> <span data-ttu-id="ba5d4-115">Ресурс данных ARSessionConfig содержит много полезных настроек для дополненной реальности, в том числе пространственное сопоставление и загораживание.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-115">An ARSessionConfig data asset contains a number of useful AR settings including spatial mapping and occlusion.</span></span> <span data-ttu-id="ba5d4-116">Дополнительные подробности об ARSessionConfig можно получить в разделе документации по Unreal Engine, посвященном [UARSessionConfig](https://docs.unrealengine.com/en-US/API/Runtime/AugmentedReality/UARSessionConfig/index.html).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-116">For more details on ARSessionConfig, take a look at Unreal Engine’s documentation on [UARSessionConfig](https://docs.unrealengine.com/en-US/API/Runtime/AugmentedReality/UARSessionConfig/index.html).</span></span> <span data-ttu-id="ba5d4-117">Для приложения для игры в шахматы нет нужды изменять эти настройки, поэтому просто нажмите **Save** (Сохранить) и вернитесь в главное окно.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-117">For our chess app, we won’t need to modify any settings, so just hit **Save** and return to the Main window.</span></span> 

![Конфигурация сеанса дополненной реальности](images/unreal-uxt/3-arsessionconfig.PNG)

4. <span data-ttu-id="ba5d4-119">На панели инструментов выше окна просмотра выберите **Blueprints > Open Level Blueprint** (Схемы > Открыть схему уровня).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-119">On the toolbar above the viewport, click **Blueprints > Open Level Blueprint**.</span></span> <span data-ttu-id="ba5d4-120">Схема уровня представляет собой особый вид схемы, которая выполняет роль глобального графа событий для всего уровня.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-120">The Level Blueprint is a special Blueprint that acts as a level-wide global event graph.</span></span> <span data-ttu-id="ba5d4-121">Именно здесь мы будем запускать сеанс дополненной реальности, чтобы конфигурация этого сеанса применялась с самого начала уровня.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-121">We’re going to start an AR session here, so that our AR session configuration is applied at the start of the level.</span></span>  

5. <span data-ttu-id="ba5d4-122">Перетащите закрепление выполнения из **события BeginPlay** и отпустите его.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-122">Drag the execution node off **Event BeginPlay** and release.</span></span> <span data-ttu-id="ba5d4-123">Найдите узел **Start AR Session** (Запуск сеанса дополненной реальности).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-123">Search for the **Start AR Session** node.</span></span> <span data-ttu-id="ba5d4-124">Щелкните **Session Config** (Конфигурация сеанса) и выберите только что созданный ресурс **ARSessionConfig**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-124">Click on **Session Config** and select your newly created **ARSessionConfig** asset.</span></span> <span data-ttu-id="ba5d4-125">Нажмите **Compile** (Компилировать), затем **Save** (Сохранить).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-125">Hit **Compile**, then **Save**.</span></span> <span data-ttu-id="ba5d4-126">Вернитесь в главное окно.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-126">Return to the Main window.</span></span>

![Запуск сеанса дополненной реальности](images/unreal-uxt/3-startarsession.PNG)

## <a name="create-a-pawn"></a><span data-ttu-id="ba5d4-128">Создание элемента Pawn</span><span class="sxs-lookup"><span data-stu-id="ba5d4-128">Create a Pawn</span></span>

1.  <span data-ttu-id="ba5d4-129">В папке Content создайте новый элемент Blueprint, наследующий от **DefaultPawn**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-129">In the Content folder, create a new Blueprint that inherits from **DefaultPawn**.</span></span> <span data-ttu-id="ba5d4-130">В Unreal объект Pawn представляет игрока, а в нашем примере — участника взаимодействия с HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-130">In Unreal, a Pawn represents the user in the game, or in this case, the HoloLens 2 experience.</span></span> <span data-ttu-id="ba5d4-131">Присвойте этому объекту Pawn имя MRPawn и дважды щелкните его, чтобы открыть.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-131">Rename your new Pawn “MRPawn” and double click on MRPawn to open it.</span></span> 

![Создание нового объекта Pawn, наследующего от DefaultPawn](images/unreal-uxt/3-defaultpawn.PNG)

2.  <span data-ttu-id="ba5d4-133">По умолчанию Pawn имеет компонент сетки и компонент столкновения, так как в большинстве проектов Unreal управляемые пользователем объекты Pawn являются твердыми объектами и могут сталкиваться с другими компонентами.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-133">By default, the Pawn has a mesh component and a collision component, since in most Unreal projects, Pawns controlled by the user are solid objects that collides with other components.</span></span> <span data-ttu-id="ba5d4-134">Но в нашем примере пользователь, представленный объектом Pawn, должен иметь возможность проходить сквозь голограммы, не сталкиваясь с ними.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-134">In this situation, since the user is the Pawn, we want to be able to pass through holograms without generating collisions.</span></span> <span data-ttu-id="ba5d4-135">На панели Components (Компоненты) выберите элемент **CollisionComponent**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-135">In the Components panel, select the **CollisionComponent**.</span></span> <span data-ttu-id="ba5d4-136">На панели Details (Свойства) прокрутите вниз до раздела Collision (столкновение) и щелкните раскрывающийся список рядом с полем Collision Presets (Параметры столкновения).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-136">In the Details panel, scroll down to the Collision section and click the dropdown next to Collision Presets.</span></span> <span data-ttu-id="ba5d4-137">Вместо Pawn (Пешка) укажите здесь значение **NoCollision** (Без столкновений).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-137">Change this from Pawn to **NoCollision**.</span></span> <span data-ttu-id="ba5d4-138">Выполните те же действия для компонента **MeshComponent**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-138">Do the same for the **MeshComponent**.</span></span> <span data-ttu-id="ba5d4-139">**Скомпилируйте**, а затем **сохраните** схему.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-139">**Compile**, then **Save** the Blueprint.</span></span> <span data-ttu-id="ba5d4-140">Вернитесь в главное окно.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-140">Return to the Main window.</span></span> 

![Изменение параметров столкновения для объекта Pawn](images/unreal-uxt/3-nocollision.PNG)

## <a name="create-a-game-mode"></a><span data-ttu-id="ba5d4-142">Создание игрового режима</span><span class="sxs-lookup"><span data-stu-id="ba5d4-142">Create a Game Mode</span></span>

1.  <span data-ttu-id="ba5d4-143">В папке Content с помощью обозревателя содержимого создайте новую схему с родительским объектом **Game Mode Base** (Базовый игровой режим).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-143">In the Content folder in the Content Browser, create a new Blueprint with the parent **Game Mode Base**.</span></span> <span data-ttu-id="ba5d4-144">Присвойте ему имя MRGameMode и дважды щелкните его, чтобы открыть.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-144">Name it MRGameMode and double click to open.</span></span> <span data-ttu-id="ba5d4-145">В Unreal игровой режим (Game Mode) определяет многие параметры игрового взаимодействия, включая объект пешки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-145">In Unreal, the Game Mode determines a number of settings for the game or experience, including the default pawn to use.</span></span> 

![MRGameMode в обозревателе содержимого](images/unreal-uxt/3-gamemode.PNG)

2.  <span data-ttu-id="ba5d4-147">На панели Details (Свойства) найдите раздел Classes (Классы).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-147">In the Details panel, locate the Classes section.</span></span> <span data-ttu-id="ba5d4-148">Для параметра Default Pawn Class (Класс пешки по умолчанию) вместо значения DefaultPawn укажите только что созданный **MRPawn**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-148">Change the Default Pawn Class from DefaultPawn to the **MRPawn** you just created.</span></span> <span data-ttu-id="ba5d4-149">Нажмите **Compile** (Компилировать), затем **Save** (Сохранить).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-149">Hit **Compile**, then **Save**.</span></span> <span data-ttu-id="ba5d4-150">Вернитесь в главное окно.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-150">Return to the Main window.</span></span> 

![Установка класса Pawn по умолчанию](images/unreal-uxt/3-setpawn.PNG)

3.  <span data-ttu-id="ba5d4-152">Последним шагом в настройке нашего проекта будет назначение режима MRGameMode для Unreal.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-152">The last step in setting up your project is to tell Unreal to default to MRGameMode.</span></span> <span data-ttu-id="ba5d4-153">Последовательно откройте **Edit > Projects Settings > Maps & Modes** (Правка > Параметры проекта > Карты и режимы) в разделе Projects (Проекты).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-153">Go to **Edit > Projects Settings > Maps & Modes** (in the Projects) section.</span></span> <span data-ttu-id="ba5d4-154">В разделе Default Modes (Режимы по умолчанию) щелкните раскрывающийся список и выберите **MRGameMode**.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-154">In the Default Modes section, click the dropdown and choose **MRGameMode**.</span></span> <span data-ttu-id="ba5d4-155">Сразу под ним, в разделе Default Maps (Карты по умолчанию), для обоих параметров **EditorStartupMap** (Стартовая карта редактора) и **GameDefaultMap** (Карта игры по умолчанию) укажите значение **Main** (Главная).</span><span class="sxs-lookup"><span data-stu-id="ba5d4-155">In the Default Maps section right below, change both the **EditorStartupMap** and the **GameDefaultMap** to **Main**.</span></span> <span data-ttu-id="ba5d4-156">Теперь, если вы закроете и снова откроете редактор, по умолчанию будет выбрана карта Main.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-156">This way when you close the editor and reopen it, the Main map will be selected by default.</span></span> <span data-ttu-id="ba5d4-157">И при запуске игры стартовым уровнем будет являться та же карта Main.</span><span class="sxs-lookup"><span data-stu-id="ba5d4-157">Similarly, when you play the game, the Main map will be the level that is started.</span></span> 

![Параметры проекта — Карты и режимы](images/unreal-uxt/3-mapsandmodes.PNG)

[<span data-ttu-id="ba5d4-159">Следующий раздел: 4. Настройка интерактивной сцены</span><span class="sxs-lookup"><span data-stu-id="ba5d4-159">Next Section: 4. Making your scene interactive</span></span>](unreal-uxt-ch4.md)