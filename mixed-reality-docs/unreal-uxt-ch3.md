---
title: 3. Настройка проекта для смешанной реальности
description: Часть 3 руководства по созданию простого приложения для игры в шахматы с помощью Unreal Engine 4 и подключаемого модуля средств разработки пользовательского интерфейса (UX) из набора средств для смешанной реальности
author: sw5813
ms.author: suwu
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, учебник, начало работы, MRTK, UXT, средства разработки пользовательского интерфейса, средства UX, документация
ms.openlocfilehash: b5b5e2de787279602341e60f2bfa29aa05ea9b31
ms.sourcegitcommit: ba4c8c2a19bd6a9a181b2cec3cb8e0402f8cac62
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "82840623"
---
# <a name="3-setting-up-your-project-for-mixed-reality"></a>3. Настройка проекта для смешанной реальности

В этом разделе описывается процесс настройки приложения для разработки систем смешанной реальности. 

## <a name="objectives"></a>Задачи

* Понять, как настроить в проекте смешанной реальности элементы ARSessionConfig, Pawn и GameMode.

## <a name="configure-the-session"></a>Настройка сеанса

1. В обозревателе содержимого перейдите к папке **Content**. Последовательно выберите **Add New > Miscellaneous > Data Asset** (Добавить > Разное > Ресурс данных). 

2. Выберите класс **ARSessionConfig** и щелкните **Select** (Выбрать). Присвойте ресурсу имя ARSessionConfig.

![Создание ресурса данных](images/unreal-uxt/3-createasset.PNG)

3. Дважды щелкните ARSessionConfig, чтобы открыть его. Ресурс данных ARSessionConfig содержит много полезных настроек для дополненной реальности, в том числе пространственное сопоставление и загораживание. Дополнительные подробности об ARSessionConfig можно получить в разделе документации по Unreal Engine, посвященном [UARSessionConfig](https://docs.unrealengine.com/en-US/API/Runtime/AugmentedReality/UARSessionConfig/index.html). Для приложения для игры в шахматы нет нужды изменять эти настройки, поэтому просто нажмите **Save** (Сохранить) и вернитесь в главное окно. 

![Конфигурация сеанса дополненной реальности](images/unreal-uxt/3-arsessionconfig.PNG)

4. На панели инструментов выше окна просмотра выберите **Blueprints > Open Level Blueprint** (Схемы > Открыть схему уровня). Схема уровня представляет собой особый вид схемы, которая выполняет роль глобального графа событий для всего уровня. Именно здесь мы будем запускать сеанс дополненной реальности, чтобы конфигурация этого сеанса применялась с самого начала уровня.  

5. Перетащите закрепление выполнения из **события BeginPlay** и отпустите его. Найдите узел **Start AR Session** (Запуск сеанса дополненной реальности). Щелкните **Session Config** (Конфигурация сеанса) и выберите только что созданный ресурс **ARSessionConfig**. Нажмите **Compile** (Компилировать), затем **Save** (Сохранить). Вернитесь в главное окно.

![Запуск сеанса дополненной реальности](images/unreal-uxt/3-startarsession.PNG)

## <a name="create-a-pawn"></a>Создание элемента Pawn

1.  В папке Content создайте новый элемент Blueprint, наследующий от **DefaultPawn**. В Unreal объект Pawn представляет игрока, а в нашем примере — участника взаимодействия с HoloLens 2. Присвойте этому объекту Pawn имя MRPawn и дважды щелкните его, чтобы открыть. 

![Создание нового объекта Pawn, наследующего от DefaultPawn](images/unreal-uxt/3-defaultpawn.PNG)

2.  По умолчанию Pawn имеет компонент сетки и компонент столкновения, так как в большинстве проектов Unreal управляемые пользователем объекты Pawn являются твердыми объектами и могут сталкиваться с другими компонентами. Но в нашем примере пользователь, представленный объектом Pawn, должен иметь возможность проходить сквозь голограммы, не сталкиваясь с ними. На панели Components (Компоненты) выберите элемент **CollisionComponent**. На панели Details (Свойства) прокрутите вниз до раздела Collision (столкновение) и щелкните раскрывающийся список рядом с полем Collision Presets (Параметры столкновения). Вместо Pawn (Пешка) укажите здесь значение **NoCollision** (Без столкновений). Выполните те же действия для компонента **MeshComponent**. **Скомпилируйте**, а затем **сохраните** схему. Вернитесь в главное окно. 

![Изменение параметров столкновения для объекта Pawn](images/unreal-uxt/3-nocollision.PNG)

## <a name="create-a-game-mode"></a>Создание игрового режима

1.  В папке Content с помощью обозревателя содержимого создайте новую схему с родительским объектом **Game Mode Base** (Базовый игровой режим). Присвойте ему имя MRGameMode и дважды щелкните его, чтобы открыть. В Unreal игровой режим (Game Mode) определяет многие параметры игрового взаимодействия, включая объект пешки по умолчанию. 

![MRGameMode в обозревателе содержимого](images/unreal-uxt/3-gamemode.PNG)

2.  На панели Details (Свойства) найдите раздел Classes (Классы). Для параметра Default Pawn Class (Класс пешки по умолчанию) вместо значения DefaultPawn укажите только что созданный **MRPawn**. Нажмите **Compile** (Компилировать), затем **Save** (Сохранить). Вернитесь в главное окно. 

![Установка класса Pawn по умолчанию](images/unreal-uxt/3-setpawn.PNG)

3.  Последним шагом в настройке нашего проекта будет назначение режима MRGameMode для Unreal. Последовательно откройте **Edit > Projects Settings > Maps & Modes** (Правка > Параметры проекта > Карты и режимы) в разделе Projects (Проекты). В разделе Default Modes (Режимы по умолчанию) щелкните раскрывающийся список и выберите **MRGameMode**. Сразу под ним, в разделе Default Maps (Карты по умолчанию), для обоих параметров **EditorStartupMap** (Стартовая карта редактора) и **GameDefaultMap** (Карта игры по умолчанию) укажите значение **Main** (Главная). Теперь, если вы закроете и снова откроете редактор, по умолчанию будет выбрана карта Main. И при запуске игры стартовым уровнем будет являться та же карта Main. 

![Параметры проекта — Карты и режимы](images/unreal-uxt/3-mapsandmodes.PNG)

[Следующий раздел: 4. Настройка интерактивной сцены](unreal-uxt-ch4.md)