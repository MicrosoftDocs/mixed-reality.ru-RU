---
title: Системы координат
description: Пространственные системы координат, используемый для построения за кресло, положение, комнаты и масштабирования и масштаб world смешанных опыт реальность.
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
keywords: системы координат, пространственные системы координат, только для ориентации, установки и масштабирования, положение и масштабирования, места и масштабирования, всему миру и масштабирования, сидели 360 градусов, положение, комнаты, world, масштабирования, позиция, ориентация, неподвижным, подключенный этап, привязки, пространственных привязки, заблокирован для мира, блокировки в мире, заблокирован для текста, текст блокировку, границы, сохраняемости, совместное использование, отслеживание потери, облако пространственных привязки
ms.openlocfilehash: fc76a30895a85ab5ca8396540a82965cc35c494e
ms.sourcegitcommit: f7fc9afdf4632dd9e59bd5493e974e4fec412fc4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2019
ms.locfileid: "59605146"
---
# <a name="coordinate-systems"></a>Системы координат

По сути, смешанный месте приложения реальности [голограммы](hologram.md) мира, выглядят и кажется реальными объектами. Это включает в себя точно положение и ориентацию этих голограммы в местах в мире, которые важны для пользователя, является ли их физического места или виртуальной области, созданных вами всему миру. Когда рассуждения о положение и ориентацию вашей голограммы или любую геометрическую форму, такие как [помощи](gaze.md) Рэй или [вручную позиций](gestures.md), Windows предоставляет различные реальных системы координат, в которой Geometry можно выразить, известный как **пространственных координатных системах**.

<br>

>[!VIDEO https://www.youtube.com/embed/TneGSeqVAXQ]

## <a name="device-support"></a>Поддержка устройств

<table>
<tr>
<th>Компонент</th><th style="width:150px"> <a href="hololens-hardware-details.md">HoloLens (1-го поколения)</a></th><th style="width:150px">HoloLens 2</th><th style="width:150px"> <a href="immersive-headset-hardware-details.md">Иммерсивную</a></th>
</tr><tr>
<td> <a href="coordinate-systems.md#stationary-frame-of-reference">Стационарной системой отсчета координат</a></td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr><tr>
<td> <a href="coordinate-systems.md#attached-frame-of-reference">Для присоединенных ссылок</a></td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr><tr>
<td> <a href="coordinate-systems.md#stage-frame-of-reference">Этап системой отсчета координат</a></td><td style="text-align: center;"> Пока не поддерживается</td><td style="text-align: center;"> Пока не поддерживается</td><td style="text-align: center;"> ✔️</td>
</tr><tr>
<td> <a href="coordinate-systems.md#spatial-anchors">Пространственные привязки</a></td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr><tr>
<td> <a href="spatial-mapping.md">Пространственное сопоставление</a></td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"></td>
</tr>
</table>

## <a name="mixed-reality-experience-scales"></a>Масштабирует качества смешанной реальности

Смешанная реальность приложения можно разработать для широкого круга взаимодействия с пользователями, из видео средств просмотра 360 градусов, достаточно ориентации гарнитуры, в мире и масштабирования приложений и игр, которых требуется пространственное сопоставление и пространственных привязки:
<br>

| Возможности масштабирования | Требования | Пример возможности | 
|----------|----------|----------|
|  **Только для ориентации** |  **Ориентация гарнитура** (gravity по правому краю) |  Средство просмотра видео 360° | 
|  **Сидели масштабирования** |  Выше, а также **позиции гарнитура** относительно нулевой позиции |  Симулятор гоночную игру или места | 
|  **Положение шкалы** |  Выше, а также **floor origin этап** |  Действие игру, где по признакам и избавиться от на месте  | 
|  **Комнаты и масштабирования** |  Выше, а также **многоугольника границ рабочей области** |  Головоломки игру, где сильна головоломки | 
|  **Мир и масштабирования** |  **Пространственные привязки** (и обычно [пространственное сопоставление](spatial-mapping.md)) |  Игры с помощью врагов, такие как поступающие от реальных стен [RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j) | 

Эти возможности выполните масштабирование модели «вложение куклы». Основной принцип проектирования здесь для смешанной реальности Windows — что заданного гарнитуры поддерживает приложения, созданные для масштабируемого целевого качества, а также все меньше шкал:
<br>

| 6DOF отслеживания | Определенные FLOOR | Отслеживание 360° | Границы, определенные | Пространственные привязки | Интерфейс max | 
|----------|----------|----------|----------|----------|----------|
|  Нет |  - |  - |  - |  - |  **Только для ориентации** | 
|  **Да** |  Нет |  - |  - |  - |  **Сидели** | 
|  **Да** |  **Да** |  Нет |  - |  - |  **Репутацию - вперед** | 
|  **Да** |  **Да** |  **Да** |  Нет |  - |  **Положение - 360°** | 
|  **Да** |  **Да** |  **Да** |  **Да** |  Нет |  **Комнаты** | 
|  **Да** |  **Да** |  **Да** |  **Да** |  **Да** |  **мир** | 

Обратите внимание на то, что этап отсчета пока не поддерживается на HoloLens. Комнаты масштабирование приложения на HoloLens в настоящее время необходимо использовать [пространственное сопоставление](spatial-mapping.md) найти floor и стен пользователя.

## <a name="spatial-coordinate-systems"></a>Пространственные системы координат

Все приложения трехмерной графики использовать [декартовой координатной системы](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems) делать выводы о положения и ориентации объектов в виртуальных сетевых миров, они отображались. Такие системы координат установления 3 перпендикулярная оси вдоль положения объектов: оси X, Y и Z.

В [смешанной реальности](mixed-reality.md), ваши приложения будет строить заключения виртуальных и физических систем координат. Windows вызывает системы координат, которая имеет подлинное значение в физическом мире **Пространственные системы координат**.

Пространственные системы координат выразить свои значения координат в метрах. Это означает, что объекты размещены 2 единицы друг от друга в значение X, Y или Z оси будут отображаться 2 м друг от друга при подготовке к просмотру в смешанной реальности. Это позволит легко отображать объекты и сред в нужном масштабе реального мира.

В общем случае декартовой координатной системы может быть для левши или правши. Пространственные системы координат в Windows всегда являются правостороннюю, означающее, что положительное оси x обращена вправо, оси y — обращена вверх (выравнивание по gravity) и оси z положительный результат, указывающий к себе.

В обоих видов систем координат положительное оси x указывает справа и оси y обращена вверх. Отличается ли оси z — указывает сторону или от себя. Направление, в котором положительное оси z точки в соответствии с карточкой, либо можно запомнить, левой или правой руки в положительный X направление и curling их в положительном направлении Y. Направление указывает вашей бегунка, от вас, либо к по направление, в котором указывает положительное оси z для этой системы координат.

## <a name="building-an-orientation-only-or-seated-scale-experience"></a>Построение интерфейс только для ориентации или установки и масштабирования

Ключом к holographic [отрисовки](rendering.md) изменяется представление приложения его голограммы каждого кадра при перемещении, в соответствии с их прогнозируемое головной движения. Вы можете создавать **сидели высококлассные возможности** что уважение изменения головной положение пользователя и с помощью головного ориентации **стационарной системой отсчета координат**.

Часть содержимого необходимо игнорировать головной позиции обновления, остаются фиксированными по выбранный заголовок и расстояние от пользователя в любое время. Самый показательный пример — 360 градусов видео: поскольку видеозаписи с точки зрения одного основного, он бы разрушить иллюзию для представления позиции для перемещения относительно содержимого, несмотря на то, что необходимо изменить ориентацию представления, как пользователь ищет. Вы можете создавать такие **интерфейсы только для ориентации** с помощью **присоединенного отсчета координат**.

### <a name="stationary-frame-of-reference"></a>Стационарной системой отсчета координат

Система координат, предоставляемые works стационарной системой отсчета координат для сохранения положения объектов практически пользователь максимально стабильным по отношению к всему миру, при этом соблюдаются права изменения в головном положение пользователя.

Для работы сидели масштабирования в игровое ядро, такие как [Unity](https://unity3d.com/), является стационарной системой отсчета координат, то, что определяет механизма «world источник.» Объекты, помещенные в конкретных мировая координата используйте стационарной системой отсчета координат для определения их положения в реальных условиях, используя те же координаты. Содержимое, которое остается поместить в мире, даже когда пользователь выходит, известен как **заблокирован world** содержимого.

Приложения обычно будет создать один стационарной системой отсчета координат при запуске и использовать его система координат на протяжении всего времени существования приложения. Как разработчик приложения в Unity просто начните помещение содержимого относительно начала координат, которые будут в начальной позиции головного и ориентации пользователя. Если пользователь переходит на новое место и желает продолжать работать впечатления пользователей сидели масштаб, вы можете центровку world источника в этом расположении.

Со временем как система получает Дополнительные сведения о среде пользователя, он может определить, расстояния между различными точками в реальной жизни меньше или больше ранее неиспользуемым системы. При подготовке к просмотру голограммы в стационарной системой отсчета координат для приложения в HoloLens, где пользователи перемещаются за пределы области около 5 м широкий, приложение может наблюдаться смещение на наблюдаемые расположение этих голограммы. Если пользователи никогда за 5 м работы, вы создаете [world высококлассные возможности](#building-a-world-scale-experience), которое потребует дополнительных способов для сохранения голограммы стабильной, как описано ниже.

### <a name="attached-frame-of-reference"></a>Для присоединенных ссылок

Вложенные отсчета координат перемещается вместе с пользователя, как они идут, с предопределенной заголовком, определенное при приложения сначала создает кадр. Это позволяет пользователю рассчитанным рассмотрим содержимого в этой системой отсчета координат. Содержимое отображается таким образом пользователь относительно называется **заблокирован для тела** содержимого.

При гарнитура не удается выяснить, где в мире, присоединенные отсчета координат предоставляет только системы координат, который может использоваться для подготовки к просмотру голограммы. Это делает его идеальным для отображения резервный пользовательского интерфейса для информирования пользователя, что их устройства не удается найти их в мире. Приложений, установки и масштабирования или более поздней версии должен содержать только для ориентации резервирования, чтобы помочь пользователю снова приступить к работе с пользовательским Интерфейсом, как показано в [смешанной реальности домашней](navigating-the-windows-mixed-reality-home.md).

## <a name="building-a-standing-scale-or-room-scale-experience"></a>Фиксированный масштаб или масштаб комнаты качества построения

Чтобы выходить за пределы сидели масштабирования на иммерсивных гарнитуры и построения **положение высококлассные возможности**, можно использовать **этап подразумевает**.

Для предоставления **комнаты высококлассные возможности**, т. е в пределах границ 5-индикатор, предварительно определенные пользователи сильна, можно проверить наличие **этап границы** также.

### <a name="stage-frame-of-reference"></a>Этап системой отсчета координат

При первой настройке иммерсивных гарнитура, пользователь определяет **этап**, который представляет место, в котором они будут возникать смешанной реальности. Как минимум в рабочей области определяет **origin этап**, пространственные системы координат, по центру в пользователь выбранный floor положение и ориентацию вперед, где планируется использовать устройство. Путем помещения содержимого в системе координат этой рабочей области в плоскости floor Y = 0, можно обеспечить вашей голограммы рассчитанным появляются в ближайшее снизу целое, когда пользователь репутацию, предоставляя пользователям с **положение высококлассные возможности**.

### <a name="stage-bounds"></a>Границы рабочей области

Пользователь может также можно определить **этап границы**, области в комнате, они снят мебели намереваются перемещаются в смешанной реальности. Если таким образом, можно построить приложение **комнаты высококлассные возможности**, используя эти границы, чтобы гарантировать, что голограммы, всегда размещаются где пользователь может обратиться к ним.

Поскольку этап отсчета предоставляет один основных системы координат, в которой будет размещена floor относительно содержимого, это самый простой путь к переносу положение и масштабирования и комнаты и масштабирования приложений, разработанных для гарнитуры виртуальной реальности. Тем не менее как с помощью этих платформ VR единую систему координат можно только стабилизировать содержимое о диаметр 5 индикатор (16 foot), прежде чем бегунка arm привести к тому содержимое далеко от центра для сдвига заметно, как при настройке. На большее 5 м, необходимы пространственных привязки.

## <a name="building-a-world-scale-experience"></a>Создание более world высококлассные возможности

Значение true позволяет HoloLens **world высококлассные возможности** перемещаются за пределы 5 м пользователям предоставляется возможность. Создать приложение всему миру и масштабирования, вам потребуется новые методики, помимо тех, которые используются для работы в комнате и масштабирования.

### <a name="why-a-single-rigid-coordinate-system-cannot-be-used-beyond-5-meters"></a>Почему нельзя использовать в одной системе координат жесткой за 5 м

В настоящее время при написании игры, приложения визуализации данных или приложений виртуальной реальности, типичный подход является установка одна система абсолютных мировых координат, которая все координаты надежно можно сопоставить с. В этой среде вы всегда можете найти стабильную преобразование, которое определяет связь между любыми двумя объектами в современном мире. Если эти объекты не переносятся, их относительные преобразования всегда остается неизменным. Этот вид глобальной системы координат удобно использовать, когда подготовка к просмотру на чисто виртуальный мир, где все геометрии заранее известно. Сегодня приложений виртуальной Реальности комнаты масштаба обычно установления такого рода абсолютный комнаты в масштабах системы координат его серверу-источнику на ближайшее снизу целое.

Напротив устройство неограниченными возможностями, которые смешанной реальности, например HoloLens имеет динамическое представление управляемых датчик мира, постоянно Настройка свое знание за определенный период времени окружения пользователя, как они идут множество счетчиков по всей этаж в здании. По всему миру и масштабирования опыту Если все голограммы в одной жесткой системы координат, эти голограммы бы обязательно переместятся со временем, по отношению к всему миру или друг с другом.

Например гарнитура может сейчас считаете, что два расположения в мире быть 4 метров и в случае уточнить, основные сведения о, обучения, расположения, на самом деле 3.9 метров. Если эти голограммы изначально были размещены 4 метров друг от друга в одном жесткой системы координат, один из них, будут всегда отображаться 0,1 м вне из реального мира.

### <a name="spatial-anchors"></a>Пространственные привязки

Windows Mixed Reality решает проблему, описанную в предыдущем разделе, позволяя создавать [пространственных привязки](spatial-anchors.md) для пометки важных моментов в мире, где пользователь разместил голограммы. Пространственные привязки представляет важный момент в мире, система должна хранить список со временем.

Как устройство получает сведения о пространстве, эти Пространственные привязки можно настроить их положение относительно друг друга, при необходимости, чтобы обеспечить привязку каждой точно где он был помещен по отношению к реальной жизни. Поместив пространственных привязки в расположении, где пользователь помещает голограмма и затем позиционирования, голограмма относительно пространственных привязки гарантирует, что она поддерживает оптимальной стабильностью, даже если пользователь перемещается между десятки метров.

Эта корректировка непрерывной пространственных якорей относительно друг друга ключа разница между coordinate systems из пространственных привязки и стационарной системой отсчета кадров:

* Голограммы, помещаются в стационарной системой отсчета координат все сохраняют жесткой связи друг с другом. Тем не менее когда пользователь выходит на большие расстояния, система координат этого фрейма может смещения по отношению к миру, убедитесь, что голограммы рядом с пользователем, отображаются стабильной.

* В рабочей области отсчета голограммы также сохранять жесткой связи друг с другом. В отличие от стационарные кадр окна рабочей области всегда остается неизменным на месте относительно исходного положения определенных физических. Тем не менее содержимое отображается в системе координат этого этапа за его границы индикатора 5 будет отображаться только стабильные хотя пользователь основано в пределах этой границы.

* Голограммы, размещенные с помощью одного пространственного привязки может смещения относительно голограммы разместить, с помощью другой пространственный привязки. Это позволяет Windows позволяют улучшить их понимание его положение каждого пространственного привязки, даже если, например, один закрепленный должен изменяться слева и другую привязку необходимо выровнять вправо.

В отличие от стационарной системой отсчета координат, которая всегда выполняет оптимизацию для стабильности рядом с пользователем, этап системой отсчета координат и пространственных привязки убедитесь стабильность рядом с их происхождение. Это помогает этих голограммы сохранятся точно со временем, но также означает, что голограммы, просмотру слишком далеко от источника их система координат будет возникновение эффекты все более серьезным бегунка arm. Это обусловлено обостряются незначительные изменения в положение и ориентацию рабочей области или привязки пропорционально расстояние от эту привязку. 

Хорошее проверенное правило — убедитесь, что все, что готовятся к просмотру на основе привязки удаленных Пространственные системы координат в около трех ваттметров его происхождения. Рядом origin этап отдаленных содержимое отрисовки — это "ОК", любое увеличение позиционные ошибка повлияет только на малые голограммы, которые не перейдет в представление пользователя.

### <a name="spatial-anchor-persistence"></a>Сохраняемость пространственных привязки

Пространственные привязки также позволяет приложению запомнить является важным местом, даже в том случае, если приложение приостанавливает или завершает работу устройства.

Можно сохранить на диск пространственных привязки, ваше приложение создает и затем загружать их обратно позднее, сохранив их в приложение **пространственного хранилища привязки**. При сохранении или загрузке привязки, указываемые строковый ключ, который применяется к приложению, чтобы определить привязку в более поздней версии. Этот ключ можно Рассматривайте как имя файла для привязки раздела. Если вы хотите связать с этой привязкой другие данные, например трехмерной модели, который установлен в этом расположении, следует сохранить, в локальном хранилище приложения и свяжите ее с ключом, который вы выбрали.

Путем сохранения привязки к хранилищу пользователей можно поместить отдельных голограммы или поместите рабочей области вокруг которой будет поместить его различные голограммы приложения, а затем найти эти голограммы позже где они ожидают, через множество применений вашего приложения.

Можно также использовать <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">привязки пространственных Azure</a> для асинхронной голограмма сохраняемости на устройствах Android, iOS и HoloLens.  По электронной почте на привязку пространственных надежные облачные, несколько устройств можно наблюдать за же материализованных голограмма со временем, даже если эти устройства не существуют друг с другом в то же время.

### <a name="spatial-anchor-sharing"></a>Совместное использование пространственных привязки

Приложения также могут совместно использовать Пространственные привязки в режиме реального времени с другими устройствами, что позволяет в режиме реального времени общие возможности.

С помощью <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">привязки пространственных Azure</a>, приложения могут совместно использовать Пространственные привязки в HoloLens, iOS и Android. Назначив каждому устройству отрисовки голограмма, с помощью одной пространственных привязкой, все пользователи будут видеть голограмма, которые отображаются в том же месте, в реальном мире.

## <a name="avoid-head-locked-content"></a>Избегайте блокировки head содержимого

Настоятельно рекомендуется не отрисовки содержимого заблокирован head, который остается на точку предопределенной на дисплей (HUD). Как правило содержимое заблокирован head неудобства для пользователей и не воспринимается в качестве естественной частью их мир.

Обычно заблокирован HEAD содержимое следует заменить голограммы, подключенный к пользователю или размещено в этом мире, сам. Например [курсоры](cursors.md) следует обычно возможности обмена данными в мир, естественным образом масштабирование в соответствии с положения и расстояния от объекта, находящегося под взглядом пользователя.

## <a name="handling-tracking-errors"></a>Обработка ошибок отслеживания

В некоторых средах, таких как темные коридорах зданий может оказаться возможным гарнитуры, используя внутренний отслеживания для поиска самой правильно в мире. Это может привести голограммы не отображаются или отображаются в неправильное окружение, если обрабатывается неправильно. Теперь мы рассмотрим условия, в которых это может произойти, его влияние на взаимодействие с пользователем, и советы по наиболее обработки такой ситуации.

### <a name="headset-cannot-track-due-to-insufficient-sensor-data"></a>Не может отслеживать гарнитуры, из-за недостатка датчиков

В некоторых случаях гарнитура датчиков не смогут понять, где гарнитуры. Это может произойти, если считается темно-, или если датчики охваченных волосы или руки или окружающей среды не имеют достаточно текстуры.

В этом случае будет может отслеживать его положение с точностью, достаточной для подготовки к просмотру заблокирован world голограммы гарнитуры. Вы не сможете выяснить, где пространственных привязки, стационарные кадра или рабочей области рамки задается относительно устройства, но можно по-прежнему отображаться заблокирован тело содержимого в подключенных отсчета.

Приложения следует предоставить пользователю для получения позиционные, отслеживания отрисовки некоторых резервной заблокирован текст содержимого, описывающий некоторые советы, такие как поставил датчики и включение Дополнительные источники света.

### <a name="headset-tracks-incorrectly-due-to-dynamic-changes-in-the-environment"></a>Отслеживает гарнитура неправильно из-за динамического изменения в среде

В некоторых случаях устройство не может отслеживать должным образом, при слишком большом количестве о динамических изменениях в среде, например, многие люди прогулке по в комнате. В этом случае голограммы может показаться переходов или отклонения, так как устройство пытается отслеживать сам в этой динамической среде. Мы рекомендуем использовать устройство в менее динамической среде, если вы достигнете этот сценарий.

### <a name="headset-tracks-incorrectly-because-the-environment-has-changed-significantly-over-time"></a>Гарнитура отслеживает неправильно, поскольку среде существенно изменился со временем

В некоторых случаях при запуске с помощью гарнитуры в среде, в которой произошло много изменений (например значительные перемещения мебель, hangings по часам и т.д.), возможно, что некоторые голограммы могут появиться смещенные из исходного местоположения. Более ранние голограммы может также сразу перейти вокруг как пользователь перемещается в новой области. Это обусловлено тем, больше не содержит основные сведения о системе пространства и предпринимается попытка изменить сопоставление среды при попытке согласовать возможности комнате. В этом случае рекомендуется рекомендуйте пользователям голограммы повторного размещения, которые они закрепила в мире, если они не отображаются, там, где ожидались.

### <a name="headset-tracks-incorrectly-due-to-identical-spaces-in-an-environment"></a>Отслеживает гарнитура неправильно из-за идентичные пробелы в среде

В некоторых случаях домом или другие места может иметь два идентичных областей. Например два идентичных конференц-залах, двух идентичных углу области, два больших идентичные плакаты, посвященные устройства поле зрения. В таких случаях устройство может в некоторых случаях путаетесь между идентичными частями и пометить их как и в него внутренних представлений. Это может привести к голограммы из некоторых областей в других местах. Устройство может начать потерять отслеживания часто, так как его внутреннее представление среды были повреждены. В этом случае рекомендуется сброс среды понимание системы. Обратите внимание на то, что сброс карты приведет к потере всех пространственных привязки размещения. В результате гарнитура для отслеживания в уникальных областей среды. Тем не менее может повторно происходить, если устройство получает путают между областями идентичные еще раз.

## <a name="see-also"></a>См. также
* [Презентации конференции GDC 2017 на Пространственные системы координат и holographic Подготовка к просмотру](https://channel9.msdn.com/events/GDC/GDC-2017/GDC2017-008)
* [Системы координат в Unity](coordinate-systems-in-unity.md)
* [Системы координат в DirectX](coordinate-systems-in-directx.md)
* [Пространственные привязки](spatial-anchors.md)
* [Общие возможности в смешанной реальности](shared-experiences-in-mixed-reality.md)
* <a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure пространственных привязки</a>
* [Пример использования - просматривая отверстия в реальности](case-study-looking-through-holes-in-your-reality.md)
