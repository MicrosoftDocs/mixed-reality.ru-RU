---
title: Пример использования - записи и создание содержимого для HoloTour
description: HoloTour для Microsoft HoloLens предоставляет иммерсивных трехмерных личных обзоры символическое расположений по всему миру.
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: Windows HoloTour, HoloLens, смешанной реальности
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597636"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a><span data-ttu-id="b90c9-104">Пример использования - записи и создание содержимого для HoloTour</span><span class="sxs-lookup"><span data-stu-id="b90c9-104">Case study - Capturing and creating content for HoloTour</span></span>

<span data-ttu-id="b90c9-105">HoloTour для Microsoft HoloLens предоставляет иммерсивных трехмерных личных обзоры символическое расположений по всему миру.</span><span class="sxs-lookup"><span data-stu-id="b90c9-105">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="b90c9-106">Как конструкторы, исполнителей, производители, аудио конструкторы и разработчики, работающие над этим проектом, узнала Создание convincingly реальных трехмерной отрисовки из хорошо известного расположения занимает уникальное сочетание creative и технологические волшебства.</span><span class="sxs-lookup"><span data-stu-id="b90c9-106">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span>

## <a name="the-tech"></a><span data-ttu-id="b90c9-107">Технический</span><span class="sxs-lookup"><span data-stu-id="b90c9-107">The tech</span></span>

<span data-ttu-id="b90c9-108">С HoloTour, мы хотели бы позволяют пользователям посетите некоторые назначения станете лучшей в мире — как [ruins из Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) в Перу или современного [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) в Италии, прямо из собственные гостиных.</span><span class="sxs-lookup"><span data-stu-id="b90c9-108">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="b90c9-109">Наша команда делало целью HoloTour «сделать вам кажется, что Вы действительно существует.»</span><span class="sxs-lookup"><span data-stu-id="b90c9-109">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="b90c9-110">Интерфейс, должен быть больше, чем просто изображения или видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-110">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="b90c9-111">С использованием аудио технологии HoloLens, отслеживания и уникальное отображаемое мы полагали, что нам удалось практически транспорта вы в другое место.</span><span class="sxs-lookup"><span data-stu-id="b90c9-111">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="b90c9-112">Необходимо зафиксировать Достопримечательности, звуки и трехмерной геометрии каждого местоположения, мы посещен, а затем повторно создайте, внутри нашего приложения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-112">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="b90c9-113">Чтобы сделать это, нам нужно камеры 360 ° платформе с направления записи звука.</span><span class="sxs-lookup"><span data-stu-id="b90c9-113">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="b90c9-114">Он требуется для записи с очень высоким разрешением, чтобы материал будет выглядеть четкое при воспроизведении в HoloLens и камер должны располагаться рядом друг с другом, чтобы свести к минимуму совмещения артефакты.</span><span class="sxs-lookup"><span data-stu-id="b90c9-114">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="b90c9-115">Нам требовалось полное сферическую покрытия, не только на горизонте, но выше и ниже Вы также.</span><span class="sxs-lookup"><span data-stu-id="b90c9-115">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="b90c9-116">ПК, также требуется для переноски, благодаря чему мы может использовать по всему миру.</span><span class="sxs-lookup"><span data-stu-id="b90c9-116">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="b90c9-117">Мы оценки опции готовые и понял, что они просто не были достаточно хорошо реализовать видение — из-за разрешения, затратами или размер.</span><span class="sxs-lookup"><span data-stu-id="b90c9-117">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="b90c9-118">Если не удалось найти тестовой платформе камеры, удовлетворившего операцию нашим потребностям, мы бы для построения одного сами.</span><span class="sxs-lookup"><span data-stu-id="b90c9-118">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="b90c9-119">Создание тестовой платформы</span><span class="sxs-lookup"><span data-stu-id="b90c9-119">Building the rig</span></span>

<span data-ttu-id="b90c9-120">Первая версия — из картон Velcro, продукта, ленты и 14 камеры GoPro — то, что MacGyver было бы гордиться.</span><span class="sxs-lookup"><span data-stu-id="b90c9-120">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="b90c9-121">Просмотрев все — от недорогие решения для пользовательских изготовлены платформ, GoPro камеры в конечном счете были лучший вариант для нас потому, что были небольшой, доступные по цене и имели хранения простых в использовании памяти.</span><span class="sxs-lookup"><span data-stu-id="b90c9-121">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="b90c9-122">Малого форм-фактор было особенно важно, поскольку он позволил нам поместите камеры, достаточно близко друг к другу, чем меньше расстояние от камеры, тем меньше совмещения артефакты будут.</span><span class="sxs-lookup"><span data-stu-id="b90c9-122">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="b90c9-123">Наш уникальный камеры упорядочение позволило нам получить полный шар покрытие *, а также* достаточно перекрытие интеллектуально камеры и сгладить некоторые артефакты в процессе совмещения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-123">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="b90c9-124">Использование преимуществ [пространственных звук](spatial-sound.md) возможности на HoloLens крайне важны для создания реальных convincingly присутствия.</span><span class="sxs-lookup"><span data-stu-id="b90c9-124">Taking advantage of the [spatial sound](spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="b90c9-125">Мы использовали микрофона четыре массива, которые находятся под камерами штатива, который будет записывать звук из расположения наших камеры в четыре разных направления, что дает нам недостаточно сведений для создания пространственных звуков в нашей сценах.</span><span class="sxs-lookup"><span data-stu-id="b90c9-125">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![Нашей тестовой платформы камеры 360°, настройте для съемки за пределами Pantheon.](images/camera-pantheon-200px.png)

<span data-ttu-id="b90c9-127">Нашей тестовой платформы камеры 360°, настройте для съемки за пределами Pantheon.</span><span class="sxs-lookup"><span data-stu-id="b90c9-127">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="b90c9-128">Мы протестировали out наших самодельное тестовой платформы, используя его до ребра Rattlesnake практически Сиэтл, захват ландшафт в верхней части поездку.</span><span class="sxs-lookup"><span data-stu-id="b90c9-128">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="b90c9-129">Результат, то, что значительно усовершенствованный меньше чем расположений, которые вы видите в HoloTour сегодня, дала нам уверенность в нашей тестовой платформы разработки был достаточно хорошо, которые помогут вам кажется, что Вы действительно существует.</span><span class="sxs-lookup"><span data-stu-id="b90c9-129">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="b90c9-130">Мы обновили нашей тестовой платформы Velcro и картон до корпус камеры в трехмерной печати и купил внешних батареи пакеты для камер GoPro для упрощения управления батареи.</span><span class="sxs-lookup"><span data-stu-id="b90c9-130">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="b90c9-131">Затем мы сделали более сложных тестов, проходя до Сан-Франциско, создать Обзор миниатюрный побережье города и символическое Golden Gate мост.</span><span class="sxs-lookup"><span data-stu-id="b90c9-131">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="b90c9-132">Этот камеры тестовой платформы — мы использовали для большинства наших выделений из расположений, которые вы посещаете в HoloTour.</span><span class="sxs-lookup"><span data-stu-id="b90c9-132">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![Тестовая платформа 360° камеры, съемки в Machu Picchu.](images/camera-machu-pichu-500px.png)

<span data-ttu-id="b90c9-134">Тестовая платформа 360° камеры, съемки в Machu Picchu.</span><span class="sxs-lookup"><span data-stu-id="b90c9-134">The 360° camera rig filming in Machu Picchu.</span></span> 


## <a name="behind-the-scenes"></a><span data-ttu-id="b90c9-135">Как это делается</span><span class="sxs-lookup"><span data-stu-id="b90c9-135">Behind the scenes</span></span>

<span data-ttu-id="b90c9-136">До съемки, нам нужно было выяснить out места, в которых мы хотели включить на наш виртуальный Обзор для.</span><span class="sxs-lookup"><span data-stu-id="b90c9-136">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="b90c9-137">Рим был первого расположения, которые мы предназначен для отправки, и мы хотели сделать все правильно, поэтому мы решили сделать поездку scouting заранее.</span><span class="sxs-lookup"><span data-stu-id="b90c9-137">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="b90c9-138">Мы отправили команды из шести человек — включая исполнителей, конструкторы и производители — для посещения узлов, мы рассмотрении лично.</span><span class="sxs-lookup"><span data-stu-id="b90c9-138">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="b90c9-139">Поездку заняло около 9 дней — 2.5 для поездки, остальные — для съемки.</span><span class="sxs-lookup"><span data-stu-id="b90c9-139">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="b90c9-140">(Для Machu Picchu мы выбрали не следует делать scout поездки, исследование заранее и резервирования несколько дней буфера для съемки.)</span><span class="sxs-lookup"><span data-stu-id="b90c9-140">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="b90c9-141">В процессе Рим, команда заняло фотографии каждой области и отметить интересные факты, а также практические рекомендации, например, насколько тяжело это для каждой зоны и в том, насколько сложно было бы на пленку из-за crowds или ограничения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-141">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="b90c9-142">Это может показаться отпуск, но это большой объем работы.</span><span class="sxs-lookup"><span data-stu-id="b90c9-142">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="b90c9-143">Дней работы рано утром. он перейдет без остановки до вечером.</span><span class="sxs-lookup"><span data-stu-id="b90c9-143">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="b90c9-144">Каждую ночь материал был отправлен обратно в Сиэтле, чтобы просмотреть группы.</span><span class="sxs-lookup"><span data-stu-id="b90c9-144">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![Наши экипажа захвата в рим.](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="b90c9-146">Наши экипажа захвата в рим.</span><span class="sxs-lookup"><span data-stu-id="b90c9-146">Our capture crew in Rome.</span></span> 


<span data-ttu-id="b90c9-147">После завершения обработки scout окончательный план был сделан для фактического съемки.</span><span class="sxs-lookup"><span data-stu-id="b90c9-147">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="b90c9-148">Этот обязательный подробный список, где мы и собирались на пленку, на какой день и в какое время.</span><span class="sxs-lookup"><span data-stu-id="b90c9-148">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="b90c9-149">Каждый день за границей дорогостоящим, поэтому требуется глазом эффективность.</span><span class="sxs-lookup"><span data-stu-id="b90c9-149">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="b90c9-150">Мы резервируемые руководства и обработчики в Рим, чтобы помочь нам и полностью использованы ежедневно перед Восход для после прекращения действия этой службы.</span><span class="sxs-lookup"><span data-stu-id="b90c9-150">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="b90c9-151">Нам нужно получить лучший материал возможных, чтобы вам кажется, что Вы действительно существует.</span><span class="sxs-lookup"><span data-stu-id="b90c9-151">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="b90c9-152">Запись видео</span><span class="sxs-lookup"><span data-stu-id="b90c9-152">Capturing the video</span></span>

<span data-ttu-id="b90c9-153">Выполнив несколько простых вещей во время захвата можно упростить постобработки.</span><span class="sxs-lookup"><span data-stu-id="b90c9-153">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="b90c9-154">Например всякий раз, когда Сшивать изображения из нескольких камеры, вы получите визуальных артефактов из-за каждой камеры имеет немного отличающееся представление.</span><span class="sxs-lookup"><span data-stu-id="b90c9-154">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="b90c9-155">Более подробно объекты имеют к камере, тем больше разница между представлениями и чем больше совмещения артефакты будут.</span><span class="sxs-lookup"><span data-stu-id="b90c9-155">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="b90c9-156">Вот простой способ визуализации проблема: держатся в thumb перед лица и просмотрите его с единственным глаз.</span><span class="sxs-lookup"><span data-stu-id="b90c9-156">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="b90c9-157">Теперь перейдите глаза.</span><span class="sxs-lookup"><span data-stu-id="b90c9-157">Now switch eyes.</span></span> <span data-ttu-id="b90c9-158">Вы увидите, что вашей thumb отображается для перемещения относительно фона.</span><span class="sxs-lookup"><span data-stu-id="b90c9-158">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="b90c9-159">Если хранения вашей thumb дальнейшей от лица и повторять эксперимент, ваш thumb будут отображаться для перемещения меньше.</span><span class="sxs-lookup"><span data-stu-id="b90c9-159">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="b90c9-160">То очевидным, что перемещение аналогичен совмещения проблему мы столкнулись: Глаза, как наши камеры, отсутствует один образ, так как они разделяются на небольшое расстояние.</span><span class="sxs-lookup"><span data-stu-id="b90c9-160">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="b90c9-161">Так как это гораздо проще предотвратить худшее артефакты во время съемки, а не их исправления в последующей обработки, мы попытались сохранить людьми и далеко от камеры в надежде, что мы сможем исключить необходимость совместить крупным планом объектов.</span><span class="sxs-lookup"><span data-stu-id="b90c9-161">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="b90c9-162">Обслуживание больших Очистка вокруг наших камеры была, пожалуй, одно из самых больших проблем, которые использовались во время выполнения, и нам пришлось проявить творческие способности, чтобы это работало.</span><span class="sxs-lookup"><span data-stu-id="b90c9-162">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="b90c9-163">Работа с локальной руководства была очень полезно при управлении crowds, но мы также поняли, что с помощью подписывает — и иногда небольшой конусы или bean контейнеры — для пометки нашего filming пространства был довольно эффективным, особенно в том случае, поскольку нам необходимо получить некоторое материал во всех расположениях.</span><span class="sxs-lookup"><span data-stu-id="b90c9-163">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="b90c9-164">Часто лучший способ получить хороший записи было просто прибытия очень рано утром, прежде чем большинство людей, поступающее.</span><span class="sxs-lookup"><span data-stu-id="b90c9-164">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="b90c9-165">Некоторые другие методы полезны записи взяты непосредственно со традиционных фильма и рекомендации.</span><span class="sxs-lookup"><span data-stu-id="b90c9-165">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="b90c9-166">Например мы использовали цвет карточки исправления на всех наших камер и фотографии записанный эталонный текстур и объектов, которые мы могут понадобиться позже.</span><span class="sxs-lookup"><span data-stu-id="b90c9-166">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![Грубая огранка Picchu Machu отображается карта корректировка цветов.](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="b90c9-168">Грубая вырезания материал Pantheon перед совмещения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-168">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="b90c9-169">Обработка видео</span><span class="sxs-lookup"><span data-stu-id="b90c9-169">Processing the video</span></span>

<span data-ttu-id="b90c9-170">Запись содержимого 360° — это лишь первый шаг — большой объем обработки, необходимые для преобразования необработанных камеры материал, была записана в окончательную версию активов, вы увидите в HoloTour.</span><span class="sxs-lookup"><span data-stu-id="b90c9-170">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="b90c9-171">Как только мы были обратно домашней, нам нужно сделать видео с 14 разных камеры веб-каналов и превратить ее в единый видеофайл непрерывная с минимальными артефактами.</span><span class="sxs-lookup"><span data-stu-id="b90c9-171">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="b90c9-172">Наша команда art используется целый ряд средств для объединения и польский записанного материал и мы разработали конвейер оптимизировать обработку максимально.</span><span class="sxs-lookup"><span data-stu-id="b90c9-172">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="b90c9-173">Материал должны были быть совмещенные цвет вместе, исправлено, а затем составных удалите ненужные элементы и артефакты или добавить дополнительные группами жизни и перемещения, с целью улучшить это чувство, фактически, существует.</span><span class="sxs-lookup"><span data-stu-id="b90c9-173">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![Грубая вырезания материал Pantheon перед совмещения.](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="b90c9-175">Грубая вырезания материал Pantheon перед совмещения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-175">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="b90c9-176">Стыковки видео, мы использовали утилиту [PTGui](http://www.ptgui.com/) и интегрированная нашего конвейера обработки.</span><span class="sxs-lookup"><span data-stu-id="b90c9-176">To stitch the videos together, we used a tool called [PTGui](http://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="b90c9-177">Как часть постобработки мы по-прежнему извлекаются кадры из наших видео и обнаружили совмещения шаблон, который выглядит для одного из этих кадров.</span><span class="sxs-lookup"><span data-stu-id="b90c9-177">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="b90c9-178">Затем мы применили этот шаблон для пользовательского подключаемого модуля, который был записан, разрешенных наших видео исполнители уточнить и настроить совмещения шаблон напрямую при композиции в эффекты после.</span><span class="sxs-lookup"><span data-stu-id="b90c9-178">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![Снимок экрана из PTGui отображение совмещенные материал Pantheon.](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="b90c9-180">Снимок экрана из PTGui отображение совмещенные материал Pantheon.</span><span class="sxs-lookup"><span data-stu-id="b90c9-180">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="b90c9-181">Воспроизведение видео</span><span class="sxs-lookup"><span data-stu-id="b90c9-181">Video playback</span></span>

<span data-ttu-id="b90c9-182">После завершения обработки материал, у нас есть простой видео, но это чрезвычайно больших — около 8 K разрешения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-182">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="b90c9-183">Декодирование видео является дорогостоящим и очень мало компьютеров, которые может обрабатывать видео из 8 КБ, поэтому со следующей проблемой было найти способ воспроизвести этот видеоролик обратно на HoloLens.</span><span class="sxs-lookup"><span data-stu-id="b90c9-183">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="b90c9-184">Мы разработали несколько стратегий, чтобы избежать затрат, декодирования по-прежнему предоставляя интерфейс пользователя, как они Просмотр всего видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-184">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="b90c9-185">Самый простой оптимизации — избежать декодирование части видео, которые не так сильно меняются.</span><span class="sxs-lookup"><span data-stu-id="b90c9-185">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="b90c9-186">Мы создали средства для определения областей в каждой сцены с незначительной или нулевой движения.</span><span class="sxs-lookup"><span data-stu-id="b90c9-186">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="b90c9-187">Для этих областей мы покажем, статическое изображение, вместо декодирования видео каждого кадра.</span><span class="sxs-lookup"><span data-stu-id="b90c9-187">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="b90c9-188">Для этого мы разделить большие видео в гораздо более мелкие фрагменты данных.</span><span class="sxs-lookup"><span data-stu-id="b90c9-188">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="b90c9-189">Мы также проверили, что каждый пиксел, которые мы декодировать был использован наиболее эффективно.</span><span class="sxs-lookup"><span data-stu-id="b90c9-189">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="b90c9-190">Мы провели эксперимент с методиками сжатия, чтобы уменьшить объем видео; мы разделим области видео в соответствии с многоугольников геометрии, он будет отображаться на; Мы корректируется UVs и переупакованы видео, в зависимости от сколько детализации разных многоугольники включены.</span><span class="sxs-lookup"><span data-stu-id="b90c9-190">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="b90c9-191">Часть этой работы получается, что запущен как единый 8k видео в количество блоков, которые выглядят почти непригодные для чтения, пока не будут правильно повторно преобразования типа в сцене.</span><span class="sxs-lookup"><span data-stu-id="b90c9-191">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="b90c9-192">Для разработки игр, понимающий наложение текстуры и упаковки UV это возможно, покажутся знакомыми.</span><span class="sxs-lookup"><span data-stu-id="b90c9-192">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![Полное представление Pantheon до оптимизации.](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="b90c9-194">Полное представление Pantheon до оптимизации.</span><span class="sxs-lookup"><span data-stu-id="b90c9-194">A full view of the Pantheon before optimizations.</span></span> 


![В правой половине Pantheon, обрабатываются для воспроизведения видео.](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="b90c9-196">В правой половине Pantheon, обрабатываются для воспроизведения видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-196">The right half of the Pantheon, processed for video playback.</span></span> 


![Пример одного региона видео после оптимизации и упаковки.](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="b90c9-198">Пример одного региона видео после оптимизации и упаковки.</span><span class="sxs-lookup"><span data-stu-id="b90c9-198">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="b90c9-199">Другой прием, который мы использовали мы хотели избежать, декодирования видео просматриваемого не активно.</span><span class="sxs-lookup"><span data-stu-id="b90c9-199">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="b90c9-200">Хотя в HoloTour, можно отображается только часть полного сцены в каждый конкретный момент.</span><span class="sxs-lookup"><span data-stu-id="b90c9-200">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="b90c9-201">Мы только декодирования видео в пределах или вскоре вне вашего поля of обзора.</span><span class="sxs-lookup"><span data-stu-id="b90c9-201">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="b90c9-202">Повернуть голову, мы начать воспроизведение области видео, которые будут в вашей FOV и закончить те, которые больше не внутри нее.</span><span class="sxs-lookup"><span data-stu-id="b90c9-202">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="b90c9-203">Даже не заметят большинство людей, это произошло, но если быстро, вы увидите видео займет одну секунду, чтобы начать, в то же время вы увидите статическое изображение, какие затем затухание обратно в видео, когда он будет готов.</span><span class="sxs-lookup"><span data-stu-id="b90c9-203">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="b90c9-204">Чтобы сделать эту стратегию работы мы разработали систему обширной воспроизведения видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-204">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="b90c9-205">Мы оптимизировали код низкого уровня воспроизведения, чтобы сделать видео переключение чрезвычайно эффективным.</span><span class="sxs-lookup"><span data-stu-id="b90c9-205">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="b90c9-206">Кроме того нам пришлось кодировать наших видео особым образом, чтобы обеспечить возможность быстро переключаться на любой видео в любое время.</span><span class="sxs-lookup"><span data-stu-id="b90c9-206">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="b90c9-207">Этот конвейер воспроизведения заняло значительный объем времени разработки, поэтому мы реализовали поэтапно.</span><span class="sxs-lookup"><span data-stu-id="b90c9-207">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="b90c9-208">Мы начали, представляя собой упрощенную систему, которая была менее эффективной, но для работы на работу и медленно разрешенных конструкторы и исполнители улучшена его более надежную систему воспроизведения, что позволило нам поставлять строку итогов контроля качества.</span><span class="sxs-lookup"><span data-stu-id="b90c9-208">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="b90c9-209">Этот последний система ожидала пользовательские инструменты, созданной в среде Unity для настройки в сцене и монитор модуль воспроизведения видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-209">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="b90c9-210">Повторное создание объектов практически пространства в трехмерном пространстве</span><span class="sxs-lookup"><span data-stu-id="b90c9-210">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="b90c9-211">Видео составляют большую часть в HoloTour, но существует ряд трехмерных объектов, которые отображаются рядом с вами, такие как рисование в Piazza Navona секрет за пределами Pantheon или выноске горячего воздуха, которые вы вместо воздушный сцены.</span><span class="sxs-lookup"><span data-stu-id="b90c9-211">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="b90c9-212">Эти трехмерные объекты являются важным, так как человеческим восприятием глубины — очень хорошо получше, но не очень хорошая далеко.</span><span class="sxs-lookup"><span data-stu-id="b90c9-212">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="b90c9-213">Мы можем с видео в расстояние, но позволяет сильна их места и чувствуют, что нужна только близлежащих объектов требуется глубины.</span><span class="sxs-lookup"><span data-stu-id="b90c9-213">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="b90c9-214">Этот метод похож на то, может появиться в музей естественного журнал — рисунок diorama, физических Ландшафтный растения и animal specimens на переднем плане, но recedes в искусно маскированные матовый рисования в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="b90c9-214">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="b90c9-215">Некоторые объекты являются просто трехмерных ресурсов, мы создали и добавлены в сцену, чтобы улучшить взаимодействие.</span><span class="sxs-lookup"><span data-stu-id="b90c9-215">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="b90c9-216">Рисование и выноске горячий воздух попадают в эту категорию, так как они не были присутствующий после проверки подлинности мы расположенным.</span><span class="sxs-lookup"><span data-stu-id="b90c9-216">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="b90c9-217">Подобно ресурсов игры, они были созданы 3D исполнителя нашей команды и текстурой соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="b90c9-217">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="b90c9-218">Мы разместить их в нашей сцены практически где вы находитесь и игровой подсистемы можно отображать их двух отображаются HoloLens, чтобы они отображались в виде трехмерного объекта.</span><span class="sxs-lookup"><span data-stu-id="b90c9-218">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="b90c9-219">Другие активы, такие как секрет за пределами Pantheon, являются реальными объектами, которые существуют в расположениях, где мы устранении неполадок видео, но для переноса этих объектов из видео в формат 3D, мы всего лишь несколько действий.</span><span class="sxs-lookup"><span data-stu-id="b90c9-219">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="b90c9-220">Во-первых нам требуются дополнительные сведения о каждом из объектов.</span><span class="sxs-lookup"><span data-stu-id="b90c9-220">First, we need additional information about each object.</span></span> <span data-ttu-id="b90c9-221">Находясь в расположение для съемки, наша группа захвачен массу материал ссылку из этих объектов бы нам достаточно подробные изображения, чтобы точно воссоздать текстуры.</span><span class="sxs-lookup"><span data-stu-id="b90c9-221">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="b90c9-222">Команда также выполняется [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) сканирование, который создает трехмерной модели десятки двумерные изображения, получаем грубого модели объекта в нужном масштабе идеальной.</span><span class="sxs-lookup"><span data-stu-id="b90c9-222">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="b90c9-223">Как мы можем обработать наших материал, объекты, которые будут заменены более поздней версии с трехмерной представлением, удаляются из видео.</span><span class="sxs-lookup"><span data-stu-id="b90c9-223">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="b90c9-224">Трехмерного ресурса на основе модели photogrammetry но очищены и проще благодаря нашей исполнители.</span><span class="sxs-lookup"><span data-stu-id="b90c9-224">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="b90c9-225">Для некоторых объектов можно использовать части видео — например текстуры воды на секрет, но большая часть секрет теперь трехмерного объекта, который позволяет пользователям считают глубины и Пройдитесь в ограниченное пространство в интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="b90c9-225">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="b90c9-226">Рядом с места объекты выглядят следующим образом значительно добавляет в том смысле, реалистичности и помогает на землю пользователей в виртуальной папке.</span><span class="sxs-lookup"><span data-stu-id="b90c9-226">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![Удалить материал pantheon с секрет.](images/object-removal-pantheon-500px.png)

<span data-ttu-id="b90c9-229">Удалить материал pantheon с секрет.</span><span class="sxs-lookup"><span data-stu-id="b90c9-229">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="b90c9-230">Он будет заменен трехмерного ресурса.</span><span class="sxs-lookup"><span data-stu-id="b90c9-230">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="b90c9-231">Заключительные замечания</span><span class="sxs-lookup"><span data-stu-id="b90c9-231">Final thoughts</span></span>

<span data-ttu-id="b90c9-232">Очевидно, что возникла дополнительные к созданию этого содержимого, что мы здесь обсудили.</span><span class="sxs-lookup"><span data-stu-id="b90c9-232">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="b90c9-233">Существует несколько сцены, нам хотелось бы называть их «невозможно перспективы» — включая поездке всплывающей горячего воздуха и gladiator бороться в Colosseum, который занял более творческий подход.</span><span class="sxs-lookup"><span data-stu-id="b90c9-233">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="b90c9-234">Нам удалось удовлетворить их в будущем обучающий материал.</span><span class="sxs-lookup"><span data-stu-id="b90c9-234">We'll address these in a future case study.</span></span>

<span data-ttu-id="b90c9-235">Мы надеемся, что совместное использование решений на некоторые из больше проблем, которые использовались во время производства полезен для других разработчиков и вы можете использовать некоторые из этих методов для создания мощных опытом для HoloLens вдохновение.</span><span class="sxs-lookup"><span data-stu-id="b90c9-235">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="b90c9-236">(И если вы убедитесь в том, чтобы поделиться с нами в [форум, посвященный разработке приложений HoloLens](https://forums.hololens.com/)!)</span><span class="sxs-lookup"><span data-stu-id="b90c9-236">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="b90c9-237">Об авторах</span><span class="sxs-lookup"><span data-stu-id="b90c9-237">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="b90c9-238"><b>Дэвид Хейли</b> — старший разработчик, узнали о платформ камеры и воспроизведение видео, чем он думал, можно работать с HoloTour.</span><span class="sxs-lookup"><span data-stu-id="b90c9-238"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="b90c9-239"><b>Дэнни Askew</b> является видео исполнителя удостоверился, что исследование рим был как подавая максимально.</span><span class="sxs-lookup"><span data-stu-id="b90c9-239"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="b90c9-240"><b>Джейсон Syltebo</b> — конструктор аудио, кто выполняет проверку того, вы можете столкнуться с soundscape каждого назначения, которые вы посещаете, даже в том случае, если вернуться назад во времени.</span><span class="sxs-lookup"><span data-stu-id="b90c9-240"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="b90c9-241"><b>Travis Steiner</b> является директором отдела разработки, проверять и scouted расположений, создания планов поездок и направленных съемки на сайте.</span><span class="sxs-lookup"><span data-stu-id="b90c9-241"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="b90c9-242">См. также</span><span class="sxs-lookup"><span data-stu-id="b90c9-242">See also</span></span>
* [<span data-ttu-id="b90c9-243">Видео: Microsoft HoloLens: HoloTour</span><span class="sxs-lookup"><span data-stu-id="b90c9-243">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
