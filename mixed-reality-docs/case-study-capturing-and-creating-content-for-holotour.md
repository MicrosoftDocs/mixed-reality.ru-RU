---
title: Пример использования - записи и создание содержимого для HoloTour
description: HoloTour для Microsoft HoloLens предоставляет иммерсивных трехмерных личных обзоры символическое расположений по всему миру.
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: Windows HoloTour, HoloLens, смешанной реальности
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/12/2019
ms.locfileid: "59597636"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a>Пример использования - записи и создание содержимого для HoloTour

HoloTour для Microsoft HoloLens предоставляет иммерсивных трехмерных личных обзоры символическое расположений по всему миру. Как конструкторы, исполнителей, производители, аудио конструкторы и разработчики, работающие над этим проектом, узнала Создание convincingly реальных трехмерной отрисовки из хорошо известного расположения занимает уникальное сочетание creative и технологические волшебства.

## <a name="the-tech"></a>Технический

С HoloTour, мы хотели бы позволяют пользователям посетите некоторые назначения станете лучшей в мире — как [ruins из Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) в Перу или современного [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) в Италии, прямо из собственные гостиных. Наша команда делало целью HoloTour «сделать вам кажется, что Вы действительно существует.» Интерфейс, должен быть больше, чем просто изображения или видео. С использованием аудио технологии HoloLens, отслеживания и уникальное отображаемое мы полагали, что нам удалось практически транспорта вы в другое место. Необходимо зафиксировать Достопримечательности, звуки и трехмерной геометрии каждого местоположения, мы посещен, а затем повторно создайте, внутри нашего приложения.

Чтобы сделать это, нам нужно камеры 360 ° платформе с направления записи звука. Он требуется для записи с очень высоким разрешением, чтобы материал будет выглядеть четкое при воспроизведении в HoloLens и камер должны располагаться рядом друг с другом, чтобы свести к минимуму совмещения артефакты. Нам требовалось полное сферическую покрытия, не только на горизонте, но выше и ниже Вы также. ПК, также требуется для переноски, благодаря чему мы может использовать по всему миру. Мы оценки опции готовые и понял, что они просто не были достаточно хорошо реализовать видение — из-за разрешения, затратами или размер. Если не удалось найти тестовой платформе камеры, удовлетворившего операцию нашим потребностям, мы бы для построения одного сами.

### <a name="building-the-rig"></a>Создание тестовой платформы

Первая версия — из картон Velcro, продукта, ленты и 14 камеры GoPro — то, что MacGyver было бы гордиться. Просмотрев все — от недорогие решения для пользовательских изготовлены платформ, GoPro камеры в конечном счете были лучший вариант для нас потому, что были небольшой, доступные по цене и имели хранения простых в использовании памяти. Малого форм-фактор было особенно важно, поскольку он позволил нам поместите камеры, достаточно близко друг к другу, чем меньше расстояние от камеры, тем меньше совмещения артефакты будут. Наш уникальный камеры упорядочение позволило нам получить полный шар покрытие *, а также* достаточно перекрытие интеллектуально камеры и сгладить некоторые артефакты в процессе совмещения.

Использование преимуществ [пространственных звук](spatial-sound.md) возможности на HoloLens крайне важны для создания реальных convincingly присутствия. Мы использовали микрофона четыре массива, которые находятся под камерами штатива, который будет записывать звук из расположения наших камеры в четыре разных направления, что дает нам недостаточно сведений для создания пространственных звуков в нашей сценах.

![Нашей тестовой платформы камеры 360°, настройте для съемки за пределами Pantheon.](images/camera-pantheon-200px.png)

Нашей тестовой платформы камеры 360°, настройте для съемки за пределами Pantheon. 


Мы протестировали out наших самодельное тестовой платформы, используя его до ребра Rattlesnake практически Сиэтл, захват ландшафт в верхней части поездку. Результат, то, что значительно усовершенствованный меньше чем расположений, которые вы видите в HoloTour сегодня, дала нам уверенность в нашей тестовой платформы разработки был достаточно хорошо, которые помогут вам кажется, что Вы действительно существует.

Мы обновили нашей тестовой платформы Velcro и картон до корпус камеры в трехмерной печати и купил внешних батареи пакеты для камер GoPro для упрощения управления батареи. Затем мы сделали более сложных тестов, проходя до Сан-Франциско, создать Обзор миниатюрный побережье города и символическое Golden Gate мост. Этот камеры тестовой платформы — мы использовали для большинства наших выделений из расположений, которые вы посещаете в HoloTour.

![Тестовая платформа 360° камеры, съемки в Machu Picchu.](images/camera-machu-pichu-500px.png)

Тестовая платформа 360° камеры, съемки в Machu Picchu. 


## <a name="behind-the-scenes"></a>Как это делается

До съемки, нам нужно было выяснить out места, в которых мы хотели включить на наш виртуальный Обзор для. Рим был первого расположения, которые мы предназначен для отправки, и мы хотели сделать все правильно, поэтому мы решили сделать поездку scouting заранее. Мы отправили команды из шести человек — включая исполнителей, конструкторы и производители — для посещения узлов, мы рассмотрении лично. Поездку заняло около 9 дней — 2.5 для поездки, остальные — для съемки. (Для Machu Picchu мы выбрали не следует делать scout поездки, исследование заранее и резервирования несколько дней буфера для съемки.)

В процессе Рим, команда заняло фотографии каждой области и отметить интересные факты, а также практические рекомендации, например, насколько тяжело это для каждой зоны и в том, насколько сложно было бы на пленку из-за crowds или ограничения. Это может показаться отпуск, но это большой объем работы. Дней работы рано утром. он перейдет без остановки до вечером. Каждую ночь материал был отправлен обратно в Сиэтле, чтобы просмотреть группы. 

![Наши экипажа захвата в рим.](images/holotour-filming-crew-rome-500px.jpg) 

Наши экипажа захвата в рим. 


После завершения обработки scout окончательный план был сделан для фактического съемки. Этот обязательный подробный список, где мы и собирались на пленку, на какой день и в какое время. Каждый день за границей дорогостоящим, поэтому требуется глазом эффективность. Мы резервируемые руководства и обработчики в Рим, чтобы помочь нам и полностью использованы ежедневно перед Восход для после прекращения действия этой службы. Нам нужно получить лучший материал возможных, чтобы вам кажется, что Вы действительно существует.

### <a name="capturing-the-video"></a>Запись видео

Выполнив несколько простых вещей во время захвата можно упростить постобработки. Например всякий раз, когда Сшивать изображения из нескольких камеры, вы получите визуальных артефактов из-за каждой камеры имеет немного отличающееся представление. Более подробно объекты имеют к камере, тем больше разница между представлениями и чем больше совмещения артефакты будут. Вот простой способ визуализации проблема: держатся в thumb перед лица и просмотрите его с единственным глаз. Теперь перейдите глаза. Вы увидите, что вашей thumb отображается для перемещения относительно фона. Если хранения вашей thumb дальнейшей от лица и повторять эксперимент, ваш thumb будут отображаться для перемещения меньше. То очевидным, что перемещение аналогичен совмещения проблему мы столкнулись: Глаза, как наши камеры, отсутствует один образ, так как они разделяются на небольшое расстояние.

Так как это гораздо проще предотвратить худшее артефакты во время съемки, а не их исправления в последующей обработки, мы попытались сохранить людьми и далеко от камеры в надежде, что мы сможем исключить необходимость совместить крупным планом объектов. Обслуживание больших Очистка вокруг наших камеры была, пожалуй, одно из самых больших проблем, которые использовались во время выполнения, и нам пришлось проявить творческие способности, чтобы это работало. Работа с локальной руководства была очень полезно при управлении crowds, но мы также поняли, что с помощью подписывает — и иногда небольшой конусы или bean контейнеры — для пометки нашего filming пространства был довольно эффективным, особенно в том случае, поскольку нам необходимо получить некоторое материал во всех расположениях. Часто лучший способ получить хороший записи было просто прибытия очень рано утром, прежде чем большинство людей, поступающее.

Некоторые другие методы полезны записи взяты непосредственно со традиционных фильма и рекомендации. Например мы использовали цвет карточки исправления на всех наших камер и фотографии записанный эталонный текстур и объектов, которые мы могут понадобиться позже. 

![Грубая огранка Picchu Machu отображается карта корректировка цветов.](images/rough-cut-machu-picchu-500px.png)

Грубая вырезания материал Pantheon перед совмещения.

### <a name="processing-the-video"></a>Обработка видео

Запись содержимого 360° — это лишь первый шаг — большой объем обработки, необходимые для преобразования необработанных камеры материал, была записана в окончательную версию активов, вы увидите в HoloTour. Как только мы были обратно домашней, нам нужно сделать видео с 14 разных камеры веб-каналов и превратить ее в единый видеофайл непрерывная с минимальными артефактами. Наша команда art используется целый ряд средств для объединения и польский записанного материал и мы разработали конвейер оптимизировать обработку максимально. Материал должны были быть совмещенные цвет вместе, исправлено, а затем составных удалите ненужные элементы и артефакты или добавить дополнительные группами жизни и перемещения, с целью улучшить это чувство, фактически, существует.

![Грубая вырезания материал Pantheon перед совмещения.](images/rough-cut-pantheon-500px.png)

Грубая вырезания материал Pantheon перед совмещения. 


Стыковки видео, мы использовали утилиту [PTGui](http://www.ptgui.com/) и интегрированная нашего конвейера обработки. Как часть постобработки мы по-прежнему извлекаются кадры из наших видео и обнаружили совмещения шаблон, который выглядит для одного из этих кадров. Затем мы применили этот шаблон для пользовательского подключаемого модуля, который был записан, разрешенных наших видео исполнители уточнить и настроить совмещения шаблон напрямую при композиции в эффекты после. 

![Снимок экрана из PTGui отображение совмещенные материал Pantheon.](images/stitching-tool-pantheon-500px.png)

Снимок экрана из PTGui отображение совмещенные материал Pantheon. 


### <a name="video-playback"></a>Воспроизведение видео

После завершения обработки материал, у нас есть простой видео, но это чрезвычайно больших — около 8 K разрешения. Декодирование видео является дорогостоящим и очень мало компьютеров, которые может обрабатывать видео из 8 КБ, поэтому со следующей проблемой было найти способ воспроизвести этот видеоролик обратно на HoloLens. Мы разработали несколько стратегий, чтобы избежать затрат, декодирования по-прежнему предоставляя интерфейс пользователя, как они Просмотр всего видео.

Самый простой оптимизации — избежать декодирование части видео, которые не так сильно меняются. Мы создали средства для определения областей в каждой сцены с незначительной или нулевой движения. Для этих областей мы покажем, статическое изображение, вместо декодирования видео каждого кадра. Для этого мы разделить большие видео в гораздо более мелкие фрагменты данных.

Мы также проверили, что каждый пиксел, которые мы декодировать был использован наиболее эффективно. Мы провели эксперимент с методиками сжатия, чтобы уменьшить объем видео; мы разделим области видео в соответствии с многоугольников геометрии, он будет отображаться на; Мы корректируется UVs и переупакованы видео, в зависимости от сколько детализации разных многоугольники включены. Часть этой работы получается, что запущен как единый 8k видео в количество блоков, которые выглядят почти непригодные для чтения, пока не будут правильно повторно преобразования типа в сцене. Для разработки игр, понимающий наложение текстуры и упаковки UV это возможно, покажутся знакомыми. 

![Полное представление Pantheon до оптимизации.](images/pantheon-before-optimization-500px.png) 

Полное представление Pantheon до оптимизации. 


![В правой половине Pantheon, обрабатываются для воспроизведения видео.](images/pantheon-process-video-playback-500px.png) 

В правой половине Pantheon, обрабатываются для воспроизведения видео. 


![Пример одного региона видео после оптимизации и упаковки.](images/single-video-region-after-optimization-500px.png) 

Пример одного региона видео после оптимизации и упаковки. 


Другой прием, который мы использовали мы хотели избежать, декодирования видео просматриваемого не активно. Хотя в HoloTour, можно отображается только часть полного сцены в каждый конкретный момент. Мы только декодирования видео в пределах или вскоре вне вашего поля of обзора. Повернуть голову, мы начать воспроизведение области видео, которые будут в вашей FOV и закончить те, которые больше не внутри нее. Даже не заметят большинство людей, это произошло, но если быстро, вы увидите видео займет одну секунду, чтобы начать, в то же время вы увидите статическое изображение, какие затем затухание обратно в видео, когда он будет готов.

Чтобы сделать эту стратегию работы мы разработали систему обширной воспроизведения видео. Мы оптимизировали код низкого уровня воспроизведения, чтобы сделать видео переключение чрезвычайно эффективным. Кроме того нам пришлось кодировать наших видео особым образом, чтобы обеспечить возможность быстро переключаться на любой видео в любое время. Этот конвейер воспроизведения заняло значительный объем времени разработки, поэтому мы реализовали поэтапно. Мы начали, представляя собой упрощенную систему, которая была менее эффективной, но для работы на работу и медленно разрешенных конструкторы и исполнители улучшена его более надежную систему воспроизведения, что позволило нам поставлять строку итогов контроля качества. Этот последний система ожидала пользовательские инструменты, созданной в среде Unity для настройки в сцене и монитор модуль воспроизведения видео.

### <a name="recreating-near-space-objects-in-3d"></a>Повторное создание объектов практически пространства в трехмерном пространстве

Видео составляют большую часть в HoloTour, но существует ряд трехмерных объектов, которые отображаются рядом с вами, такие как рисование в Piazza Navona секрет за пределами Pantheon или выноске горячего воздуха, которые вы вместо воздушный сцены. Эти трехмерные объекты являются важным, так как человеческим восприятием глубины — очень хорошо получше, но не очень хорошая далеко. Мы можем с видео в расстояние, но позволяет сильна их места и чувствуют, что нужна только близлежащих объектов требуется глубины. Этот метод похож на то, может появиться в музей естественного журнал — рисунок diorama, физических Ландшафтный растения и animal specimens на переднем плане, но recedes в искусно маскированные матовый рисования в фоновом режиме.

Некоторые объекты являются просто трехмерных ресурсов, мы создали и добавлены в сцену, чтобы улучшить взаимодействие. Рисование и выноске горячий воздух попадают в эту категорию, так как они не были присутствующий после проверки подлинности мы расположенным. Подобно ресурсов игры, они были созданы 3D исполнителя нашей команды и текстурой соответствующим образом. Мы разместить их в нашей сцены практически где вы находитесь и игровой подсистемы можно отображать их двух отображаются HoloLens, чтобы они отображались в виде трехмерного объекта.

Другие активы, такие как секрет за пределами Pantheon, являются реальными объектами, которые существуют в расположениях, где мы устранении неполадок видео, но для переноса этих объектов из видео в формат 3D, мы всего лишь несколько действий.

Во-первых нам требуются дополнительные сведения о каждом из объектов. Находясь в расположение для съемки, наша группа захвачен массу материал ссылку из этих объектов бы нам достаточно подробные изображения, чтобы точно воссоздать текстуры. Команда также выполняется [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) сканирование, который создает трехмерной модели десятки двумерные изображения, получаем грубого модели объекта в нужном масштабе идеальной.

Как мы можем обработать наших материал, объекты, которые будут заменены более поздней версии с трехмерной представлением, удаляются из видео. Трехмерного ресурса на основе модели photogrammetry но очищены и проще благодаря нашей исполнители. Для некоторых объектов можно использовать части видео — например текстуры воды на секрет, но большая часть секрет теперь трехмерного объекта, который позволяет пользователям считают глубины и Пройдитесь в ограниченное пространство в интерфейсе. Рядом с места объекты выглядят следующим образом значительно добавляет в том смысле, реалистичности и помогает на землю пользователей в виртуальной папке. 

![Удалить материал pantheon с секрет. Он будет заменен трехмерного ресурса.](images/object-removal-pantheon-500px.png)

Удалить материал pantheon с секрет. Он будет заменен трехмерного ресурса.


## <a name="final-thoughts"></a>Заключительные замечания

Очевидно, что возникла дополнительные к созданию этого содержимого, что мы здесь обсудили. Существует несколько сцены, нам хотелось бы называть их «невозможно перспективы» — включая поездке всплывающей горячего воздуха и gladiator бороться в Colosseum, который занял более творческий подход. Нам удалось удовлетворить их в будущем обучающий материал.

Мы надеемся, что совместное использование решений на некоторые из больше проблем, которые использовались во время производства полезен для других разработчиков и вы можете использовать некоторые из этих методов для создания мощных опытом для HoloLens вдохновение. (И если вы убедитесь в том, чтобы поделиться с нами в [форум, посвященный разработке приложений HoloLens](https://forums.hololens.com/)!)

## <a name="about-the-authors"></a>Об авторах

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <b>Дэвид Хейли</b> — старший разработчик, узнали о платформ камеры и воспроизведение видео, чем он думал, можно работать с HoloTour.</td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <b>Дэнни Askew</b> является видео исполнителя удостоверился, что исследование рим был как подавая максимально.</td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <b>Джейсон Syltebo</b> — конструктор аудио, кто выполняет проверку того, вы можете столкнуться с soundscape каждого назначения, которые вы посещаете, даже в том случае, если вернуться назад во времени.</td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <b>Travis Steiner</b> является директором отдела разработки, проверять и scouted расположений, создания планов поездок и направленных съемки на сайте.</td>
</tr>
</table>



## <a name="see-also"></a>См. также
* [Видео: Microsoft HoloLens: HoloTour](https://www.youtube.com/watch?v=pLd9WPlaMpY)
