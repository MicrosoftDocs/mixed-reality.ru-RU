---
title: Пространственные привязки в Unreal
description: Руководство по применению пространственных привязок в Unreal
author: sw5813
ms.author: jacksonf
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, разработка, функции, документация, руководства, голограммы, пространственные привязки
ms.openlocfilehash: c35d8efc9998aac5b40de833e5acbf7f80353e6b
ms.sourcegitcommit: ba4c8c2a19bd6a9a181b2cec3cb8e0402f8cac62
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/05/2020
ms.locfileid: "82840143"
---
# <a name="spatial-anchors-in-unreal"></a>Пространственные привязки в Unreal

Пространственные привязки используются для размещения в реальных пространствах голограмм, которые сохраняются между сеансами работы с приложением.  Эта возможность предоставляется в Unreal как элементы ARPin и использует для хранения хранилище привязок HoloLens, позволяя загружать их в последующих сеансах. 

Перед сохранением или загрузкой привязок обязательно убедитесь, что хранилище привязок подготовлено.  Попытка вызвать любую из функций привязки в HoloLens без готовности хранилища завершится ошибкой.  

![Хранилище пространственных привязок готово](images/unreal-spatialanchors-store-ready.PNG)

## <a name="save-anchors"></a>Сохранение привязок

Когда в приложении появится компонент, который нужно прикрепить к положению в реальном мире, сохраните его в хранилище привязок с помощью следующей последовательности: 

![Сохранение пространственных привязок](images/unreal-spatialanchors-save.PNG)

В этом примере мы порождаем субъект в известном расположении, создаем ARPin с этим значением расположения и именем, созданным на основе класса субъекта, затем добавляем этот субъект в ARPin и сохраняем указатель в хранилище привязок HoloLens.  Нам необходимо выбрать уникальное имя привязки, поэтому в нашем примере к имени добавляется текущая метка времени.  Если привязка будет успешно сохранена в хранилище привязок, она станет доступна для проверки на портале устройств HoloLens в разделе System (Система) > Map manager (Диспетчер карт) > Anchor Files Saved On Device (Сохраненные на устройстве файлы привязок). 

## <a name="load-anchors"></a>Загрузка привязок

При запуске приложения можно вызвать следующую схему, чтобы восстановить все компоненты в местах соответствующих привязок:

![Загрузка пространственных привязок](images/unreal-spatialanchors-load.PNG)

В этом примере мы перебираем все привязки, сохраненные в хранилище привязок, порождаем субъект по его идентификатору и прикрепляем этот субъект к ARPin из хранилища привязок.  Здесь важно порождать субъект по идентификатору, так как привязка отвечает за размещение голограммы в мире в том месте, где она была сохранена, поэтому любое преобразование на этом этапе добавит к нашей привязке ненужное смещение. 

Идентификатор привязки также запрашивается, чтобы мы могли порождать разные субъекты в зависимости от сохраненного имени привязки. 

## <a name="remove-anchors"></a>Удаление привязок 

Завершив работу с привязками, вы можете очистить все хранилище привязок сразу или удалять из него отдельные привязки по отдельности, и удаленные привязки не будут включаться в будущие сеансы: 

![Удаление пространственных привязок](images/unreal-spatialanchors-remove.PNG)

## <a name="see-also"></a>См. также статью
* [Пространственные привязки](spatial-anchors.md)
* [Системы координат](coordinate-systems.md)
