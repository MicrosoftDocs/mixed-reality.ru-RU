---
title: Пространственные привязки в Unreal
description: Руководство по применению пространственных привязок в Unreal
author: hferrone
ms.author: v-haferr
ms.date: 06/10/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, разработка, функции, документация, руководства, голограммы, пространственные привязки
ms.openlocfilehash: 58394f4e27aff5070d55ed5f0d62cd81ff579d1f
ms.sourcegitcommit: 45da0a056fa42088ff81ccdd11232830fbe8430f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2020
ms.locfileid: "84720320"
---
# <a name="spatial-anchors-in-unreal"></a>Пространственные привязки в Unreal

## <a name="overview"></a>Обзор

Пространственные привязки используются для размещения в реальных пространствах голограмм, которые сохраняются между сеансами работы с приложением.  Они предоставляются в Unreal в виде элементов **ARPin** и сохраняются в хранилище привязок HoloLens, которое загружается в последующих сеансах. 

## <a name="checking-the-anchor-store"></a>Проверка хранилища привязок

Перед сохранением или загрузкой привязок обязательно убедитесь, что хранилище привязок подготовлено.  Попытка вызвать любую из функций привязки в HoloLens при неготовности хранилища завершится ошибкой.  

![Хранилище пространственных привязок готово](images/unreal-spatialanchors-store-ready.PNG)

## <a name="saving-anchors"></a>Сохранение привязок

Когда в приложении появится компонент, который нужно прикрепить к положению в реальном мире, сохраните его в хранилище привязок с помощью следующей последовательности: 

![Сохранение пространственных привязок](images/unreal-spatialanchors-save.PNG)

Порядок действий:
1. Породите субъект в известном расположении.
2. Создайте элемент **ARPin** с этим расположением и именем, основанным на классе субъекта. 
3. Добавьте соответствующий субъект в **ARPin** и сохраните полученный элемент в хранилище привязок HoloLens.  
    * Для привязки необходимо выбрать уникальное имя, поэтому в нашем примере к имени добавляется текущая метка времени. 

4. Привязка, успешно сохраненная в хранилище, становится доступной для проверки на портале устройства HoloLens в разделе **System > Map manager > Anchor Files Saved On Device** (Система > Диспетчер карт > Сохраненные на устройстве файлы привязок). 

## <a name="loading-anchors"></a>Загрузка привязок

При запуске приложения можно вызвать следующую схему, чтобы восстановить все компоненты в местах соответствующих привязок:

![Загрузка пространственных привязок](images/unreal-spatialanchors-load.PNG)

Порядок действий:
1. Выполните перечисленные ниже шаги для всех привязок в хранилище. 
2. Породите субъект без преобразований.
3. Прикрепите субъект к элементу **ARPin** из хранилища привязок.  

    * Здесь важно порождать субъект без преобразований, так как привязка отвечает за размещение голограммы в мире в том месте, где она была сохранена. Любое преобразование на этом этапе добавит к нашей привязке ненужное смещение. 

Идентификатор привязки также запрашивается, чтобы мы могли порождать разные субъекты в зависимости от сохраненного имени привязки. 

## <a name="removing-anchors"></a>Удаление привязок 

Когда вы закончите с привязкой, то можете очистить отдельные привязки или очистить все хранилище привязок с помощью компонентов **Remove ARPin from WMRAnchor Store** (Удаление ARPin из хранилища WMRAnchor) и **Remove All ARPins from WMRAnchor Store** (Удаление всех элементов ARPin из хранилища WMRAnchor).

![Удаление пространственных привязок](images/unreal-spatialanchors-remove.PNG)

> [!NOTE]
> Имейте в виду, что функциональность пространственных привязок находится пока в стадии бета-версии, поэтому стоит возвращаться сюда время от времени за новой информацией.

## <a name="see-also"></a>См. также статью
* [Пространственные привязки](spatial-anchors.md)
* [Системы координат](coordinate-systems.md)
