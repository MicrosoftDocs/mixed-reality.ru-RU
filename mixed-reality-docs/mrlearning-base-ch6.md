---
title: Базовый модуль обучения работе в смешанной реальности. Пример сборки лунного модуля
description: В этом уроке мы объединим несколько концепций, которые узнали из предыдущих уроков, чтобы выполнить уникальный сценарий.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
ms.localizationpriority: high
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 8a2f388e842d521f991203916177e3dac15769eb
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2019
ms.locfileid: "65730847"
---
# <a name="mr-learning-base-module---lunar-module-assembly-sample-experience"></a>Базовый модуль обучения работе в смешанной реальности. Пример сборки лунного модуля

В этом уроке мы объединим несколько концепций, которые узнали из предыдущих уроков, чтобы выполнить уникальный сценарий. Мы создадим приложение для сборки лунного модуля, в котором пользователю потребуется использовать отслеживание рук, чтобы поднять части лунного модуля и попытаться его собрать. Мы будем использовать нажимаемые кнопки для переключения подсказок по размещению, сброса наших действий и запуска лунного модуля в космос. В последующих учебниках мы продолжим работать с этим примером, включая мощные многопользовательские сценарии применения, использующие Пространственные привязки Azure для выравнивания в пространстве.

## <a name="objectives"></a>Задачи

- Объединить несколько концепций из предыдущих уроков, чтобы выполнить уникальный сценарий.
- Узнать, как переключать объекты.
- Запустить сложные события с помощью нажимаемых кнопок.
- Использовать силы и физику твердых тел.
- Изучить использование всплывающих подсказок.

## <a name="instructions"></a>Инструкция

### <a name="configuring-the-lunar-module"></a>Настройка лунного модуля

В этом разделе мы познакомимся с различными компонентами, необходимыми для создания нашего примера.

1. Добавьте шаблон сборки лунного модуля в базовую сцену. Для этого на вкладке проекта найдите Rocket Launcher_Tutorial. Вы также можете найти шаблон, выбрав Assets>BaseModuleAssets>Prefabs (Ресурсы > Ресурсы базового модуля > Шаблоны). Вы можете увидеть два шаблона ракетной установки: одна с именем tutorial, а другая с именем complete. Перетащите шаблон Rocket Launcher_Tutorial в базовую сцену. Вы можете произвольно разместить шаблон в сцене.
   Примечание. Шаблон Rocket Launcher_Complete является завершенным модулем запуска, предоставленным для справки. 

![Изображение "Урок 6, раздел 1, шаг 1"](images/Lesson6_Chapter1_step1im.PNG)

Если вы развернете игровой объект Rocket Launcher_Tutorial в иерархии, а потом развернете объект Lunar Module, вы увидите несколько дочерних объектов, в которых есть материал x-ray. Материал x-ray обеспечивает слегка прозрачный цвет, который мы будем использовать в качестве подсказок для пользователя. 

![Изображение "Урок 6, раздел 1, примечание а"](images/Lesson6_Chapter1_noteaim.PNG) В лунном модуле есть пять частей, с которыми пользователь будет взаимодействовать, как показано на приведенном ниже рисунке.

1.  Корпус лунохода.
2.  Топливный бак.
3.  Топливная камера.
4.  Стыковочный модуль. 
5.  Внешний датчик.

![Изображение "Урок 6, раздел 1, примечание б"](images/Lesson6_Chapter1_notebim.PNG)

> Примечание. Названия игровых объектов, которые вы видите в иерархии базовой сцены, не соответствуют именам объектов в сцене.

Шаг 2. Добавьте источник аудио в лунный модуль. Убедитесь, что в иерархии базовой сцены выбран лунный модуль, и щелкните Add Component (Добавить компонент). Найдите элемент Audio Source (Источник аудио) и добавьте его в объект. Пока оставьте это поле пустым. Мы будем использовать его для воспроизведения звука запуска позже.
 ![Изображение "Урок 6, раздел 1, шаг 2"](images/Lesson6_Chapter1_step2im.PNG) Шаг 3. Добавьте сценарий Toggle Placement Hints (Переключать подсказки по размещению). Щелкните Add Component (Добавить компонент) и найдите сценарий Toggle Placement Hints (Подсказки по размещению). Это пользовательский сценарий, который позволяет включать и выключать полупрозрачные подсказки (объекты из материала x-ray), упомянутые ранее. 
![Изображение "Урок 6, раздел 1, шаг 3"](images/Lesson6_Chapter1_step3im.PNG) Шаг 4. Так как у нас есть 5 объектов, введите 5 в качестве размера массива игровых объектов. Затем вы должны увидеть 5 новых элементов. 

![Изображение "Урок 6, раздел 1, шаг 4б"](images/Lesson6_Chapter1_step4bim.PNG)

Перетащите каждый из полупрозрачных объектов в поля с надписью None (Game Object) (Нет (игровой объект)). Перетащите следующие объекты из лунного модуля в вашу базовую сцену: 

•   Backpack;

•   GasTank;

•   Topleftbody;

•   Nose;

•   LeftTwirler.

 ![Изображение "Урок 6, раздел 1, шаг 4а"](images/Lesson6_Chapter1_step4aim.PNG)

Теперь сценарий Toggle Placement Hints (Переключать подсказки по размещению) настроен. Это позволит нам включать и отключать подсказки.

Шаг 5. Добавьте сценарий Launch Lunar Module (Запустить лунный модуль). Нажмите кнопку Add Component (Добавить компонент), найдите элемент Launch Lunar Module (Запустить лунный модуль) и выберите его. Этот сценарий будет отвечать за запуск лунного модуля. При нажатии настроенной кнопки к компоненту твердого тела лунного модуля добавится восходящая сила и активируется запуск модуля вверх. Если вы находитесь в помещении, лунный модуль может разбиться о потолочную сетку. Но если вы находитесь на улице, он полетит в космос на неопределенный срок. 

![Изображение "Урок 6, раздел 1, шаг 5"](images/Lesson6_Chapter1_step5im.PNG)

Шаг 6. Отрегулируйте тягу так, чтобы лунный модуль изящно взлетел. Попробуйте использовать значение 0,01. Оставьте поле Rb пустым. Rb означает твердое тело. Это поле заполняется автоматически во время выполнения.

![Изображение "Урок 6, раздел 1, шаг 6"](images/Lesson6_Chapter1_step6im.PNG)

### <a name="lunar-module-parts-overview"></a>Общие сведения о частях лунного модуля
Родительский объект частей лунного модуля — это коллекция объектов, с которыми пользователь будет взаимодействовать. Названия игровых объектов (с именами сцен в скобках) приведены в следующем списке:

- Backpack (топливный бак);
- GasTank (топливная камера);
- TopLeftBody (корпус лунохода);
- Nose (стыковочный модуль);
- LeftTwirler (внешний датчик).

Обратите внимание, что у каждого из этих объектов есть обработчик манипуляции, как обсуждалось на уроке 4. С помощью обработчика манипуляции пользователи могут захватывать объекты и манипулировать ими. Обратите также внимание, что для параметра Two handed manipulation type (Тип манипуляции двумя руками) установлено значение Move and rotate (Двигать и вращать). Это позволяет пользователю только перемещать объект, но не изменять его размер, что является желаемой функцией в приложении сборки.
Кроме того, флажок для параметра манипуляции с дальними объектами не установлен, чтобы обеспечить только прямое взаимодействие с частями модуля.

![Изображение "Урок 6, раздел 2"](images/Lesson6_Chapter2im.PNG)

Демонстрационный сценарий сборки частей (показанный выше) — это сценарий, управляющий объектами, которые пользователь помещает в лунный модуль. 

Поле Object To Place (Объект для размещения) — это преобразование, которое выбирается (в случае с изображением выше, backpack (топливный бак)) с объектом, к которому он может подключиться. 

Параметры Near Distance (Ближнее расстояние) и Far Distance (Дальнее расстояние) отвечают за определение расстояния, на котором части будут зафиксированы или сняты. Например, backpack (топливный бак) должен находиться на расстоянии 0,1 единицы от лунного модуля, чтобы зафиксироваться. Параметр Far Distance (Дальнее расстояние) задает место, где объект должен находиться для отсоединения от лунного модуля. В этом случае рука пользователя должна захватить backpack (топливный бак) и вытащить его на расстояние 0,2 единицы от лунного модуля, чтобы отсоединить его.

Tool Tip Object (Объект подсказки) — это метка подсказки в сцене. Когда объекты будут зафиксированы, метка будет отключена. 

Источник аудио будет захватываться автоматически. 

### <a name="placement-hints-buttons"></a>Кнопки подсказок по размещению
Из [урока 2](mrlearning-base-ch2.md) вы узнали, как размещать и настраивать кнопки для выполнения таких действий, как изменение цвета элемента или воспроизведение звука при нажатии на него. Мы продолжим использовать эти принципы при настройке наших кнопок для переключения подсказок по размещению. 

Наша цель — настроить кнопку так, чтобы каждый раз, когда пользователь нажимает кнопку подсказки по размещению, переключалась видимость прозрачных подсказок по размещению. 

Шаг 1. Переместите лунный модуль в пустой слот Runtime only (Только во время выполнения) на панели инспектора, пока объект Placement Hints (Подсказки по размещению) выбран в иерархии базовой сцены. 
 ![Изображение "Урок 6, раздел 3, шаг 1"](images/Lesson6_Chapter3_step1im.PNG) Шаг 2. Теперь щелкните раскрывающийся список, где отображается надпись no function (нет функции). Перейдите к параметру TogglePlacementHints и в этом меню выберите элемент ToggleGameObjects(). Параметр ToggleGameObjects() будет включать и выключать подсказки размещения, чтобы они были видимыми или невидимыми при каждом нажатии кнопки.
 ![Изображение "Урок 6, раздел 3, шаг 2"](images/Lesson6_Chapter3_step2im.PNG)

### <a name="configuring-the-reset-button"></a>Настройка кнопки сброса

Возможны ситуации, когда пользователь совершает ошибку, случайно выбрасывает объект или просто хочет отдохнуть. Кнопка сброса добавляет возможность перезапустить сеанс. 

Шаг 1. Нажмите кнопку сброса. В базовый сцене она называется ResetRoundButton (круглая кнопка сброса). 

Шаг 2. Перетащите лунный модуль из иерархии базовой сцены в пустой слот под элементом Button pressed (Кнопка нажата) на панели инспектора.
 ![Изображение "Урок 6, раздел 4, шаг 2"](images/Lesson6_Chapter4_step2im.PNG)

Шаг 3. Щелкните раскрывающееся меню с надписью no function (без функции) и наведите курсор на элемент LaunchLunarModule. Затем щелкните resetModule().

![Изображение "Урок 6, раздел 4, шаг 3"](images/Lesson6_Chapter4_step3im.PNG)

> Примечание. Обратите внимание, что по умолчанию для параметра GameObject.BroadcastMessage установлено значение ResetPlacement. В результате для каждого дочернего объекта RocketLauncher_Tutorial будет передаваться сообщение ResetPlacement. Любой объект, который содержит метод для ResetPlacement(), будет отвечать на это сообщение, выполняя сброс своей позиции. 

### <a name="launching-the-lunar-module"></a>Запуск лунного модуля
В этой главе мы настроим кнопку запуска. Это позволит пользователю нажать кнопку и запустить лунный модуль в космос.

Шаг 1. Нажмите кнопку запуска (в базовой сцене она называется LaunchRoundButton). Перетащите лунный модуль в пустой слот в разделе Touch End (Окончание датчика) на панели инспектора.
 ![Изображение "Урок 6, раздел 5, шаг 1"](images/Lesson6_Chapter5_step1im.PNG) Шаг 2. Выберите раскрывающееся меню с надписью no function (нет функции). Наведите указатель мыши на элемент LaunchLunarModule и выберите StopThruster(). С помощью этого можно будет управлять количеством тяги, которое пользователь хочет придать лунному модулю. 
 ![Изображение "Урок 6, раздел 5, шаг 2"](images/Lesson6_Chapter5_step2im.PNG) Шаг 3. В разделе ButtonPressed() добавьте лунный модуль (нажмите и перетаскивайте, удерживая) в пустой слот. 

Шаг 4. Щелкните раскрывающееся меню с надписью no function (без функции), наведите курсор на элемент LaunchLunarModule и выберите StartThruster(). 
 ![Изображение "Урок 6, раздел 5, шаг 4"](images/Lesson6_Chapter5_step4im.PNG) Шаг 5. Добавьте музыку в лунный модуль, чтобы она заиграла при взлете ракеты. Для этого перетащите лунный модуль в следующий пустой слот под элементом ButtonPressed().

Шаг 6. Выберите раскрывающееся меню с надписью no function (без функции), наведите курсор на элемент AudioSource и выберите элемент PlayOneShot (AudioClip). Вы можете просмотреть все разнообразие звуков, включенных в MRTK. В этом примере мы выберем MRTK_Gem.
 ![Изображение "Урок 6, раздел 5, шаг 6"](images/Lesson6_Chapter5_step6im.PNG)


### <a name="congratulations"></a>Поздравляем! 
Вы полностью настроили это приложение. Теперь, когда вы нажимаете кнопку воспроизведения, вы можете полностью собрать лунный модуль, переключать подсказки, запускать лунный модуль и выполнять сброс, чтобы выполнить сборку заново.
