---
title: Учебники по началу работы — 7. Создание примера приложения Лунный модуль
description: На этом занятии вы объедините несколько концепций, полученных в предыдущих занятиях, для создания уникального примера.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 3a557be91bee9b98e750ae1546ea1c4b3103298e
ms.sourcegitcommit: bd536f4f99c71418b55c121b7ba19ecbaf6336bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "77555283"
---
# <a name="7-creating-a-lunar-module-sample-application"></a>7. Создание примера приложения с лунным модулем
<!-- TODO: Rename to 'Creating a Rocket Launcher sample application' -->

В этом руководстве несколько концепций объединяются из предыдущих уроков для создания уникального примера. Вы узнаете, как создать приложение сборки части, которое позволит пользователю использовать отслеживание руки, чтобы выбрать части и попытаться собрать Лунный модуль. Вы будете использовать нажатые кнопки для включения и отключения подсказок размещения, для сброса интерфейса и запуска лунного модуля в место!

В следующих учебных курсах вы продолжите создавать эти возможности, в том числе эффективные варианты использования в нескольких пользователях, использующие пространственные привязки Azure для пространственного выравнивания.

## <a name="objectives"></a>Задачи

* Объединить несколько концепций из предыдущих уроков, чтобы выполнить уникальный сценарий.
* Узнать, как переключать объекты.
* Запустить сложные события с помощью нажимаемых кнопок.
* Использовать силы и физику твердых тел.
* Изучить использование всплывающих подсказок.

## <a name="lunar-module-parts-overview"></a>Обзор компонентов лунного модуля
<!-- TODO: Rename to 'Implementing the part assembly functionality' -->

В этом разделе вы создадите простую задачу сборки, в которой цель пользователя состоит в размещении пяти частей, распределенных по таблице в правильном расположении в лунном модуле.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Добавление средства запуска Rocket prefab в сцену
2. Включить управление объектами для всех частей
3. Добавление и настройка компонента демонстрации сборки части (скрипта)

> [!NOTE]
> Демонстрационный компонент сборки части (скрипт) не является частью МРТК. Он был предоставлен с ресурсами этого учебника.

### <a name="1-add-the-rocket-launcher-prefab-to-the-scene"></a>1. Добавьте средство запуска Rocket prefab в сцену.

В окне проекта перейдите к **ресурсам** > **мртк. Учебник. GettingStarted** > **Prefabs** > **Роккетлаунчер** папка, перетащите **роккетлаунчер** prefab в окно иерархии, чтобы добавить его в сцену, а затем поместите его в подходящее расположение, например:

* Координата Transform X = 1,5, Y =-0,4, Z = 0, поэтому она располагается справа от пользователя на уши высоте.
* Поворот преобразования X = 0, Y = 180, Z = 0, поэтому основные возможности интерфейса пользователя

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step1-1.png)

### <a name="2-enable-object-manipulation-for-all-the-parts"></a>2. Включение управления объектами для всех частей

В окне Иерархия найдите объект Роккетлаунчер > **лунармодулепартс** и выберите все **дочерние объекты**, добавьте компонент **обработчика манипуляции (скрипт)** и компонент, который можно получить **с помощью диалогового окна близкого взаимодействия (** скрипт), а затем настройте обработчик манипуляции (script) следующим образом:

* Снимите флажок " **Разрешить FAR манипуляции** ", чтобы разрешить только близкое взаимодействие
* Изменить **тип двух типов манипуляции** на **Перемещение вращения** , поэтому масштабирование отключено

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step1-2.png)

> [!TIP]
> Для напоминания с пошаговыми инструкциями о том, как реализовать манипуляции с объектами, можно обратиться к инструкциям по [манипуляции с трехмерными объектами](mrlearning-base-ch4.md#manipulating-3d-objects) .

### <a name="3-add-and-configure-the-part-assembly-demo-script-component"></a>3. Добавление и настройка компонента демонстрации сборки части (скрипта)

Если все еще выбраны дочерние объекты Лунармодулепартс, добавьте компонент « **аудио-источник** », а затем настройте его следующим образом.

* Назначьте подходящий звуковой клип полю **аудиоклип** , например MRKT_Scale_Start
* Снимите флажок " **воспроизвести при спящем** режиме", чтобы звуковой клип не воспроизводился автоматически при загрузке сцены.
* Измените **пространственный переход** на 1, чтобы включить Пространственный звук

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step2-1.png)

После выбора всех дочерних объектов Лунармодулепартс добавьте **демонстрационный компонент сборки части (скрипт)** :

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step2-2.png)

В окне Иерархия выберите объект **роверенклосуре** и настройте его **демонстрационный компонент сборки (script)** , как показано ниже.

* В **объект для размещения** поля, назначьте **сам**объект (в данном случае это объект роверенклосуре).
* В поле **расположение для размещения** назначьте соответствующий объект **плацеменсинтс** , в данном случае — объект RoverEnclosure_PlacementHint
* В поле **объект подсказки** выберите соответствующую **подсказку**(в данном случае это объект RoverEnclosure_ToolTip).
* В поле **источник звука** назначьте **сам**объект (в данном случае — объект роверенклосуре).

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step2-3.png)

**Повторите эти действия** для всех других дочерних объектов лунармодулепартс, например Фуелтанк, Енергицелл, Доккингпортал и екстерналсенсор.

Если вы перейдете в режим игры и переместит "объект для размещения", укажите "расположение для размещения", вы увидите следующее:

* Объект будет привязан к месту размещения и быть родительским по отношению к объекту Лунармодуле, чтобы он стал частью лунного модуля.
* Источник звука для объекта будет воспроизводить назначенный звуковой клип в месте расположения объекта
* Соответствующий объект подсказки по инструменту будет скрыт

![mrlearning-base](images/mrlearning-base/tutorial6-section1-step2-4.png)

> [!TIP]
> Напоминание о том, как использовать модель входных данных в редакторе, можно найти в разделе [Использование имитации входных данных в редакторе, чтобы протестировать руководство по монтажному кадру](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/GettingStartedWithTheMRTK.html#using-the-in-editor-hand-input-simulation-to-test-a-scene) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="configuring-the-lunar-module"></a>Настройка лунного модуля

В этом разделе вы добавите в приложение Rocket Launcher дополнительные компоненты, чтобы пользователь мог выполнить следующие действия:

* Взаимодействие с лунным модулем
* Запуск лунного модуля в пространстве и воспроизведение звука при его запуске
* Сбросьте приложение таким образом, чтобы Лунный модуль и все части были возвращены обратно в исходное расположение.
* Скройте подсказки о размещении, чтобы сделать сборку части сложной.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Включить управление объектами
2. Включить физику
3. Добавление компонента "источник звука"
4. Добавление и настройка компонента "запустить Лунный модуль" (скрипт)
5. Добавление и настройка компонента включения и настройки подсказок размещения (script)

> [!NOTE]
> Компонент «Launch Лунный модуль» (script) и компонент переключения размещения (script) не являются частью МРТК. Они были предоставлены в активы этого учебника.

### <a name="1-enable-object-manipulation"></a>1. Включение управления объектами

В окне Иерархия выберите объект Роккетлаунчер > **лунармодуле** , добавьте компонент **обработчика манипуляций (скрипт)** и компонент, который можно переустановить **(** скрипт), а затем настройте обработчик манипуляции (script) следующим образом:

* Снимите флажок " **Разрешить FAR манипуляции** ", чтобы разрешить только близкое взаимодействие
* Изменить **тип двух типов манипуляции** на перемещение вращения, поэтому масштабирование отключено

![mrlearning-base](images/mrlearning-base/tutorial6-section2-step1-1.png)

### <a name="2-enable-physics"></a>2. Включение физикы

Выбрав объект Роккетлаунчер > **лунармодуле** , добавьте компонент **RigidBody** , а затем настройте его следующим образом:

* Снимите флажок использовать параметр " **сила притяжения** ", чтобы на лунном модуле не влияла сила притяжения.
* Установите флажок **не** превышено, чтобы на лунном модуле не влияли принудительные фисик

![mrlearning-base](images/mrlearning-base/tutorial6-section2-step2-1.png)

### <a name="3-add-an-audio-source-component"></a>3. Добавление компонента "источник звука"

Выбрав объект Роккетлаунчер > **лунармодуле** , добавьте компонент " **источник звука** ", а затем настройте его следующим образом.

* Измените **пространственный переход** на 1, чтобы включить Пространственный звук

![mrlearning-base](images/mrlearning-base/tutorial6-section2-step3-1.png)

### <a name="4-add-and-configure-the-launch-lunar-module-script-component"></a>4. Добавление и настройка компонента "запустить Лунный модуль" (скрипт)

Выбрав объект Роккетлаунчер > **лунармодуле** , добавьте компонент **Launch Лунный модуль (script)** , а затем настройте его следующим образом:

* Измените значение **креативность** , чтобы при запуске Лунный модуль был корректно запущен, например, в 0,01

![mrlearning-base](images/mrlearning-base/tutorial6-section2-step4-1.png)

### <a name="5-add-and-configure-the-toggle-placement-hints-script-component"></a>5. Добавление и настройка компонента включения и настройки подсказок размещения (script)

Выбрав объект Роккетлаунчер > **лунармодуле** , добавьте компонент **Переключить подсказки (Scripting Placement)** и настройте его следующим образом:

* Задайте для свойства **Размер** массива игрового объекта значение 5.
* Назначьте каждый из **дочерних объектов** Роккетлаунчер > Лунармодуле > **плацеменсинтс** полю **element** в массиве объектов Game:

![mrlearning-base](images/mrlearning-base/tutorial6-section2-step5-1.png)

## <a name="configuring-the-launch-button"></a>Настройка кнопки запуска

В окне Иерархия выберите кнопки Роккетлаунчер > > объект **лаунчбуттон** , затем в компоненте, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **нажатия кнопки ()** , настройте объект **лунармодуле** для получения события и определите **лаунчлунармодуле. стартсрустер** в качестве действия для запуска:

![mrlearning-base](images/mrlearning-base/tutorial6-section3-step1-1.png)

> [!TIP]
> Напоминание о том, как реализовать события, можно найти в разделе [жесты отслеживания руки и инструкции по взаимодействию с управляемыми кнопками](mrlearning-base-ch2.md#hand-tracking-gestures-and-interactable-buttons) .

Выполнив кнопки Роккетлаунчер > > объект **лаунчбуттон** , на элементе, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **нажатия кнопки ()** , настройте объект **лунармодуле** для получения события, определите **аудиосаурце. плайонешот** в качестве действия для запуска и назначьте подходящее звуковое поле **аудиоклипу** , например MRTK_Gem аудиоклип:

![mrlearning-base](images/mrlearning-base/tutorial6-section3-step1-2.png)

Выполнив кнопки Роккетлаунчер > > объект **лаунчбуттон** , на элементе, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **касания ()** , настройте объект **лунармодуле** для получения события и определите **лаунчлунармодуле. стопсрустер** в качестве действия для запуска:

![mrlearning-base](images/mrlearning-base/tutorial6-section3-step1-3.png)

Если вы перейдете в режим игры и нажмете кнопку Launch (запустить), начнется воспроизведение аудиоклипа, и если нажать кнопку запустить в течение секунды или более, вы увидите, что Лунный модуль откроется в пространстве:

![mrlearning-base](images/mrlearning-base/tutorial6-section3-step1-4.png)

## <a name="configuring-the-reset-button"></a>Настройка кнопки сброса

В окне Иерархия выберите кнопки Роккетлаунчер > > объект **ресетбуттон** , затем в компоненте, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **нажатия кнопки ()** , настройте объект **лунармодуле** для получения события и определите **лаунчлунармодуле. ресетмодуле** в качестве действия для запуска:

![mrlearning-base](images/mrlearning-base/tutorial6-section4-step1-1.png)

Выполнив кнопки Роккетлаунчер > > объект **ресетбуттон** , на элементе, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **нажатия кнопки ()** , настройте объект **роккетлаунчер** для получения события, определите **GameObject. броадкастмессаже** как действие для запуска и введите **ресетплацемент** в поле сообщения:

![mrlearning-base](images/mrlearning-base/tutorial6-section4-step1-2.png)

> [!TIP]
> Действие GameObject. Броадкастмессаже отправляет сообщение Ресетплацемент из объекта Роккетлаунчер во все его дочерние объекты. Любой дочерний объект, имеющий функцию Ресетплацемент, которая определена в демонстрационном компоненте (скрипте), который был добавлен во все дочерние объекты Лунармодулепартс, вызовет функцию Ресетплацемент, которая сбрасывает размещение дочернего объекта.

Если вы перейдете в режим игры, переместите некоторые части и (или) запустите Лунный модуль, а затем нажмете кнопку Reset (Сброс), вы увидите части и/или Лунный модуль, который перейдет в исходное положение:

![mrlearning-base](images/mrlearning-base/tutorial6-section4-step1-3.png)

## <a name="configuring-the-placement-hints-button"></a>Настройка кнопки подсказок размещения
<!-- TODO: Rename to 'Configuring the Hints button'-->

В окне Иерархия выберите кнопки Роккетлаунчер > > объект **хинтсбуттон** , затем в компоненте, **поддерживающем нажатие кнопки (скрипт)** , создайте новое событие **нажатия кнопки ()** , настройте объект **лунармодуле** для получения события и определите **тогглеплацеменсинтс. тогглегамеобжектс** в качестве действия для запуска:

![mrlearning-base](images/mrlearning-base/tutorial6-section5-step1-1.png)

Если теперь вы вводите режим игры, вы заметите, что непрозрачные подсказки размещения отключены по умолчанию, но их можно включить и отключить, нажав кнопку указания.

![mrlearning-base](images/mrlearning-base/tutorial6-section5-step1-2.png)

## <a name="congratulations"></a>Поздравляем!

Вы полностью настроили это приложение. Теперь приложение позволяет пользователям полностью собирать Лунный модуль, запускать Лунный модуль, переключать подсказки и сбрасывать приложение для повторного запуска.
