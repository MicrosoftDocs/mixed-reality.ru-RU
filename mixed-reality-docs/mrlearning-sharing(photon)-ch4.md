---
title: Руководства по многопользовательским возможностям, часть 4. Предоставление общего доступа к сведениям о перемещении объекта нескольким пользователям
description: В рамках этого курса вы узнаете, как реализовать многопользовательские возможности в приложении HoloLens 2.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.localizationpriority: high
ms.openlocfilehash: b0ddf0799fd94c29ce8f1221c55073cd77b63703
ms.sourcegitcommit: 5b2ba01aa2e4a80a3333bfdc850ab213a1b523b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2020
ms.locfileid: "79031247"
---
# <a name="4-sharing-object-movements-with-multiple-users"></a>4. Предоставление общего доступа к сведениям о перемещении объекта нескольким пользователям

В этом руководстве вы узнаете, как совместно использовать перемещения объектов, чтобы все участники общего сеанса могли взаимодействовать друг с другом и наблюдать эти взаимодействия. Этот урок основан на проекте лунного модуля, который вы создали при работе с [базовым модулем](mrlearning-base.md).

## <a name="objectives"></a>Задачи

- Подключение лунного модуля в качестве трехмерной модели для совместного использования
- Настройка проекта для совместного использования перемещений трехмерной модели
- Создание простого многопользовательского приложения для совместной работы

## <a name="instructions"></a>Инструкции

1. Сохраните сцену из предыдущего урока (сочетанием клавиш Ctrl+S). Присвойте ей удобное имя, например HLSharedProjectMainPart4.unity, чтобы было проще найти ее, когда она потребуется.

2. В окне проекта в папке Assets (Активы) -> Scripts (Скрипты) дважды щелкните GenericNetSync, чтобы открыть его в Visual Studio или в другом редакторе кода, который вы используете.  

    ![module3chapter4updatestep2](images/module3chapter4updatestep2.png)

3. В строках 34 и 38 удалите символы "//", чтобы активировать код для стола, который вам потребуется в этом уроке. Теперь сохраните этот файл.

    ![module3chapter4updatestep3](images/module3chapter4updatestep3.png)

4. В окне проекта дважды щелкните файл PhotonRoom.cs в папке Assets (Активы) -> Scripts (Скрипты), чтобы открыть его в Visual Studio.

    ![module3chapter4updatestep4](images/module3chapter4updatestep4.png)

5. Как и на шаге 3, нам нужно удалить символы "//", чтобы активировать код в строках 25, 26 и 106.

    ![module3chapter4updatestep5a](images/module3chapter4updatestep5a.png)

    ![module3chapter4updatestep5b](images/module3chapter4updatestep5b.png)

6. В представлении Hierarchy (Иерархия) выберите объект NetworkRoom.

    ![module3chapter4updatestep6](images/module3chapter4updatestep6.png)

7. В представлении проекта перейдите к папке Assets (Активы) -> Resources (Ресурсы) -> Prefabs (Заготовки). Сначала перетащите заготовку Table в слот Tableprefab класса PhotonRoom. Затем перетащите заготовку RocketLauncherCompleteVariantprefab в слот Module Prefab класса PhotonRoom.

    ![module3chapter4updatestep7](images/module3chapter4updatestep7.png)

    >[!NOTE]
    >Если щелкнуть один из объектов заготовки и отпустить кнопку мыши, инспектор переключится на этот объект. Поочередно щелкните каждый объект, перетащите его к соответствующему слоту и отпустите.

8. Щелкните стрелку слева от MixedRealityPlayspace и переместите дочерний игровой объект MainCamera в заготовку SharedPlayground. Затем удалите заготовку MixedRealityPlayspace, выбрав ее вышью и нажав клавишу Delete (Удалить) на клавиатуре.

    ![Module3hapter4step5im](images/module3chapter4step5im.PNG)

    >[!NOTE]
    >Убедитесь, что для объектов MainCamera и SharedPlayground установлены положения с координатами 0, 0, 0.

9. Выберите объект SharedPlayground и щелкните его правой кнопкой мыши, чтобы выбрать команду create empty (Создать пустой) и создать игровой объект в качестве дочернего для игрового объекта SharedPlayground.

   ![Module3chapter4step6im](images/module3chapter4step6im.PNG)

10. Сохраняя новый объект выделенным в иерархии, на панели Inspector (Инспектор) измените имя объекта на TableAnchor. Также щелкните Add Component (Добавить компонент) и найдите компонент TableAnchor. Выберите его и добавьте в объект.

    ![Module3Chapter4step7im](images/module3chapter4step7im.PNG)

11. На панели проекта из папки Prefabs (Заготовки) перетащите заготовку Table в только что созданный дочерний объект TableAnchor.

    ![Module3Chapter4step8im](images/module3chapter4step8im.PNG)

## <a name="congratulations"></a>Поздравляем!

Завершив эти действия, осмотритесь по сторонам и найдите лунный модуль. Теперь все пользователи, присоединенные к проекту Unity, могут перемещать лунный модуль по сцене.  Все движения синхронизируются так, что каждый пользователь может наблюдать взаимодействия других пользователей. Эта концепция станет базовым строительным элементом для создания полнофункциональных взаимодействий с поддержкой совместной работы.

Хотя все пользователи подключаются к совместному взаимодействию и видят относительные перемещения объектов, приложение пока не умеет правильно совмещать аватары с объектами, а значит, локальные пользователи будут видеть друг друга и игровые объекты в разных местах реального мира. Чтобы привязать взаимодействия к локальной среде, каждое устройство должно иметь единое представление о физическом окружении. В этом модуле мы применим для этой цели [Пространственные привязки Azure](<https://azure.microsoft.com//services/spatial-anchors/>), которые и реализуем в следующем уроке.

Прежде чем переходить к следующему уроку, следует выполнить обучающий модуль по Пространственным привязкам Azure, где описаны основные понятия, создание учетной записи и ресурсов Azure и другие важные элементы, которые потребуются нам при интеграции этой возможности в совместное взаимодействие.

[Следующий урок. 5. Интеграция Пространственных привязок Azure в общий интерфейс](mrlearning-sharing(photon)-ch5.md)
