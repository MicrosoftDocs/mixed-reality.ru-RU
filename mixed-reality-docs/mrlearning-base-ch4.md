---
title: Учебники по началу работы — 5. Взаимодействие с трехмерными объектами
description: ''
author: jessemcculloch
ms.author: jemccull
ms.date: 05/02/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: a1b26d56b4693ef23f2d77ba53e0961693489a3a
ms.sourcegitcommit: cc61f7ac08f9ac2f2f04e8525c3260ea073e04a7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77130285"
---
# <a name="5-interacting-with-3d-objects"></a>5. взаимодействие с трехмерными объектами

В этом учебнике вы узнаете о базовом трехмерном содержимом и взаимодействии с пользователем, например о том, как организовать трехмерные объекты как часть коллекции, ограничивающие рамки для базовой манипуляции, практически и намного взаимодействие, а также жесты касания и захвата с отслеживанием руки.

## <a name="objectives"></a>Задачи

* Создание панели трехмерных объектов, которые будут использоваться для других целей обучения
* Реализация ограничивающих рамок.
* Настройка трехмерных объектов для базовых манипуляций, таких как перемещение, вращение и масштабирование
* Изучение ближнего и дальнего взаимодействия.
* Дополнительные сведения о жестах отслеживания, таких как захват и сенсорный ввод

## <a name="importing-the-tutorial-assets"></a>Импорт ресурсов учебника

Скачайте и импортируйте пользовательский пакет Unity:

* [МРТК. HoloLens2. Unity. Tutorials. Assets. GettingStarted. 2.2.0.0. пакет unitypackage](https://github.com/microsoft/MixedRealityLearning/releases/download/getting-started-v2.2.0.0/MRTK.HoloLens2.Unity.Tutorials.Assets.GettingStarted.2.2.0.0.unitypackage)

После импорта ресурсов учебника окно проекта должно выглядеть следующим образом:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section1-step1-1.png)

> [!TIP]
> Напоминание о том, как импортировать пользовательский пакет Unity, можно найти в разделе Импорт инструкций по [набору средств для смешанной реальности](mrlearning-base-ch1.md#import-the-mixed-reality-toolkit) .

## <a name="decluttering-the-scene-view"></a>Раззагромождения представления сцены

Чтобы упростить работу с сценой, установите **видимость сцены** для объектов Cube и буттонколлектион, щелкнув значок **глаза** слева от объектов. Это скрывает объект в окне сцены, не изменяя его видимость в игре:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section2-step1-1.png)

> [!TIP]
> Дополнительные сведения об элементах управления видимостью сцены и их использовании для оптимизации представления сцены и рабочего процесса см. в документации по <a href="https://docs.unity3d.com/Manual/SceneVisibility.html" target="_blank">видимости сцены</a> Unity.

## <a name="organizing-3d-objects-in-a-collection"></a>Упорядочение трехмерных объектов в коллекции

В этом разделе вы создадите панель трехмерных объектов, которая будет использоваться при изучении различных способов взаимодействия с трехмерными объектами в следующих разделах этого руководства. В частности, вы настроите трехмерные объекты для размещения в сетке 3 x 3.

Точно так же, как и при [создании панели кнопок](mrlearning-base-ch2.md#creating-a-panel-of-buttons-using-mrtks-grid-object-collection), необходимо выполнить следующие основные действия.

1. Родительские трехмерные объекты с родительским объектом
2. Добавление и настройка компонента "Коллекция объектов сетки" (скрипт)

### <a name="1-parent-the-3d-objects-to-a-parent-object"></a>1. Отображение трехмерных объектов в родительский объект

В окне Иерархия **Создайте пустой объект**, присвойте ему подходящее имя, например **3DObjectCollection**, и поместите его в подходящее расположение, например X = 0, Y =-0,2, Z = 2.

В окне проекта перейдите к разделу **активы** > **мртк. Учебники. GettingStarted** > **Prefabs**, а затем **родительский** элемент Prefabs в **3DObjectCollection**:

* Мак
* коффикуп
* еарскоре
* Восьмиядерными
* Платоновыми
* семодуле

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section3-step1-1.png)

В окне Иерархия **Создайте три Куба** в качестве дочерних объектов **3DObjectCollection** и задайте для их **шкалы** преобразования значение X = 0,15, Y = 0,15, Z = 0,15:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section3-step1-2.png)

<!-- TODO: Finish -->
> [!TIP]
> Напоминание о том, как выполнить перечисленные выше действия, можно найти в руководстве [Создание пользовательского интерфейса и настройка набора средств смешанной реальности](mrlearning-base-ch2.md) .

Перемещайте Кубы, чтобы можно было увидеть каждый куб:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section3-step1-3.png)

В окне проекта перейдите к разделу **активы** > **микседреалититулкит. SDK** > **стандардассетс** > **материалы** , чтобы просмотреть материалы, предоставленные в мртк.

**Щелкните и перетащите** подходящий материал для каждого из свойств элемент " **материалы** " для модуля подготовки сетки Куба, например:

* MRTK_Standard_GlowingCyan
* MRTK_Standard_GlowingOrange
* MRTK_Standard_Green:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section3-step1-4.png)

### <a name="2-add-and-configure-the-grid-object-collection-script-component"></a>2. Добавление и настройка компонента "Коллекция объектов сетки" (скрипт)

Добавьте компонент **коллекции объектов Grid (скрипт)** в объект 3DObjectCollection и настройте его следующим образом:

* Измените **Тип сортировки** на дочерний порядок, чтобы обеспечить сортировку дочерних объектов в том порядке, в котором они были помещены в родительский объект.

Затем нажмите кнопку **Update Collection (обновить коллекцию** ), чтобы применить новую конфигурацию:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section3-step2-1.png)

## <a name="manipulating-3d-objects"></a>Обработка трехмерных объектов

В этом разделе вы добавите возможность манипулировать всеми трехмерными объектами на панели, созданной в предыдущем разделе. Кроме того, для объектов prefab вы сможете предоставить пользователям возможность обращаться к этим объектам с помощью отслеживания руки. Затем будет рассмотрено несколько поведений манипуляций, которые можно применить к объектам.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Добавление компонента обработчика манипуляций (скрипт) для всех объектов
2. Добавление компонента, который можно получить с помощью диалогового окна близкого взаимодействия (скрипт), к объектам prefab
3. Настройка компонента обработчика манипуляции (скрипт)

> [!IMPORTANT]
> Чтобы иметь возможность **манипулировать объектом**, объект должен иметь следующие компоненты:
>
> * **Компонент,** например, элемент списка конфликтующих
> * Компонент **обработчика манипуляций (скрипт)**
>
> Чтобы иметь возможность **манипулировать** и **захватить объект с отслеживающими**действиями, объект должен иметь следующие компоненты:
>
> * **Компонент,** например, элемент списка конфликтующих
> * Компонент **обработчика манипуляций (скрипт)**
> * Компонент, который **приближается к взаимодействию (скрипт)**

### <a name="1-add-the-manipulation-handler-script-component-to-all-the-objects"></a>1. Добавьте компонент обработчика манипуляций (скрипт) для всех объектов.

В окне Иерархия выберите объект **Мак** , нажмите и удерживайте клавишу **SHIFT** , а затем выберите объект **Cube ()** и добавьте компонент **обработчика манипуляций (скрипт)** для всех объектов:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step1-1.png)

> [!NOTE]
> В рамках этого руководства в Prefabs уже добавлены конфликты. Для примитивов Unity, таких как объекты куба, автоматически добавляется компонент "конфликты" при создании объекта. На приведенном выше рисунке конфликты представлены зелеными контурами. Дополнительные сведения о конфликтах см. <a href="https://docs.unity3d.com/Manual/CollidersOverview.html" target="_blank">в документации по средству для Unity</a> .

### <a name="2-add-the-near-interaction-grabbable-script-component-to-the-prefab-objects"></a>2. Добавьте компонент "близкое к взаимодействию" (скрипт) для объектов prefab

В окне Иерархия выберите объект **Мак** , нажмите и удерживайте клавишу **SHIFT** , а затем выберите объект **Семодуле** и добавьте компонент " **ближайший к взаимодействию" (скрипт)** для всех объектов:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step2-1.png)

### <a name="3-configure-the-manipulation-handler-script-component"></a>3. Настройка компонента обработчика манипуляции (скрипт)

#### <a name="default-manipulation"></a>Обработка по умолчанию

Для объекта **куба** оставьте все свойства по умолчанию, чтобы работать с поведением по умолчанию:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-1.png)

> [!TIP]
> Чтобы сбросить компонент до значений по умолчанию, можно выбрать значок параметров компонента и нажать кнопку Сбросить.

#### <a name="restrict-manipulation-to-scale-only"></a>Ограничить манипуляцию только масштабированием

Для объекта **Cube (1)** измените значение **двух типов манипуляции** на масштабирование, чтобы разрешить пользователю изменять размер объекта:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-2.png)

#### <a name="constrain-the-movement-to-a-fixed-distance-from-the-user"></a>Ограничение перемещения до фиксированного расстояния от пользователя

Для объекта **Cube (2)** измените **Ограничение перемещения** , чтобы исправить расстояние от заголовка, чтобы при перемещении объекта оно оставалось на том же расстоянии от пользователя:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-3.png)

#### <a name="default-grabbable-manipulation"></a>Манипуляция, используемая по умолчанию

Для объектов **Мак**, **коффекуп**и **еарскоре** оставьте все свойства по умолчанию, чтобы можно было задействовать поведение манипуляции по умолчанию.

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-4.png)

#### <a name="remove-the-ability-of-far-manipulation"></a>Удаление возможности выполнения манипуляций

Для объекта **восьмиядерными** снимите флажок **Разрешить далекое манипуляции** , чтобы сделать его возможным, чтобы пользователь мог взаимодействовать только с объектом непосредственно с помощью отслеживания руки:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-5.png)

#### <a name="make-an-object-rotate-around-its-center"></a>Вращение объекта вокруг его центра

Для объекта **Платоновыми** измените **режим поворота руки рядом** с **одним режимом поворота** , который можно повернуть на «центр объектов», чтобы сделать так, что когда пользователь поворачивает объект с одной стороны, он поворачивается вокруг центра объекта:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-6.png)

#### <a name="prevent-movement-after-object-is-released"></a>Запретить перемещение после освобождения объекта

Для объекта **семодуле** измените **поведение выпуска** на Nothing, чтобы после того, как объект был освобожден от руки пользователя, он не будет перемещаться:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section4-step3-7.png)

Дополнительные сведения о компоненте обработчика манипуляции и связанных с ним свойствах см. в руководстве по [обработчику манипуляции](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_ManipulationHandler.html) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="adding-bounding-boxes"></a>Добавление ограничивающих прямоугольников

Ограничивающие прямоугольники упрощают и интуитивно обрабатывают объекты с одной стороны как для почти, так и для дальнего взаимодействия, предоставляя маркеры, которые можно использовать для масштабирования и поворота.

В этом примере вы добавите ограничивающий прямоугольник к объекту Еарскоре, чтобы теперь этот объект мог взаимодействовать с помощью манипуляции с объектами, настроенными в предыдущем разделе, а также масштабированием и поворотом с помощью маркеров ограничивающего прямоугольника.

> [!IMPORTANT]
> Чтобы иметь возможность использовать **ограничивающий прямоугольник**, объект должен иметь следующие компоненты:
>
> * **Компонент,** например, элемент списка конфликтующих
> * Компонент **ограничивающего прямоугольника (скрипт)**

### <a name="1-add-the-bounding-box-script-component-to-the-earthcore-object"></a>1. Добавьте компонент ограничивающего прямоугольника (script) в объект Еарскоре

В окне инспектора выберите объект **еарскоре** и добавьте компонент **ограничивающего прямоугольника (script)** в объект еарскоре:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section5-step1-1.png)

> [!NOTE]
> Визуализация ограничивающего прямоугольника создается во время выполнения и, следовательно, не отображается перед переходом в режим игры.

### <a name="2-visualize-and-test-the-bounding-box-using-the-in-editor-simulation"></a>2. Визуализация и тестирование ограничивающего прямоугольника с помощью имитации в редакторе

Нажмите кнопку "Воспроизведение", чтобы перейти в режим игры. Затем нажмите и удерживайте клавишу пробел, чтобы открыть руку и использовать мышь для взаимодействия с ограничивающим прямоугольником:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section5-step2-1.png)

Дополнительные сведения о компоненте ограничивающего прямоугольника и связанных с ним свойствах см. в руководстве по использованию [ограничивающего прямоугольника](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_BoundingBox.html) на [портале документации мртк](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html).

## <a name="adding-touch-effects"></a>Добавление эффектов касания

В этом примере вы включите события, которые будут запускаться при касании объекта рукой. В частности, вы настраиваете объект восьмиядерными для воспроизведения звукового эффекта, когда пользователь обращается к нему.

Ниже приведены основные действия, которые необходимо выполнить для достижения этого результата.

1. Добавление компонента "источник звука" в объект
2. Добавление в объект компонента с сенсорным взаимодействием (script)
3. Добавление компонента взаимодействия руки (script) в объект
4. Реализовать событие on Touch Started
5. Тестирование взаимодействия касания с помощью имитации в редакторе

> [!IMPORTANT]
> Чтобы **активировать события касания**, объект должен иметь следующие компоненты:
>
> * **Компоненту** , лучше всего, конфликтующему рамку
> * Компонент для **сенсорного взаимодействия ближнего действия (скрипт)**
> * Компонент **взаимодействия руки (сценарий)**

> [!NOTE]
> Компонент взаимодействия руки (script) не является частью МРТК. Она была импортирована в активы этого учебника и изначально входит в примеры Unity Toolkit Микседреалити.

### <a name="1-add-an-audio-source-component-to-the-object"></a>1. Добавление компонента "источник звука" в объект

В окне Иерархия выберите объект **восьмиядерными** , добавьте компонент " **источник звука** " в объект восьмиядерными, а затем измените **пространственный Blend** на 1, чтобы включить Пространственный звук:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step1-1.png)

### <a name="2-add-the-near-interaction-touchable-script-component-to-the-object"></a>2. Добавьте в объект компонент с сенсорным взаимодействием (script).

Выбрав объект **восьмиядерными** , добавьте в объект восьмиядерными элемент с **сенсорным взаимодействием (script)** , а затем щелкните кнопки **исправить границы** и **центр исправлений** , чтобы обновить локальные свойства центра и границ близкого взаимодействия (скрипт), чтобы они соответствовали боксколлидер:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step2-1.png)

### <a name="3-add-the-hand-interaction-touch-script-component-to-the-object"></a>3. Добавление компонента взаимодействия руки (script) в объект

Если объект **восьмиядерными** все еще выбран, добавьте компонент **взаимодействия с руки (script)** в объект восьмиядерными:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step3-1.png)

### <a name="4-implement-the-on-touch-started-event"></a>4. Реализуйте событие on Touch Started

В компоненте взаимодействия руки (скрипт) щелкните маленький значок **+** , чтобы создать событие **при запуске касания ()** . Затем настройте объект **восьмиядерными** для получения события и определите **аудиосаурце. плайонешот** в качестве запускаемого действия:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step4-1.png)

Перейдите к разделу **активы** > **микседреалититулкит. SDK** > **стандардассетс** > материалы, чтобы просмотреть аудиоклипы, предоставленные мртк, а затем назначьте подходящий звуковой клип полю **аудиоклипа** , например, MRTK_Gem аудиоклип:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step4-2.png)

> [!TIP]
> Напоминание о том, как реализовать события, можно найти в разделе [жесты отслеживания руки и инструкции по взаимодействию с управляемыми кнопками](mrlearning-base-ch2.md#hand-tracking-gestures-and-interactable-buttons) .

### <a name="5-test-the-touch-interaction-using-the-in-editor-simulation"></a>5. Тестирование взаимодействия касания с помощью имитации в редакторе

Нажмите кнопку "Воспроизведение", чтобы перейти в режим игры. Затем нажмите и удерживайте клавишу пробел, чтобы вывести руку и использовать мышь для касания объекта восьмиядерными и запуска звукового эффекта:

![мрлеарнинг — базовый](images/mrlearning-base/tutorial4-section6-step5-1.png)

> [!NOTE]
> Как вы видели при тестировании сенсорного взаимодействия, как показано на рисунке выше, объект восьмиядерными Color пулсатед, когда он был затронут. Этот результат жестко закодирован в компоненте взаимодействия руки (script), а не в результате настройки события, выполненной в предыдущих шагах.
>
> Если вы хотите отключить этот результат, можно, например, закомментировать или строку 32 ' Таржетрендерер = Жеткомпонентинчилдрен<Renderer>(); ', что приведет к тому, что Таржетрендерер будет иметь значение NULL и цвет не пулсатинг.

## <a name="congratulations"></a>Поздравляем!

В этом учебнике вы узнали, как упорядочивать трехмерные объекты в коллекции Grid и как управлять этими объектами (масштабирование, вращение и перемещение) с помощью ближнего взаимодействия (с отслеживанием руки) и намного взаимодействием (с использованием лучей или лучей). Вы также узнали, как разместить ограничивающие прямоугольники вокруг трехмерных объектов и как использовать и настраивать маркеры в ограничивающих прямоугольниках. И наконец, вы научились инициировать события при касании объекта.

[Следующее занятие: 6. Просмотр дополнительных параметров ввода](mrlearning-base-ch5.md)
