---
title: Развертывание и отладка с помощью Visual Studio
description: Как создавать, отлаживать и развертывать приложения для HoloLens и Windows Mixed Reality с помощью Visual Studio.
author: pbarnettms
ms.author: pbarnett
ms.date: 10/24/2019
ms.topic: article
keywords: Visual Studio, HoloLens, Mixed Reality, отладка, развертывание
ms.openlocfilehash: 2b84183417a1bd4eaa90eef58bebe2b65966b933
ms.sourcegitcommit: 6bc6757b9b273a63f260f1716c944603dfa51151
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2019
ms.locfileid: "73437295"
---
# <a name="using-visual-studio-to-deploy-and-debug"></a>Развертывание и отладка с помощью Visual Studio

Независимо от того, хотите ли вы использовать DirectX или Unity для разработки приложения смешанной реальности, для отладки и развертывания будет использоваться Visual Studio. В этом разделе вы узнаете следующее:
* Как развертывать приложения на основе HoloLens или иммерсивного головного телефона Windows Mixed Reality с помощью Visual Studio.
* Использование эмулятора HoloLens, встроенного в Visual Studio.
* Отладка приложений смешанной реальности.

## <a name="prerequisites"></a>Необходимые условия
1. Инструкции по установке см. [в разделе Установка инструментов](install-the-tools.md) .
2. Создайте новый проект универсального приложения Windows в Visual Studio.  Для HoloLens (1-го поколения) Используйте Visual Studio 2017 или более поздней версии.  Для Hololens 2 Используйте Visual Studio 2019 16,2 или более поздней версии. C#и C++ поддерживаются. (Или следуйте инструкциям по [созданию сборки приложения в Unity](holograms-100.md).)

## <a name="enabling-developer-mode"></a>Включение режима разработчика

Начните с включения **режима разработчика** на устройстве, чтобы Visual Studio мог подключиться к нему.

### <a name="hololens"></a>HoloLens
1. Включите HoloLens и вставьте его на устройство.
2. Выполните жест [цветение](system-gesture.md#bloom), чтобы запустить главное меню.
3. Взгляните на плитку **Параметры** и выполните жест [касания](gaze-and-commit.md#composite-gestures) . Выполните второе воздушное касание, чтобы разместить приложение в вашей среде. Приложение «Параметры» запустится после его размещения.
4. Выберите пункт меню **Обновить**.
5. Выберите пункт меню **Для разработчиков**.
6. Включите **Режим разработчика**. Это позволит вам [развертывать приложения из Visual Studio](using-visual-studio.md) в HoloLens.
7. Необязательно. Прокрутите вниз, а также включите **портал устройств**. Это также позволит вам подключиться к [порталу устройств Windows](using-the-windows-device-portal.md) на HoloLens из веб-браузера.

### <a name="windows-pc"></a>Компьютер с Windows

Если вы работаете с головным телефоном Windows Mixed Reality, подключенным к компьютеру, необходимо включить **режим разработчика** на компьютере.
1. К **параметрам**
2. Выбор **обновления и безопасности**
3. Выбрать **для разработчиков**
4. Включите **режим разработчика**, прочтите заявление об отказе для выбранного параметра, а затем нажмите кнопку Да, чтобы принять изменения.

## <a name="deploying-an-app-over-wi-fi---hololens-1st-gen"></a>Развертывание приложения через Wi-Fi-HoloLens (1-й общий)
1. Выберите конфигурацию сборки **x86** для приложения ![конфигурации сборки x86 в Visual Studio](images/x86setting.png)
2. Выберите **Удаленный компьютер** в раскрывающемся меню цели развертывания ![целевой объект развертывания удаленного компьютера в Visual Studio](images/remotemachinesetting.png)
3. Для C++ проектов и JavaScript перейдите в **проект > свойства > Свойства конфигурации > отладки**. Для C# проектов будет автоматически всплывающее диалоговое окно для настройки подключения.
  а) Введите IP-адрес устройства в поле **адрес** или **имя компьютера** . Найдите IP-адрес в HoloLens в разделе **параметры > сеть & интернет > дополнительные параметры**или можно попросить Кортаны "что такое мой IP-адрес?".
  б. Настройка режима проверки подлинности на **универсальный (незашифрованный протокол)** ![диалоговом окне удаленного подключения в Visual Studio](images/remotedeploy.png)
4. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)
5. При первом развертывании приложения в HoloLens с компьютера будет предложено ввести ПИН-код. Следуйте приведенным ниже инструкциям по **связыванию с устройством** .

## <a name="deploying-an-app-over-wi-fi---hololens-2"></a>Развертывание приложения через Wi-Fi-HoloLens 2
1. Выберите конфигурацию сборки **ARM** или **ARM64** для приложения ![конфигурации сборки ARM64 в Visual Studio](images/arm64setting.png)
2. Выберите **Удаленный компьютер** в раскрывающемся меню цели развертывания ![целевой объект развертывания удаленного компьютера в Visual Studio](images/remotemachinesetting_arm64.png)
3. Для C++ проектов и JavaScript перейдите в **проект > свойства > Свойства конфигурации > отладки**. Для C# проектов будет автоматически всплывающее диалоговое окно для настройки подключения.
  а) Введите IP-адрес устройства в поле **адрес** или **имя компьютера** . Найдите IP-адрес в HoloLens в разделе **параметры > сеть & интернет > дополнительные параметры**или можно попросить Кортаны "что такое мой IP-адрес?".
  б. Настройка режима проверки подлинности на **универсальный (незашифрованный протокол)** ![диалоговом окне удаленного подключения в Visual Studio](images/remotedeploy.png)
4. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)
5. При первом развертывании приложения в HoloLens с компьютера будет предложено ввести ПИН-код. Следуйте приведенным ниже инструкциям по **связыванию с устройством** .

Если IP-адрес HoloLens изменится, вы можете изменить IP-адрес целевого компьютера, перейдя в **проект > свойства > свойства конфигурации > отладки** .

## <a name="deploying-an-app-over-usb---hololens-1st-gen"></a>Развертывание приложения через USB-HoloLens (1-й общий)
1. Выберите конфигурацию сборки **x86** для приложения ![конфигурации сборки x86 в Visual Studio](images/x86setting.png)
2. Выберите **устройство** в раскрывающемся меню цель развертывания![развертывание устройства в Visual Studio](images/buildsettingsusbdeploy.png)
3. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)
4. При первом развертывании приложения в HoloLens с компьютера будет предложено ввести ПИН-код. Следуйте приведенным ниже инструкциям по **связыванию с устройством** .

## <a name="deploying-an-app-over-usb---hololens-2"></a>Развертывание приложения по USB-порту HoloLens 2
1. Выберите конфигурацию сборки **ARM** или **ARM64** для приложения ![конфигурации сборки ARM64 в Visual Studio](images/arm64setting.png)
2. Выберите **устройство** в раскрывающемся меню цель развертывания![развертывание устройства в Visual Studio](images/buildsettingsusbdeploy_arm64.png)
3. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)
4. При первом развертывании приложения в HoloLens с компьютера будет предложено ввести ПИН-код. Следуйте приведенным ниже инструкциям по **связыванию с устройством** .

## <a name="deploying-an-app-to-your-local-pc---immersive-headset"></a>Развертывание приложения на своем локальном ПК — иммерсивное устройство

При использовании иммерсивного головного телефона Windows Mixed Reality, который подключается к компьютеру или [симулятору смешанной реальности](using-the-windows-mixed-reality-simulator.md), следуйте этим инструкциям. В таких случаях просто разверните и запустите приложение на локальном компьютере.
1. Выберите конфигурацию сборки **x86** или **x64** для приложения
2. Выберите **локальный компьютер** в раскрывающемся меню цель развертывания.
3. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку.

## <a name="pairing-your-device"></a>Связывание устройства

При первом развертывании приложения из Visual Studio в HoloLens вам будет предложено ввести ПИН-код. На HoloLens создайте ПИН-код, запустив приложение "Параметры", перейдите на страницу **обновления > для разработчиков** и коснитесь элемента **связать**. На HoloLens будет отображаться ПИН-код; Введите этот ПИН-код в Visual Studio. После завершения связывания коснитесь элемента **Готово** в HoloLens, чтобы закрыть диалоговое окно. Теперь этот компьютер связан с HoloLens, и вы сможете развертывать приложения автоматически. Повторите эти действия для каждого последующего компьютера, который используется для развертывания приложений в HoloLens.

Чтобы отменить связывание HoloLens со всех компьютеров, с которыми он связан, запустите приложение **параметров** , перейдите в раздел **обновление > для разработчиков** и коснитесь пункта **очистить**.

## <a name="deploying-an-app-to-the-hololens-1st-gen-emulator"></a>Развертывание приложения в эмуляторе HoloLens (1-го поколения)
1. Убедитесь, что вы **[установили эмулятор HoloLens](install-the-tools.md)** .
2. Выберите конфигурацию сборки **x86** для приложения.
![Конфигурация сборки x86 в Visual Studio](images/x86setting.png)
3. Выберите **эмулятор HoloLens** в раскрывающемся меню цели развертывания![эмулятор в Visual Studio](images/deployemulator.png)
4. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)

## <a name="deploying-an-app-to-the-hololens-2-emulator"></a>Развертывание приложения в эмуляторе HoloLens 2
1. Убедитесь, что вы **[установили эмулятор HoloLens](install-the-tools.md)** .
2. Выберите конфигурацию сборки **x86** или **x64** для своего приложения.
![Конфигурация сборки x86 в Visual Studio](images/x86setting.png)
3. Выберите **эмулятор HoloLens 2** в раскрывающемся меню цели развертывания![эмулятор в Visual Studio](images/deployemulator2.png)
4. Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку![запуск без отладки в Visual Studio](images/deploywithdebugging.png)

## <a name="graphics-debugger-for-hololens-1st-gen"></a>Отладчик графики для HoloLens (1-й общий)

Средства диагностика графики Visual Studio очень полезны при написании и оптимизации приложения Holographic. Подробные сведения см. [в диагностика графики Visual Studio на сайте MSDN](https://msdn.microsoft.com/library/hh315751.aspx) .

**Запуск отладчика графики**
1. Выполните приведенные выше инструкции, чтобы выбрать устройство или эмулятор.
2. Последовательно выберите **отладка > графика > запустить диагностику**
3. При первом выполнении этого действия с помощью HoloLens может появиться сообщение об ошибке "отказано в доступе". Перезагрузите HoloLens, чтобы разрешить выполнение обновленных разрешений, и повторите попытку.

## <a name="profiling"></a>Профилирования

Средства профилирования Visual Studio позволяют анализировать производительность и использование ресурсов приложения. Сюда входят средства для оптимизации использования ЦП, памяти, графики и сети. Полные сведения см. [в статье запуск средств диагностики без отладки на MSDN](https://msdn.microsoft.com/library/dn957936.aspx) .

**Запуск Средства профилирования с помощью HoloLens**
1. Выполните приведенные выше инструкции, чтобы выбрать устройство или эмулятор.
2. Перейдите в раздел **отладка > начать средства диагностики без отладки...**
3. Выберите Инструменты, которые вы хотите использовать.
4. Нажмите кнопку **Пуск** .
5. При первом выполнении этого действия с помощью HoloLens может появиться сообщение об ошибке "отказано в доступе". Перезагрузите HoloLens, чтобы разрешить выполнение обновленных разрешений, и повторите попытку.

## <a name="debugging-an-installed-or-running-app"></a>Отладка установленного или работающего приложения

Visual Studio можно использовать для отладки универсального приложения Windows, установленного без развертывания из проекта Visual Studio. Это полезно, если требуется выполнить отладку установленного пакета приложения или выполнить отладку уже запущенного приложения.
1. Перейдите в раздел **Отладка — > другие целевые объекты отладки — > Отладка установленного пакета приложения** .
2. Выберите цель **удаленного компьютера** для HoloLens или " **локальный компьютер** " для захватывающих головных телефонов.
3. Введите **IP-адрес** устройства
4. Выберите режим **универсальной** проверки подлинности
5. В окне отображаются как работающие, так и неактивные приложения. Выберите ту, которую хотите отладить.
6. Выберите тип отлаживаемого кода (управляемый, собственный, смешанный)
7. Нажмите кнопку **присоединить** или **запустить**

## <a name="see-also"></a>См. также
* [Установка средств](install-the-tools.md)
* [Использование эмулятора HoloLens](using-the-hololens-emulator.md)
* [Развертывание и отладка приложений универсальная платформа Windows (UWP)](https://msdn.microsoft.com/library/windows/apps/xaml/mt613243.aspx)
* [Включение устройства для разработки](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)
