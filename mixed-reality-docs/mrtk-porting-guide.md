---
title: Подготовка приложения для использования с HoloLens 2
description: Предназначено для разработчиков, которые используют существующее приложение для HoloLens (1-го поколения) и (или) устаревшей версии MRTK и хотят перейти на MRTK версии 2 и HoloLens 2.
author: grbury
ms.author: grbury
ms.date: 04/12/19
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, test, MRTK, MRTK version 2, HoloLens 2
ms.openlocfilehash: 02dabd21b7a6add2ce53fe291a447e49057184d0
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2019
ms.locfileid: "66270396"
---
# <a name="getting-your-existing-app-ready-for-hololens-2"></a><span data-ttu-id="9a7a9-104">Подготовка существующего приложения для использования с HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-104">Getting your existing app ready for HoloLens 2</span></span>

<span data-ttu-id="9a7a9-105">Это руководство предназначено для разработчиков, которые используют существующее приложение Unity для HoloLens (1-го поколения) и хотят перенести его на новое устройство HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-105">This guide is specifically tailored to help developers who have an existing Unity app for HoloLens (1st gen) to port their application for the new HoloLens 2 device.</span></span> <span data-ttu-id="9a7a9-106">Процесс переноса приложения Unity для HoloLens (1-го поколения) на HoloLens 2 состоит из четырех основных шагов.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-106">There are four key steps to porting a HoloLens (1st gen) Unity app to HoloLens 2.</span></span> <span data-ttu-id="9a7a9-107">Эти шаги подробно описаны в приведенных ниже разделах.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-107">The sections below will detail information for each stage.</span></span> 

| <span data-ttu-id="9a7a9-108">Шаг 1</span><span class="sxs-lookup"><span data-stu-id="9a7a9-108">Step 1</span></span> | <span data-ttu-id="9a7a9-109">Шаг 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-109">Step 2</span></span> | <span data-ttu-id="9a7a9-110">Шаг 3</span><span class="sxs-lookup"><span data-stu-id="9a7a9-110">Step 3</span></span> | <span data-ttu-id="9a7a9-111">Шаг 4</span><span class="sxs-lookup"><span data-stu-id="9a7a9-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Логотип Visual Studio](images/visualstudio_logo.png) | ![Логотип Unity](images/unity_logo.png)| ![Значок Unity](images/hololens2_icon.jpg) | ![Логотип МРТК](images/MRTKIcon.jpg) |
| <span data-ttu-id="9a7a9-116">Скачивание новейших средств</span><span class="sxs-lookup"><span data-stu-id="9a7a9-116">Download latest tools</span></span> | <span data-ttu-id="9a7a9-117">Обновление проекта Unity</span><span class="sxs-lookup"><span data-stu-id="9a7a9-117">Update Unity Project</span></span> | <span data-ttu-id="9a7a9-118">Компиляция для ARM</span><span class="sxs-lookup"><span data-stu-id="9a7a9-118">Compile for ARM</span></span> | <span data-ttu-id="9a7a9-119">Миграция в MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-119">Migrate to MRTK v2</span></span>

<span data-ttu-id="9a7a9-120">Прежде чем начать процесс переноса, разработчикам **настоятельно рекомендуется** сохранить моментальный снимок исходного состояния своего приложения с помощью системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-120">It is **highly recommended** that, before beginning the porting process, developers utilize source control to save a snapshot of the original state of their app.</span></span> <span data-ttu-id="9a7a9-121">Кроме того, мы рекомендуем *сохранить* данные состояния контрольных точек в разное время при выполнении процесса.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-121">Additionally, it is recommended to *save* checkpoint states at various points during the process.</span></span> <span data-ttu-id="9a7a9-122">Также полезно создать еще один экземпляр исходного приложения Unity, чтобы обеспечить сравнение версий приложения во время переноса.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-122">It can also be very helpful to have another Unity instance of the original app to allow for side-by-side comparison during the port process.</span></span> 

> [!NOTE]
> <span data-ttu-id="9a7a9-123">Перед переносом убедитесь, что установлены последние версии средств разработки для Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-123">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="9a7a9-124">Для большинства разработчиков HoloLens в основном это будет последняя версия Visual Studio 2017 и соответствующий пакет SDK для Windows.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-124">For most existing HoloLens developers, this will primarily involve updating to the latest Visual Studio 2017 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="9a7a9-125">Подробное описание различных версий Unity и набора средств для смешанной реальности (MRTK) версии 2 представлено ниже.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-125">The content below will dive further into different Unity versions and the Mixed Reality Toolkit version 2.</span></span>
>
> <span data-ttu-id="9a7a9-126">Дополнительные сведения см. в статье [Install the tools](install-the-tools.md) (Установка средств).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-126">For more information, please see [Install the tools](install-the-tools.md).</span></span>

## <a name="migrate-project-to-latest-version-of-unity"></a><span data-ttu-id="9a7a9-127">Перенос проекта в последнюю версию Unity</span><span class="sxs-lookup"><span data-stu-id="9a7a9-127">Migrate project to latest version of Unity</span></span>

<span data-ttu-id="9a7a9-128">Если вы используете MRTK версии 2, Unity 2018 LTS будет наилучшим вариантом долгосрочной поддержки без критических изменений в Unity или MRTK.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-128">If using the MRTK v2, then Unity 2018 LTS will be the best long-term support path with no breaking changes in Unity or in MRTK.</span></span>  <span data-ttu-id="9a7a9-129">Как указано в упомянутом выше руководстве по установке средств, рекомендуется использовать сборку Unity 2018.3, которая будет выпуском LTS для Unity 2018.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-129">The recommended Unity build, per the above "install the tools" is Unity 2018.3, which will become the LTS release for Unity 2018.</span></span>  <span data-ttu-id="9a7a9-130">Кроме того, MRTK версии 2 всегда гарантирует поддержку Unity 2018 LTS. Но поддержка каждой итерации Unity 2019.x не гарантируется.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-130">Further, the MRTK v2 will always guarantee support for Unity 2018 LTS but not necessarily guarantee support for every iteration of Unity 2019.x.</span></span> 

<span data-ttu-id="9a7a9-131">Чтобы вы могли составить представление о дополнительных различиях между Unity 2018.3.x и Unity 2019.1.x, ниже описаны преимущества и недостатки этих двух версий. Основное и важное отличие Unity 2019 — возможность компиляции для ARM64.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-131">To help clarify additional differences between Unity 2018.3.x or Unity 2019.1.x, below outlines the trade-offs between these two versions, with the primary difference of significance being the ability to compile for ARM64 in Unity 2019.</span></span> 

<span data-ttu-id="9a7a9-132">Разработчикам следует оценить все [зависимости подключаемого модуля](https://docs.unity3d.com/Manual/Plugins.html), которые сейчас есть в проекте, а также возможность выполнить сборку этих библиотек DLL для ARM64.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-132">Developers should assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in their project and whether or not these DLLs can be built for ARM64.</span></span> <span data-ttu-id="9a7a9-133">Если подключаемый модуль с жесткой зависимостью не поддерживает сборку для ARM64, то следует использовать LTS Unity 2018.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-133">If a hard dependency plugin cannot be built for ARM64, then one will have to utilize Unity 2018 LTS.</span></span>


| <span data-ttu-id="9a7a9-134">Unity 2018.3.x</span><span class="sxs-lookup"><span data-stu-id="9a7a9-134">Unity 2018.3.x</span></span> | <span data-ttu-id="9a7a9-135">Unity 2019.1 и более поздних версий</span><span class="sxs-lookup"><span data-stu-id="9a7a9-135">Unity 2019.1+</span></span> |
|----------|-------------------|
| <span data-ttu-id="9a7a9-136">Поддержка сборки для ARM32</span><span class="sxs-lookup"><span data-stu-id="9a7a9-136">ARM32 build support</span></span> | <span data-ttu-id="9a7a9-137">Поддержка сборки для ARM32 и ARM64</span><span class="sxs-lookup"><span data-stu-id="9a7a9-137">ARM32 and ARM64 build support</span></span> |
| <span data-ttu-id="9a7a9-138">Стабильные выпуски сборок LTS</span><span class="sxs-lookup"><span data-stu-id="9a7a9-138">Stable LTS build release</span></span> | <span data-ttu-id="9a7a9-139">Стабильность бета-версии</span><span class="sxs-lookup"><span data-stu-id="9a7a9-139">Beta stability</span></span> |
| <span data-ttu-id="9a7a9-140">[Серверная часть для работы со скриптами .NET](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) отмечена как *нерекомендуемая*</span><span class="sxs-lookup"><span data-stu-id="9a7a9-140">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *deprecated*</span></span> | <span data-ttu-id="9a7a9-141">[Серверная часть для работы со скриптами .NET](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *удалена*</span><span class="sxs-lookup"><span data-stu-id="9a7a9-141">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *removed*</span></span> |
| <span data-ttu-id="9a7a9-142">Сетевая технология UNET отмечена как *нерекомендуемая*</span><span class="sxs-lookup"><span data-stu-id="9a7a9-142">UNET Networking *deprecated*</span></span> | <span data-ttu-id="9a7a9-143">Сетевая технология UNET *удалена*</span><span class="sxs-lookup"><span data-stu-id="9a7a9-143">UNET Networking *removed*</span></span> |

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="9a7a9-144">Обновление параметров сцены или проектов в Unity</span><span class="sxs-lookup"><span data-stu-id="9a7a9-144">Update scene/project settings in Unity</span></span>

<span data-ttu-id="9a7a9-145">После обновления до Unity 2018.3.x или Unity 2019 и более поздних версий рекомендуется изменить определенные параметры в Unity, чтобы получить оптимальные результаты на устройстве.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-145">After updating to Unity 2018.3.x or Unity 2019+, it is recommended to update particular settings in Unity for optimal results on device.</span></span> <span data-ttu-id="9a7a9-146">Подробное описание этих параметров см. в статье **[Recommended settings for Unity](Recommended-settings-for-Unity.md)** (Рекомендуемые параметры для Unity).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-146">These settings are outlined in detail under **[Recommended settings for Unity](Recommended-settings-for-Unity.md)**.</span></span>

<span data-ttu-id="9a7a9-147">Следует еще раз упомянуть, что [серверная часть для работы со скриптами .NET](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) считается нерекомендуемой в Unity 2018 и *удалена* в Unity 2019. Таким образом, разработчики должны тщательно взвесить все за и против при переходе на [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-147">It should be re-iterated that the [.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and *removed* in Unity 2019 and thus, developers should strongly consider switching their project over to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span> 

> [!NOTE]
> <span data-ttu-id="9a7a9-148">При использовании серверной части для работы со скриптами IL2CPP может увеличиться время сборки из Unity в Visual Studio. Поэтому разработчикам следует настроить свои компьютеры для разработки, чтобы [оптимизировать время сборки IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-148">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio and thus developers should setup their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="9a7a9-149">Кроме того, может быть полезно настроить [сервер кэширования](https://docs.unity3d.com/Manual/CacheServer.html), особенно для проектов Unity с большим объемом ресурсов (за исключением файлов сценариев) либо постоянно меняющимися сценами или ресурсами.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-149">Furthermore, it may be beneficial to setup a [Cache Server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes/assets.</span></span> <span data-ttu-id="9a7a9-150">Когда открывается проект, Unity сохраняет соответствующие ресурсы в формате для внутреннего кэша на компьютере разработчика.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-150">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="9a7a9-151">Измененные элементы нужно повторно импортировать и еще раз обработать.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-151">Items must be re-imported and thus re-processed when modified.</span></span> <span data-ttu-id="9a7a9-152">Этот процесс можно выполнить один раз и сохранить на сервере кэширования, а значит, и совместно использовать с другими разработчиками для экономии времени. При этом каждому разработчику не придется обрабатывать повторно импортированные измененные элементы локально.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-152">This process can be done once and saved in a Cache Server and consequently shared with other developers to save time, instead of every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="9a7a9-153">Разобравшись с критическими изменениями после перехода на обновленную версию Unity, разработчикам следует выполнить сборку и тестирование текущих приложений на HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-153">After addressing any breaking changes after moving to the updated Unity version, developers should build and test their current apps on HoloLens (1st gen).</span></span> <span data-ttu-id="9a7a9-154">Кроме того, это подходящий момент для создания и сохранения фиксации в системе управления версиями.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-154">Further, this is a good point to create and save a commit for source control.</span></span> 

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="9a7a9-155">Компиляция зависимостей или подключаемых модулей для процессора ARM</span><span class="sxs-lookup"><span data-stu-id="9a7a9-155">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="9a7a9-156">Приложения для HoloLens 1-го поколения выполнялись на 32-разрядных процессорах. Новое устройство HoloLens 2 использует процессор ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-156">HoloLens (1st gen) executed applications on an x86 processor while the new HoloLens 2 device utilizes an ARM processor.</span></span> <span data-ttu-id="9a7a9-157">Поэтому существующие приложения нужно перевести на ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-157">Thus, existing applications need to be ported over to support ARM.</span></span> <span data-ttu-id="9a7a9-158">Как отмечалось ранее, Unity 2018 поддерживает компиляцию для приложений ARM32, а Unity 2019 и более поздних версий поддерживает компиляцию для приложений ARM64.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-158">As noted earlier, Unity 2018 supports compiling for ARM32 apps while Unity 2019+ supports compiling for ARM64 apps.</span></span> <span data-ttu-id="9a7a9-159">Рекомендуется разрабатывать приложения ARM64, так производительность при этом существенно выше.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-159">Developing for ARM64 applications is generally preferred as there is a material difference in performance.</span></span> <span data-ttu-id="9a7a9-160">Но в таком случае все [зависимости подключаемого модуля](https://docs.unity3d.com/Manual/Plugins.html) также должны быть созданы для ARM64.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-160">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span> 

<span data-ttu-id="9a7a9-161">Просмотрите все зависимости от библиотеки DLL, которые сейчас есть в приложении.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-161">Review all DLL dependencies in your application currently.</span></span> <span data-ttu-id="9a7a9-162">Если зависимость больше не используется, следует удалить ее из проекта.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-162">If a dependency is no longer needed, it is advisable to remove it from your project.</span></span> <span data-ttu-id="9a7a9-163">Для остальных необходимых подключаемых модулей примите соответствующие двоичные файлы ARM32 и ARM64 в проекте Unity.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-163">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span> 

<span data-ttu-id="9a7a9-164">Когда будут приняты соответствующие библиотеки DLL, создайте решение Visual Studio в Unity и скомпилируйте приложение AppX для ARM в Visual Studio, чтобы проверить, можно ли создать его для процессоров ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-164">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and then compile an AppX for ARM in Visual Studio to test that your application can be built for ARM processors.</span></span> <span data-ttu-id="9a7a9-165">На этом этапе мы также рекомендуем сохранить фиксацию в системе управления версиями.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-165">This another point where it is advised to save a commit in your source control solution.</span></span> 

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="9a7a9-166">Обновление до MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-166">Update to MRTK version 2</span></span>

<span data-ttu-id="9a7a9-167">MRTK версии 2 — это новый набор средств на основе Unity, который поддерживает HoloLens (1-го поколения) и HoloLens 2. Также в него добавлены все новые возможности HoloLens 2, такие как взаимодействие с помощью рук и отслеживание движения глаз.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-167">MRTK version 2 is the new toolkit on top of Unity supporting both HoloLens (1st gen) and HoloLens 2, and where all of the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

### <a name="prepare-for-the-migration"></a><span data-ttu-id="9a7a9-168">Подготовка к миграции</span><span class="sxs-lookup"><span data-stu-id="9a7a9-168">Prepare for the migration</span></span>

<span data-ttu-id="9a7a9-169">Перед приемом новых файлов [\*.unitypackage для MRTK версии 2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases) рекомендуется провести инвентаризацию **1) любого пользовательского кода, который интегрируется с MRTK версии 1** и **2) любого пользовательского кода для взаимодействия с помощью ввода или для компонентов UX**.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it is recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="9a7a9-170">Наиболее распространенные конфликты при освоении возможностей MRTK версии 2 для разработчиков в сфере смешанной реальности будут касаться методов ввода и взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-170">The most common and prevalent conflict for a Mixed Reality developer ingesting the new MRTK v2 will involve input and interactions.</span></span> <span data-ttu-id="9a7a9-171">Поэтому мы рекомендуем прочитать статью о [модели ввода MRTK версии 2](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-171">Thus, it is advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="9a7a9-172">Наконец, в новой MRTK версии 2 реализован переход с модели сценариев и объектов управления в сцене на архитектуру конфигурации и поставщика служб.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-172">Finally, the new MRTK v2 has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="9a7a9-173">В результате формируется более четкая иерархия и архитектурная модель. Но для этого нужно изучить новые профили конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-173">This results in a cleaner scene hierarchy and architecture model but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="9a7a9-174">Рекомендуем прочитать [руководство по настройке набора средств для смешанной реальности](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html), чтобы приступить к ознакомлению с важными параметрами и профилями, которые нужно адаптировать к требованиям вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-174">Thus, please read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span> 

### <a name="perform-the-migration"></a><span data-ttu-id="9a7a9-175">Выполнение миграции</span><span class="sxs-lookup"><span data-stu-id="9a7a9-175">Perform the migration</span></span>

<span data-ttu-id="9a7a9-176">После импорта MRTK версии 2, скорее всего, в проекте Unity будет много ошибок компиляции.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-176">After importing MRTK v2, your Unity project will likely have many compiler related errors.</span></span> <span data-ttu-id="9a7a9-177">Как правило, это связано с новой структурой пространства имен и новыми именами компонентов.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-177">These are most commonly due to the new namespace structure and new component names.</span></span> <span data-ttu-id="9a7a9-178">Перейдите к устранению этих ошибок и измените скрипты в соответствии с новыми пространствами имен и компонентами.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-178">Proceed to resolve these errors by modifying your scripts to the new namespaces and components.</span></span> 

<span data-ttu-id="9a7a9-179">Дополнительные сведения об определенных различиях API между HTK/MRTK и MRTK версии 2 см. в руководстве по переносу на [вики-сайте MRTK версии 2 ](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-179">For more information on specific API differences between HTK/MRTK and MRTK version 2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="9a7a9-180">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="9a7a9-180">Best practices</span></span>

- <span data-ttu-id="9a7a9-181">Преимущество отдается стандартному построителю текстуры MRTK.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-181">Prefer use of the MRTK Standard shader</span></span>
- <span data-ttu-id="9a7a9-182">Работайте с типами критических изменений поочередно (например, переход с IFocusable на IMixedRealityFocusHandler).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-182">Work on one breaking change type at a time (ex: IFocusable to IMixedRealityFocusHandler)</span></span>
- <span data-ttu-id="9a7a9-183">Выполняйте проверку после каждого изменения и используйте систему управления версиями.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-183">Test after every change and utilize source control</span></span>
- <span data-ttu-id="9a7a9-184">По возможности используйте стандартные элементы взаимодействия с пользователем MRTK (кнопки, баннеры и т. д.).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-184">Use default MRTK UX (buttons, slates, etc) when possible</span></span>
- <span data-ttu-id="9a7a9-185">Постарайтесь не изменять файлы MRTK напрямую. Вместо этого создайте оболочки для компонентов MRTK.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-185">Try to refrain from modifying MRTK files directly, instead create wrappers around MRTK components</span></span>
    - <span data-ttu-id="9a7a9-186">Это обеспечит защиту во время дальнейшего приема данных и обновления MRTK.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-186">This will protect against future MRTK ingestions and updates</span></span>
- <span data-ttu-id="9a7a9-187">Просмотрите и изучите примеры сцен в MRTK (особенно *HandInteractionExamples.scene*).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-187">Review & explore sample scenes provided in MRTK (especially *HandInteractionExamples.scene*)</span></span>
- <span data-ttu-id="9a7a9-188">Модифицируйте структуру пользовательского интерфейса на основе холста, используя четырехугольники, коллайдеры и текст TextMeshPro в качестве замены.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-188">Rebuild canvas-based UI with quads, colliders and TextMeshPro text instead</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="9a7a9-189">Тестирование приложения</span><span class="sxs-lookup"><span data-stu-id="9a7a9-189">Testing your application</span></span>

<span data-ttu-id="9a7a9-190">Теперь, когда компоненты и возможности HoloLens 2 доступны в MRTK версии 2, (начиная с версии [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1)), вы можете моделировать взаимодействие с помощью рук непосредственно в Unity и выполнять разработку с использованием новых интерфейсов API для реализации взаимодействия с помощью рук и отслеживания движения глаз.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-190">Now that HoloLens 2 components and capabilities are available in MRTK version 2, as of [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1), you can simulate the hand interactions directly in Unity, and develop against the new APIs for hand interactions and eye tracking.</span></span>  <span data-ttu-id="9a7a9-191">Для обеспечения оптимального взаимодействия требуется устройство HoloLens 2. Но для этого также нужно изучить возможности средств и документацию.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-191">The HoloLens 2 device is required to create a great experience, but at least one could start learning in the tools and documentation.</span></span> <span data-ttu-id="9a7a9-192">Кроме того, MRTK версии 2 поддерживает разработку для устройств HoloLens (1-го поколения). Таким образом, традиционные модели ввода (например, выбор элемента жестом касания) можно по-прежнему тестировать на устройствах HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-192">Further, MRTK v2 supports development on HoloLens (1st gen) and thus, traditional input models such as select via air-tap can still be tested on HoloLens (1st gen) devices.</span></span> 

## <a name="updating-interaction-model-for-hololens-2"></a><span data-ttu-id="9a7a9-193">Обновление модели взаимодействия для HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-193">Updating interaction model for HoloLens 2</span></span>

<span data-ttu-id="9a7a9-194">После переноса приложения и его подготовки для работы с HoloLens 2 можно приступить к обновлению модели взаимодействия и макетов или расположения голограммы.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-194">Once you have your app ported and prepped for HoloLens 2, you are ready to consider updating your interaction model and hologram designs/placement.</span></span>
<span data-ttu-id="9a7a9-195">В приложении, разработанном для HoloLens (1-го поколения), по всей вероятности, реализована модель взаимодействия с помощью направления взгляда с подтверждением. Она используется при взаимодействии с голограммами, расположенными на удалении, чтобы они могли поместиться в поле зрения.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-195">Coming from HoloLens (1st gen), your app likely has a gaze and commit interaction model, with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="9a7a9-196">Шаги по обновлению структуры приложения для максимальной адаптации к HoloLens 2:</span><span class="sxs-lookup"><span data-stu-id="9a7a9-196">Steps to update your app design to be best for HoloLens 2:</span></span>
1.  <span data-ttu-id="9a7a9-197">Компоненты MRTK. Если вы добавили MRTK версии 2, можно использовать различные компоненты и скрипты, которые разработаны и оптимизированы для HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-197">MRTK components: Per the pre-work, if you added MRTK v2, there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="9a7a9-198">Модель взаимодействия. Рекомендуется обновить модель взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-198">Interaction model: Consider updating your interaction model.</span></span>  <span data-ttu-id="9a7a9-199">В большинстве случаев мы рекомендуем перейти с модели взаимодействия с помощью взгляда с подтверждением на модель взаимодействия с помощью рук.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-199">For most scenarios, we recommend switching from gaze and commit to hands.</span></span>  <span data-ttu-id="9a7a9-200">Например, для голограмм, которые обычно оказываются за пределами досягаемости, будут использоваться лучи, указывающие на предмет при дальнем взаимодействии, и жесты захвата.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-200">With your holograms typically being out of arms reach, switching to hands will result in far interaction pointing rays and grab gestures.</span></span>
<span data-ttu-id="9a7a9-201">Примечание. В некоторых сценариях требуется модель взаимодействия без использования рук (например, если работник держит в руках инструмент). Для таких случаев предусмотрены специальные инструкции по разработке.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-201">Note: there are scenarios where a hands-free interaction model is required, such as a task worker holding tools, and there is specific design guidance for such cases.</span></span> 

3.  <span data-ttu-id="9a7a9-202">Расположение голограммы. Когда перейдете на модель взаимодействия с помощью рук, переместите некоторые голограммы ближе, используя жесты захвата, чтобы непосредственно взаимодействовать с ними руками.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-202">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with the holograms with your hands, using near interaction grab gestures.</span></span>  <span data-ttu-id="9a7a9-203">Мы рекомендуем переместить ближе такие типы голограмм: небольшие целевые меню, элементы управления, кнопки и небольшие голограммы, которые помещаются в поле зрения HoloLens 2 при захвате и рассмотрении голограммы.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-203">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="9a7a9-204">Все приложения и сценарии разные. Мы будем продолжать совершенствовать и публиковать рекомендации по разработке на основе отзывов и полученных знаний.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-204">Every app and scenario is different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-learnings-from-moving-apps-from-x86-to-arm"></a><span data-ttu-id="9a7a9-205">Дополнительные сведения о переходе приложений от 32-разрядных процессоров к ARM</span><span class="sxs-lookup"><span data-stu-id="9a7a9-205">Additional learnings from moving apps from x86 to ARM</span></span>

- <span data-ttu-id="9a7a9-206">Традиционные приложения Unity очень просты. Можно создать пакет приложений ARM или развернуть их на устройстве, и они сразу же будут выполняться.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-206">Straight Unity apps are simple as you can build an ARM appx bundle or deploy directly to the device and it runs.</span></span>
<span data-ttu-id="9a7a9-207">Сложности возникают, когда приложение Unity использует собственные подключаемые модули.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-207">The challenge comes when the Unity app uses native plugins.</span></span>  <span data-ttu-id="9a7a9-208">Все собственные подключаемые модули нужно обновить до Visual Studio 2017 и перестроить для ARM с помощью Unity 2019 (ARM64).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-208">All of the native plugins need to be upgraded to VS2017 and rebuilt for ARM, and with Unity 2019, ARM64.</span></span>

- <span data-ttu-id="9a7a9-209">Например, приложение использовало подключаемый модуль AudioKinetic Wwise для Unity, но в используемой версии не было подключаемого модуля ARM универсальной платформы Windows.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-209">One app, used the AudioKinetic Wwise plugin for Unity, and the version used didn’t have a UWP ARM plugin.</span></span> <span data-ttu-id="9a7a9-210">Чтобы адаптировать звуковые файлы в приложении для работы в ARM, потребовалось несколько дней.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-210">It took several days to re-work the sound in the application to work on ARM.</span></span>

- <span data-ttu-id="9a7a9-211">В других случаях требуемых подключаемых модулей UWP или ARM для приложения может не быть вообще, из-за чего приложение нельзя будет перенести и запустить на HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-211">In other cases, a UWP/ARM plugin may not exist for app-required plugins, blocking the ability to port and run on HoloLens 2.</span></span>  <span data-ttu-id="9a7a9-212">Возможно, потребуется обратиться к поставщику подключаемого модуля, чтобы устранить препятствия и обеспечить поддержку ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-212">Engagement with the plugin provider may be needed to unblock and support ARM.</span></span>

- <span data-ttu-id="9a7a9-213">Элементы minfloat (и варианты, такие как min16float, minint и т. д.) построителей текстуры могут по-разному действовать на HoloLens 2 и HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-213">The minfloat (and variants such as min16float, minint, etc…) in shaders may behave differently on HoloLen 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="9a7a9-214">Но при этом гарантируется, что по крайней мере будет использоваться указанное количество битов.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-214">Specifically, these guarantee that “at least the specified number of bits will be used”.</span></span> <span data-ttu-id="9a7a9-215">Графические процессоры Intel и Nvidia считаются 32-разрядными.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-215">On Intel/Nvidia GPUs, these are largely just treated as 32 bits.</span></span> <span data-ttu-id="9a7a9-216">В ARM будет использоваться фактическое количество битов.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-216">On ARM, the number of bits specified is actually respected.</span></span> <span data-ttu-id="9a7a9-217">Это означает, что на практике эти показатели будут менее точными или диапазон на HoloLens 2 будет меньше, чем на HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="9a7a9-217">That means that in practice, these numbers may have less precision/range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="9a7a9-218">Инструкции _asm не будут работать в ARM. Поэтому потребуется переписать все строки кода, где используются инструкции _asm.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-218">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions will have to be rewritten.</span></span>

- <span data-ttu-id="9a7a9-219">Набор инструкций SIMD не поддерживается в ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-219">The SIMD instruction set is not supported on ARM.</span></span> <span data-ttu-id="9a7a9-220">Это означает, что различные заголовки, такие как xmmintrin.h, emmintrin.h, tmmintrin.h и immintrin.h, недоступны в ARM.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-220">This means various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h are not available on ARM.</span></span>

- <span data-ttu-id="9a7a9-221">Компилятор построителя текстуры запускается в ARM во время первого вызова метода рисования после загрузки построителя текстуры или при изменении объекта, от которого зависит построитель, не во время его загрузки.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-221">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="9a7a9-222">Частота кадров будет существенно зависеть от количества компилируемых построителей текстуры.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-222">The impact on framerate can be very noticeable, depending on how many shaders need to be compiled.</span></span> <span data-ttu-id="9a7a9-223">Таким образом, способы обработки, упаковки и обновления построителей текстуры для HoloLens 2 и HoloLens (1-го поколения) будут разными.</span><span class="sxs-lookup"><span data-stu-id="9a7a9-223">This has various implications for how shaders should be handled/packaged/updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="9a7a9-224">См. также</span><span class="sxs-lookup"><span data-stu-id="9a7a9-224">See also</span></span>
* <span data-ttu-id="9a7a9-225">[Getting started with MRTK v2](mrtk-getting-started.md) (Начало работы с MRTK версии 2)</span><span class="sxs-lookup"><span data-stu-id="9a7a9-225">[Getting started with MRTK version 2](mrtk-getting-started.md)</span></span>
* [<span data-ttu-id="9a7a9-226">Практическое руководство по MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="9a7a9-226">MRTK Version 2 HowTo</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/External/HowTo/README.html)
* [<span data-ttu-id="9a7a9-227">Установка средств</span><span class="sxs-lookup"><span data-stu-id="9a7a9-227">Install the tools</span></span>](install-the-tools.md)
* [<span data-ttu-id="9a7a9-228">Рекомендуемые параметры для Unity</span><span class="sxs-lookup"><span data-stu-id="9a7a9-228">Recommended settings for Unity</span></span>](recommended-settings-for-unity.md)
* <span data-ttu-id="9a7a9-229">[Understanding performance for Mixed Reality](understanding-performance-for-mixed-reality.md) (Основные сведения о производительности для Смешанной реальности)</span><span class="sxs-lookup"><span data-stu-id="9a7a9-229">[Understanding performance for Mixed Reality](understanding-performance-for-mixed-reality.md)</span></span>

