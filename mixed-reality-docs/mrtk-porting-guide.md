---
title: Подготовка приложения к HoloLens 2
description: Предназначена для разработчиков, обладающих существующее приложение для HoloLens (1-го поколения) и/или старой MRTK и хотите порт MRTK версии 2 и HoloLens 2.
author: author:grbury
ms.author: grbury
ms.date: 04/12/19
ms.topic: article
keywords: Windows Mixed Reality, протестировать, MRTK, MRTK версии 2, HoloLens 2
ms.openlocfilehash: a5a329f69f5f9cc64666483adc92786ae8910b2f
ms.sourcegitcommit: 07773e094ace2e828e329bd55da759983be3b8c1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/15/2019
ms.locfileid: "59605286"
---
# <a name="getting-your-existing-app-ready-for-hololens-2"></a>Подготовка существующего приложения для HoloLens 2

В этом руководстве специально предназначено для разработчиков, имеющих имеющегося приложения Unity для HoloLens 1 свои приложения для нового устройства HoloLens 2. Существуют четыре основные действия по перенос приложения HoloLens 1 Unity для HoloLens 2. В следующих разделах подробно сведения для каждого этапа. 

| Шаг 1 | Шаг 2 | Шаг 3 | Шаг 4 |
|----------|-------------------|-------------------|-------------------|
| ![Логотип Visual Studio](images/visualstudio_logo.png) | ![Значок Unity](images/unity_logo.png)| ![Значок Unity](images/hololens2_icon.jpg) | ![Логотип MRTK](images/MRTKIcon.jpg) |
| Скачайте новейшие средства | Обновление проекта Unity | Компилировать для ARM | Перенос в MRTK v2

Это **настоятельно рекомендуется** , прежде чем начать процесс переноса, разработчики применяют систему управления версиями, чтобы сохранить моментальный снимок в исходное состояние своих приложений. Кроме того, мы рекомендуем *Сохранить* состояния контрольных точек в различных точках во время процесса. Он также может быть очень полезно иметь другой экземпляр Unity исходного приложения, чтобы разрешить для сравнения side-by-side во время процесса порт. 

> [!NOTE]
> Перед развертыванием, убедитесь, что установлены последние инструменты для разработки приложений Windows смешанной реальности. Для большинства разработчиков HoloLens это будет главным образом касаются обновление до последней Visual Studio 2017 и установки соответствующего пакета SDK Windows. Приведенное ниже содержимое углублюсь дальше в различных версий Unity и смешанной реальности набор средств версии 2.
>
> Дополнительные сведения см. в разделе [установить средства](install-the-tools.md).

## <a name="migrate-project-to-latest-version-of-unity"></a>Перенос проекта до последней версии Unity

Чтобы открыть его в последней версии Unity будет первым шагом к переносу приложения Unity. В настоящее время существует два варианта на выбор: Unity 2018.3.x или бета-версии 2019.1.x Unity. Существует несколько компромиссы между этими двумя версиями, но основное различие значимости является возможность компиляции для ARM64 в Unity 2019 +. 

Разработчикам следует оценить любой [зависимости подключаемого модуля](https://docs.unity3d.com/Manual/Plugins.html) , в настоящее время существует в проекте и ли эти библиотеки DLL могут быть нацелены на ARM64. Если подключаемый модуль жесткую зависимость не может быть построен для ARM64, один будет использовать Unity 2018 LTS. Перенос кода в ARM64 обычно требуется, если это возможно, имеется множество улучшений производительности, отображается на устройстве по сравнению с ARM32.

Кроме того смешанной реальности Toolkit V2 будет всегда гарантирует поддержку для Unity 2018 LTS, но не всегда гарантирует поддержку для каждой итерации Unity 2019.x+. 

| Unity 2018.3.x | Unity 2019.1 + |
|----------|-------------------|
| Поддержка сборки ARM32 | Поддержка build ARM32 и ARM64 |
| Стабильные LTS построения выпуска | Стабильность бета-версии |
| [Сценарии .NET серверной части](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *устарело* | [Сценарии .NET серверной части](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *удалены* |
| Сетевые подключения UNET *устарело* | Сетевые подключения UNET *удалены* |

## <a name="update-sceneproject-settings-in-unity"></a>Обновление параметров сцены и проектов в Unity

После обновления до Unity 2018.3.x или Unity 2019 +, рекомендуется обновить определенных параметров в Unity для получения оптимальных результатов на устройстве. Эти параметры описаны подробно в разделе  **[рекомендуемые параметры для Unity](Recommended-settings-for-Unity.md)**.

Он должен быть повторно итерации, [.NET сценариев серверной части](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) устарел в Unity 2018 и *удалены* в Unity 2019 г. и таким образом, разработчики должны серьезно рассматриваться переключение проекта [ IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html). 

> [!NOTE]
> IL2CPP сценариев серверной части может привести к увеличению времени сборки из Unity в Visual Studio и таким образом разработчики должны настроить их компьютере разработчика для [Оптимизация времени сборки IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).

После устранения критических изменений после перехода на обновленную версию Unity, разработчикам следует создать и протестировать текущие приложения на HoloLens (1-го поколения). Кроме того это хорошо подходит для создания и сохранения фиксации для системы управления версиями. 

## <a name="compile-dependenciesplugins-for-arm-processor"></a>Скомпилируйте зависимости и подключаемые модули для процессоров ARM

HoloLens (1-го поколения) выполнения приложений на x86 процессор, новое устройство HoloLens 2 использует процессор ARM. Таким образом существующие приложения должны переноситься по для поддержки ARM. Как отмечалось ранее, Unity 2018 поддерживает компиляцию для приложения ARM32, хотя Unity 2019 + поддерживает компиляцию для приложения ARM64. Разработка для ARM64 приложений рекомендуется как материала разницы в производительности. Тем не менее, это необходимо, чтобы все [зависимости подключаемого модуля](https://docs.unity3d.com/Manual/Plugins.html) также построения для ARM64. 

Просмотрите все зависимости библиотеки DLL в приложении в настоящее время. Если зависимость больше не используется, рекомендуется удалить его из проекта. Остальные подключаемые модули, которые необходимы прием соответствующих ARM32 и ARM64 двоичные файлы в проект Unity. 

После приема соответствующей библиотеки DLL, создание решения Visual Studio из Unity и последующей компиляции AppX для ARM в Visual Studio, чтобы проверить, что приложения могут создаваться для процессоров ARM. Это другой точки, где рекомендуется сохранить фиксации в системы управления версиями. 

## <a name="update-to-mrtk-version-2"></a>Обновление до MRTK версии 2

MRTK версии 2 — новый набор средств на основе Unity, поддержке обеих HoloLens (1-го поколения) и HoloLens 2 и где все новые возможности HoloLens 2 были добавлены, такие как передать взаимодействия и глаз отслеживания.

### <a name="prepare-for-the-migration"></a>Подготовка к миграции

Перед приема нового [*.unitypackage файлы для версии 2 MRTK](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), рекомендуется проводить инвентаризацию, **1) любой пользовательский код, который интегрируется с MRTK v1** и **2) любого пользовательского кода для ввода взаимодействия компонентов или компонентов UX**. Наиболее распространенные и преобладающими конфликт для приема новых v2 MRTK разработчик смешанной реальности потребует ввода и взаимодействия. Таким образом, рекомендуется начать чтение и понимание [модель ввода v2 MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).

И, наконец новые версии 2 MRTK перешло из модели сценариев и объекты в сцене диспетчера конфигурации и архитектура поставщика служб. Это приводит к иерархии и архитектура модели сцены чище, но требует постепенного обучения для понимания того, новые профили конфигурации. Таким образом, см. в статье [руководство по настройке для смешанной реальности Toolkit](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) приступить к ознакомлению с важные параметры и профили должны адаптировать для потребностей вашего приложения. 

### <a name="perform-the-migration"></a>Выполнение миграции

После импорта MRTK v2, проект Unity скорее всего будет многие ошибки, связанные с компилятором. Чаще всего это вызвано новую структуру пространства имен и имена новых компонентов. Перейдите к устранить эти ошибки, изменив сценарий так, чтобы новые пространства имен и компоненты. 

Дополнительные сведения о различиях API между HTK/MRTK и MRTK версии 2 см. руководство по переносу на [MRTK версии 2 вики-сайте](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).

### <a name="best-practices"></a>Рекомендации

- Предпочитать использовать стандартный MRTK шейдера
- Работа над одно критическое изменение типа за раз (например: IFocusable для IMixedRealityFocusHandler)
- Проверить после каждого изменения и использовать систему управления версиями
- По умолчанию UX MRTK (кнопок, портативные ПК, и т.д.) Если это возможно
- Попытаться воздержаться от изменения файлов MRTK напрямую, вместо создания программы-оболочки вокруг MRTK компонентов
    - Это защитит от будущих ingestions MRTK и обновления
- Просмотрите и изучите пример сцен в MRTK (особенно *HandInteractionExamples.scene*)
- Вместо этого перестроить пользовательского интерфейса на основе холста с четырехугольники, colliders и TextMeshPro текста

### <a name="testing-your-application"></a>Тестирование приложения

Теперь, когда HoloLens 2 компоненты и возможности доступны в MRTK версии 2, начиная с версии [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1), можно имитировать взаимодействия вручную непосредственно в Unity и разработка с использованием новых интерфейсов API для взаимодействия вручную и отслеживания.  Устройство HoloLens 2 необходима для создания удобной, но по крайней мере начать обучение в средства и документацию. Кроме того, MRTK версии 2 поддерживает разработку в HoloLens (1-го поколения) и таким образом, моделирует традиционных входные данные, такие как select через жест касания можно по-прежнему тестировать на HoloLens (1-го поколения) устройств. 

## <a name="updating-interaction-model-for-hololens-2"></a>Обновление модели взаимодействия для HoloLens 2

Когда приложение перенесена и Подготовив HoloLens 2, вы готовы подумайте над переработкой таких взаимодействия модели и голограмма макеты/размещения.
Поступающие от HoloLens (1-го поколения), приложение, скорее всего имеет модель взаимодействия взглядом и фиксации с голограммы относительно далеко, чтобы поместиться в поле зрения.

Действия, чтобы обновить проект приложения, чтобы наилучшим образом подходит для HoloLens 2:
1.  MRTK компоненты: В предварительной работы Если вы добавили MRTK v2, существуют различные компоненты/сценарии для использования, которые спроектирован и оптимизирован для HoloLens 2.

2.  Модель взаимодействия: Рекомендуется обновлять модель взаимодействия.  В большинстве случаев рекомендуется переключение с взглядом и фиксации в руки.  С вашей голограммы, обычно оказываются за руки достичь переключение на руках будет привести указывающего лучи дальней взаимодействия и взять жестов.
Примечание: существуют сценарии, где необходим модель взаимодействия без участия пользователя, например задачи рабочей роли, удерживающей средств и рекомендаций по разработке в таких случаях. 

3.  Голограмма размещение: После переключения на модель взаимодействия руки, перенесите некоторые голограммы ближе для непосредственного взаимодействия с голограммы с рук с помощью практически жесты захвата взаимодействия.  Типы голограммы рекомендуется приблизиться к непосредственно взять или взаимодействия являются маленьких целевых меню, элементы управления, кнопок и меньшего размера голограммы, которые помещаются в HoloLens 2 поле зрения после получения, а также проверять голограмма.
<br>
Все приложения и сценарии отличается, и мы будем продолжать уточнить и размещение конструктора рекомендации на основе отзывов и продолжение выводов, сделанных.


## <a name="additional-learnings-from-moving-apps-from-x86-to-arm"></a>Дополнительные знания из перенос приложений из x86 ARM

- Прямые приложений Unity просты, как можно создать комплект appx ARM или развернуть на устройстве, и он выполняется.
Проблема возникает, когда приложение Unity использует собственные подключаемые модули.  Все собственные подключаемые модули должны быть обновлены до Visual Studio 2017 и перестраивается для ARM, а также с помощью Unity 2019 г., ARM64.

- Одно приложение, используется подключаемый модуль AudioKinetic Wwise для Unity, а версия, используемая не подключаемый модуль ARM универсальной платформы Windows. Занимает несколько дней переделать звука в приложении для работы на ARM.

- В других случаях UWP/ARM подключаемый модуль не существует для приложения требуется подключаемых модулей, снижающие способности порт, и запустить на HoloLens 2.  Службы взаимодействия с поставщиком подключаемый модуль будет требоваться для разблокирования и поддержка ARM.

- Minfloat (и варианты, такие как min16float, minint, т. д.) в шейдеров может отличаться на 2 HoloLen, чем на HoloLens (1-го поколения). В частности, это гарантирует, что «по крайней мере указанное количество битов, которое будет использоваться». На Intel/Nvidia GPU они во многом так же считаются 32 бита. Количество битов, указанное на ARM, фактически учитывается. Это означает, что на практике эти числа могут иметь меньше точности или range для HoloLens 2 чем раньше — в HoloLens (1-го поколения).

- Инструкции _asm не отображаются для работы на ARM, это означает, что любой код, следуя инструкциям _asm придется переписать.

- Набор инструкций SIMD не поддерживается в ARM. Это означает различные заголовки, такие как файле xmmintrin.h, заголовочном файле emmintrin.h, tmmintrin.h и immintrin.h доступны не на ARM.

- Изменился компилятора шейдера на ARM выполняется во время первого вызова draw после шейдера было загружено или что-то шейдера зависит, не во время загрузки шейдера. Влияние на частоте кадров может быть очень заметно, в зависимости от того, как многие шейдеры необходимо скомпилировать. Это влияет на различные как шейдеры должно быть обработано или упакованы/обновления по-разному на виртуальном сервере HoloLens 2 HoloLens (1-го поколения).

## <a name="see-also"></a>См. также
* [Приступая к работе с MRTK версии 2](mrtk-getting-started.md)
* [Практическое руководство MRTK версии 2](https://microsoft.github.io/MixedRealityToolkit-Unity/External/HowTo/README.html)
* [Установка средств](install-the-tools.md)
* [Рекомендуемые параметры для Unity](recommended-settings-for-unity.md)
* [Основные сведения о производительности для смешанной реальности](understanding-performance-for-mixed-reality.md)

