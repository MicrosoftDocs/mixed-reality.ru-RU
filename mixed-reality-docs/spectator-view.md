---
title: Представление spectator
description: Визуализация голограммы с помощью внешнего устройства с точки зрения Демонстрация смешанной реальностью на внешнего дисплея или записи видео опыт смешанной реальности.
author: chrisfromwork
ms.author: chriba
ms.date: 02/11/2019
ms.topic: article
keywords: Представление spectator, iPhone, iOS, iPad, OpenCV, камеры, ARKit, HoloLens, смешанной реальности, MixedRealityToolkit, демонстрации, записей
ms.openlocfilehash: 77102cf5fb1c23f27f7f2d651c6ca1ae9df5a1d1
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/12/2019
ms.locfileid: "59602269"
---
# <a name="spectator-view-for-hololens"></a>Представление spectator для HoloLens

![Marker](images/SpecViewPhoneHero.jpg)


## <a name="current-refactor"></a>Текущий рефакторинга

> [!NOTE]
>Представление spectator для HoloLens активно оптимизируемого. Эта работа предназначена для консолидации предварительной версии и Pro базы кода и расширять поддержку для HoloLens 2. 

Для просмотра текущего состояния представления Spectator refactor см. в разделе «функция/spectatorView» ветви в репозитории MixedRealityToolkit и MixedRealityToolkit Unity:

https://github.com/Microsoft/MixedRealityToolkit-Unity/tree/feature/spectatorView/Assets/MixedRealityToolkit.Extensions/SpectatorView

и

https://github.com/Microsoft/MixedRealityToolkit/tree/feature/spectatorView/SpectatorViewPlugin

## <a name="overview"></a>Обзор

Когда носить HoloLens, мы часто забывают, пользователь, не является его не удалось чудеса, мы можем столкнуться. Представление spectator дает возможность другим пользователям см. в разделе на двумерном экране HoloLens пользователь видит в их мир.
Представление spectator (Предварительная версия) — по привлекательной цене подход к записи голограммы в формате HD, хотя Spectator представление Pro предназначена для профессионального качества запись голограммы.

Ниже приведены параметры и их возможности. Выберите вариант, который лучше всего соответствует вашим потребностям видеозапись.

|                                      | Представление spectator (Предварительная версия) |              Spectator просмотреть Pro              |
|--------------------------------------|:-----------------------:|:-------------------------------------------:|
| HD-качества                         |         Full HD         |        Профессионального качества, съемки (согласно DSLR)      |
| Перемещение камеры, легко                      |            ✔            |                                             |
| Представление третье лицо                    |            ✔            |                      ✔                      |
| Можно настроить потоковую передачу на экраны           |            ✔            |                      ✔                      |
| Переносимая                             |            ✔            |                                             |
| Беспроводная связь                             |            ✔            |                                             |
| Дополнительные необходимое оборудование         |     iPhone (или iPad)    | HoloLens + тестовой платформы + штатива + DSLR + ПК + Unity |
| Приобретения оборудования                  |           Низкий           |                     Высокий                    |
| Поддержка разных платформ                       |           iOS           |                                             |
| Средство просмотра можно взаимодействовать.                  |            ✔            |                                             |
| Сетей (UNET скрипты) |            ✔            |                      ✔                      |
| Длительность выполнения программы установки               |         Момент         |                     Поздний доступ                    |

## <a name="spectator-view-preview"></a>Представление spectator (Предварительная версия)

![Marker](images/SpecViewPhoneDemo.jpg)

### <a name="use-cases"></a>Варианты использования

- Съемки голограммы в формате HD: Используя представление Spectator (Предварительная версия), можно записывать смешанной реальностью, с помощью iPhone. Запись в full HD и применять сглаживание голограммы и даже тени. Это экономичный и быстрый способ видеозапись голограммы.
- Интерактивные демонстрации: Смешанная реальность с live Stream возможностей по работе с Apple TV непосредственно с помощью iPhone или iPad, без задержек!
- Отзыв с помощью гостевых систем: Пользователи не HoloLens могут возникнуть голограммы прямо из своих смартфоны и планшеты.

### <a name="current-features"></a>Актуальные функции

- Сети автоматического обнаружения для добавления телефонов в сеанс.
- Обработка автоматического сеанса, поэтому пользователи добавляются в правильный сеанс.
- Пространственные синхронизация голограммы, чтобы каждый пользователь будет видеть голограммы точное одинаково.
- Поддержка iOS (устройств с поддержкой ARKit).
- Несколько гостевых iOS.
- Запись видео + голограммы + окружения звук + голограмма звук.
- Используют таблицы стилей, поэтому можно сохранить видео, отправить его по электронной почте или предоставить другие вспомогательные приложения.


>[!NOTE] 
>Код представления Spectator (Предварительная версия) не может использоваться с Spectator представление Pro код версии. Мы рекомендуем реализовать его в новых проектах, где требуется видеозапись голограммы.

<br>

>[!VIDEO https://www.youtube.com/embed/3fXlPw_FGLg]


### <a name="licenses"></a>Лицензии

- [OpenCV - (лицензия BSD предложение 3)](https://opencv.org/license.html)
- [ARKit Unity - (лицензии MIT)](https://bitbucket.org/Unity-Technologies/unity-arkit-plugin/src/3691df77caca2095d632c5e72ff4ffa68ced111f/LICENSES/MIT_LICENSE?at=default&fileviewer=file-view-default)

## <a name="how-to-set-up-spectator-view-preview"></a>Как настроить представление Spectator (Предварительная версия)

### <a name="requirements"></a>Требования

- [Подключаемый модуль представление spectator и необходимые двоичные файлы OpenCV](https://github.com/Microsoft/MixedRealityToolkit/tree/master/SpectatorViewPlugin) -сведения о создании собственного подключаемого модуля Spectator представления см. ниже. Из созданные двоичные файлы вам потребуется:

    - opencv_aruco343.dll
    - opencv_calib3d343.dll
    - opencv_core343.dll
    - opencv_features2d343.dll
    - opencv_flann343.dll
    - opencv_imgproc343.dll

    - zlib1.dll
    - SpectatorViewPlugin.dll
- Представление spectator использует сетевые подключения Unity (UNET) для его обнаружения сетевых ресурсов и пространственных синхронизации. Это означает, что все интерактивные возможности во время применения необходимо синхронизировать между устройствами.
- Unity 2017.2.1p2 или более поздней версии
- Оборудование
    - HoloLens
    - ПК Windows, под управлением Windows 10
    - Совместимое устройство ARKit (iPhone версии 6s и выше / iPad Pro 2016 и более поздних версий / iPad 2017 и более поздние версии) — под управлением iOS 11 или более поздней версии
    - Компьютер Mac с xcode 9.2 и более поздних версий
- Учетная запись разработчика Apple, бесплатной или [платные](https://developer.apple.com/)
- Microsoft Visual Studio 2017

### <a name="building-the-spectator-view-native-plugin"></a>Создание собственного подключаемого модуля представление Spectator

Чтобы создать требуемые файлы, выполните следующие действия. https://github.com/Microsoft/MixedRealityToolkit/blob/master/SpectatorViewPlugin/README.md

### <a name="project-setup"></a>Настройка проекта

1. Подготовка в сцену, убедитесь, что все видит объекты gameobject в сценах содержащиеся в разделе gameobject корневой мира.

    ![Корневой World](images/SpecViewPhoneWorldRoot2.PNG)

2. Добавить SpectatorView prefab ([Assets/HoloToolkit-Preview/SpectatorView/Prefabs/SpectatorView.prefab](https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/htk_release/Assets/HoloToolkit-Preview/SpectatorView/Prefabs/SpectatorView.prefab)) в в сцену.
3. Добавить SpectatorViewNetworking prefab ([Assets/HoloToolkit-Preview/SpectatorView/Prefabs/SpectatorViewNetworking.prefab](https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/htk_release/Assets/HoloToolkit-Preview/SpectatorView/Prefabs/SpectatorViewNetworking.prefab)) в в сцену.
4. Выберите SpectatorViewNetworking gameobject и SpectatorViewNetworkingManager компонента, есть несколько вещей, которые можно связать вверх. Если слева нетронутым этот компонент будет искать необходимые скрипты во время выполнения.
    - Маркер обнаружения HoloLens SpectatorView/Hololens/MarkerDetection, "->"
    - Маркер поколения 3D -> SpectatorView/IPhone/SyncMarker/3DMarker

    ![SpectatorView сетевого обнаружения](images/SpecViewPhoneNetworkDiscovery.PNG)

### <a name="networking-your-app"></a>Сетевые приложения

- Представление spectator использует UNET для его работы в сети и управляет всеми подключениями клиентом узла для вас.
- Все данные конкретного приложения должен быть синхронизирован и реализуется автоматически, используя, например SyncVars, NetworkTransform, NetworkBehavior.
- Дополнительные сведения о сети Unity см. на [многопользовательскую и сетевые](https://docs.unity3d.com/Manual/UNet.html). (Примечание: Является устаревшим UNet; текущий рефакторинга базы кода Spectator представление будет решить эту проблему)

### <a name="building-for-each-platform-hololens-or-ios"></a>Создание продукта для каждой платформы (HoloLens или iOS)

- При построении для iOS, убедитесь, что удалить компонент GLTF MRTK, так как это еще не совместим с этой платформой.
- На верхнем уровне SpectatorView prefab имеется компонент, который называется «Платформа переключателя». Выберите платформу, для которой нужно выполнить сборку.
    - При выборе параметра «Hololens» вы увидите все объекты gameobject под gameobject iPhone в prefab SpectatorView, становятся неактивными и все объекты gameobject в разделе «Hololens» станет активным.
    - Это может занять некоторое время в зависимости от платформы, выберите HoloToolkit, добавляется или удаляется из проекта.

    ![Платформа переключателя](images/SpecViewPhoneSwitcher.PNG)

- Убедитесь, что построение всех версий приложения, использующего тот же экземпляр редактора Unity (сборки закрывать Unity между) из-за неразрешенных проблема с помощью Unity.

### <a name="running-your-app"></a>Выполнение приложений

Когда вы создали и развернули версию приложения на iPhone и HoloLens, можно подключить их.

1. Убедитесь, что оба устройства находятся в той же сети Wi-Fi.
2. Запустите приложение на обоих устройствах, в любом порядке. Процесс запуска приложения на устройстве iPhone должна активировать камеры HoloLens и начать фото.
3. Сразу же после запуска приложения iPhone, он будет искать поверхности, такие как этажах или таблицы. При обнаружении областей, вы увидите, что маркер, аналогичное приведенному ниже. Показать этот маркер для HoloLens.

    ![Marker](images/SpecViewPhoneMarker.PNG)

4. После обнаружения маркер с HoloLens должно исчезнуть, и оба устройства следует подключен и пространственно синхронизированы.

### <a name="recording-video"></a>Запись видео

1. Чтобы записать и сохранить видео из iPhone, нажмите и удерживайте экрана 1 секунды. Откроется меню записи.
2. Коснитесь кнопки записи красного цвета, будет запущен обратный отсчет до начала операции записи на экране.
3. Для завершения записи нажмите и удерживайте экрана другой 1 секунды, затем нажмите кнопку остановки.
4. После загрузки записи, появится кнопка предварительного просмотра (синяя кнопка), коснитесь, чтобы просмотреть записанные видео.
5. Откройте страницу общей папки и выберите Сохранить камеры.

### <a name="example-scene"></a>Пример сцены

Пример сцены можно найти в [HoloToolkit-Examples\SpectatorView\Scenes\SpectatorViewExample.unity](https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/htk_release/Assets/HoloToolkit-Examples/SpectatorView/Scenes/SpectatorViewExample.unity)

### <a name="troubleshooting"></a>Устранение неполадок

**Редактор Unity не будет подключаться к сеансу, расположенных на устройство HoloLens**

- Это может быть брандмауэр Windows.
- Перейдите к параметрам брандмауэра Windows.
- Разрешить запуск программы или компонента через брандмауэр Windows.
- Для всех экземпляров из редактора Unity в список делений, домена, общедоступной и частной.
- Затем вернитесь к параметрам брандмауэра Windows.
- Выберите дополнительные параметры.
- Выберите правила для входящих подключений.
- Все экземпляры из редактора Unity должен иметь зеленая галочка.
- Для любых экземпляров из редактора Unity, у которых нет зеленая галочка:
    - Дважды щелкните его.
    - В диалоговом окне действия выберите Разрешить подключение.
    - Нажмите кнопку "ОК".
    - Перезапустите редактора Unity.

**Во время выполнения экране iPhone, появится сообщение «Поиск Floor...» но не содержит маркер AR.**

- Горизонтальная область таким образом подведите указатель камеры iPhone сторону ближайшее снизу целое или таблицу искомой iPhone. Это поможет найти поверхности, необходимые для пространственно синхронизации с HoloLens ARKit.

**HoloLens камера не включается автоматически при iPhone пытается присоединить.**

- Убедитесь, что HoloLens и iPhone выполняются в той же сети Wi-Fi.

**При запуске приложения Spectator представление на мобильном устройстве, другие hololens под управлением других Spectator Просмотр приложений включить их камеры**

- Оператор GoTo NewDeviceDiscovery компонента и изменить порт два уникальных значений, ключ вещания и широковещательной передачи.
- Перейдите к SpectatorViewDiscovery и измените широковещательных ключ и порт широковещательной передачи в другой набор уникальные номера.

**HoloLens не будет подключаться с mac редактора Unity.**

- Это известная проблема, которую можно связать до версии Unity. Сборки для iPhone должно по-прежнему работать и связывать в обычном режиме.

**HoloLens камеры включает, но не удалось проверить маркер.**

- Убедитесь в том, построении всех версий приложения, используя один и тот же экземпляр редактора Unity (сборки закрывать Unity между поддерживают). Это из-за неизвестной проблемы, с помощью Unity.

## <a name="spectator-view-pro"></a>Spectator просмотреть Pro

![Просмотр настройки spectator](images/spectatorview-300px.png)

Использование Spectator представление Pro включает четыре компонента:
1. Приложение, созданное специально для того, чтобы включить spectator представление, основанное на [общего опыта в смешанной реальности](shared-experiences-in-mixed-reality.md).
2. Пользователь, то HoloLens, с помощью приложения.
3. Spectator представления камеры тестовой платформе предоставлять видео третье лицо перспективы.
4. Настольных ПК под управлением приложения опытом и композиции голограммы в видео spectator представления.

![Настройка представления Pro spectator](images/hololensspectatorview-500px.jpg) 

### <a name="use-cases"></a>Варианты использования

>[!VIDEO https://www.youtube.com/embed/DgIHjxoPy_c]


*Spectator представление можно использовать для совместного использования свои творения holographic, будь то образ будет по-прежнему видеоклипа и проведена Демонстрация.*


Существует три ключевых сценариев, которые подходят для этой технологии.

**1. Фотосъемки**<br>
С помощью этой технологии, вы можете собирать из вашей голограммы изображения с высоким разрешением. Эти образы можно использовать для демонстрации содержимое в маркетинговых события отправки потенциальным клиентам и даже отправить приложение Windows Store. Вы сможете решить, какая камера фотографии, вы бы хотели использовать для создания этих образов, таким образом вы можете предпочесть камеры DSLR качества.


![Spectator представление Pro photo записи пример](images/fall-350px.jpg)<br>
*Пример записи фото -, чтобы он отображался в условиях состоит из lava.*


**2. Видеозаписи**<br>
Видеоролики — лучше всего представить данные о том, механизм совместного использования возможности holographic приложение для множества людей. Представление spectator позволяет выбрать камера, группы связанных элементов и формирования пакетов, которые наиболее подходящего способа Продемонстрируйте свое приложение. Он помещает вам контролировать качество видео на основе видео оборудования достаточно.

![Представление Pro видеозаписи пример spectator](images/spectatorviewvideo.gif)<br>
*Пример записи видео: запись смешанной реальности совместной работы.*


**3. Демонстрации в реальном времени**<br>
Представление spectator является предпочтительным подходом для демонстрации в реальном времени, как положение камеры остается стабильным или управляемой. Так как вы можете использовать камеры видео высокого качества, можно также составлять высококачественных изображений, предназначенная для больших экрана. Это также применимо для потоковой передачи интерактивных демонстраций на экране, возможно участникам Безотложная очередь ожидания в строке.

### <a name="comparing-video-capture-techniques"></a>Сравнение методов видеозаписи

[Смешанный захвата реальности](mixed-reality-capture.md) (MRC) предоставляет видео составного HoloLens пользователь видеть от первого лица точки зрения. Представление spectator создает видео с точки зрения третье лицо, позволяя видео наблюдателю см. в разделе с голограммы и пользователя, то устройство HoloLens. Так как у вас есть выбор камеры, spectator представления также позволяет создавать более высокого разрешения и повышения качества изображения, чем встроенной камеры HoloLens, используются для образов MRC. По этой причине spectator представление больше подходит для изображений приложения в Windows Store, маркетинг видео, или для проецирования динамического представления для аудитории.

![Профессиональные камеры с представления Pro spectator используется в презентации Билла Microsoft](images/spectator-view-professional-red-camera-300px.jpg)<br>
*Профессиональные камеры с представления Pro spectator используется в презентации Билла Microsoft*


Spectator было важной частью как Microsoft HoloLens представлены возможности для аудитории с самого начала при продукта было объявлено в января 2015 г. Профессиональные программу установки, используемую было высокие требования к производительности и дорого тега цена, для работы с ним. Например камеры использует сигнала genlock для обеспечения точного хронометража, который координирует с HoloLens, отслеживания системы. В этом случае перемещение камеры spectator представление можно было сохраняя голограммы стабильной в соответствии с опыт человек, который вызывает интерфейс непосредственно в HoloLens.

Открытая версия представления spectator поступается возможность переместить камеру тестовой платформы, чтобы значительно сократить расходы на общей настройки. Этот проект использует внешние камеры, строго, подключенных к HoloLens делать фотографии высокой четкости и видео holographic проекта Unity. **Во время демонстрации в реальном времени камеры должны оставаться это Фиксированная позиция.** Перемещение камеры может привести к дрожание голограмма или о смещении. Это обусловлено тем временем кадра видео и отрисовку голограммы на ПК не могут быть синхронизированы точно. Таким образом, сохранение камеры постоянными или ограничивая перемещение вы получите результат близко к person, то HoloLens, которые можно увидеть.

Приложение для подготовки к spectator представление, необходимо построить [общего качества](holograms-240.md) приложение и убедитесь, приложение можно запускать на HoloLens как на рабочий стол в редакторе Unity. Настольная версия приложения будет иметь дополнительные компоненты, созданные в веб-канал видео с отображаемой голограммы составное.

## <a name="how-to-set-up-spectator-view-pro"></a>Как настроить Spectator представление Pro 

### <a name="requirements"></a>Требования

![Spectator Pro представление тестовой платформы.](images/spectatorviewrig-350px.jpg)

#### <a name="hardware-shopping-list"></a>Список покупок оборудования

Ниже приведен список рекомендуемых оборудования, но можно поэкспериментировать с другими совместимых устройств слишком. 

|Компонент оборудования                                                                     |Рекомендации               | 
|:--------------------------------------------------------------------------------------|:----------------------------|
|Конфигурации ПК, которая подходит для разработки holographic с помощью эмулятора HoloLens  |                              | 
|Камеры с HDMI out или фотосъемки SDK                                             | Для фотографии и видеозаписи, мы тестировали [Canon EOS 5D III Марк](https://www.amazon.com/Canon-Frame-Full-HD-Digital-Camera/dp/B007FGYZFI/ref=sr_1_3?s=photo&ie=UTF8&qid=1480537693&sr=1-3&keywords=Canon+5D+Mark+III) камеры. Для демонстрации в реальном времени, мы тестировали [Blackmagic разработки производственного камеры 4K](https://www.amazon.com/Blackmagic-Design-Production-Camera-Mount/dp/B00CWLSHYG/ref=sr_1_1?s=photo&ie=UTF8&qid=1480537790&sr=1-1&keywords=blackmagic+design+production+camera+4k).<br><br>Обратите внимание, что какой-нибудь фотоаппарат с HDMI out (например GoPro) должны работать. Многие из наших видео используют [колонки II USM очень широкий угол Fixed Canon EF 14 мм f/2.8 L](https://www.amazon.com/Canon-Ultra-Wide-Angle-Digital-Cameras/dp/B000V5P94Q), но вам следует выбрать линзу камеры, соответствующий вашим потребностям. | 
|Записать карты для ПК для получения цвет рамки с камеры калибровка тестовой платформы и предварительный просмотр составных сцены |  Мы тестировали [Blackmagic разработки интенсивность Pro 4K видеозахвата](https://www.amazon.com/dp/B00U3QNP7Q). | 
|Кабели                                                                                 |  [HDMI для Mini HDMI](https://www.amazon.com/AmazonBasics-High-Speed-Mini-HDMI-HDMI-Cable/dp/B014I8UHXE?ie=UTF8&psc=1&redirect=true&ref_=oh_aui_detailpage_o03_s00) присоединения камеры к вашей записи карты. Убедитесь, что приобрести конструктивного HDMI, которая подходит для камеры. (GoPro, к примеру, выводит через [Micro HDMI](https://www.amazon.com/dp/B014I8U33I/ref=twister_B0198TA40O?_encoding=UTF8&psc=1).)<br><br>[Кабель HDMI](https://www.amazon.com/dp/B014I8TC4E/ref=twister_B016I3XG0S?_encoding=UTF8&th=1) для просмотра веб-канала в предварительной версии монитора или телевизор составного | 
|Машинам aluminum скобку, чтобы подключиться к HoloLens к камере. | [Aluminum скобка](https://github.com/Microsoft/MixedRealityCompanionKit/blob/master/LegacySpectatorView/Hardware/HoloLens_Mount.stp)   | 
|Трехмерной печати адаптер для подключения к hotshoe камеры подключения HoloLens.| [Адаптер трехмерной печати](https://github.com/Microsoft/MixedRealityCompanionKit/blob/master/LegacySpectatorView/Hardware/Mount_Adapter.stl)  | 
|Подключите адаптер hotshoe Hotshoe крепления                                       |  [Крепление Hotshoe](https://www.amazon.com/Fotasy-SCX2-Adapter-Premier-Cleaning/dp/B00HPAPFNU/ref=redir_mobile_desktop?ie=UTF8&psc=1&ref_=yo_ii_img) | 
|Различные nuts, сит и средства                                                |  [1/4-20" nuts](https://www.amazon.com/Hillman-Group-150003-20-Inch-100-Pack/dp/B000BPEPNW/ref=redir_mobile_desktop?ie=UTF8&psc=1&ref_=yo_ii_img)<br>[1/4-20 "x 3/4" сит](https://www.amazon.com/Hard-Find-Fastener-014973100032-4-20-Inch/dp/B004S6RZPK/ref=redir_mobile_desktop?ie=UTF8&psc=1&ref_=yo_ii_img) <br>[Драйвер сироп 7/16](https://www.amazon.com/Klein-Tools-630-7-Cushion-Grip-Hollow-Shank/dp/B000BPG4CW/ref=sr_1_1?ie=UTF8&qid=1479853212&sr=8-1)<br>[T15 Torx](https://www.amazon.com/Stanley-60-011-Standard-Torx-Screwdriver/dp/B000KFXDWW/ref=sr_1_1?ie=UTF8&qid=1479853303&sr=8-1)<br>[T7 Torx](https://www.amazon.com/SE-7542ST-6-Piece-Professional-Screwdriver/dp/B000ST3K3W/ref=sr_1_1?ie=UTF8&qid=1479853479&sr=8-1) | 

#### <a name="software-components"></a>Программные компоненты

1. Загрузить программное обеспечение с [проекта GitHub для представления spectator](https://github.com/Microsoft/HoloLensCompanionKit/tree/master/SpectatorView).
2. [Blackmagic видеозахвата SDK](https://www.blackmagicdesign.com/support). \
 Поиск рабочего стола видео разработчика пакета SDK в «Последняя загрузка».
3. [Видео среды выполнения рабочего стола Blackmagic](https://www.blackmagicdesign.com/support). \
 Поиск для обновления по для настольных компьютеров видео в «Последние файлы для загрузки». \
 Убедитесь, совпадений номера версии в версии пакета SDK.
4. [OpenCV 3.1](https://opencv.org/releases.html) для калибровки или видеозаписи без карты записи Blackmagic.
5. [Пакет SDK Canon](https://www.usa.canon.com/internet/portal/us/home/explore/solutions-services/digital-camera-sdk-information) (необязательно). \
 Если вы используете Canon камеры и иметь доступ к пакету SDK Canon, можно tether камеры к Компьютеру, чтобы воспользоваться изображения с высоким разрешением.
6. Unity для разработки приложений holographic. \
 Поддерживаемые версии можно найти в проекте OSS.
7. Visual Studio 2015 с последними обновлениями.

### <a name="building-your-own-spectator-view-pro-camera"></a>Построение Spectator представление Pro камеры

**ОБРАТИТЕ ВНИМАНИЕ, ЧТО &AMP; ЗАЯВЛЕНИЕ ОБ ОТКАЗЕ:** При внесении изменений в оборудование HoloLens (включая, помимо прочего, настройка вашей HoloLens для «представление spectator»), основные меры безопасности нужно всегда наблюдать. Прочитайте все инструкции и руководство пользователя перед внесением изменений. Это необходимо, выполните все инструкции и средства, как указано выше. Вы приобрели или лицензии вашей HoloLens с ограниченной гарантии или никаких гарантий. См. в статье соответствующие [HoloLens лицензионное соглашение и условия использования и розничную торговлю](https://www.microsoft.com/hololens/support/warranty) чтобы понять возможные варианты гарантии.

<br>

>[!VIDEO https://www.youtube.com/embed/aKX8UMejtWc]

#### <a name="rig-assembly"></a>Сборки тестовой платформы

![Собранный Spectator представление Pro платформы с HoloLens и DSLR камеры.](images/assembly.gif)<br>
*Собранный Spectator представление Pro тестовой платформы с HoloLens и DSLR камеры*


* Чтобы удалить headband из HoloLens с помощью T7. Если свободный винты, ли их с скрепки от другой стороны.
* Предельной суммы винт внутри Передняя сторона ингрированной HoloLens с небольшой плоская отвертка.
* Удаляемый сита небольшой torx из HoloLens скобку, чтобы удалить вашего пользователя с помощью T15 и форме ловушка вложения.
* Поместите HoloLens в квадратных скобках, совместив отверстия предоставляемого отверстие внутри ингрированной с изменяется на передней панели квадратная скобка. HoloLens оружию должны храниться в месте с ПИН-кодов в нижней части квадратная скобка.
* Восстановить подключение, вы и форме ловушка вложений для защиты HoloLens в квадратных скобках.
* Присоедините крепление hotshoe hotshoe камеры.
* Подключите адаптер подключения к hotshoe fastener.
* Поворот адаптера, поэтому стороне узкий направлена вперед и параллельного объектива.
* Защита адаптера на месте с помощью сироп 1/4", с помощью драйвера сироп 7/16.
* Расположите скобка от адаптера, так в начале HoloLens ингрированной бы как можно ближе к началу объектива.
* Подключите квадратная скобка 4 1/4" основы с помощью драйвера сироп 7/16.

#### <a name="pc-setup"></a>Настройка ПК
* Установите программное обеспечение из раздела компоненты программного обеспечения.
* Добавьте карту записи открытым разъем PCIe системной платы.
* Подключите кабель HDMI с камеры в внешнего слот HDMI (HDMI-In) на карточке записи.
* Подключите кабель HDMI из слота HDMI center (HDMI масштабируемые) на карточке записи к монитору дополнительным данным предварительного просмотра.

#### <a name="camera-setup"></a>Настройка камеры
* Измените камеры в режим видео, чтобы он выводит полным разрешением 1920 x 1080, а не обрезанное разрешение photo 3:4.
* Найти параметры HDMI камеры и включить **зеркальное отображение** или **двумя мониторами**.
* Значение с выходным разрешением 1080P.
* Отключить **Live представление на экране** поэтому любой экран наложений не отображаются в составную веб-канала.
* Включите камеры **интерактивное представление**.
* При использовании **Canon SDK** и хотели бы использовать единое flash, отключите **автоматической прокрутить LV**.
* Подключите кабель HDMI от камеры в внешнего слот HDMI (HDMI-In) на карточке записи.

#### <a name="calibration"></a>Калибровки

После настройки тестовой платформы spectator представление, должны калибровка для получения смещение положения и поворота камеры для вашей HoloLens.
* Откройте решение Visual Studio калибровки в Calibration\Calibration.sln.
* В этом решении вы найдете dependencies.props файл, который создает макросы для расположений inc сторонних источников сторона.
* Обновлять этот файл с расположением установки OpenCV 3.1, Blackmagic пакета SDK и пакет SDK Canon (если применимо)

![Моментальный снимок расположений зависимостей в Visual Studio](images/dependencies-600px.png)<br>
*Моментальный снимок расположений зависимостей в Visual Studio*


* Распечатать шаблоне калибровки Calibration\CalibrationPatterns\2_66_grid_FULL.png на плоскую поверхность жесткая.
* Подключите компьютер к HoloLens по USB.
* Обновление определения препроцессора **HOLOLENS_USER** и **HOLOLENS_PW** в **stdafx.h** с портала учетные данные устройства к HoloLens.
* Подключите камеры с вашей карты записи над HDMI и включить его.
* Запустите решение калибровки.
* Переместите в виде шахматной вокруг представление следующим образом:

![Калибровка Spectator представление Pro тестовой платформы](images/calibration.gif)<br>
*Калибровка Spectator представление Pro тестовой платформы*


* Изображение будет автоматически открываться при в представлении как шахматная доска. Прежде чем перейти к следующей поза найдите белый свет на ингрированной HoloLens.
* По окончании нажмите **ввод** с калибровки приложение находится в фокусе, чтобы создать **CalibrationData.txt** файла.
* Этот файл будет сохранен в **Documents\CalibrationFiles\CalibrationData.txt**
* Проверьте этот файл, является ли точность данных калибровки:
   * **DSLR RMS** должно быть близким к 0.
   * **HoloLens RMS** должно быть близким к 0.
   * **Стерео RMS** может быть 20-50, это приемлемо, так как поле зрения между двумя камеры могут отличаться.
   * **Перевод** является расстояние от камеры HoloLens до вложенного объектива. Это в метрах.
   * **Поворот** должна быть близка к идентификации.
   * **DSLR_fov** значение y должно быть близким к вертикальное поле зрения, ожидаемого от группы связанных элементов фокусное и любой фактор, обрезка текста камеры.
* Если любой из указанных выше значений не имеет смысла, повторной калибровки.
* Скопировать этот файл **активы** каталог в проекте Unity.

### <a name="compositor"></a>Компоновщик

Компоновщиком является расширение Unity, который запускается как окно в редакторе Unity. Для этого решения компоновщиком Visual Studio сначала необходимо выполнить сборку.
* Откройте решение Visual Studio компоновщиком в Compositor\Compositor.sln
* Обновите dependencies.props из решения калибровки выше таким же образом. Если вы следовали инструкциям калибровки, этот файл будет уже были обновлены.
* Постройте все решение как выпуска и архитектуры, которая соответствует вашей версии Unity архитектуры. Если вы сомневаетесь, создавайте x86 и x64.
* Если производится построение решения для x64, также построение проекта SpatialPerceptionHelper как x86, так как он будет выполняться HoloLens.
* Закройте Unity, если оно выполняется приложение. Unity должен быть запущен повторно, если библиотеки DLL изменяются во время выполнения.
* Запустите Compositor\CopyDLL.cmd для копирования библиотек DLL, созданная из этого решения для своего проекта Unity. Этот скрипт скопирует включен пример проекта библиотеки DLL. При наличии собственных проектов, с помощью аргумента командной строки, указывающий на каталог проекта активы для копирования также можно запустить CopyDLL.
* Запустите пример приложения Unity.

### <a name="unity-app"></a>Приложения Unity

Компоновщиком выполняется как окно в редакторе Unity. Включен пример проекта содержит все настроено работала с представлением spectator после компоновщиком копируются библиотеки DLL.

Представление spectator требуется приложение для работы в качестве [общего качества](holograms-240.md). Это означает, что изменения состояния приложения, которые происходят на HoloLens нужно обновить приложение, работающее в Unity слишком в сеть.

Если запускается из проекта Unity, необходимо сначала выполнить некоторые настройки:
* Копировать **средств и надстроек/HolographicCameraRig** из образца проекта в проект.
* Добавьте последнюю MixedRealityToolkit в проект, включая **доступ**, **csc.rsp**, **gmcs.rsp**, и **smcs.rsp**.
* Добавить к **CalibrationData.txt** файл в каталог ресурсов.

![Моментальный снимок каталог средств Unity](images/files-400px.png)

* Добавить **HolographicCameraRig\Prefabs\SpectatorViewManager** prefab в сцену и заполните поля:
   * **HolographicCameraManager** должен быть заполнен prefab HolographicCameraManager из каталога HolographicCameraRig prefab.
   * **Привязки** должен быть заполнен prefab привязки из каталога HolographicCameraRig prefab.
   * **Совместное использование** должен быть заполнен prefab общий доступ из MixedRealityToolkit.
   * Примечание. Если любой из этих prefabs уже существует в иерархии проекта, существующий prefabs будет использоваться вместо этих из них.
   * **IP-адрес представления spectator** должен быть IP-адресом вашего HoloLens, подключенный к тестовой платформы spectator представления.
   * **Общий доступ к IP-адрес службы** должен быть IP-адресом MixedRealityToolkit SharingService работы компьютера.
   * Дополнительно При наличии нескольких spectator просмотра платформ, подключенные к нескольким ПК пользователя, **локальный IP-адрес компьютера** следует задавать с тестовой платформы представление spectator будут обмениваться данными с ПК.

![Диспетчер представлений spectator свойства в Unity](images/spectatorviewmanager-500px.png)

* Запуск MixedRealityToolkit **службы совместного использования**
* Создавайте и развертывайте приложения, как UWP D3D для HoloLens прикрепить к тестовой платформы spectator представления.
* Развертывание приложения в любых других устройств HoloLens в интерфейсе.
* Проверьте **выполнение в фоновых** флажок **параметры/проигрывателя, изменить проект**.

![Выполняется настройка фона в Unity](images/run-in-bg-400px.png)
* Откройте окно компоновщиком в разделе **Spectator представления/компоновщиком**

![Представление композитор для представления spectator в Unity](images/compositor-500px.png)

* Это окно позволяет:
   * Начать запись видео
   * Сделать фотографию
   * Изменение непрозрачности голограмма
   * Изменение смещения кадров (которая изменяет цвет отметка времени для учетной записи для записи карты задержки)
   * Откройте каталог, в котором данные сохраняются в
   * Пространственное сопоставление данные запроса от представления камеры spectator (если SpatialMappingManager существует в проекте)
   * Визуализация сцены составное представление, а также цвета, голограммы и альфа-канал по отдельности.
   * Включите камеры.
   * Нажмите кнопку воспроизведения в Unity.
   * При перемещении камеры голограммы в Unity должно быть, где они находятся в реальном мире по отношению к веб-канала цвета камеры.

## <a name="see-also"></a>См. также

* [Захват смешанной реальности](mixed-reality-capture.md) 
* [Смешанный реальности записи для разработчиков](mixed-reality-capture-for-developers.md)
* [Общие возможности в смешанной реальности](shared-experiences-in-mixed-reality.md)
* [Код spectator представления (Предварительная версия) на сайте GitHub](https://github.com/Microsoft/MixedRealityToolkit-Unity/tree/htk_release/Assets/HoloToolkit-Preview/SpectatorView)
* [Машинный код spectator представления (Предварительная версия) на сайте GitHub](https://github.com/Microsoft/MixedRealityToolkit/tree/master/SpectatorViewPlugin)
* [Spectator Pro представления кода на GitHub](https://github.com/Microsoft/HoloLensCompanionKit/tree/master/SpectatorView)
