---
title: Руководства по портированию приложений
description: Шаг за шагом Пошаговое руководство, описывающее, как перенести существующее приложение в Windows Mixed Reality иммерсивных.
author: ChimeraScorn
ms.author: cwhite
ms.date: 10/02/2018
ms.topic: article
keywords: порт, перенос, unity, по промежуточного слоя, механизм, универсальной платформы Windows
ms.openlocfilehash: a4a8c78f1c45fd8e3b85a767d139bae9f67540e0
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/12/2019
ms.locfileid: "59602179"
---
# <a name="porting-guides"></a>Руководства по портированию приложений

> [!NOTE]
> Дополнительные рекомендации, относящиеся к HoloLens 2 [ожидается в ближайшее время](index.md#news-and-notes).

Windows 10 включает поддержку для иммерсивных и holographic гарнитуры напрямую. Если вы создавали содержимое для другого устройства, например Oculus Rift или HTC Vive, они имеют зависимости от библиотек, которые существуют выше API платформы операционной системы. Переносить существующее содержимое в Windows Mixed Reality включает в себя целевой платформы для использования этих других пакетов SDK для API-интерфейсов Windows. [API платформы Windows для смешанной реальности](https://docs.microsoft.com/uwp/api/Windows.Perception) работают только в модели приложения универсальной платформы Windows (UWP). Поэтому если приложение еще не создана для универсальной платформы Windows, перенос кода в UWP будет частью процесс переноса.

## <a name="porting-overview"></a>Общие сведения о переносе

На высоком уровне ниже приведены шаги по переносу существующего содержимого.
1. **Убедитесь, что ваш компьютер работает под управлением Windows 10 Fall Creators Update (16299).** Больше не рекомендуется получение предварительной версии сборки из кольца Insider Skip вперед, так как эти сборки не будет наиболее стабильной для смешанной реальности разработки.
2. **Обновление до последней версии картинки или игровое ядро.** Игровых движков, необходимых для работы на пакет SDK для Windows 10 версией 10.0.15063.0 (выпущенной в апреле 2017 г.) или более поздней версии.
3. **Обновите все по промежуточного слоя, подключаемые модули или компонентов.** Если приложение содержит компоненты, рекомендуется выполнить обновление до последней версии. Более новые версии наиболее распространенные модули имеют поддержку универсальной платформы Windows.
4. **Удаление зависимостей от повторяющихся пакетов SDK**. В зависимости от содержимого целевое устройство, необходимо удалить или условной компиляции, что данный пакет SDK (например SteamVR) вместо позволяет разрабатывать API-интерфейсов Windows.
5. **Проработать проблем сборки.** На этом этапе переноса упражнения относится только к ваше приложение, модуль и зависимости компонентов, к которым у вас есть.

## <a name="common-porting-steps"></a>Общие шаги по переносу

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a>Общий шаг 1. Убедитесь, что у вас есть разработки оборудования

[Установить средства](install-the-tools.md#for-immersive-vr-headset-development) странице перечислены рекомендуемые разработки оборудования.

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a>Общий шаг 2. Обновление до последней полета Windows 10

Платформа Windows Mixed Reality является по-прежнему активно разрабатывается и для наибольшей эффективности, рекомендуется во время полета «Windows Insider Fast». Чтобы получить доступ к windows рейсов, необходимо будет [присоединиться к программе предварительной оценки Windows](https://insider.windows.com/).
1. Установка [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)
2. [Присоединяйтесь к](https://insider.windows.com/) программе предварительной оценки Windows.
3. Включить [режим разработчика.](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)
4. Переключиться в режим [Windows Insider Fast рейсы](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) через параметры--> обновление & раздел безопасности

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio"></a>Общий шаг 3. Обновление до последней сборки Visual Studio
* См. в разделе [установить средства](install-the-tools.md#installation-checklist) страницы в Visual Studio 2017

### <a name="common-step-4-be-ready-for-the-store"></a>Общий шаг 4. Готовность к Store
* Используйте [комплект сертификации приложений для Windows](https://developer.microsoft.com/windows/develop/app-certification-kit) (также называемые WACK) часто и заранее!
* Используйте [анализатор переносимости](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([загрузить](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))

### <a name="common-step-5-choose-the-correct-adapter"></a>Общий шаг 5. Выберите правильный адаптер
* В системах, таких как записные книжки с двумя GPU [предназначенных для соответствующего адаптера](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications). Это относится к приложения Unity, в дополнение к собственным приложениям DirectX, в которой создается ID3D11Device, явно или неявно (Media Foundation) для своих функций.

## <a name="unity-porting-guidance"></a>Руководством по переносу Unity

### <a name="unity-step-1-follow-the-common-porting-steps"></a>Unity шаг 1. Выполните эти шаги переноса

Ответьте на все эти шаги. В шаге #3 выберите **Разработка игр на платформе Unity** рабочей нагрузки. Может отменить выбор дополнительный компонент редактора Unity, так как вы будете производить установку более новой версии Unity приведенные ниже инструкции.

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a>Unity шаг 2. Обновление до последней общедоступной сборки Unity с поддержкой Windows MR
1. Загрузите последнюю версию [рекомендуется публичное построение Unity,](install-the-tools.md) со смешанной реальности поддержки.
2. Сохранить копию проекта перед началом работы
3. Просмотрите [документации](https://docs.unity3d.com/Manual/UpgradeGuides.html) доступны из Unity на перенос.
4. Выполните [инструкции](https://docs.unity3d.com/Manual/APIUpdater.html) на сайте Unity для использования их автоматического обновления API
5. Проверьте, есть ли дополнительные изменения, которые необходимо учитывать, чтобы получить проекта, запущенного и работать через все остальные ошибки и предупреждения. Примечание. При наличии по промежуточного слоя, зависит, может потребоваться обновление этого по промежуточного слоя, чтобы приступить к работе (Дополнительные сведения на шаге 3 ниже).

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a>Unity шаг 3. Обновление до последней версии, по промежуточного слоя

С никакие обновления Unity есть шанс, что вам нужно обновить один или несколько пакетов по промежуточного слоя, от которых зависит игры или приложения. Кроме того что при последней версии всех по промежуточного слоя увеличит ваш вероятности успеха в дальнейшем в процессе переноса. Многие пакеты по промежуточного слоя недавно добавили поддержку для универсальной платформы Windows (UWP) и обновление до последних версий можно использовать эту работу.

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a>Unity шаг 4. Целевые приложения для запуска на универсальную платформу Windows (UWP)

После установки этих средств, необходимо получить приложение работает как приложение универсальной Windows.
* Выполните [подробные шаг за шагом пройти](https://unity3d.com/partners/microsoft/porting-guides) предоставляемым Unity. Обратите внимание на то, что вы должны оставаться на последний выпуск LTS (любой выпуск 20xx.4) для Windows MR.
* Дополнительные ресурсы для разработки UWP, взгляните на [руководство по разработке игр для Windows 10](https://docs.microsoft.com/windows/uwp/gaming/e2e).
* Обратите внимание, что Unity продолжает совершенствовать IL2CPP поддержки; IL2CPP делает некоторые UWP порты значительно проще. Если вы используете в настоящее время сценариев серверной части .net, следует подумать о преобразовании вместо этого использовать IL2CPP серверной части.

Примечание. Если приложение не зависит от определенных служб устройств, например совпадение, в результате отправки ими поток данных, необходимо отключить их в этом шаге. В дальнейшем вы можете подключать к эквивалентное службам, предоставляемым Windows.

### <a name="unity-step-5-deprecated"></a>Unity шаг 5. (Устарело)

Шаг 5 больше не требуется. Мы оставив его здесь, чтобы индексирование действия остается неизменным.

### <a name="unity-step-6-get-your-windows-mixed-reality-hardware-set-up"></a>Unity шаг 6. Получить настройки оборудования Windows Mixed Reality
1. Просмотрите шаги [Иммерсивных гарнитура установки](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)
2. Дополнительные сведения о [использования симулятора Windows Mixed Reality](using-the-windows-mixed-reality-simulator.md) и [перемещение Домашняя страница Windows Mixed Reality](navigating-the-windows-mixed-reality-home.md)

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a>Unity шаг 7. Целевые приложения под управлением Windows Mixed Reality
1. Во-первых необходимо удалить или любые другие библиотеки поддержки относящиеся к конкретному VR пакета SDK для условной компиляции. Эти ресурсы часто меняться, параметров и свойств в проекте одним из способов, которые несовместимы с другими пакетами SDK виртуальной Реальности, таких как Windows Mixed Reality.
    * Например если проект ссылается на пакет SDK SteamVR, необходимо будет обновить проект, чтобы исключить эти prefabs и вызовы API из сценариев, при экспорте для целевого объекта сборки Windows Store.
    * Конкретные действия по условию, за исключением других пакетов SDK VR ожидается в ближайшее время.
2. В проекте Unity [целевой пакет SDK для Windows 10](holograms-100.md#target-windows-10-sdk)
3. Для каждой сцены [Настройка камеры](holograms-100.md#chapter-2---setup-the-camera)

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a>Unity шаг 8. Использование рабочей области для размещения содержимого на ближайшее снизу целое

Вы можете разрабатывать интерфейсы смешанной реальности для широкий спектр [возникнуть шкал](coordinate-systems.md).

Если вы переносите **сидели высококлассные возможности**, необходимо убедиться, присваивается Unity **стационарные** отслеживания тип пространства:

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

Этот параметр задает Unity мировая система координат для отслеживания [стационарной системой отсчета координат](coordinate-systems.md#spatial-coordinate-systems). В режиме отслеживания неподвижным, содержимое помещено в редакторе перед камерой расположение по умолчанию (вперед -Z) будет отображаться перед пользователем, при запуске приложения. Для центровку пользователь сидели origin, вы можете вызвать Unity [XR. InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) метод.

Если вы переносите **положение высококлассные возможности** или **комнаты высококлассные возможности**, размещено содержимое относительно ближайшее снизу целое. Обсуждения пользователя floor с помощью  **[пространственных этап](coordinate-systems.md#spatial-coordinate-systems)**, который представляет пользователя определенные полу источника и границ необязательно комнаты, заданный во время первого запуска. Эти возможности, необходимо обеспечить Unity присваивается **RoomScale** отслеживания тип пространства. Несмотря на то значение по умолчанию RoomScale, необходимо явно задать и убедитесь, что вы получаете обратно значение равно true, для перехвата ситуациях, где пользователь переместил свои компьютеры от места их калибровки:

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

После приложения успешно задает RoomScale, отслеживания тип пространства, содержимого уделено y = 0, плоскость появятся в ближайшее снизу целое. Исходный объект на (0, 0, 0) будет определенное место в процессе установки, где пользователь стояли во время установки комнате с -Z, представляющая вперед, которые они были с выходом во время установки.

В коде скрипта можно вызов метода TryGetGeometry на вы будете типа UnityEngine.Experimental.XR.Boundary многоугольника границ, задание типа TrackedArea границ. Если определяемый пользователем границе (можно вернуть список вершин), вы знаете, безопасно доставлять **комнаты высококлассные возможности** для пользователя, где они могут помочь вокруг сцены создать.

Обратите внимание на то, система автоматически будет отображать границу пользователя приближается к его. Приложения не нужно использовать для подготовки к просмотру самой границе этого многоугольника.

Дополнительные сведения см. в разделе [системами координат в Unity](coordinate-systems-in-unity.md) страницы.

Некоторые приложения используют прямоугольник, чтобы ограничить их взаимодействие. Извлечение вписанным самый большой прямоугольник не поддерживается напрямую в API универсальной платформы Windows или Unity. В примере кода связана с ниже показаны способы поиска прямоугольник в пределах границ трассировки. Эвристический алгоритм на основе, поэтому не может найти оптимальное решение, однако результаты, обычно соответствуют ожиданиям. Чтобы найти более точные результаты за счет время обработки, можно оптимизировать параметров в алгоритме. Алгоритм — в вилке, использующий MRTP версии Unity 5.6 предварительной версии набора средств смешанной реальности. Это не является общедоступным. Код должен быть напрямую использовать в версиях Unity 2017.2 и более поздних версий. Код будет перенести в текущем MRTK в ближайшем будущем.

[ZIP-файл кода на GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) важных файлов:
* Assets/HoloToolkit/Stage/Scripts/StageManager.cs - пример использования
* Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - реализацию алгоритма
* Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - тривиальные теста алгоритма

Пример результатов:

![Пример результата](images/largestrectangle-400px.jpg)

Алгоритм основан на блог по Smilkov Дэниэл: [Самый большой прямоугольник в экземпляре polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)

### <a name="unity-step-9-work-through-your-input-model"></a>Unity шаг 9. Изучить представленные в модели входных данных

Каждой игры и приложения, предназначенные для существующих HMD будет иметь набор входных данных, которые он обрабатывает, типы входных данных, которые ему необходимы для работы и интерфейсах, которые он вызывает для получения этих входных данных. Мы вложили средства в попытке сделать ее как простыми и понятными — это позволит воспользоваться преимуществами входных данных, доступных в Windows Mixed Reality.
1. Прочтите **[ввода, руководство по для Unity переносу](input-porting-guide-for-unity.md)** Дополнительные сведения о Windows Mixed Reality предоставляет входные данные, и рассматривается их сопоставление какие приложения могут сделать уже сегодня.
2. Выберите ли вы собираетесь использовать API ввода кросс VR-SDK Unity или MR конкретного ввода API. Общие API-интерфейсы Input.GetButton/Input.GetAxis используемых приложений виртуальной Реальности в Unity для [ввода Oculus](https://docs.unity3d.com/Manual/OculusControllers.html) и [OpenVR ввода](https://docs.unity3d.com/Manual/OpenVRControllers.html). Если ваши приложения уже используют эти API-интерфейсы для контроллеров движения, это самый простой способ — следует просто необходимо переназначить осей в диспетчере ввода и кнопки.
    * Можно получить доступ к данным контроллера движения в Unity, с помощью либо API UnityEngine.XR.WSA.Input MR конкретных или общих Input.GetButton/Input.GetAxis кросс VR-SDK API-интерфейсы. (ранее в пространстве имен UnityEngine.XR.WSA.Input в Unity 5.6)
    * См. в разделе [пример в наборе средств](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) , объединяющее контроллеры игровой и перемещения.

### <a name="unity-step-10-performance-testing-and-tuning"></a>Unity шаг 10. Тестирование производительности и настройке

Windows Mixed Reality будет использовать их на широкого класса устройств, от высокой завершения игры ПК, вниз, чтобы широкий рынок массовым ПК. В зависимости от того, какие вы ориентируетесь на рынке имеется значительная разница в доступных вычислительных ресурсов и графики бюджеты для вашего приложения. Во время этого упражнения переноса, скорее всего, используя ПК категории "премиум" и вы значительные бюджеты вычислительных ресурсов и графики доступны в приложение. Если вы хотите сделать приложение доступным для широкой аудитории, следует проверить и профилирования приложения на [репрезентативной оборудования, что вы хотите, чтобы целевой объект](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).

Оба [Unity](https://docs.unity3d.com/Manual/Profiler.html) и [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) включают в себя средства профилирования производительности и оба [Microsoft](understanding-performance-for-mixed-reality.md) и [Intel](https://software.intel.com/articles/vr-content-developer-guide) публикации рекомендации на Профилирование производительности и оптимизации. Есть обширный о производительности в [основные сведения о производительности для смешанной реальности](understanding-performance-for-mixed-reality.md). Кроме того, существуют определенные сведения для Unity в разделе [рекомендации по производительности для Unity](performance-recommendations-for-unity.md).

## <a name="see-also"></a>См. также
* [Руководство по для Unity переносу входных данных](input-porting-guide-for-unity.md)
* [Windows Mixed Reality минимальное ПК совместимости рекомендаций по оборудованию](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [Основные сведения о производительности для смешанной реальности](understanding-performance-for-mixed-reality.md)
* [Рекомендации по производительности для Unity](performance-recommendations-for-unity.md)
* [Добавление поддержки Xbox Live в Unity для универсальной платформы Windows](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
