---
title: Руководства по переносу
description: Пошаговое руководство, объясняющее, как перенести существующее иммерсивное приложение на Windows Mixed Reality.
author: JBrentJ
ms.author: alexturn
ms.date: 07/07/2020
ms.topic: article
keywords: порт, перенос, Unity, по промежуточного слоя, ядро, UWP
ms.openlocfilehash: 5cf66ce857806ab6fcf8c94b94c7a9a540339b97
ms.sourcegitcommit: fef42e2908e49822f2d13b05d2f9260bf0d72158
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2020
ms.locfileid: "86061157"
---
# <a name="porting-guides"></a><span data-ttu-id="58f5c-104">Руководства по переносу</span><span class="sxs-lookup"><span data-stu-id="58f5c-104">Porting guides</span></span>

## <a name="overview"></a><span data-ttu-id="58f5c-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="58f5c-105">Overview</span></span>

<span data-ttu-id="58f5c-106">Windows 10 включает прямую поддержку для впечатляющих и holographic головных телефонов.</span><span class="sxs-lookup"><span data-stu-id="58f5c-106">Windows 10 includes direct support for immersive and holographic headsets.</span></span> <span data-ttu-id="58f5c-107">Если вы создали содержимое для других устройств, например Окулус Рифт или HTC Naopak, они имеют зависимости от библиотек, существующих над API платформы операционной системы.</span><span class="sxs-lookup"><span data-stu-id="58f5c-107">If you've built content for other devices, such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="58f5c-108">Внедрение существующего содержимого в Windows Mixed Reality предполагает изменение целевой платформы на использование этих пакетов SDK для интерфейсов Windows API.</span><span class="sxs-lookup"><span data-stu-id="58f5c-108">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="58f5c-109">[Интерфейсы API платформы Windows для смешанной реальности](https://docs.microsoft.com/uwp/api/Windows.Perception) работают с моделью приложения Windows x86 и универсальная платформа Windows (UWP).</span><span class="sxs-lookup"><span data-stu-id="58f5c-109">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) work with both the Windows x86 and the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="58f5c-110">Если ваше приложение еще не создано для UWP, переход на UWP станет частью процесса переноса.</span><span class="sxs-lookup"><span data-stu-id="58f5c-110">If your app isn't already built for UWP, changing over to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="58f5c-111">Общие сведения о переносе</span><span class="sxs-lookup"><span data-stu-id="58f5c-111">Porting overview</span></span>

<span data-ttu-id="58f5c-112">На высоком уровне следующие шаги участвуют в переносе существующего содержимого:</span><span class="sxs-lookup"><span data-stu-id="58f5c-112">At a high level, the following steps are involved in porting existing content:</span></span>
1. <span data-ttu-id="58f5c-113">**Убедитесь, что на компьютере работает обновление Windows 10 Creators Update (16299).**</span><span class="sxs-lookup"><span data-stu-id="58f5c-113">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="58f5c-114">Мы больше не рекомендуем получать предварительные сборки от программы предварительной оценки, так как эти сборки не будут самыми стабильными при разработке смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="58f5c-114">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="58f5c-115">**Обновите версию графического или игрового модуля до последней версии.**</span><span class="sxs-lookup"><span data-stu-id="58f5c-115">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="58f5c-116">Обработчики игр должны поддерживать версию пакета SDK для Windows 10 10.0.15063.0 (выпущена в апреле 2017) или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="58f5c-116">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="58f5c-117">**Обновите любое промежуточное по, подключаемые модули или компоненты.**</span><span class="sxs-lookup"><span data-stu-id="58f5c-117">**Upgrade any middleware, plug-ins, or components.**</span></span> <span data-ttu-id="58f5c-118">Если приложение содержит какие-либо компоненты, рекомендуется выполнить обновление до последней версии.</span><span class="sxs-lookup"><span data-stu-id="58f5c-118">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="58f5c-119">Более новые версии наиболее распространенных подключаемых модулей имеют поддержку UWP.</span><span class="sxs-lookup"><span data-stu-id="58f5c-119">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="58f5c-120">**Удалите зависимости от повторяющихся пакетов SDK**.</span><span class="sxs-lookup"><span data-stu-id="58f5c-120">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="58f5c-121">В зависимости от устройства, для которого предназначено содержимое, необходимо удалить или условно откомпилировать этот пакет SDK (например, Стеамвр), чтобы вместо этого можно было ориентироваться на API Windows.</span><span class="sxs-lookup"><span data-stu-id="58f5c-121">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (for example, SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="58f5c-122">**Работа с проблемами сборки.**</span><span class="sxs-lookup"><span data-stu-id="58f5c-122">**Work through build issues.**</span></span> <span data-ttu-id="58f5c-123">На этом этапе упражнение по переносу зависит от вашего приложения, подсистемы и зависимостей компонентов.</span><span class="sxs-lookup"><span data-stu-id="58f5c-123">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="58f5c-124">Общие этапы переноса</span><span class="sxs-lookup"><span data-stu-id="58f5c-124">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="58f5c-125">Общий шаг 1. Убедитесь, что у вас есть правильное оборудование для разработки</span><span class="sxs-lookup"><span data-stu-id="58f5c-125">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="58f5c-126">На странице [Установка средств](install-the-tools.md#for-immersive-vr-headset-development) перечислены рекомендуемые средства разработки.</span><span class="sxs-lookup"><span data-stu-id="58f5c-126">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="58f5c-127">Общий шаг 2. обновление до последнего рейса Windows 10</span><span class="sxs-lookup"><span data-stu-id="58f5c-127">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="58f5c-128">Платформа Windows Mixed Reality все еще находится под активной разработкой.</span><span class="sxs-lookup"><span data-stu-id="58f5c-128">The Windows Mixed Reality platform is still under active development.</span></span> <span data-ttu-id="58f5c-129">Мы рекомендуем [присоединиться к программе предварительной](https://insider.windows.com/) оценки Windows, чтобы получить доступ к рейсу о быстром выпуске Windows.</span><span class="sxs-lookup"><span data-stu-id="58f5c-129">We recommend [joining the Windows Insider Program](https://insider.windows.com/) to access the "Windows Insider Fast" flight.</span></span>
1. <span data-ttu-id="58f5c-130">Установка [обновления Windows 10 для дизайнеров](https://www.microsoft.com/software-download/windows10)</span><span class="sxs-lookup"><span data-stu-id="58f5c-130">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="58f5c-131">[Присоединяйтесь](https://insider.windows.com/) к программе предварительной оценки Windows.</span><span class="sxs-lookup"><span data-stu-id="58f5c-131">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="58f5c-132">Включить [режим разработчика](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span><span class="sxs-lookup"><span data-stu-id="58f5c-132">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="58f5c-133">Переключиться на [быстрые авиарейсы по Windows](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) с помощью **параметров > Update & Security Section**</span><span class="sxs-lookup"><span data-stu-id="58f5c-133">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through **Settings > Update & Security Section**</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio-uwp-only"></a><span data-ttu-id="58f5c-134">Общий шаг 3. обновление до последней сборки Visual Studio (только UWP)</span><span class="sxs-lookup"><span data-stu-id="58f5c-134">Common step 3: Upgrade to the most recent build of Visual Studio (UWP only)</span></span>
* <span data-ttu-id="58f5c-135">См. раздел [Установка средств на](install-the-tools.md#installation-checklist) странице Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="58f5c-135">See [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2019</span></span>

### <a name="common-step-4-be-ready-for-the-store-uwp-only"></a><span data-ttu-id="58f5c-136">Общий шаг 4. Будьте готовы к работе с магазином (только UWP)</span><span class="sxs-lookup"><span data-stu-id="58f5c-136">Common step 4: Be Ready for The Store (UWP only)</span></span>
* <span data-ttu-id="58f5c-137">Используйте [Комплект сертификации приложений Windows](https://developer.microsoft.com/windows/develop/app-certification-kit) (также известный как wack) на ранних этапах и часто.</span><span class="sxs-lookup"><span data-stu-id="58f5c-137">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (also known as WACK) early and often!</span></span>
* <span data-ttu-id="58f5c-138">Использовать [анализатор переносимости](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Загрузка](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span><span class="sxs-lookup"><span data-stu-id="58f5c-138">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="58f5c-139">Общий шаг 5. Выбор подходящего адаптера</span><span class="sxs-lookup"><span data-stu-id="58f5c-139">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="58f5c-140">В таких системах, как записные книжки с двумя графическими процессорами, следует [выбрать правильный адаптер](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span><span class="sxs-lookup"><span data-stu-id="58f5c-140">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="58f5c-141">Это относится к Unity и собственным приложениям DirectX, где ID3D11Device создается явно или неявно (Media Foundation) для своей функциональности.</span><span class="sxs-lookup"><span data-stu-id="58f5c-141">This applies to Unity and native DirectX apps where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="58f5c-142">Руководство по переносу Unity</span><span class="sxs-lookup"><span data-stu-id="58f5c-142">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="58f5c-143">Unity шаг 1. Выполните общие действия по переносу</span><span class="sxs-lookup"><span data-stu-id="58f5c-143">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="58f5c-144">Выполните все общие действия.</span><span class="sxs-lookup"><span data-stu-id="58f5c-144">Follow all of the common steps.</span></span> <span data-ttu-id="58f5c-145">На шаге #3 выберите рабочую нагрузку **Разработка игр с помощью Unity** .</span><span class="sxs-lookup"><span data-stu-id="58f5c-145">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="58f5c-146">Вы можете отменить выбор дополнительного компонента редактора Unity, так как вы будете устанавливать более новую версию Unity из приведенных ниже инструкций.</span><span class="sxs-lookup"><span data-stu-id="58f5c-146">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="58f5c-147">Unity шаг 2. обновление до последней общедоступной сборки Unity с поддержкой Windows MR</span><span class="sxs-lookup"><span data-stu-id="58f5c-147">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="58f5c-148">Скачайте последнюю [рекомендуемую общедоступную сборку Unity](install-the-tools.md) с поддержкой смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="58f5c-148">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="58f5c-149">Сохраните копию проекта, прежде чем приступить к работе</span><span class="sxs-lookup"><span data-stu-id="58f5c-149">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="58f5c-150">Ознакомьтесь с [документацией](https://docs.unity3d.com/Manual/UpgradeGuides.html) , доступной в Unity при переносе.</span><span class="sxs-lookup"><span data-stu-id="58f5c-150">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="58f5c-151">Следуйте [инструкциям](https://docs.unity3d.com/Manual/APIUpdater.html) на сайте Unity для использования автоматических средств обновления API.</span><span class="sxs-lookup"><span data-stu-id="58f5c-151">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="58f5c-152">Проверьте, есть ли дополнительные изменения, необходимые для запуска проекта, и выполните все оставшиеся ошибки и предупреждения.</span><span class="sxs-lookup"><span data-stu-id="58f5c-152">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> 

> [!Note] 
> <span data-ttu-id="58f5c-153">Если по промежуточного слоя от вас зависит, убедитесь, что вы используете последний выпуск (Дополнительные сведения см. на шаге 3 ниже).</span><span class="sxs-lookup"><span data-stu-id="58f5c-153">If you have middleware that you depend on, check that you're using the latest release (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="58f5c-154">Unity шаг 3. обновление по промежуточного слоя до последних версий</span><span class="sxs-lookup"><span data-stu-id="58f5c-154">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="58f5c-155">При любом обновлении Unity есть хороший шанс, что вам потребуется обновить один или несколько пакетов по промежуточного слоя, от которых зависит ваша игра или приложение.</span><span class="sxs-lookup"><span data-stu-id="58f5c-155">With any Unity update, there's a good chance that you'll need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="58f5c-156">Кроме того, обновление по промежуточного слоя повышает вероятность успеха на протяжении всего процесса переноса.</span><span class="sxs-lookup"><span data-stu-id="58f5c-156">Additionally, being up to date with the latest middleware increases the likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="58f5c-157">Многие пакеты по промежуточного слоя недавно добавили поддержку универсальная платформа Windows (UWP), а обновление до последних версий позволит вам использовать эту работу.</span><span class="sxs-lookup"><span data-stu-id="58f5c-157">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="58f5c-158">Unity шаг 4. Настройка приложения для запуска на универсальная платформа Windows (UWP)</span><span class="sxs-lookup"><span data-stu-id="58f5c-158">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="58f5c-159">Если вы используете платформу Windows x86, можно пропустить этот шаг и перейти к шагу 5.</span><span class="sxs-lookup"><span data-stu-id="58f5c-159">If you're targeting Windows x86, you can skip this step and continue to step 5.</span></span>

<span data-ttu-id="58f5c-160">После установки средств необходимо запустить приложение в качестве универсального приложения Windows.</span><span class="sxs-lookup"><span data-stu-id="58f5c-160">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>

* <span data-ttu-id="58f5c-161">Выполните [подробное](https://unity3d.com/partners/microsoft/porting-guides) пошаговое руководство, предоставляемое Unity.</span><span class="sxs-lookup"><span data-stu-id="58f5c-161">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="58f5c-162">Вы должны остаться в последнем выпуске LTS (любой выпуск 20xx. 4) для Windows MR.</span><span class="sxs-lookup"><span data-stu-id="58f5c-162">You should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="58f5c-163">Для получения дополнительных ресурсов по разработке UWP ознакомьтесь с руководством по [разработке игр для Windows 10](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span><span class="sxs-lookup"><span data-stu-id="58f5c-163">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>

> [!NOTE]
> <span data-ttu-id="58f5c-164">Unity продолжит улучшать поддержку IL2CPP; IL2CPP упрощает работу с некоторыми портами UWP.</span><span class="sxs-lookup"><span data-stu-id="58f5c-164">Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports easier.</span></span> <span data-ttu-id="58f5c-165">Если в настоящее время используется серверная часть сценариев .NET, следует рассмотреть возможность преобразования, чтобы использовать серверную часть IL2CPP.</span><span class="sxs-lookup"><span data-stu-id="58f5c-165">If you are currently targeting the .NET scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

* <span data-ttu-id="58f5c-166">Вы можете пропустить пункт "Unity Step 5", так как вы намерены ориентироваться на платформу UWP вместо x86.</span><span class="sxs-lookup"><span data-stu-id="58f5c-166">You can skip "Unity step 5" since you're targeting UWP instead of x86.</span></span>

> [!NOTE] 
> <span data-ttu-id="58f5c-167">Если приложение имеет какие-либо зависимости от служб для конкретных устройств, таких как сопоставление из Steam, необходимо отключить их на этом шаге.</span><span class="sxs-lookup"><span data-stu-id="58f5c-167">If your application has any dependencies on device-specific services, such as match making from Steam, you'll need to disable them at this step.</span></span> <span data-ttu-id="58f5c-168">Вы можете подключиться к эквивалентным службам, которые Windows предоставляет позже.</span><span class="sxs-lookup"><span data-stu-id="58f5c-168">You can hook up to the equivalent services that Windows provides later on.</span></span>

### <a name="unity-step-5-target-your-application-to-run-on-windows-x86"></a><span data-ttu-id="58f5c-169">Unity шаг 5. Настройка приложения для запуска в Windows x86</span><span class="sxs-lookup"><span data-stu-id="58f5c-169">Unity step 5: Target your application to run on Windows x86</span></span>

<span data-ttu-id="58f5c-170">Изнутри приложения Unity:</span><span class="sxs-lookup"><span data-stu-id="58f5c-170">From inside your Unity application:</span></span>

* <span data-ttu-id="58f5c-171">Выберите файл-> параметры сборки</span><span class="sxs-lookup"><span data-stu-id="58f5c-171">Navigate to File -> Build Settings</span></span>
* <span data-ttu-id="58f5c-172">Выберите "компьютер, Mac, автономная версия Linux"</span><span class="sxs-lookup"><span data-stu-id="58f5c-172">Select "PC, Mac, Linux Standalone"</span></span>
* <span data-ttu-id="58f5c-173">Задать целевую платформу "Windows"</span><span class="sxs-lookup"><span data-stu-id="58f5c-173">Set target platform to "Windows"</span></span>
* <span data-ttu-id="58f5c-174">Установка архитектуры "x86" выберите параметр "платформа"</span><span class="sxs-lookup"><span data-stu-id="58f5c-174">Set architecture to "x86" Select "Switch Platform"</span></span>


### <a name="unity-step-6-setup-your-windows-mixed-reality-hardware"></a><span data-ttu-id="58f5c-175">Unity шаг 6. Настройка оборудования Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="58f5c-175">Unity step 6: Setup your Windows Mixed Reality hardware</span></span>
1. <span data-ttu-id="58f5c-176">Ознакомьтесь с этапами [настройки иммерсивного головного телефона](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span><span class="sxs-lookup"><span data-stu-id="58f5c-176">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="58f5c-177">Узнайте об [использовании симулятора Windows Mixed Reality](using-the-windows-mixed-reality-simulator.md) и [навигации на домашней странице Windows Mixed Reality](navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="58f5c-177">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="58f5c-178">Unity шаг 7. Настройка приложения для запуска в Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="58f5c-178">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="58f5c-179">Во-первых, необходимо удалить или условно откомпилировать любую другую поддержку библиотеки, относящуюся к конкретному пакету SDK для VR.</span><span class="sxs-lookup"><span data-stu-id="58f5c-179">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="58f5c-180">Эти активы часто изменяют параметры и свойства проекта способами, несовместимыми с другими пакетами SDK для VR, такими как Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="58f5c-180">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="58f5c-181">Например, если проект ссылается на пакет SDK для Стеамвр, необходимо обновить проект, чтобы исключить эти вызовы API Prefabs и script при экспорте для целевого объекта сборки магазина Windows.</span><span class="sxs-lookup"><span data-stu-id="58f5c-181">For example, if your project references the SteamVR SDK, you'll need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="58f5c-182">В ближайшее время ожидается процедура, исключающая другие пакеты SDK для VR.</span><span class="sxs-lookup"><span data-stu-id="58f5c-182">Specific steps for conditionally excluding other VR SDKs are coming soon.</span></span>
2. <span data-ttu-id="58f5c-183">В проекте Unity [нацеливание на пакет SDK для Windows 10](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="58f5c-183">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="58f5c-184">Для каждой сцены [Настройте камеру](holograms-100.md#chapter-2---setup-the-camera) .</span><span class="sxs-lookup"><span data-stu-id="58f5c-184">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="58f5c-185">Unity шаг 8. использование этапа для размещения содержимого в этаже</span><span class="sxs-lookup"><span data-stu-id="58f5c-185">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="58f5c-186">Вы можете создавать возможности смешанной реальности во множестве различных [возможностей масштабирования](coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="58f5c-186">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="58f5c-187">Если вы переносите **интерфейсное масштабирование**, необходимо убедиться, что Unity настроен на **стационарный** тип пространства отслеживания:</span><span class="sxs-lookup"><span data-stu-id="58f5c-187">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="58f5c-188">Приведенный выше код устанавливает мировую систему координат Unity для трассировки [стационарной рамки ссылки](coordinate-systems.md#spatial-coordinate-systems).</span><span class="sxs-lookup"><span data-stu-id="58f5c-188">This above code sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="58f5c-189">В режиме стационарного отслеживания содержимое, помещенное в редактор непосредственно перед расположением по умолчанию камеры (переадресация — Z), отображается перед пользователем при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="58f5c-189">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) appears in front of the user when the app launches.</span></span> <span data-ttu-id="58f5c-190">Чтобы перецентрировать исходный элемент пользователя, можно вызвать [XR Unity. Метод Инпуттраккинг. recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) .</span><span class="sxs-lookup"><span data-stu-id="58f5c-190">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="58f5c-191">Если вы проведете переносные **средства или** **возможности масштабирования комнаты**, вы помещаете содержимое относительно пола.</span><span class="sxs-lookup"><span data-stu-id="58f5c-191">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="58f5c-192">Вы указываете на этаж пользователя с помощью **[пространственного этапа](coordinate-systems.md#spatial-coordinate-systems)**, который представляет определенное пользователем происхождение на уровне пола и дополнительную границу комнаты, настраивается во время первого запуска.</span><span class="sxs-lookup"><span data-stu-id="58f5c-192">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="58f5c-193">Для этих возможностей необходимо убедиться, что для Unity задан тип пространства отслеживания **румскале** .</span><span class="sxs-lookup"><span data-stu-id="58f5c-193">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="58f5c-194">Хотя Румскале является значением по умолчанию, необходимо явно задать его и убедиться, что вы получаете значение true, чтобы выявить ситуации, в которых пользователь переместил компьютер за пределы разкалиброванной комнаты.</span><span class="sxs-lookup"><span data-stu-id="58f5c-194">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="58f5c-195">После того как приложение успешно установит тип пространства отслеживания Румскале, на этаж будут отображаться содержимое, помещенное на плоскости y = 0.</span><span class="sxs-lookup"><span data-stu-id="58f5c-195">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="58f5c-196">Источник в точке (0, 0, 0) будет определять конкретное место в этаже, где пользователь стояли во время настройки комнаты, с параметром-Z, представляющим Направление переадресации во время установки.</span><span class="sxs-lookup"><span data-stu-id="58f5c-196">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="58f5c-197">В коде скрипта можно вызвать метод Трижетжеометри, так как тип UnityEngine. экспериментальный. XR. граничное используется для получения граничного многоугольника, указывая тип границы Траккедареа.</span><span class="sxs-lookup"><span data-stu-id="58f5c-197">In script code, you can then call the TryGetGeometry method on you're the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="58f5c-198">Если пользователь определил границу (вы получаете список вершин), вы можете легко предоставить пользователю **возможности масштабирования комнаты** , где они могут пройти по создаваемой сцене.</span><span class="sxs-lookup"><span data-stu-id="58f5c-198">If the user defined a boundary (you get back a list of vertices), it's safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="58f5c-199">Система автоматически визуализирует границу, когда пользователь его приближает.</span><span class="sxs-lookup"><span data-stu-id="58f5c-199">The system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="58f5c-200">Приложению не нужно использовать этот многоугольник для отрисовки самой границы.</span><span class="sxs-lookup"><span data-stu-id="58f5c-200">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="58f5c-201">Дополнительные сведения см. на странице [системы координат на Unity](coordinate-systems-in-unity.md) .</span><span class="sxs-lookup"><span data-stu-id="58f5c-201">For more information, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="58f5c-202">Некоторые приложения используют прямоугольник для ограничения их взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="58f5c-202">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="58f5c-203">Получение самого крупного вписанный прямоугольника напрямую не поддерживается в API UWP или Unity.</span><span class="sxs-lookup"><span data-stu-id="58f5c-203">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="58f5c-204">В примере кода, приведенном ниже, показано, как найти прямоугольник в пределах отслеживаемых границ.</span><span class="sxs-lookup"><span data-stu-id="58f5c-204">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="58f5c-205">Это эвристический подход, поэтому не может найти оптимальное решение, однако результаты будут соответствовать ожиданиям.</span><span class="sxs-lookup"><span data-stu-id="58f5c-205">It's heuristic-based so may not find the optimal solution, however, results are consistent with expectations.</span></span> <span data-ttu-id="58f5c-206">Параметры в алгоритме можно настроить для поиска более точных результатов по затратам времени на обработку.</span><span class="sxs-lookup"><span data-stu-id="58f5c-206">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="58f5c-207">Алгоритм находится в вилке набора средств Mixed Reality, который использует версию Unity МРТП Preview версии 5,6.</span><span class="sxs-lookup"><span data-stu-id="58f5c-207">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="58f5c-208">Это не общедоступно.</span><span class="sxs-lookup"><span data-stu-id="58f5c-208">This isn't publicly available.</span></span> <span data-ttu-id="58f5c-209">Код должен быть напрямую использован в 2017,2 и более поздних версиях Unity.</span><span class="sxs-lookup"><span data-stu-id="58f5c-209">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="58f5c-210">Код будет перенесен на текущий МРТК в ближайшем будущем.</span><span class="sxs-lookup"><span data-stu-id="58f5c-210">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="58f5c-211">[ZIP-файл кода на GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Важные файлы:</span><span class="sxs-lookup"><span data-stu-id="58f5c-211">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="58f5c-212">Assets/Холотулкит/Stage/Scripts/Стажеманажер. CS-пример использования</span><span class="sxs-lookup"><span data-stu-id="58f5c-212">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="58f5c-213">Assets/Холотулкит/Stage/Scripts/Ларжестректангле. CS-реализация алгоритма</span><span class="sxs-lookup"><span data-stu-id="58f5c-213">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="58f5c-214">Assets/Холотулкит-UnitTests/Editor/Stage/Ларжестректанглетест. CS-тривиальный тест алгоритма</span><span class="sxs-lookup"><span data-stu-id="58f5c-214">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="58f5c-215">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="58f5c-215">Example of results:</span></span>

![Пример результатов](images/largestrectangle-400px.jpg)

<span data-ttu-id="58f5c-217">Алгоритм основан на блоге, Даниэль Смилков: [самый крупный прямоугольник в многоугольнике](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span><span class="sxs-lookup"><span data-stu-id="58f5c-217">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="58f5c-218">Unity шаг 9. Работа с входной моделью</span><span class="sxs-lookup"><span data-stu-id="58f5c-218">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="58f5c-219">Каждая игра или приложение, предназначенное для существующего ХМД, будет иметь набор входных данных, которые он обрабатывает, типы входных данных, необходимые для работы, и конкретные интерфейсы API, которые он вызывает для получения этих входных данных.</span><span class="sxs-lookup"><span data-stu-id="58f5c-219">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="58f5c-220">Мы реализовали попытку сделать это как можно проще и простым, чтобы воспользоваться преимуществами входных данных, доступных в Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="58f5c-220">We've invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="58f5c-221">Ознакомьтесь с **[руководством по использованию входных данных для Unity](input-porting-guide-for-unity.md)** , чтобы узнать, как Windows Mixed Reality предоставляет входные данные, и как они сопоставлены с тем, что приложение может сделать сегодня.</span><span class="sxs-lookup"><span data-stu-id="58f5c-221">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="58f5c-222">Выберите, следует ли использовать входной API Unity для перекрестной виртуальной/VR-SDK или API ввода, характерный для MR.</span><span class="sxs-lookup"><span data-stu-id="58f5c-222">Choose whether you're going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="58f5c-223">Общие входные API-интерфейсы input. "input. Axis" используются в приложениях Unity VR сегодня для [Окулус входных](https://docs.unity3d.com/Manual/OculusControllers.html) и [опенврных входных](https://docs.unity3d.com/Manual/OpenVRControllers.html)данных.</span><span class="sxs-lookup"><span data-stu-id="58f5c-223">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="58f5c-224">Если ваши приложения уже используют эти API для контроллеров движения, это самый простой путь — необходимо просто сопоставить кнопки и оси в диспетчере ввода.</span><span class="sxs-lookup"><span data-stu-id="58f5c-224">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="58f5c-225">Доступ к данным контроллера движения в Unity можно получить с помощью общих API-интерфейсов input.-Button/input. UnityEngine или метода MR. input.</span><span class="sxs-lookup"><span data-stu-id="58f5c-225">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="58f5c-226">(ранее в пространстве имен UnityEngine. XR. WSA. input в Unity 5,6)</span><span class="sxs-lookup"><span data-stu-id="58f5c-226">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="58f5c-227">См. [пример в разделе набор средств](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) , объединяющий контроллеры планшета и движения.</span><span class="sxs-lookup"><span data-stu-id="58f5c-227">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="58f5c-228">Unity шаг 10. Тестирование и настройка производительности</span><span class="sxs-lookup"><span data-stu-id="58f5c-228">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="58f5c-229">Windows Mixed Reality будет доступна на широком классе устройств, от высокопроизводительных компьютерных ПК до широкого спектра основных ПК на рынке.</span><span class="sxs-lookup"><span data-stu-id="58f5c-229">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="58f5c-230">В зависимости от того, на каком рынке ориентирован целевой объект, существует существенная разница в доступных вычислениях и графических бюджетах для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="58f5c-230">Depending on what market you're targeting, there's a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="58f5c-231">Во время этого упражнения по переносу вы, скорее всего, используете ПК уровня "Премиум" и имели значительные бюджетные и графические графики, доступные для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="58f5c-231">During this porting exercise, you're likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="58f5c-232">Если вы хотите сделать приложение доступным более широкой аудитории, следует протестировать и профилировать приложение на [целевом оборудовании, которое вы хотите](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)использовать.</span><span class="sxs-lookup"><span data-stu-id="58f5c-232">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="58f5c-233">[Unity](https://docs.unity3d.com/Manual/Profiler.html) и [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) включают в себя Профилировщики производительности, а как [Корпорация Майкрософт](understanding-performance-for-mixed-reality.md) , так и [Корпорация Intel](https://software.intel.com/articles/vr-content-developer-guide) публикуют рекомендации по профилированию и оптимизации производительности.</span><span class="sxs-lookup"><span data-stu-id="58f5c-233">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="58f5c-234">Существует подробное обсуждение производительности, доступное [для понимания производительности смешанной реальности](understanding-performance-for-mixed-reality.md).</span><span class="sxs-lookup"><span data-stu-id="58f5c-234">There's an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="58f5c-235">Дополнительные сведения о Unity см. в разделе [рекомендации по повышению производительности для Unity](performance-recommendations-for-unity.md).</span><span class="sxs-lookup"><span data-stu-id="58f5c-235">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="58f5c-236">См. также</span><span class="sxs-lookup"><span data-stu-id="58f5c-236">See also</span></span>
* [<span data-ttu-id="58f5c-237">Руководство по переносу логики ввода для Unity</span><span class="sxs-lookup"><span data-stu-id="58f5c-237">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="58f5c-238">Минимальные рекомендации по совместимости Windows Mixed Reality с оборудованием ПК</span><span class="sxs-lookup"><span data-stu-id="58f5c-238">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="58f5c-239">Основные сведения о производительности смешанной реальности</span><span class="sxs-lookup"><span data-stu-id="58f5c-239">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="58f5c-240">Рекомендации по повышению производительности для Unity</span><span class="sxs-lookup"><span data-stu-id="58f5c-240">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="58f5c-241">Добавление поддержки Xbox Live в Unity для UWP</span><span class="sxs-lookup"><span data-stu-id="58f5c-241">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
