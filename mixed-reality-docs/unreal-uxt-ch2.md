---
title: 2. Инициализация проекта и первое приложение
description: Часть 2 руководства по созданию простого приложения для игры в шахматы с помощью Unreal Engine 4 и подключаемого модуля средств разработки пользовательского интерфейса (UX) из набора средств для смешанной реальности
author: sw5813
ms.author: suwu
ms.date: 5/5/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, учебник, начало работы, MRTK, UXT, средства разработки пользовательского интерфейса, средства UX, документация
ms.openlocfilehash: fc85f011ff3b186f3b4b5449b4f8ec49f0b6418f
ms.sourcegitcommit: 189a47b8712dd5b620e19815f5cf6d1ac0f29880
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2020
ms.locfileid: "82851578"
---
# <a name="2-initializing-your-project-and-first-application"></a>2. Инициализация проекта и первое приложение

Этот раздел поможет вам начать работу, создав новое приложение Unreal для HoloLens 2. 

## <a name="objectives"></a>Задачи

* Настройка Unreal для разработки решений для HoloLens
* Импорт ресурсов и настройка сцены.

## <a name="create-a-new-unreal-project"></a>Создание нового проекта Unreal

1. Запуск Unreal Engine

2. В разделе **New Project Categories** (Категории для нового проекта) выберите **Games** (Игры) и щелкните Next (Далее). Выберите **пустой шаблон** и щелкните Next (Далее). 

![Выбор пустого шаблона](images/unreal-uxt/2-template.PNG)

3. В разделе Project Settings (Параметры проекта) выберите **C++, Scalable 3D or 2D, Mobile / Tablet** (C++, масштабируемый трехмерный или двухмерный, мобильный или планшет) и вариант **No Starter Content** (Без начального содержимого). Выберите расположение для сохранения проекта и щелкните **Create Project** (Создать проект). Это действие откроет файлы C++ в проекте Visual Studio и в редакторе Unreal. 

![Начальные параметры проекта](images/unreal-uxt/2-project-settings.PNG)

4. В верхнем левом углу выберите **Edit > Plugins** (Правка > Подключаемые модули). В разделе Augmented Reality (Дополненная реальность) установите флажок, чтобы включить подключаемый модуль **HoloLens**. Прокрутите вниз до раздела Virtual Reality (Виртуальная реальность) и установите флажок, чтобы включить подключаемый модуль **Microsoft Windows Mixed Reality**. Оба подключаемых модуля обязательны при разработке для HoloLens 2. Перезапустите редактор. 

![Подключаемые модули](images/unreal-uxt/2-plugins.PNG)

5. В верхнем левом углу выберите **File > New Level** (Файл > Новый уровень). Выберите **Empty Level** (Пустой уровень). В окне просмотра должна отображаться пустая сцена по умолчанию.

6. Перетащите в нее элемент PlayerStart с вкладки Basic (Основные) на панели Modes (Режимы) слева. На панели Details (Сведения) справа задайте расположение X=0, Y=0, Z=0, чтобы при запуске приложения пользователь начинал игру из центра координат.

![Окно просмотра с элементом PlayerStart](images/unreal-uxt/2-playerstart.PNG)

7. Перетащите **Cube** (Куб) с вкладки Basic (Основные) на панели Modes (Режимы) в окно просмотра. На панели Details (Сведения) задайте расположение X=50, Y=0, Z=0, чтобы этот куб в начале игры размещался в 50 см от игрока. Так как размеры куба по умолчанию довольно велики, укажите для него масштаб (0,2, 0,2, 0,2). 

8. Вы не сможете увидеть куб, пока не добавите в сцену источник света. Перейдите на вкладку **Lights** (Свет) на панели Modes (Режимы) и перетащите в сцену элемент **Directional Light** (Направленный свет), разместив его над элементом PlayerStart.

![Окно просмотра после добавления света](images/unreal-uxt/2-light.PNG)

9.  Нажмите кнопку **Play** (Играть) на панели инструментов, чтобы увидеть куб в окне просмотра. Нажмите клавишу **ESC**, чтобы выйти из уровня. 

![Куб в окне просмотра](images/unreal-uxt/2-cube.PNG)

10. Теперь сохраните этот уровень. В левом верхнем углу щелкните **File > Save Current** (Файл > Сохранить текущий). Присвойте уровню имя Main и нажмите кнопку **Save** (Сохранить). 

## <a name="set-up-a-chess-scene"></a>Настройка сцены для шахмат

1. В обозревателе содержимого щелкните значок под меткой Add New (Добавить), чтобы открыть панель источников. Теперь щелкните **Add New > New Folder** (Добавить > Новая папка) и присвойте папке имя ChessAssets. Дважды щелкните эту папку, чтобы открыть ее. Сюда мы импортируем трехмерные ресурсы для шахматного набора.

![Отображение и скрытие панели источников](images/unreal-uxt/2-showhidesources.PNG)

2. Скачайте ZIP-файл ресурсов с сайта [GitHub](https://github.com/microsoft/MixedReality-Unreal-Samples/blob/master/ChessApp/ChessAssets.7z). Этот файл содержит трехмерные модели шахматной доски и набора шахматных фигур. Распакуйте этот файл.

3. В верхней части обозревателя содержимого щелкните действие **Import** (Импорт). Перейдите в папку, в которую вы только что распаковали файл, и выберите все находящиеся в ней элементы. Эта папка содержит FBX-файлы с сетками трехмерных объектов для шахматной доски и фигур, а также TGA-файлы с текстурными картами, на основе которых мы создадим материалы для доски и фигур. Нажмите кнопку **Открыть**. 

4. Откроется всплывающее окно FBX Import Options (Параметры для импорта FBX-файлов). В разделе **Material** (Материал) измените значение параметра **Material Import Method** (Метод импорта материала) на **Do Not Create Material** (Не создавать материал). Теперь нажмите **Import All** (Импортировать все).

![Параметры импорта FBX-файлов](images/unreal-uxt/2-nocreatemat.PNG)

5. Вернувшись в папку Content, создайте в ней новую папку с именем **Blueprints** (Схемы). Здесь мы будем хранить все наши схемы, то есть специальные активы для создания новых типов субъектов и событий уровня скрипта через интерфейс на основе узлов. 

6. Дважды щелкните папку **Blueprints**, чтобы перейти в нее, затем щелкните правой кнопкой мыши в любом месте обозревателя содержимого и выберите **Blueprint Class** (Класс схемы). Щелкните элемент **Actor** (Субъект) и присвойте новой схеме имя Board. Дважды щелкните элемент Board, чтобы открыть его. 

![Выбор родительского класса для новой схемы](images/unreal-uxt/2-bpparent.PNG)

![Новая схема для шахматной доски](images/unreal-uxt/2-bpboard.PNG)

7. В редакторе схем перейдите на панель Components (Компоненты) и щелкните **Add Component > Scene** (Добавить компонент > Сцена). Присвойте новой сцене имя Root, затем щелкните и перетащите новый элемент Root на DefaultSceneRoot. Это действие заменит главный элемент сцены, настроенный по умолчанию, и уберет сферу из окна просмотра. 

![Замена главного элемента](images/unreal-uxt/2-root.PNG)

8. Снова щелкните **Add Component** (Добавить компонент), но теперь выберите **Static Mesh** (Статическая сетка). Присвойте этой статической сетке имя SM_Board. 

![Добавление статической сетки](images/unreal-uxt/2-sm-board.PNG)

9. На панели **Details** (Сведения) перейдите к разделу **Static Mesh** (Статическая сетка) и щелкните раскрывающийся список. Выберите элемент **ChessBoard**. 

![Сетка шахматной доски в окне просмотра](images/unreal-uxt/2-sm-board-view.PNG)

10. На той же панели **Details** (Сведения) перейдите к разделу **Materials** (Материалы) и щелкните раскрывающийся список. В разделе **Create New Asset** (Создать новый ресурс) выберите **Material** (Материал). Присвойте этому ресурсу имя **M_ChessBoard** и сохраните его в папке **ChessAssets**. 

![Создание нового материала](images/unreal-uxt/2-newmat.PNG)

11. Дважды щелкните квадрат рядом с раскрывающимся списком M_ChessBoard, чтобы выбрать только что созданный материал M_ChessBoard. В окне Material Editor (Редактор материалов) щелкните правой кнопкой мыши и найдите узел **Texture Sample** (Пример текстуры). На панели **Details** (Сведения) в разделе **Material Expression Texture Base** (Основа текстуры для выражения материала) щелкните раскрывающийся список и выберите **ChessBoard_Albedo**. Наконец, перетащите закрепление вывода **RGB** на закрепление Base Color (Основной цвет) элемента **M_ChessBoard**. 

![Установка основного цвета](images/unreal-uxt/2-boardalbedomat.PNG)

12. Повторите этот процесс еще четыре раза, чтобы связать пример текстуры **ChessBoard_AO** с закреплением **Ambient Occlusion**, пример текстуры **ChessBoard_Metal** с закреплением **Metallic**, пример текстуры **ChessBoard_Normal** с закреплением **Normal** и пример текстуры **ChessBoard_Rough** с закреплением **Roughness**. Нажмите кнопку **Сохранить**. 

![Подключение оставшихся текстур](images/unreal-uxt/2-boardmat.PNG)

13. Вернитесь к схеме **Board**. Здесь вы увидите, что только что созданный материал уже применен к этой схеме. Чтобы придать доске в сцене приемлемый размер и расположение, укажите для ее параметра **Scale** (Масштаб) значение (0,05, 0,05, 0,05), а для параметра **Rotation** (Вращение) — значение Z=90. На панели инструментов в верхней части экрана щелкните **Compile** (Компилировать), а затем **Save** (Сохранить). Вернитесь в главное окно. 

![Шахматная доска после применения материалов](images/unreal-uxt/2-chessboard.PNG)

14. Теперь мы удалим куб и заменим его только что созданным субъектом Board. В окне **World Outliner** (Структура мира) щелкните куб правой кнопкой и выберите **Edit > Delete** (Редактировать > Удалить). Перетащите элемент Board из обозревателя содержимого в окно просмотра. Задайте для доски расположение X=80, Y=0, Z=-20. 

15. Нажмите кнопку **Play** (Играть), чтобы просмотреть созданную доску в уровне. Нажмите клавишу **ESC**, чтобы вернуться в редактор. 

16. Теперь мы создадим шахматную фигуру, используя тот же процесс, что и для шахматной доски, только с другими файлами сетки и материала.

    а) Перейдите в папку Blueprints в обозревателе содержимого и создайте новый класс Blueprint с типом Actor (Субъект). Присвойте этому субъекту имя WhiteKing.

    б) Дважды щелкните элемент WhiteKing, чтобы открыть его. Добавьте новый компонент сцены с именем Root и разместите его вместо DefaultSceneRoot. 

    в) Добавьте новый компонент Static Mesh (Статическая сетка) с именем SM_King. На панели Details (Сведения) задайте для параметра **Static Mesh** (Статическая сетка) значение **Chess_King**, а для параметра **Material** (Материал) — значение нового материала с именем **M_ChessWhite**. 

    г) Откройте новый материал **M_ChessWhite** и подключите нужные текстуры к соответствующим закреплениям ввода материалов. 

    ![Создание материала для шахматного короля](images/unreal-uxt/2-chesskingmat.PNG)

    д) В схеме **WhiteKing** укажите для параметра **Scale** (Масштаб) значение (0,05, 0,05, 0,05), а для параметра **Rotation** (Вращение) — значение Z=90.

    е) Скомпилируйте схему и сохраните ее, а затем вернитесь к главному окну. 

17. Перетащите элемент WhiteKing в окно просмотра. В окне **World Outliner** (Структура мира) перетащите элемент WhiteKing на элемент Board, чтобы WhiteKing стал дочерним элементом для Board. 

![Структура мира](images/unreal-uxt/2-child.PNG)

18. На панели **Details** (Сведения) в разделе **Transform** (Преобразование) для элемента WhiteKing присвойте параметру **Location** (Расположение) значение X=-26, Y=4, Z=0.

19. Щелкните **Play** (Играть), чтобы просмотреть новый вид уровня. Нажмите клавишу **ESC** для выхода из уровня. 

[Следующий раздел: 3. Настройка проекта для смешанной реальности](unreal-uxt-ch3.md)