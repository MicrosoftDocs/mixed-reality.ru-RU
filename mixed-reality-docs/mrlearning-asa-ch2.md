---
title: Учебники по пространственной привязке Azure — 2. Сохранение, извлечение и совместное использование пространственных привязок Azure
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: a24d15f0c0fff045c01f6070027b7defa87c2416
ms.sourcegitcommit: b6b76275fad90df6d9645dd2bc074b7b2168c7c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/11/2019
ms.locfileid: "73914462"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a>2. сохранение, извлечение и совместное использование пространственных привязок Azure

В этом руководстве мы научитесь сохранять пространственные привязки Azure в нескольких сеансах приложения, сохранив сведения о привязке в хранилище HoloLens 2. Кроме того, мы научитесь совместно использовать эти данные привязки с другими устройствами для выравнивания привязок на нескольких устройствах.

## <a name="objectives"></a>Задачи

* Узнайте, как сохранять и извлекать сведения об пространственных привязках Azure с локального диска HoloLens 2 для сохранения между сеансами приложения.

* Узнайте, как предоставить сведения о пространственной точке доступа Azure между пользователями в сценарии с несколькими устройствами.

## <a name="instructions"></a>Инструкция

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a>Сохранять привязки Azure между сеансами приложений — сохранить идентификатор привязки на диск

1. Найдите и добавьте prefab Савеанчортодиск в сцену. К ним относятся две кнопки: одна кнопка для сохранения доступных идентификаторов привязки Azure в хранилище HoloLens 2, а другая — для получения идентификаторов с диска.

![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. Настройте каждую кнопку в соответствии с приведенными ниже инструкциями.

   - Для кнопки с именем Саветодиск создайте новое событие при нажатии кнопки триггер события, а также на триггер события On Click. Перетащите объект Парентанчор в пустое поле и назначьте метод Савеазуреанчоридтодиск () из компонента Асамодулескрипт объекта Парентанчор.
   
     > Примечание. Некоторые кнопки могут перекрывать другие кнопки в сцене. Вы можете настроить положение кнопки.

![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)


   - Для кнопки с именем Жетфромдиск создайте новое событие при нажатии кнопки триггер события, а также на триггер события On Click. Перетащите объект Парентанчор в пустое поле и назначьте метод Лоадазуреанчоридсфромдиск () из компонента Асамодулескрипт объекта Парентанчор.

3. Следуйте инструкциям из учебника 1, чтобы создать обновленное приложение на устройстве. После нажатия кнопки создать привязку Azure, как было сделано на предыдущем занятии, можно сохранить идентификатор привязки Azure на диске, нажав кнопку Сохранить в диск.

4. Перезапустите приложение, запустите сеанс Azure, нажмите кнопку "загрузить идентификатор привязки", а затем нажмите кнопку "установить привязку Azure", чтобы указать привязку, связанную с ИДЕНТИФИКАТОРом, который мы сохранили на диске. Теперь вся сцена должна быть привязана к позиции, в месте, где вы ранее сохранили привязку!

### <a name="share-azure-anchors-between-multiple-devices"></a>Совместное использование привязок Azure между несколькими устройствами

В этом разделе мы научитесь совместно использовать идентификатор привязки Azure для нескольких устройств. Это позволит нескольким устройствам запрашивать один и тот же идентификатор привязки в Azure, позволяя привязать голограммы и сцены к пространственному выравниванию. Пространственное выравнивание (просмотр одних и тех же голограмм в одном физическом расположении между несколькими устройствами) является ключом к локальным совместно используемым интерфейсам в HoloLens 2. Существует много способов передать информацию об идентификаторах Azure между устройствами, включая методы, описанные в [учебниках](mrlearning-sharing(photon)-ch1.md)по использованию общих руководств по работе с пространственными привязками Azure. В этом примере используется простая веб-служба для передачи и загрузки идентификаторов привязки между устройствами.

1. Добавьте prefab Шареанчор в иерархию. Эта prefab добавляет в сцену две новые кнопки: одну для отправки сведений об ИДЕНТИФИКАТОРе привязки, а другую — для загрузки сведений об ИДЕНТИФИКАТОРе привязки. 

![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. Настройте каждую кнопку в соответствии с приведенными ниже инструкциями.

   - Для кнопки с именем Сендшареданчор создайте новое событие под нажатой кнопкой события, а также триггер события On Click. Перетащите объект Парентанчор в пустое поле и назначьте метод Шареанчор () из компонента Асамодулескрипт объекта Парентанчор.

![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

   - Для кнопки с именем Жетшареданчор создайте новое событие под нажатой кнопкой события, а также триггер события On Click. Перетащите объект Парентанчор в пустое поле и назначьте метод Жетшаредазуреанчор () из компонента Асамодулескрипт объекта Парентанчор.

3. Следуйте инструкциям из [учебника 1](mrlearning-base-ch1.md). для создания обновленного приложения на устройстве. После нажатия кнопки создать привязку Azure, как показано на предыдущем занятии, вы можете предоставить идентификатор привязки Azure другим устройствам, нажав кнопку поделиться на другое устройство.

   > Примечание. выберите родительскую привязку и прокрутите вниз до родительского скрипта привязки. Убедитесь, что ПИН-код общедоступного общего доступа уникален (вы можете изменить ПИН-код на другое число), чтобы при его предоставлении вам известно, что он используется совместно. Могут быть тысячи пользователей, совместно использующих свои привязки Azure, поэтому это позволит вам обеспечить общий доступ к правильным привязкам Azure.
   > 

![module2chapter2step7bim](images/module2chapter2step7bim.PNG)

4. При наличии другого устройства HoloLens 2 запустите приложение и запустите сеанс Azure. Нажмите кнопку Get Shared Anchor ID (получить общий идентификатор привязки) и нажмите кнопку найти привязку Azure, чтобы найти привязку, связанную с ИДЕНТИФИКАТОРом, к которому мы предоставили доступ через веб-службу. Теперь вся сцена должна быть привязана к позиции, где она была размещена на другом устройстве HoloLens 2! Если у вас есть только один HoloLens, вы по-прежнему можете выполнять тестирование, перезапуская приложение, запуская сеанс Azure, а затем нажав кнопку "получить идентификатор общей привязки", а затем нажимаю кнопку "найти точку привязки Azure", чтобы найти привязку, связанную с ИДЕНТИФИКАТОРом сохраняется на диске. Теперь вся сцена должна быть привязана к позиции, в месте, где вы ранее сохранили привязку!

## <a name="congratulations"></a>Поздравляем!
На этом занятии вы узнали, как сохранить пространственные привязки Azure между сеансами приложения и перезапуском приложения, сохранив идентификатор пространственного якоря Azure на локальном диске HoloLens 2. Вы также узнали, как совместно использовать пространственные привязки Azure между несколькими устройствами для простейших многопользовательских и статичных общих интерфейсов.

Мы Научитесь реализовывать пространственные привязки Azure как часть полностью интерактивного локального общего интерфейса на протяжении последнего урока модуля общего доступа. Возможности локального общего доступа могут включать в себя такие функции, как синхронизация расположения, поворот и масштабирование трехмерного объекта, идентификаторы каждого пользователя и общее состояние приложения. Пространственные привязки Azure улучшают эти общие сценарии, предоставляя каждому участнику общую привязку, которая позволяет всем пользователям видеть виртуальные объекты в одном и том же физическом расположении. Это справедливо для различных платформ устройств, включая устройства HoloLens, Android и iOS. Чтобы научиться разрабатывать общие возможности, заполните все уроки в модуле общего доступа.

На следующем занятии будет рассмотрено, как предоставить пользователям отзывы в режиме реального времени. Этот отзыв будет включать сведения о создании привязок, качестве понимания качества среды и состоянии сеанса Azure. Без отзывов пользователи могут не определить, успешно ли отправлена привязка в Azure, имеет ли качество окружения достаточно для создания привязки или текущего состояния.

[Следующее занятие: 3. Отображение обратной связи с пространственными привязками Azure](mrlearning-asa-ch3.md)

