---
title: Модуль ASA обучения MR Azure пространственных привязка в HoloLens 2
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 4dc36aec4d885fa75ea490446c2d682264049725
ms.sourcegitcommit: 30246ab9b9be44a3c707061753e53d4bf401eb6b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2019
ms.locfileid: "67327392"
---
# <a name="persistence-and-sharing-of-azure-spatial-anchors"></a><span data-ttu-id="18608-104">Сохранение и совместное использование Azure пространственных якорей</span><span class="sxs-lookup"><span data-stu-id="18608-104">Persistence and Sharing of Azure Spatial Anchors</span></span>

<span data-ttu-id="18608-105">На этом занятии будет рассказано том, как сохранить наших привязки пространственных Azure для нескольких сеансов приложения путем сохранения информации привязки на диск в HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="18608-105">In this lesson, we will learn how to persist our Azure Spatial Anchors across multiple app sessions by saving our anchor information to the HoloLens 2's disk.</span></span> <span data-ttu-id="18608-106">Мы также узнаете, как совместно использовать эти сведения привязки к другим устройствам для выравнивания привязки нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="18608-106">We will also learn how to share this anchor information to other devices for a multi-device anchor alignment.</span></span>

## <a name="objectives"></a><span data-ttu-id="18608-107">Цели</span><span class="sxs-lookup"><span data-stu-id="18608-107">Objectives</span></span>

* <span data-ttu-id="18608-108">Узнайте, как сохранять и извлекать сведения о пространственных привязки к Azure с локального диска HoloLens 2, для сохранения состояния между сеансами приложения</span><span class="sxs-lookup"><span data-stu-id="18608-108">Learn how to save and retrieve Azure Spatial Anchor information from the HoloLens 2 local disk, for persistence between app sessions</span></span>

* <span data-ttu-id="18608-109">Узнайте, как совместно использовать данные Azure пространственных привязки между пользователями в случае нескольких устройств</span><span class="sxs-lookup"><span data-stu-id="18608-109">Learn how to share Azure Spatial Anchor information between users in a multi-device scenario</span></span>

  

## <a name="instructions"></a><span data-ttu-id="18608-110">Инструкция</span><span class="sxs-lookup"><span data-stu-id="18608-110">Instructions</span></span>

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a><span data-ttu-id="18608-111">Сохранение Azure привязки между сеансами приложения - сохранить идентификатор привязки на диск</span><span class="sxs-lookup"><span data-stu-id="18608-111">Persist Azure Anchors Between App Sessions - Save Anchor ID to Disk</span></span>

1. <span data-ttu-id="18608-112">Найдите и добавьте в сцену «SaveAnchorToDisk» prefab.</span><span class="sxs-lookup"><span data-stu-id="18608-112">Search for and add the "SaveAnchorToDisk" prefab to your scene.</span></span> <span data-ttu-id="18608-113">Сюда входят, две кнопки, одна кнопка для сохранения всех доступных идентификаторов привязки Azure на диске HoloLens 2, и другое — для извлечение всех идентификаторов с диска.</span><span class="sxs-lookup"><span data-stu-id="18608-113">These include two buttons, one button for saving any available Azure Anchor IDs to the HoloLens 2 disk, and another for retrieving any IDs from the disk.</span></span>

   ![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. <span data-ttu-id="18608-115">Настройка каждой кнопки в соответствии с приведенным ниже инструкциям</span><span class="sxs-lookup"><span data-stu-id="18608-115">Configure Each button according to the instructions below</span></span>
   - <span data-ttu-id="18608-116">Для кнопки с именем «SaveToDisk» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните».</span><span class="sxs-lookup"><span data-stu-id="18608-116">For the Button named "SaveToDisk", create a new event under the "Button Pressed" event trigger as well as the "On Click" event trigger.</span></span> <span data-ttu-id="18608-117">Перетащите объект ParentAnchor в пустое поле и назначьте метод SaveAzureAnchorIDToDisk() из объекта ParentAnchor ASAmoduleScript компонента.</span><span class="sxs-lookup"><span data-stu-id="18608-117">Drag the ParentAnchor object into the empty field, and assign the SaveAzureAnchorIDToDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>
   
     > <span data-ttu-id="18608-118">Примечание: некоторые кнопки появляется перекрывающиеся другие кнопки в сцене.</span><span class="sxs-lookup"><span data-stu-id="18608-118">Note: some of the buttons may appear overlapping the other buttons in the scene.</span></span> <span data-ttu-id="18608-119">Вы можете изменить расположение кнопки.</span><span class="sxs-lookup"><span data-stu-id="18608-119">Feel free to adjust the button's positioning.</span></span>
   

  ![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)

   - <span data-ttu-id="18608-123">Для кнопки с именем «GetFromDisk» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните».</span><span class="sxs-lookup"><span data-stu-id="18608-123">For the Button named "GetFromDisk", create a new event under the "Button Pressed" event trigger as well as the "On Click" event trigger.</span></span> <span data-ttu-id="18608-124">Перетащите объект ParentAnchor в пустое поле и назначьте метод LoadAzureAnchorIDsFromDisk() из объекта ParentAnchor ASAmoduleScript компонента.</span><span class="sxs-lookup"><span data-stu-id="18608-124">Drag the ParentAnchor object into the empty field, and assign the LoadAzureAnchorIDsFromDisk() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="18608-125">Следуйте инструкциям из занятия 1, для создания обновленного приложения к устройству.</span><span class="sxs-lookup"><span data-stu-id="18608-125">Follow the instructions from Lesson 1 to build the updated application to your device.</span></span> <span data-ttu-id="18608-126">После нажатия кнопки «Создать привязки к Azure», как это делалось в предыдущем уроке вы можете теперь сохранить идентификатор привязки Azure на диск, нажав клавишу save to кнопку диск.</span><span class="sxs-lookup"><span data-stu-id="18608-126">After pressing the "Create Azure Anchor" button, as you did in the previous lesson, you may now save the Azure Anchor ID to disk by pressing the save to disk button.</span></span>

4. <span data-ttu-id="18608-127">Перезапустить приложение, запустите сеанс Azure, нажмите кнопку «Идентификатор привязки нагрузки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанной с идентификатором ID, мы сохранили на диск.</span><span class="sxs-lookup"><span data-stu-id="18608-127">Restart the application, start the Azure Session, Press the "Load Anchor ID" button, and then press the "Locate Azure Anchor" button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="18608-128">Всей сцены теперь должна привязываться в позицию, в расположении привязки ранее сохраненный!</span><span class="sxs-lookup"><span data-stu-id="18608-128">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

### <a name="share-azure-anchors-between-multiple-devices"></a><span data-ttu-id="18608-129">Совместное использование Azure привязки между несколькими устройствами</span><span class="sxs-lookup"><span data-stu-id="18608-129">Share Azure Anchors between multiple devices</span></span>

<span data-ttu-id="18608-130">В этом разделе вы узнаете о совместном использовании идентификатор привязки Azure между несколькими устройствами.</span><span class="sxs-lookup"><span data-stu-id="18608-130">In this section, we'll learn how to share the Azure Anchor ID between multiple devices.</span></span> <span data-ttu-id="18608-131">Таким образом, несколько устройств отправить запрос в Azure для одного идентификатора привязки, позволяя наших привязанного голограммы и сцены пространственно выровнен.</span><span class="sxs-lookup"><span data-stu-id="18608-131">This will allow multiple devices to query Azure for the same anchor ID, allowing our anchored holograms and scenes to be spatially aligned.</span></span> <span data-ttu-id="18608-132">Пространственных выравнивание (Просмотр же голограммы в том же физическом расположении, между несколькими устройствами) — ключа в локальную публикацию в HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="18608-132">Spatial alignment (seeing the same holograms in the same physical location between multiple devices) is key to local shared experiences in the HoloLens 2.</span></span> <span data-ttu-id="18608-133">Существует много способов передачи информации о azure идентификаторами в диапазоне от устройств, включая методы описанные в публикацию пространственных привязки Azure учебники (TODO: добавить ссылку.) В этом примере используется простой веб-службы для отправки и загрузки идентификатор привязки между устройствами.</span><span class="sxs-lookup"><span data-stu-id="18608-133">There are many ways to transfer information regarding azure IDs between devices, including methods outlined in the Azure Spatial Anchors shared experiences tutorials (TODO: add link.) This example uses a simple web service to upload and download Anchor IDs between devices.</span></span>

1. <span data-ttu-id="18608-134">Добавьте prefab «ShareAnchor» в иерархии.</span><span class="sxs-lookup"><span data-stu-id="18608-134">Add the "ShareAnchor" prefab into your hierarchy.</span></span> <span data-ttu-id="18608-135">Этого готового блока добавляет две новые кнопки в сцену; один для передачи информации о привязки и другой для загрузки привязать сведения об Идентификаторе.</span><span class="sxs-lookup"><span data-stu-id="18608-135">This prefab adds two new buttons to your scene; one for uploading anchor ID information and another for downloading anchor ID information.</span></span> 

   ![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. <span data-ttu-id="18608-137">Настройка каждой кнопки в соответствии с приведенным ниже инструкциям</span><span class="sxs-lookup"><span data-stu-id="18608-137">Configure Each button according to the instructions below</span></span>

   - <span data-ttu-id="18608-138">Для кнопки с именем «SendSharedAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните».</span><span class="sxs-lookup"><span data-stu-id="18608-138">For the Button named "SendSharedAnchor", create a new event under the "Button Pressed" event trigger as well as the "On Click" event trigger.</span></span> <span data-ttu-id="18608-139">Перетащите объект ParentAnchor в пустое поле и назначьте метод ShareAnchor() из объекта ParentAnchor ASAmoduleScript компонента.</span><span class="sxs-lookup"><span data-stu-id="18608-139">Drag the ParentAnchor object into the empty field, and assign the ShareAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

     ![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

     ![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

     

   - <span data-ttu-id="18608-142">Для кнопки с именем «GetSharedAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните».</span><span class="sxs-lookup"><span data-stu-id="18608-142">For the Button named "GetSharedAnchor", create a new event under the "Button Pressed" event trigger as well as the "On Click" event trigger.</span></span> <span data-ttu-id="18608-143">Перетащите объект ParentAnchor в пустое поле и назначьте метод GetSharedAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.</span><span class="sxs-lookup"><span data-stu-id="18608-143">Drag the ParentAnchor object into the empty field, and assign the GetSharedAzureAnchor() method from the ParentAnchor Object's ASAmoduleScript component.</span></span>

3. <span data-ttu-id="18608-144">Следуйте инструкциям из [занятия 1](mrlearning-base-ch1.md).</span><span class="sxs-lookup"><span data-stu-id="18608-144">Follow the instructions from [Lesson 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="18608-145">для создания обновленного приложения к устройству.</span><span class="sxs-lookup"><span data-stu-id="18608-145">to build the updated application to your device.</span></span> <span data-ttu-id="18608-146">После нажатия кнопки «Создать привязки к Azure», как это делалось в предыдущем уроке вы можете теперь использовать идентификатор привязки Azure к другим устройствам, нажав кнопку совместно использовать другие устройства.</span><span class="sxs-lookup"><span data-stu-id="18608-146">After pressing the "Create Azure Anchor" button, as you did in the previous lesson, you may now share the Azure Anchor ID to other devices by pressing the Share To Other Device button.</span></span>

   > <span data-ttu-id="18608-147">Примечание. Выберите родительский привязки и прокрутите вниз до скрипта привязки к родительской.</span><span class="sxs-lookup"><span data-stu-id="18608-147">Note: Select the parent anchor and scroll down to the parent anchor script.</span></span> <span data-ttu-id="18608-148">Убедитесь, что «открытый доступом ПИН-код» уникальным, так что когда вы предоставляете общий доступ, вы знаете, что это ваша учетная запись, который уже используется совместно.</span><span class="sxs-lookup"><span data-stu-id="18608-148">Ensure that your "public sharing pin" is unique, so that when you share it, you know it is yours that you are sharing.</span></span> <span data-ttu-id="18608-149">Возможны тысячи пользователей, совместно использующих их привязки Azure, поэтому это позволит вам убедиться, что вы совместно используете правильный привязки Azure.</span><span class="sxs-lookup"><span data-stu-id="18608-149">There could be thousands of users sharing their Azure Anchors, so doing this will allow you to ensure you are sharing the correct Azure Anchors.</span></span>

4. <span data-ttu-id="18608-150">Если у вас есть другое устройство HoloLens 2, запустите приложение и затем запустите сеанс Azure.</span><span class="sxs-lookup"><span data-stu-id="18608-150">If you have another HoloLens 2 device, start the application and then start the Azure Session.</span></span> <span data-ttu-id="18608-151">Нажмите кнопку «Получить общий идентификатор привязки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанной с идентификатором ID, мы сохранили на диск.</span><span class="sxs-lookup"><span data-stu-id="18608-151">Press the "Get Shared Anchor ID" button, and then press the "Locate Azure Anchor" button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="18608-152">Всей сцены теперь должна привязываться в позицию, в where, он был помещен на другое устройство HoloLens 2!</span><span class="sxs-lookup"><span data-stu-id="18608-152">The entire scene should now snap into position, at the where it was placed on the other HoloLens 2 device!</span></span> <span data-ttu-id="18608-153">При наличии только одного 2 HoloLens, может по-прежнему следует протестировать путем перезапуска приложения, запустите сеанс Azure и нажмите кнопку кнопку «Получить общий идентификатор привязки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанные с Идентификатор, который мы сохранили на диск.</span><span class="sxs-lookup"><span data-stu-id="18608-153">If you only have one HoloLens 2, you may still test functionality by restarting the application, starting the Azure Session, and then Press the "Get Shared Anchor ID" button button, and then press the "Locate Azure Anchor" button to locate the anchor associated with the ID we saved to the disk.</span></span> <span data-ttu-id="18608-154">Всей сцены теперь должна привязываться в позицию, в расположении привязки ранее сохраненный!</span><span class="sxs-lookup"><span data-stu-id="18608-154">The entire scene should now snap into position, at the location you saved the anchor previously!</span></span>

## <a name="congratulations"></a><span data-ttu-id="18608-155">Поздравляем!</span><span class="sxs-lookup"><span data-stu-id="18608-155">Congratulations</span></span>
<span data-ttu-id="18608-156">В этом уроке вы узнали, как для сохранения привязки пространственных Azure между сеансами приложения и перезапуска приложения, сохраняя идентификатор пространственного привязки Azure на локальный диск HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="18608-156">In this Lesson you learned how to persist Azure Spatial Anchors between app sessions and app restarts by saving the Azure Spatial Anchor ID to the local disk of the HoloLens 2.</span></span> <span data-ttu-id="18608-157">Вы также узнали, как совместно использовать Azure пространственных привязки между несколькими устройствами, если основные голограмма несколькими пользователями, статические совместно работать!</span><span class="sxs-lookup"><span data-stu-id="18608-157">You also learned how to share Azure Spatial Anchors between multiple devices for a basic multi-user, static hologram shared experience!</span></span>

<span data-ttu-id="18608-158">Будет рассказано способы реализации привязки пространственных Azure как часть процесса полностью интерактивные локальные общего во время последнего урока модуля управления доступом.</span><span class="sxs-lookup"><span data-stu-id="18608-158">We will learn how to implement Azure Spatial Anchors as part of a fully interactive local shared experience during the final lesson of the Sharing Module.</span></span> <span data-ttu-id="18608-159">Локальный процедура совместного использования могут содержать функции, такие как идентификаторы позиции, поворот и масштабирование, синхронизированных трехмерного объекта, для каждого пользователя, а также общего состояния приложения.</span><span class="sxs-lookup"><span data-stu-id="18608-159">A local sharing experience may include functionality such as synchronized 3D object position, rotation, and scale, identifiers for each user, and shared application states.</span></span> <span data-ttu-id="18608-160">Azure пространственных привязки повышает этих общих сценариев, предоставляя каждому участнику распространенных привязки, которая позволяет всем пользователям видеть виртуальных объектах в одном месте.</span><span class="sxs-lookup"><span data-stu-id="18608-160">Azure Spatial Anchors enhances these shared scenarios by providing each participant with a common anchor which allows all users to see virtual objects in the same physical location.</span></span> <span data-ttu-id="18608-161">Это верно в целом ряде платформ устройств, включая HoloLens, Android и iOS.</span><span class="sxs-lookup"><span data-stu-id="18608-161">This is true across a range of device platforms, including HoloLens, Android, and iOS devices.</span></span> <span data-ttu-id="18608-162">Чтобы научиться разрабатывать опытом, заполните все занятия в модуле общий доступ.</span><span class="sxs-lookup"><span data-stu-id="18608-162">To learn how to develop a shared experience, please complete all lessons in the Sharing module.</span></span>

<span data-ttu-id="18608-163">В следующем уроке мы узнаете, как предоставить пользователям возможность обратной связи в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="18608-163">In the next Lesson, we will learn how to provide users with real-time feedback.</span></span> <span data-ttu-id="18608-164">Ваши отзывы будут включены сведения о создании привязки, качество основные сведения о среде и состояние сеанса Azure.</span><span class="sxs-lookup"><span data-stu-id="18608-164">This feedback will include information about Anchor creation, the quality of environment understanding, and the state of the Azure session.</span></span> <span data-ttu-id="18608-165">Без обратной связи пользователи могут не знать был ли успешно отправить в Azure, привязки ли качество среде достаточно для создания привязки или текущее состояние.</span><span class="sxs-lookup"><span data-stu-id="18608-165">Without feedback, users may not know whether an anchor has successfully been upload to Azure, whether the quality of the environment is sufficient for anchor creation, or the current state.</span></span>

[<span data-ttu-id="18608-166">Следующий урок. ASA занятие 3</span><span class="sxs-lookup"><span data-stu-id="18608-166">Next Lesson: ASA Lesson 3</span></span>](mrlearning-asa-ch3.md)

