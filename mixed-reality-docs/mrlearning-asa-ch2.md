---
title: Модуль ASA обучения MR Azure пространственных привязка в HoloLens 2
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 4dc36aec4d885fa75ea490446c2d682264049725
ms.sourcegitcommit: 30246ab9b9be44a3c707061753e53d4bf401eb6b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2019
ms.locfileid: "67327392"
---
# <a name="persistence-and-sharing-of-azure-spatial-anchors"></a>Сохранение и совместное использование Azure пространственных якорей

На этом занятии будет рассказано том, как сохранить наших привязки пространственных Azure для нескольких сеансов приложения путем сохранения информации привязки на диск в HoloLens 2. Мы также узнаете, как совместно использовать эти сведения привязки к другим устройствам для выравнивания привязки нескольких устройств.

## <a name="objectives"></a>Цели

* Узнайте, как сохранять и извлекать сведения о пространственных привязки к Azure с локального диска HoloLens 2, для сохранения состояния между сеансами приложения

* Узнайте, как совместно использовать данные Azure пространственных привязки между пользователями в случае нескольких устройств

  

## <a name="instructions"></a>Инструкция

### <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a>Сохранение Azure привязки между сеансами приложения - сохранить идентификатор привязки на диск

1. Найдите и добавьте в сцену «SaveAnchorToDisk» prefab. Сюда входят, две кнопки, одна кнопка для сохранения всех доступных идентификаторов привязки Azure на диске HoloLens 2, и другое — для извлечение всех идентификаторов с диска.

   ![module2chapter2step1im](images/module2chapter2step1im.PNG)

2. Настройка каждой кнопки в соответствии с приведенным ниже инструкциям
   - Для кнопки с именем «SaveToDisk» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод SaveAzureAnchorIDToDisk() из объекта ParentAnchor ASAmoduleScript компонента.
   
     > Примечание: некоторые кнопки появляется перекрывающиеся другие кнопки в сцене. Вы можете изменить расположение кнопки.
   

  ![module2chapter2step2aim](images/module2chapter2step2aim.PNG)

![module2chapter2step2aim](images/module2chapter2step2bim.PNG)

![module2chapter2step2aim](images/module2chapter2step2cim.PNG)

   - Для кнопки с именем «GetFromDisk» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод LoadAzureAnchorIDsFromDisk() из объекта ParentAnchor ASAmoduleScript компонента.

3. Следуйте инструкциям из занятия 1, для создания обновленного приложения к устройству. После нажатия кнопки «Создать привязки к Azure», как это делалось в предыдущем уроке вы можете теперь сохранить идентификатор привязки Azure на диск, нажав клавишу save to кнопку диск.

4. Перезапустить приложение, запустите сеанс Azure, нажмите кнопку «Идентификатор привязки нагрузки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанной с идентификатором ID, мы сохранили на диск. Всей сцены теперь должна привязываться в позицию, в расположении привязки ранее сохраненный!

### <a name="share-azure-anchors-between-multiple-devices"></a>Совместное использование Azure привязки между несколькими устройствами

В этом разделе вы узнаете о совместном использовании идентификатор привязки Azure между несколькими устройствами. Таким образом, несколько устройств отправить запрос в Azure для одного идентификатора привязки, позволяя наших привязанного голограммы и сцены пространственно выровнен. Пространственных выравнивание (Просмотр же голограммы в том же физическом расположении, между несколькими устройствами) — ключа в локальную публикацию в HoloLens 2. Существует много способов передачи информации о azure идентификаторами в диапазоне от устройств, включая методы описанные в публикацию пространственных привязки Azure учебники (TODO: добавить ссылку.) В этом примере используется простой веб-службы для отправки и загрузки идентификатор привязки между устройствами.

1. Добавьте prefab «ShareAnchor» в иерархии. Этого готового блока добавляет две новые кнопки в сцену; один для передачи информации о привязки и другой для загрузки привязать сведения об Идентификаторе. 

   ![module2chapter2step5im](images/module2chapter2step5im.PNG)

2. Настройка каждой кнопки в соответствии с приведенным ниже инструкциям

   - Для кнопки с именем «SendSharedAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод ShareAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

     ![module2chapter2step6aim](images/module2chapter2step6aim.PNG)

     ![module2chapter2step6bim](images/module2chapter2step6bim.PNG)

     

   - Для кнопки с именем «GetSharedAnchor» создайте новое событие в разделе «Нажата кнопка» триггер события, а также триггер события «Щелкните». Перетащите объект ParentAnchor в пустое поле и назначьте метод GetSharedAzureAnchor() из объекта ParentAnchor ASAmoduleScript компонента.

3. Следуйте инструкциям из [занятия 1](mrlearning-base-ch1.md). для создания обновленного приложения к устройству. После нажатия кнопки «Создать привязки к Azure», как это делалось в предыдущем уроке вы можете теперь использовать идентификатор привязки Azure к другим устройствам, нажав кнопку совместно использовать другие устройства.

   > Примечание. Выберите родительский привязки и прокрутите вниз до скрипта привязки к родительской. Убедитесь, что «открытый доступом ПИН-код» уникальным, так что когда вы предоставляете общий доступ, вы знаете, что это ваша учетная запись, который уже используется совместно. Возможны тысячи пользователей, совместно использующих их привязки Azure, поэтому это позволит вам убедиться, что вы совместно используете правильный привязки Azure.

4. Если у вас есть другое устройство HoloLens 2, запустите приложение и затем запустите сеанс Azure. Нажмите кнопку «Получить общий идентификатор привязки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанной с идентификатором ID, мы сохранили на диск. Всей сцены теперь должна привязываться в позицию, в where, он был помещен на другое устройство HoloLens 2! При наличии только одного 2 HoloLens, может по-прежнему следует протестировать путем перезапуска приложения, запустите сеанс Azure и нажмите кнопку кнопку «Получить общий идентификатор привязки» и нажмите кнопку «Поиск Azure привязки», чтобы найти точку привязки, связанные с Идентификатор, который мы сохранили на диск. Всей сцены теперь должна привязываться в позицию, в расположении привязки ранее сохраненный!

## <a name="congratulations"></a>Поздравляем!
В этом уроке вы узнали, как для сохранения привязки пространственных Azure между сеансами приложения и перезапуска приложения, сохраняя идентификатор пространственного привязки Azure на локальный диск HoloLens 2. Вы также узнали, как совместно использовать Azure пространственных привязки между несколькими устройствами, если основные голограмма несколькими пользователями, статические совместно работать!

Будет рассказано способы реализации привязки пространственных Azure как часть процесса полностью интерактивные локальные общего во время последнего урока модуля управления доступом. Локальный процедура совместного использования могут содержать функции, такие как идентификаторы позиции, поворот и масштабирование, синхронизированных трехмерного объекта, для каждого пользователя, а также общего состояния приложения. Azure пространственных привязки повышает этих общих сценариев, предоставляя каждому участнику распространенных привязки, которая позволяет всем пользователям видеть виртуальных объектах в одном месте. Это верно в целом ряде платформ устройств, включая HoloLens, Android и iOS. Чтобы научиться разрабатывать опытом, заполните все занятия в модуле общий доступ.

В следующем уроке мы узнаете, как предоставить пользователям возможность обратной связи в режиме реального времени. Ваши отзывы будут включены сведения о создании привязки, качество основные сведения о среде и состояние сеанса Azure. Без обратной связи пользователи могут не знать был ли успешно отправить в Azure, привязки ли качество среде достаточно для создания привязки или текущее состояние.

[Следующий урок. ASA занятие 3](mrlearning-asa-ch3.md)

