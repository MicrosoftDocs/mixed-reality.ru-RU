---
title: Учебники по пространственной привязке Azure — 2. Сохранение, извлечение и совместное использование пространственных привязок Azure
description: В рамках этого курса вы узнаете, как реализовать функцию распознавания лиц Azure в приложении смешанной реальности.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
keywords: mixed reality, unity, tutorial, hololens
ms.openlocfilehash: 7b19233a9634e2568200476c9483464bbf9dd3c8
ms.sourcegitcommit: a580166a19294f835b8e09c780f663f228dd5de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2020
ms.locfileid: "77250753"
---
# <a name="2-saving-retrieving-and-sharing-azure-spatial-anchors"></a>2. сохранение, извлечение и совместное использование пространственных привязок Azure

В этом руководстве вы узнаете, как сохранить пространственные привязки Azure в нескольких сеансах приложения, сохранив идентификатор привязки в хранилище HoloLens 2. Вы также узнаете, как предоставить этот идентификатор привязки другим устройствам для выравнивания привязок на нескольких устройствах.

## <a name="objectives"></a>Задачи

* Узнайте, как сохранять и извлекать идентификаторы пространственной привязки Azure на локальный диск HoloLens 2 и обратно для сохраняемости между сеансами приложения.
* Узнайте, как совместно использовать идентификаторы пространственной привязки Azure между пользователями в сценарии с несколькими устройствами.

## <a name="preparing-the-scene"></a>Подготовка сцены

В окне проекта перейдите к разделу **активы** > **мртк. Учебник. Азуреспатиаланчорс** > **Prefabs** папку. Удерживая нажатой клавишу CTRL, щелкните **ButtonParent_SaveAnchorId** и **ButtonParent_ShareAnchorId** , чтобы выбрать два Prefabs, а затем перетащите их в окно иерархии, чтобы добавить их в сцену:

![мрлеарнинг-ASA](images/mrlearning-asa/tutorial2-section1-step1-1.png)

## <a name="persist-azure-anchors-between-app-sessions---save-anchor-id-to-disk"></a>Сохранять привязки Azure между сеансами приложений — сохранить идентификатор привязки на диск
<!-- TODO: Consider renaming to 'Persist Azure Anchors between app sessions' -->

В этом разделе вы узнаете, как сохранить и получить идентификатор привязки Azure на локальном диске HoloLens 2. Это позволит вам запрашивать в Azure один и тот же идентификатор привязки между разными сеансами приложения, что позволяет закрепленным голограммам размещаться в том же расположении, что и в предыдущем сеансе приложения.

В окне Иерархия разверните объект **ButtonParent_SaveAnchorId** , содержащий две кнопки — одну кнопку, чтобы сохранить идентификатор привязки Azure в хранилище HoloLens 2, а другой для получения сохраненного идентификатора с диска:

![мрлеарнинг-ASA](images/mrlearning-asa/tutorial2-section2-step1-1.png)

Выполните те же действия, что и в разделе [Настройка кнопок для работы с инструкциями по монтажному кадру](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) из предыдущего руководства, чтобы настроить **холоый компонент (скрипт)** и компонент для **взаимодействия (скрипт)** на каждой из этих двух кнопок:

* Для объекта **савеазуреанчоридтодиск** назначьте функцию Анчормодулескрипт > **савеазуреанчоридтодиск ()** .
* Для объекта **жетазуреанчоридфромдиск** назначьте функцию Анчормодулескрипт > **жетазуреанчоридфромдиск ()** .

Если вы создаете обновленное приложение для HoloLens, теперь можно сохранять пространственные привязки Azure между сеансами приложения, сохранив идентификатор привязки Azure. Чтобы протестировать эту возможность, выполните следующие действия.

1. Переместите интерфейс запуска Rocket в нужное место.
2. Запустите сеанс Azure.
3. Создайте привязку Azure (создает привязки в расположении процесса запуска Rocket).
4. Сохраните идентификатор привязки Azure на диске.
5. Перезапустите приложение.
6. Получите привязку Azure с диска (загружает только что сохраненный идентификатор привязки).
7. Запустите сеанс Azure.
8. Найдите привязку Azure (размещает процесс запуска Rocket в расположении из шага 3).

## <a name="share-azure-anchors-between-multiple-devices"></a>Совместное использование привязок Azure между несколькими устройствами

В этом разделе вы узнаете, как предоставить идентификатор привязки Azure нескольким устройствам. Это позволит нескольким устройствам запрашивать один и тот же идентификатор привязки в Azure, обеспечивая пространственное согласованность привязанных голограмм. Пространственное выравнивание, т. е. Просмотр одних и тех же голограмм в одном физическом расположении между несколькими устройствами, является ключом к локальным совместно используемым интерфейсам в HoloLens 2.

Существует много способов передавать идентификаторы привязки Azure между устройствами, включая методы, описанные в серии руководств по [многопользовательским возможностям](mrlearning-sharing(photon)-ch1.md) . В этом примере вы будете использовать простую веб-службу для отправки и скачивания идентификаторов привязки между устройствами.

В окне Иерархия разверните объект **ButtonParent_ShareAnchorId** , содержащий две кнопки. одна кнопка для отправки идентификатора привязки Azure на веб-сервер, а другая — для загрузки идентификатора с веб-сервера:

![мрлеарнинг-ASA](images/mrlearning-asa/tutorial2-section3-step1-1.png)

Выполните те же действия, что и в разделе [Настройка кнопок для работы с инструкциями по монтажному кадру](mrlearning-asa-ch1.md#configuring-the-buttons-to-operate-the-scene) из предыдущего руководства, чтобы настроить **холоый компонент (скрипт)** и компонент для **взаимодействия (скрипт)** на каждой из этих двух кнопок:

* Для объекта **шареазуреанчоридтонетворк** назначьте функцию Анчормодулескрипт > **шареазуреанчоридтонетворк ()** .
* Для объекта **жетазуреанчоридфромнетворк** назначьте функцию Анчормодулескрипт > **жетазуреанчоридфромнетворк ()** .

Если вы создаете обновленное приложение на двух устройствах HoloLens, теперь вы можете обеспечить пространственное выравнивание между ними, совместно используя идентификатор привязки Azure. Чтобы протестировать эту возможность, выполните следующие действия.

1. На устройстве HoloLens 1: Переместите интерфейс запуска Rocket в нужное расположение.
2. На устройстве HoloLens 1: запустите сеанс Azure.
3. На устройстве HoloLens 1: создание привязки Azure (создает привязки в расположении процесса запуска Rocket).
4. На устройстве HoloLens 1: совместное использование идентификатора привязки Azure с сетью.
5. На устройстве HoloLens 2: перезапустите приложение.
6. На устройстве HoloLens 2: получение идентификатора общей привязки из сети (получение идентификатора привязки, доступного только с устройства HoloLens 1).
7. На устройстве HoloLens 2: запустите сеанс Azure.
8. На устройстве HoloLens 2: найти привязку Azure (в расположении из шага 3) найдите интерфейс запуска Rocket.

> [!TIP]
> Если у вас есть только один HoloLens, вы по-прежнему можете протестировать функциональные возможности, перезапустив приложение, а не используя второе устройство HoloLens.

## <a name="congratulations"></a>Поздравляем!

В этом учебнике вы узнали, как сохранять пространственные привязки Azure между сеансами приложений и перезапусками приложений, сохранив идентификатор пространственной привязки Azure на локальном диске HoloLens. Вы также узнали, как совместно использовать пространственные привязки Azure между несколькими устройствами для простейших многопользовательских и статичных общих интерфейсов.

В следующем учебном курсе вы узнаете, как предоставить пользователям отзывы в режиме реального времени. Этот отзыв будет включать сведения о создании привязок, качестве понимания качества среды и состоянии сеанса Azure. Без отзывов пользователи могут не определить, успешно ли отправлена привязка в Azure, является ли качество среды достаточным для создания привязки или текущего состояния.

[Следующее занятие: 3. Отображение обратной связи с пространственными привязками Azure](mrlearning-asa-ch3.md)
